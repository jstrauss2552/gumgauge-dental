function Tp(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(s,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function Ip(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ad={exports:{}},Fa={},Td={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xs=Symbol.for("react.element"),Op=Symbol.for("react.portal"),Mp=Symbol.for("react.fragment"),Rp=Symbol.for("react.strict_mode"),_p=Symbol.for("react.profiler"),Lp=Symbol.for("react.provider"),$p=Symbol.for("react.context"),Fp=Symbol.for("react.forward_ref"),zp=Symbol.for("react.suspense"),Up=Symbol.for("react.memo"),Bp=Symbol.for("react.lazy"),Xo=Symbol.iterator;function Vp(e){return e===null||typeof e!="object"?null:(e=Xo&&e[Xo]||e["@@iterator"],typeof e=="function"?e:null)}var Id={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Od=Object.assign,Md={};function xr(e,t,n){this.props=e,this.context=t,this.refs=Md,this.updater=n||Id}xr.prototype.isReactComponent={};xr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};xr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Rd(){}Rd.prototype=xr.prototype;function Ki(e,t,n){this.props=e,this.context=t,this.refs=Md,this.updater=n||Id}var Yi=Ki.prototype=new Rd;Yi.constructor=Ki;Od(Yi,xr.prototype);Yi.isPureReactComponent=!0;var qo=Array.isArray,_d=Object.prototype.hasOwnProperty,Qi={current:null},Ld={key:!0,ref:!0,__self:!0,__source:!0};function $d(e,t,n){var s,a={},l=null,i=null;if(t!=null)for(s in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(l=""+t.key),t)_d.call(t,s)&&!Ld.hasOwnProperty(s)&&(a[s]=t[s]);var o=arguments.length-2;if(o===1)a.children=n;else if(1<o){for(var d=Array(o),u=0;u<o;u++)d[u]=arguments[u+2];a.children=d}if(e&&e.defaultProps)for(s in o=e.defaultProps,o)a[s]===void 0&&(a[s]=o[s]);return{$$typeof:xs,type:e,key:l,ref:i,props:a,_owner:Qi.current}}function Hp(e,t){return{$$typeof:xs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ji(e){return typeof e=="object"&&e!==null&&e.$$typeof===xs}function Gp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Zo=/\/+/g;function dl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Gp(""+e.key):t.toString(36)}function Js(e,t,n,s,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(l){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case xs:case Op:i=!0}}if(i)return i=e,a=a(i),e=s===""?"."+dl(i,0):s,qo(a)?(n="",e!=null&&(n=e.replace(Zo,"$&/")+"/"),Js(a,t,n,"",function(u){return u})):a!=null&&(Ji(a)&&(a=Hp(a,n+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(Zo,"$&/")+"/")+e)),t.push(a)),1;if(i=0,s=s===""?".":s+":",qo(e))for(var o=0;o<e.length;o++){l=e[o];var d=s+dl(l,o);i+=Js(l,t,n,d,a)}else if(d=Vp(e),typeof d=="function")for(e=d.call(e),o=0;!(l=e.next()).done;)l=l.value,d=s+dl(l,o++),i+=Js(l,t,n,d,a);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Ds(e,t,n){if(e==null)return e;var s=[],a=0;return Js(e,s,"","",function(l){return t.call(n,l,a++)}),s}function Wp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Fe={current:null},Xs={transition:null},Kp={ReactCurrentDispatcher:Fe,ReactCurrentBatchConfig:Xs,ReactCurrentOwner:Qi};function Fd(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:Ds,forEach:function(e,t,n){Ds(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ds(e,function(){t++}),t},toArray:function(e){return Ds(e,function(t){return t})||[]},only:function(e){if(!Ji(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ee.Component=xr;ee.Fragment=Mp;ee.Profiler=_p;ee.PureComponent=Ki;ee.StrictMode=Rp;ee.Suspense=zp;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kp;ee.act=Fd;ee.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=Od({},e.props),a=e.key,l=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,i=Qi.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(d in t)_d.call(t,d)&&!Ld.hasOwnProperty(d)&&(s[d]=t[d]===void 0&&o!==void 0?o[d]:t[d])}var d=arguments.length-2;if(d===1)s.children=n;else if(1<d){o=Array(d);for(var u=0;u<d;u++)o[u]=arguments[u+2];s.children=o}return{$$typeof:xs,type:e.type,key:a,ref:l,props:s,_owner:i}};ee.createContext=function(e){return e={$$typeof:$p,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Lp,_context:e},e.Consumer=e};ee.createElement=$d;ee.createFactory=function(e){var t=$d.bind(null,e);return t.type=e,t};ee.createRef=function(){return{current:null}};ee.forwardRef=function(e){return{$$typeof:Fp,render:e}};ee.isValidElement=Ji;ee.lazy=function(e){return{$$typeof:Bp,_payload:{_status:-1,_result:e},_init:Wp}};ee.memo=function(e,t){return{$$typeof:Up,type:e,compare:t===void 0?null:t}};ee.startTransition=function(e){var t=Xs.transition;Xs.transition={};try{e()}finally{Xs.transition=t}};ee.unstable_act=Fd;ee.useCallback=function(e,t){return Fe.current.useCallback(e,t)};ee.useContext=function(e){return Fe.current.useContext(e)};ee.useDebugValue=function(){};ee.useDeferredValue=function(e){return Fe.current.useDeferredValue(e)};ee.useEffect=function(e,t){return Fe.current.useEffect(e,t)};ee.useId=function(){return Fe.current.useId()};ee.useImperativeHandle=function(e,t,n){return Fe.current.useImperativeHandle(e,t,n)};ee.useInsertionEffect=function(e,t){return Fe.current.useInsertionEffect(e,t)};ee.useLayoutEffect=function(e,t){return Fe.current.useLayoutEffect(e,t)};ee.useMemo=function(e,t){return Fe.current.useMemo(e,t)};ee.useReducer=function(e,t,n){return Fe.current.useReducer(e,t,n)};ee.useRef=function(e){return Fe.current.useRef(e)};ee.useState=function(e){return Fe.current.useState(e)};ee.useSyncExternalStore=function(e,t,n){return Fe.current.useSyncExternalStore(e,t,n)};ee.useTransition=function(){return Fe.current.useTransition()};ee.version="18.3.1";Td.exports=ee;var g=Td.exports;const ir=Ip(g),Yp=Tp({__proto__:null,default:ir},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qp=g,Jp=Symbol.for("react.element"),Xp=Symbol.for("react.fragment"),qp=Object.prototype.hasOwnProperty,Zp=Qp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eh={key:!0,ref:!0,__self:!0,__source:!0};function zd(e,t,n){var s,a={},l=null,i=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(i=t.ref);for(s in t)qp.call(t,s)&&!eh.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:Jp,type:e,key:l,ref:i,props:a,_owner:Zp.current}}Fa.Fragment=Xp;Fa.jsx=zd;Fa.jsxs=zd;Ad.exports=Fa;var r=Ad.exports,Yl={},Ud={exports:{}},qe={},Bd={exports:{}},Vd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(F,H){var E=F.length;F.push(H);e:for(;0<E;){var X=E-1>>>1,$=F[X];if(0<a($,H))F[X]=H,F[E]=$,E=X;else break e}}function n(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var H=F[0],E=F.pop();if(E!==H){F[0]=E;e:for(var X=0,$=F.length,P=$>>>1;X<P;){var L=2*(X+1)-1,W=F[L],le=L+1,re=F[le];if(0>a(W,E))le<$&&0>a(re,W)?(F[X]=re,F[le]=E,X=le):(F[X]=W,F[L]=E,X=L);else if(le<$&&0>a(re,E))F[X]=re,F[le]=E,X=le;else break e}}return H}function a(F,H){var E=F.sortIndex-H.sortIndex;return E!==0?E:F.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var d=[],u=[],c=1,p=null,h=3,w=!1,m=!1,b=!1,N=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(F){for(var H=n(u);H!==null;){if(H.callback===null)s(u);else if(H.startTime<=F)s(u),H.sortIndex=H.expirationTime,t(d,H);else break;H=n(u)}}function k(F){if(b=!1,y(F),!m)if(n(d)!==null)m=!0,q(D);else{var H=n(u);H!==null&&ce(k,H.startTime-F)}}function D(F,H){m=!1,b&&(b=!1,f(A),A=-1),w=!0;var E=h;try{for(y(H),p=n(d);p!==null&&(!(p.expirationTime>H)||F&&!S());){var X=p.callback;if(typeof X=="function"){p.callback=null,h=p.priorityLevel;var $=X(p.expirationTime<=H);H=e.unstable_now(),typeof $=="function"?p.callback=$:p===n(d)&&s(d),y(H)}else s(d);p=n(d)}if(p!==null)var P=!0;else{var L=n(u);L!==null&&ce(k,L.startTime-H),P=!1}return P}finally{p=null,h=E,w=!1}}var T=!1,C=null,A=-1,R=5,O=-1;function S(){return!(e.unstable_now()-O<R)}function I(){if(C!==null){var F=e.unstable_now();O=F;var H=!0;try{H=C(!0,F)}finally{H?_():(T=!1,C=null)}}else T=!1}var _;if(typeof x=="function")_=function(){x(I)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,Q=J.port2;J.port1.onmessage=I,_=function(){Q.postMessage(null)}}else _=function(){N(I,0)};function q(F){C=F,T||(T=!0,_())}function ce(F,H){A=N(function(){F(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_continueExecution=function(){m||w||(m=!0,q(D))},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(F){switch(h){case 1:case 2:case 3:var H=3;break;default:H=h}var E=h;h=H;try{return F()}finally{h=E}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(F,H){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var E=h;h=F;try{return H()}finally{h=E}},e.unstable_scheduleCallback=function(F,H,E){var X=e.unstable_now();switch(typeof E=="object"&&E!==null?(E=E.delay,E=typeof E=="number"&&0<E?X+E:X):E=X,F){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=E+$,F={id:c++,callback:H,priorityLevel:F,startTime:E,expirationTime:$,sortIndex:-1},E>X?(F.sortIndex=E,t(u,F),n(d)===null&&F===n(u)&&(b?(f(A),A=-1):b=!0,ce(k,E-X))):(F.sortIndex=$,t(d,F),m||w||(m=!0,q(D))),F},e.unstable_shouldYield=S,e.unstable_wrapCallback=function(F){var H=h;return function(){var E=h;h=H;try{return F.apply(this,arguments)}finally{h=E}}}})(Vd);Bd.exports=Vd;var th=Bd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nh=g,Xe=th;function M(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Hd=new Set,Jr={};function Mn(e,t){or(e,t),or(e+"Capture",t)}function or(e,t){for(Jr[e]=t,e=0;e<t.length;e++)Hd.add(t[e])}var Lt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ql=Object.prototype.hasOwnProperty,rh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ec={},tc={};function sh(e){return Ql.call(tc,e)?!0:Ql.call(ec,e)?!1:rh.test(e)?tc[e]=!0:(ec[e]=!0,!1)}function ah(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function lh(e,t,n,s){if(t===null||typeof t>"u"||ah(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ze(e,t,n,s,a,l,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=i}var Te={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Te[e]=new ze(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Te[t]=new ze(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Te[e]=new ze(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Te[e]=new ze(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Te[e]=new ze(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Te[e]=new ze(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Te[e]=new ze(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Te[e]=new ze(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Te[e]=new ze(e,5,!1,e.toLowerCase(),null,!1,!1)});var Xi=/[\-:]([a-z])/g;function qi(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Xi,qi);Te[t]=new ze(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Xi,qi);Te[t]=new ze(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Xi,qi);Te[t]=new ze(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Te[e]=new ze(e,1,!1,e.toLowerCase(),null,!1,!1)});Te.xlinkHref=new ze("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Te[e]=new ze(e,1,!1,e.toLowerCase(),null,!0,!0)});function Zi(e,t,n,s){var a=Te.hasOwnProperty(t)?Te[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(lh(t,n,a,s)&&(n=null),s||a===null?sh(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,s=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var Ut=nh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Es=Symbol.for("react.element"),Vn=Symbol.for("react.portal"),Hn=Symbol.for("react.fragment"),eo=Symbol.for("react.strict_mode"),Jl=Symbol.for("react.profiler"),Gd=Symbol.for("react.provider"),Wd=Symbol.for("react.context"),to=Symbol.for("react.forward_ref"),Xl=Symbol.for("react.suspense"),ql=Symbol.for("react.suspense_list"),no=Symbol.for("react.memo"),Kt=Symbol.for("react.lazy"),Kd=Symbol.for("react.offscreen"),nc=Symbol.iterator;function Cr(e){return e===null||typeof e!="object"?null:(e=nc&&e[nc]||e["@@iterator"],typeof e=="function"?e:null)}var ve=Object.assign,ul;function _r(e){if(ul===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ul=t&&t[1]||""}return`
`+ul+e}var ml=!1;function pl(e,t){if(!e||ml)return"";ml=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var s=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){s=u}e.call(t.prototype)}else{try{throw Error()}catch(u){s=u}e()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),l=s.stack.split(`
`),i=a.length-1,o=l.length-1;1<=i&&0<=o&&a[i]!==l[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==l[o]){if(i!==1||o!==1)do if(i--,o--,0>o||a[i]!==l[o]){var d=`
`+a[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=o);break}}}finally{ml=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?_r(e):""}function ih(e){switch(e.tag){case 5:return _r(e.type);case 16:return _r("Lazy");case 13:return _r("Suspense");case 19:return _r("SuspenseList");case 0:case 2:case 15:return e=pl(e.type,!1),e;case 11:return e=pl(e.type.render,!1),e;case 1:return e=pl(e.type,!0),e;default:return""}}function Zl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Hn:return"Fragment";case Vn:return"Portal";case Jl:return"Profiler";case eo:return"StrictMode";case Xl:return"Suspense";case ql:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Wd:return(e.displayName||"Context")+".Consumer";case Gd:return(e._context.displayName||"Context")+".Provider";case to:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case no:return t=e.displayName||null,t!==null?t:Zl(e.type)||"Memo";case Kt:t=e._payload,e=e._init;try{return Zl(e(t))}catch{}}return null}function oh(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zl(t);case 8:return t===eo?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function un(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Yd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ch(e){var t=Yd(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(i){s=""+i,l.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(i){s=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function As(e){e._valueTracker||(e._valueTracker=ch(e))}function Qd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=Yd(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function ca(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ei(e,t){var n=t.checked;return ve({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function rc(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=un(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Jd(e,t){t=t.checked,t!=null&&Zi(e,"checked",t,!1)}function ti(e,t){Jd(e,t);var n=un(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ni(e,t.type,n):t.hasOwnProperty("defaultValue")&&ni(e,t.type,un(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function sc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ni(e,t,n){(t!=="number"||ca(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Lr=Array.isArray;function tr(e,t,n,s){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&s&&(e[n].defaultSelected=!0)}else{for(n=""+un(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function ri(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(M(91));return ve({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ac(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(M(92));if(Lr(n)){if(1<n.length)throw Error(M(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:un(n)}}function Xd(e,t){var n=un(t.value),s=un(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function lc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function qd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function si(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?qd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ts,Zd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ts=Ts||document.createElement("div"),Ts.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ts.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Xr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ur={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dh=["Webkit","ms","Moz","O"];Object.keys(Ur).forEach(function(e){dh.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ur[t]=Ur[e]})});function eu(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ur.hasOwnProperty(e)&&Ur[e]?(""+t).trim():t+"px"}function tu(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,a=eu(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,a):e[n]=a}}var uh=ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ai(e,t){if(t){if(uh[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(M(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(M(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(M(61))}if(t.style!=null&&typeof t.style!="object")throw Error(M(62))}}function li(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ii=null;function ro(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var oi=null,nr=null,rr=null;function ic(e){if(e=vs(e)){if(typeof oi!="function")throw Error(M(280));var t=e.stateNode;t&&(t=Ha(t),oi(e.stateNode,e.type,t))}}function nu(e){nr?rr?rr.push(e):rr=[e]:nr=e}function ru(){if(nr){var e=nr,t=rr;if(rr=nr=null,ic(e),t)for(e=0;e<t.length;e++)ic(t[e])}}function su(e,t){return e(t)}function au(){}var hl=!1;function lu(e,t,n){if(hl)return e(t,n);hl=!0;try{return su(e,t,n)}finally{hl=!1,(nr!==null||rr!==null)&&(au(),ru())}}function qr(e,t){var n=e.stateNode;if(n===null)return null;var s=Ha(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(M(231,t,typeof n));return n}var ci=!1;if(Lt)try{var Pr={};Object.defineProperty(Pr,"passive",{get:function(){ci=!0}}),window.addEventListener("test",Pr,Pr),window.removeEventListener("test",Pr,Pr)}catch{ci=!1}function mh(e,t,n,s,a,l,i,o,d){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Br=!1,da=null,ua=!1,di=null,ph={onError:function(e){Br=!0,da=e}};function hh(e,t,n,s,a,l,i,o,d){Br=!1,da=null,mh.apply(ph,arguments)}function fh(e,t,n,s,a,l,i,o,d){if(hh.apply(this,arguments),Br){if(Br){var u=da;Br=!1,da=null}else throw Error(M(198));ua||(ua=!0,di=u)}}function Rn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function iu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function oc(e){if(Rn(e)!==e)throw Error(M(188))}function xh(e){var t=e.alternate;if(!t){if(t=Rn(e),t===null)throw Error(M(188));return t!==e?null:e}for(var n=e,s=t;;){var a=n.return;if(a===null)break;var l=a.alternate;if(l===null){if(s=a.return,s!==null){n=s;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return oc(a),e;if(l===s)return oc(a),t;l=l.sibling}throw Error(M(188))}if(n.return!==s.return)n=a,s=l;else{for(var i=!1,o=a.child;o;){if(o===n){i=!0,n=a,s=l;break}if(o===s){i=!0,s=a,n=l;break}o=o.sibling}if(!i){for(o=l.child;o;){if(o===n){i=!0,n=l,s=a;break}if(o===s){i=!0,s=l,n=a;break}o=o.sibling}if(!i)throw Error(M(189))}}if(n.alternate!==s)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?e:t}function ou(e){return e=xh(e),e!==null?cu(e):null}function cu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=cu(e);if(t!==null)return t;e=e.sibling}return null}var du=Xe.unstable_scheduleCallback,cc=Xe.unstable_cancelCallback,gh=Xe.unstable_shouldYield,yh=Xe.unstable_requestPaint,je=Xe.unstable_now,vh=Xe.unstable_getCurrentPriorityLevel,so=Xe.unstable_ImmediatePriority,uu=Xe.unstable_UserBlockingPriority,ma=Xe.unstable_NormalPriority,bh=Xe.unstable_LowPriority,mu=Xe.unstable_IdlePriority,za=null,Ct=null;function Nh(e){if(Ct&&typeof Ct.onCommitFiberRoot=="function")try{Ct.onCommitFiberRoot(za,e,void 0,(e.current.flags&128)===128)}catch{}}var vt=Math.clz32?Math.clz32:kh,jh=Math.log,wh=Math.LN2;function kh(e){return e>>>=0,e===0?32:31-(jh(e)/wh|0)|0}var Is=64,Os=4194304;function $r(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pa(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,a=e.suspendedLanes,l=e.pingedLanes,i=n&268435455;if(i!==0){var o=i&~a;o!==0?s=$r(o):(l&=i,l!==0&&(s=$r(l)))}else i=n&~a,i!==0?s=$r(i):l!==0&&(s=$r(l));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,l=t&-t,a>=l||a===16&&(l&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-vt(t),a=1<<n,s|=e[n],t&=~a;return s}function Sh(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ch(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var i=31-vt(l),o=1<<i,d=a[i];d===-1?(!(o&n)||o&s)&&(a[i]=Sh(o,t)):d<=t&&(e.expiredLanes|=o),l&=~o}}function ui(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function pu(){var e=Is;return Is<<=1,!(Is&4194240)&&(Is=64),e}function fl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gs(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-vt(t),e[t]=n}function Ph(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-vt(n),l=1<<a;t[a]=0,s[a]=-1,e[a]=-1,n&=~l}}function ao(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-vt(n),a=1<<s;a&t|e[s]&t&&(e[s]|=t),n&=~a}}var oe=0;function hu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var fu,lo,xu,gu,yu,mi=!1,Ms=[],tn=null,nn=null,rn=null,Zr=new Map,es=new Map,Jt=[],Dh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dc(e,t){switch(e){case"focusin":case"focusout":tn=null;break;case"dragenter":case"dragleave":nn=null;break;case"mouseover":case"mouseout":rn=null;break;case"pointerover":case"pointerout":Zr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":es.delete(t.pointerId)}}function Dr(e,t,n,s,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:l,targetContainers:[a]},t!==null&&(t=vs(t),t!==null&&lo(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Eh(e,t,n,s,a){switch(t){case"focusin":return tn=Dr(tn,e,t,n,s,a),!0;case"dragenter":return nn=Dr(nn,e,t,n,s,a),!0;case"mouseover":return rn=Dr(rn,e,t,n,s,a),!0;case"pointerover":var l=a.pointerId;return Zr.set(l,Dr(Zr.get(l)||null,e,t,n,s,a)),!0;case"gotpointercapture":return l=a.pointerId,es.set(l,Dr(es.get(l)||null,e,t,n,s,a)),!0}return!1}function vu(e){var t=jn(e.target);if(t!==null){var n=Rn(t);if(n!==null){if(t=n.tag,t===13){if(t=iu(n),t!==null){e.blockedOn=t,yu(e.priority,function(){xu(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function qs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=pi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);ii=s,n.target.dispatchEvent(s),ii=null}else return t=vs(n),t!==null&&lo(t),e.blockedOn=n,!1;t.shift()}return!0}function uc(e,t,n){qs(e)&&n.delete(t)}function Ah(){mi=!1,tn!==null&&qs(tn)&&(tn=null),nn!==null&&qs(nn)&&(nn=null),rn!==null&&qs(rn)&&(rn=null),Zr.forEach(uc),es.forEach(uc)}function Er(e,t){e.blockedOn===t&&(e.blockedOn=null,mi||(mi=!0,Xe.unstable_scheduleCallback(Xe.unstable_NormalPriority,Ah)))}function ts(e){function t(a){return Er(a,e)}if(0<Ms.length){Er(Ms[0],e);for(var n=1;n<Ms.length;n++){var s=Ms[n];s.blockedOn===e&&(s.blockedOn=null)}}for(tn!==null&&Er(tn,e),nn!==null&&Er(nn,e),rn!==null&&Er(rn,e),Zr.forEach(t),es.forEach(t),n=0;n<Jt.length;n++)s=Jt[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<Jt.length&&(n=Jt[0],n.blockedOn===null);)vu(n),n.blockedOn===null&&Jt.shift()}var sr=Ut.ReactCurrentBatchConfig,ha=!0;function Th(e,t,n,s){var a=oe,l=sr.transition;sr.transition=null;try{oe=1,io(e,t,n,s)}finally{oe=a,sr.transition=l}}function Ih(e,t,n,s){var a=oe,l=sr.transition;sr.transition=null;try{oe=4,io(e,t,n,s)}finally{oe=a,sr.transition=l}}function io(e,t,n,s){if(ha){var a=pi(e,t,n,s);if(a===null)Sl(e,t,s,fa,n),dc(e,s);else if(Eh(a,e,t,n,s))s.stopPropagation();else if(dc(e,s),t&4&&-1<Dh.indexOf(e)){for(;a!==null;){var l=vs(a);if(l!==null&&fu(l),l=pi(e,t,n,s),l===null&&Sl(e,t,s,fa,n),l===a)break;a=l}a!==null&&s.stopPropagation()}else Sl(e,t,s,null,n)}}var fa=null;function pi(e,t,n,s){if(fa=null,e=ro(s),e=jn(e),e!==null)if(t=Rn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=iu(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return fa=e,null}function bu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vh()){case so:return 1;case uu:return 4;case ma:case bh:return 16;case mu:return 536870912;default:return 16}default:return 16}}var qt=null,oo=null,Zs=null;function Nu(){if(Zs)return Zs;var e,t=oo,n=t.length,s,a="value"in qt?qt.value:qt.textContent,l=a.length;for(e=0;e<n&&t[e]===a[e];e++);var i=n-e;for(s=1;s<=i&&t[n-s]===a[l-s];s++);return Zs=a.slice(e,1<s?1-s:void 0)}function ea(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Rs(){return!0}function mc(){return!1}function Ze(e){function t(n,s,a,l,i){this._reactName=n,this._targetInst=a,this.type=s,this.nativeEvent=l,this.target=i,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(l):l[o]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Rs:mc,this.isPropagationStopped=mc,this}return ve(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Rs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Rs)},persist:function(){},isPersistent:Rs}),t}var gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},co=Ze(gr),ys=ve({},gr,{view:0,detail:0}),Oh=Ze(ys),xl,gl,Ar,Ua=ve({},ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ar&&(Ar&&e.type==="mousemove"?(xl=e.screenX-Ar.screenX,gl=e.screenY-Ar.screenY):gl=xl=0,Ar=e),xl)},movementY:function(e){return"movementY"in e?e.movementY:gl}}),pc=Ze(Ua),Mh=ve({},Ua,{dataTransfer:0}),Rh=Ze(Mh),_h=ve({},ys,{relatedTarget:0}),yl=Ze(_h),Lh=ve({},gr,{animationName:0,elapsedTime:0,pseudoElement:0}),$h=Ze(Lh),Fh=ve({},gr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),zh=Ze(Fh),Uh=ve({},gr,{data:0}),hc=Ze(Uh),Bh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Hh[e])?!!t[e]:!1}function uo(){return Gh}var Wh=ve({},ys,{key:function(e){if(e.key){var t=Bh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ea(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Vh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uo,charCode:function(e){return e.type==="keypress"?ea(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ea(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Kh=Ze(Wh),Yh=ve({},Ua,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fc=Ze(Yh),Qh=ve({},ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uo}),Jh=Ze(Qh),Xh=ve({},gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),qh=Ze(Xh),Zh=ve({},Ua,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ef=Ze(Zh),tf=[9,13,27,32],mo=Lt&&"CompositionEvent"in window,Vr=null;Lt&&"documentMode"in document&&(Vr=document.documentMode);var nf=Lt&&"TextEvent"in window&&!Vr,ju=Lt&&(!mo||Vr&&8<Vr&&11>=Vr),xc=" ",gc=!1;function wu(e,t){switch(e){case"keyup":return tf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ku(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gn=!1;function rf(e,t){switch(e){case"compositionend":return ku(t);case"keypress":return t.which!==32?null:(gc=!0,xc);case"textInput":return e=t.data,e===xc&&gc?null:e;default:return null}}function sf(e,t){if(Gn)return e==="compositionend"||!mo&&wu(e,t)?(e=Nu(),Zs=oo=qt=null,Gn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ju&&t.locale!=="ko"?null:t.data;default:return null}}var af={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!af[e.type]:t==="textarea"}function Su(e,t,n,s){nu(s),t=xa(t,"onChange"),0<t.length&&(n=new co("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Hr=null,ns=null;function lf(e){_u(e,0)}function Ba(e){var t=Yn(e);if(Qd(t))return e}function of(e,t){if(e==="change")return t}var Cu=!1;if(Lt){var vl;if(Lt){var bl="oninput"in document;if(!bl){var vc=document.createElement("div");vc.setAttribute("oninput","return;"),bl=typeof vc.oninput=="function"}vl=bl}else vl=!1;Cu=vl&&(!document.documentMode||9<document.documentMode)}function bc(){Hr&&(Hr.detachEvent("onpropertychange",Pu),ns=Hr=null)}function Pu(e){if(e.propertyName==="value"&&Ba(ns)){var t=[];Su(t,ns,e,ro(e)),lu(lf,t)}}function cf(e,t,n){e==="focusin"?(bc(),Hr=t,ns=n,Hr.attachEvent("onpropertychange",Pu)):e==="focusout"&&bc()}function df(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ba(ns)}function uf(e,t){if(e==="click")return Ba(t)}function mf(e,t){if(e==="input"||e==="change")return Ba(t)}function pf(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var jt=typeof Object.is=="function"?Object.is:pf;function rs(e,t){if(jt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var a=n[s];if(!Ql.call(t,a)||!jt(e[a],t[a]))return!1}return!0}function Nc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jc(e,t){var n=Nc(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Nc(n)}}function Du(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Du(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Eu(){for(var e=window,t=ca();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ca(e.document)}return t}function po(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function hf(e){var t=Eu(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Du(n.ownerDocument.documentElement,n)){if(s!==null&&po(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,l=Math.min(s.start,a);s=s.end===void 0?l:Math.min(s.end,a),!e.extend&&l>s&&(a=s,s=l,l=a),a=jc(n,l);var i=jc(n,s);a&&i&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),l>s?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ff=Lt&&"documentMode"in document&&11>=document.documentMode,Wn=null,hi=null,Gr=null,fi=!1;function wc(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;fi||Wn==null||Wn!==ca(s)||(s=Wn,"selectionStart"in s&&po(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Gr&&rs(Gr,s)||(Gr=s,s=xa(hi,"onSelect"),0<s.length&&(t=new co("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=Wn)))}function _s(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Kn={animationend:_s("Animation","AnimationEnd"),animationiteration:_s("Animation","AnimationIteration"),animationstart:_s("Animation","AnimationStart"),transitionend:_s("Transition","TransitionEnd")},Nl={},Au={};Lt&&(Au=document.createElement("div").style,"AnimationEvent"in window||(delete Kn.animationend.animation,delete Kn.animationiteration.animation,delete Kn.animationstart.animation),"TransitionEvent"in window||delete Kn.transitionend.transition);function Va(e){if(Nl[e])return Nl[e];if(!Kn[e])return e;var t=Kn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Au)return Nl[e]=t[n];return e}var Tu=Va("animationend"),Iu=Va("animationiteration"),Ou=Va("animationstart"),Mu=Va("transitionend"),Ru=new Map,kc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pn(e,t){Ru.set(e,t),Mn(t,[e])}for(var jl=0;jl<kc.length;jl++){var wl=kc[jl],xf=wl.toLowerCase(),gf=wl[0].toUpperCase()+wl.slice(1);pn(xf,"on"+gf)}pn(Tu,"onAnimationEnd");pn(Iu,"onAnimationIteration");pn(Ou,"onAnimationStart");pn("dblclick","onDoubleClick");pn("focusin","onFocus");pn("focusout","onBlur");pn(Mu,"onTransitionEnd");or("onMouseEnter",["mouseout","mouseover"]);or("onMouseLeave",["mouseout","mouseover"]);or("onPointerEnter",["pointerout","pointerover"]);or("onPointerLeave",["pointerout","pointerover"]);Mn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yf=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fr));function Sc(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,fh(s,t,void 0,e),e.currentTarget=null}function _u(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],a=s.event;s=s.listeners;e:{var l=void 0;if(t)for(var i=s.length-1;0<=i;i--){var o=s[i],d=o.instance,u=o.currentTarget;if(o=o.listener,d!==l&&a.isPropagationStopped())break e;Sc(a,o,u),l=d}else for(i=0;i<s.length;i++){if(o=s[i],d=o.instance,u=o.currentTarget,o=o.listener,d!==l&&a.isPropagationStopped())break e;Sc(a,o,u),l=d}}}if(ua)throw e=di,ua=!1,di=null,e}function pe(e,t){var n=t[bi];n===void 0&&(n=t[bi]=new Set);var s=e+"__bubble";n.has(s)||(Lu(t,e,2,!1),n.add(s))}function kl(e,t,n){var s=0;t&&(s|=4),Lu(n,e,s,t)}var Ls="_reactListening"+Math.random().toString(36).slice(2);function ss(e){if(!e[Ls]){e[Ls]=!0,Hd.forEach(function(n){n!=="selectionchange"&&(yf.has(n)||kl(n,!1,e),kl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ls]||(t[Ls]=!0,kl("selectionchange",!1,t))}}function Lu(e,t,n,s){switch(bu(t)){case 1:var a=Th;break;case 4:a=Ih;break;default:a=io}n=a.bind(null,t,n,e),a=void 0,!ci||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Sl(e,t,n,s,a){var l=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var i=s.tag;if(i===3||i===4){var o=s.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(i===4)for(i=s.return;i!==null;){var d=i.tag;if((d===3||d===4)&&(d=i.stateNode.containerInfo,d===a||d.nodeType===8&&d.parentNode===a))return;i=i.return}for(;o!==null;){if(i=jn(o),i===null)return;if(d=i.tag,d===5||d===6){s=l=i;continue e}o=o.parentNode}}s=s.return}lu(function(){var u=l,c=ro(n),p=[];e:{var h=Ru.get(e);if(h!==void 0){var w=co,m=e;switch(e){case"keypress":if(ea(n)===0)break e;case"keydown":case"keyup":w=Kh;break;case"focusin":m="focus",w=yl;break;case"focusout":m="blur",w=yl;break;case"beforeblur":case"afterblur":w=yl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=pc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=Rh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=Jh;break;case Tu:case Iu:case Ou:w=$h;break;case Mu:w=qh;break;case"scroll":w=Oh;break;case"wheel":w=ef;break;case"copy":case"cut":case"paste":w=zh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=fc}var b=(t&4)!==0,N=!b&&e==="scroll",f=b?h!==null?h+"Capture":null:h;b=[];for(var x=u,y;x!==null;){y=x;var k=y.stateNode;if(y.tag===5&&k!==null&&(y=k,f!==null&&(k=qr(x,f),k!=null&&b.push(as(x,k,y)))),N)break;x=x.return}0<b.length&&(h=new w(h,m,null,n,c),p.push({event:h,listeners:b}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",h&&n!==ii&&(m=n.relatedTarget||n.fromElement)&&(jn(m)||m[$t]))break e;if((w||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,w?(m=n.relatedTarget||n.toElement,w=u,m=m?jn(m):null,m!==null&&(N=Rn(m),m!==N||m.tag!==5&&m.tag!==6)&&(m=null)):(w=null,m=u),w!==m)){if(b=pc,k="onMouseLeave",f="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(b=fc,k="onPointerLeave",f="onPointerEnter",x="pointer"),N=w==null?h:Yn(w),y=m==null?h:Yn(m),h=new b(k,x+"leave",w,n,c),h.target=N,h.relatedTarget=y,k=null,jn(c)===u&&(b=new b(f,x+"enter",m,n,c),b.target=y,b.relatedTarget=N,k=b),N=k,w&&m)t:{for(b=w,f=m,x=0,y=b;y;y=zn(y))x++;for(y=0,k=f;k;k=zn(k))y++;for(;0<x-y;)b=zn(b),x--;for(;0<y-x;)f=zn(f),y--;for(;x--;){if(b===f||f!==null&&b===f.alternate)break t;b=zn(b),f=zn(f)}b=null}else b=null;w!==null&&Cc(p,h,w,b,!1),m!==null&&N!==null&&Cc(p,N,m,b,!0)}}e:{if(h=u?Yn(u):window,w=h.nodeName&&h.nodeName.toLowerCase(),w==="select"||w==="input"&&h.type==="file")var D=of;else if(yc(h))if(Cu)D=mf;else{D=df;var T=cf}else(w=h.nodeName)&&w.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(D=uf);if(D&&(D=D(e,u))){Su(p,D,n,c);break e}T&&T(e,h,u),e==="focusout"&&(T=h._wrapperState)&&T.controlled&&h.type==="number"&&ni(h,"number",h.value)}switch(T=u?Yn(u):window,e){case"focusin":(yc(T)||T.contentEditable==="true")&&(Wn=T,hi=u,Gr=null);break;case"focusout":Gr=hi=Wn=null;break;case"mousedown":fi=!0;break;case"contextmenu":case"mouseup":case"dragend":fi=!1,wc(p,n,c);break;case"selectionchange":if(ff)break;case"keydown":case"keyup":wc(p,n,c)}var C;if(mo)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Gn?wu(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(ju&&n.locale!=="ko"&&(Gn||A!=="onCompositionStart"?A==="onCompositionEnd"&&Gn&&(C=Nu()):(qt=c,oo="value"in qt?qt.value:qt.textContent,Gn=!0)),T=xa(u,A),0<T.length&&(A=new hc(A,e,null,n,c),p.push({event:A,listeners:T}),C?A.data=C:(C=ku(n),C!==null&&(A.data=C)))),(C=nf?rf(e,n):sf(e,n))&&(u=xa(u,"onBeforeInput"),0<u.length&&(c=new hc("onBeforeInput","beforeinput",null,n,c),p.push({event:c,listeners:u}),c.data=C))}_u(p,t)})}function as(e,t,n){return{instance:e,listener:t,currentTarget:n}}function xa(e,t){for(var n=t+"Capture",s=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=qr(e,n),l!=null&&s.unshift(as(e,l,a)),l=qr(e,t),l!=null&&s.push(as(e,l,a))),e=e.return}return s}function zn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Cc(e,t,n,s,a){for(var l=t._reactName,i=[];n!==null&&n!==s;){var o=n,d=o.alternate,u=o.stateNode;if(d!==null&&d===s)break;o.tag===5&&u!==null&&(o=u,a?(d=qr(n,l),d!=null&&i.unshift(as(n,d,o))):a||(d=qr(n,l),d!=null&&i.push(as(n,d,o)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var vf=/\r\n?/g,bf=/\u0000|\uFFFD/g;function Pc(e){return(typeof e=="string"?e:""+e).replace(vf,`
`).replace(bf,"")}function $s(e,t,n){if(t=Pc(t),Pc(e)!==t&&n)throw Error(M(425))}function ga(){}var xi=null,gi=null;function yi(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var vi=typeof setTimeout=="function"?setTimeout:void 0,Nf=typeof clearTimeout=="function"?clearTimeout:void 0,Dc=typeof Promise=="function"?Promise:void 0,jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Dc<"u"?function(e){return Dc.resolve(null).then(e).catch(wf)}:vi;function wf(e){setTimeout(function(){throw e})}function Cl(e,t){var n=t,s=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(s===0){e.removeChild(a),ts(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=a}while(n);ts(t)}function sn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ec(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var yr=Math.random().toString(36).slice(2),St="__reactFiber$"+yr,ls="__reactProps$"+yr,$t="__reactContainer$"+yr,bi="__reactEvents$"+yr,kf="__reactListeners$"+yr,Sf="__reactHandles$"+yr;function jn(e){var t=e[St];if(t)return t;for(var n=e.parentNode;n;){if(t=n[$t]||n[St]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ec(e);e!==null;){if(n=e[St])return n;e=Ec(e)}return t}e=n,n=e.parentNode}return null}function vs(e){return e=e[St]||e[$t],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Yn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(M(33))}function Ha(e){return e[ls]||null}var Ni=[],Qn=-1;function hn(e){return{current:e}}function he(e){0>Qn||(e.current=Ni[Qn],Ni[Qn]=null,Qn--)}function me(e,t){Qn++,Ni[Qn]=e.current,e.current=t}var mn={},Re=hn(mn),He=hn(!1),Dn=mn;function cr(e,t){var n=e.type.contextTypes;if(!n)return mn;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in n)a[l]=t[l];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ge(e){return e=e.childContextTypes,e!=null}function ya(){he(He),he(Re)}function Ac(e,t,n){if(Re.current!==mn)throw Error(M(168));me(Re,t),me(He,n)}function $u(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(M(108,oh(e)||"Unknown",a));return ve({},n,s)}function va(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||mn,Dn=Re.current,me(Re,e),me(He,He.current),!0}function Tc(e,t,n){var s=e.stateNode;if(!s)throw Error(M(169));n?(e=$u(e,t,Dn),s.__reactInternalMemoizedMergedChildContext=e,he(He),he(Re),me(Re,e)):he(He),me(He,n)}var Ot=null,Ga=!1,Pl=!1;function Fu(e){Ot===null?Ot=[e]:Ot.push(e)}function Cf(e){Ga=!0,Fu(e)}function fn(){if(!Pl&&Ot!==null){Pl=!0;var e=0,t=oe;try{var n=Ot;for(oe=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}Ot=null,Ga=!1}catch(a){throw Ot!==null&&(Ot=Ot.slice(e+1)),du(so,fn),a}finally{oe=t,Pl=!1}}return null}var Jn=[],Xn=0,ba=null,Na=0,st=[],at=0,En=null,Mt=1,Rt="";function vn(e,t){Jn[Xn++]=Na,Jn[Xn++]=ba,ba=e,Na=t}function zu(e,t,n){st[at++]=Mt,st[at++]=Rt,st[at++]=En,En=e;var s=Mt;e=Rt;var a=32-vt(s)-1;s&=~(1<<a),n+=1;var l=32-vt(t)+a;if(30<l){var i=a-a%5;l=(s&(1<<i)-1).toString(32),s>>=i,a-=i,Mt=1<<32-vt(t)+a|n<<a|s,Rt=l+e}else Mt=1<<l|n<<a|s,Rt=e}function ho(e){e.return!==null&&(vn(e,1),zu(e,1,0))}function fo(e){for(;e===ba;)ba=Jn[--Xn],Jn[Xn]=null,Na=Jn[--Xn],Jn[Xn]=null;for(;e===En;)En=st[--at],st[at]=null,Rt=st[--at],st[at]=null,Mt=st[--at],st[at]=null}var Je=null,Qe=null,fe=!1,yt=null;function Uu(e,t){var n=lt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ic(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Je=e,Qe=sn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Je=e,Qe=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=En!==null?{id:Mt,overflow:Rt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=lt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Je=e,Qe=null,!0):!1;default:return!1}}function ji(e){return(e.mode&1)!==0&&(e.flags&128)===0}function wi(e){if(fe){var t=Qe;if(t){var n=t;if(!Ic(e,t)){if(ji(e))throw Error(M(418));t=sn(n.nextSibling);var s=Je;t&&Ic(e,t)?Uu(s,n):(e.flags=e.flags&-4097|2,fe=!1,Je=e)}}else{if(ji(e))throw Error(M(418));e.flags=e.flags&-4097|2,fe=!1,Je=e}}}function Oc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Je=e}function Fs(e){if(e!==Je)return!1;if(!fe)return Oc(e),fe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!yi(e.type,e.memoizedProps)),t&&(t=Qe)){if(ji(e))throw Bu(),Error(M(418));for(;t;)Uu(e,t),t=sn(t.nextSibling)}if(Oc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(M(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Qe=sn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Qe=null}}else Qe=Je?sn(e.stateNode.nextSibling):null;return!0}function Bu(){for(var e=Qe;e;)e=sn(e.nextSibling)}function dr(){Qe=Je=null,fe=!1}function xo(e){yt===null?yt=[e]:yt.push(e)}var Pf=Ut.ReactCurrentBatchConfig;function Tr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var s=n.stateNode}if(!s)throw Error(M(147,e));var a=s,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(i){var o=a.refs;i===null?delete o[l]:o[l]=i},t._stringRef=l,t)}if(typeof e!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,e))}return e}function zs(e,t){throw e=Object.prototype.toString.call(t),Error(M(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Mc(e){var t=e._init;return t(e._payload)}function Vu(e){function t(f,x){if(e){var y=f.deletions;y===null?(f.deletions=[x],f.flags|=16):y.push(x)}}function n(f,x){if(!e)return null;for(;x!==null;)t(f,x),x=x.sibling;return null}function s(f,x){for(f=new Map;x!==null;)x.key!==null?f.set(x.key,x):f.set(x.index,x),x=x.sibling;return f}function a(f,x){return f=cn(f,x),f.index=0,f.sibling=null,f}function l(f,x,y){return f.index=y,e?(y=f.alternate,y!==null?(y=y.index,y<x?(f.flags|=2,x):y):(f.flags|=2,x)):(f.flags|=1048576,x)}function i(f){return e&&f.alternate===null&&(f.flags|=2),f}function o(f,x,y,k){return x===null||x.tag!==6?(x=Ml(y,f.mode,k),x.return=f,x):(x=a(x,y),x.return=f,x)}function d(f,x,y,k){var D=y.type;return D===Hn?c(f,x,y.props.children,k,y.key):x!==null&&(x.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Kt&&Mc(D)===x.type)?(k=a(x,y.props),k.ref=Tr(f,x,y),k.return=f,k):(k=ia(y.type,y.key,y.props,null,f.mode,k),k.ref=Tr(f,x,y),k.return=f,k)}function u(f,x,y,k){return x===null||x.tag!==4||x.stateNode.containerInfo!==y.containerInfo||x.stateNode.implementation!==y.implementation?(x=Rl(y,f.mode,k),x.return=f,x):(x=a(x,y.children||[]),x.return=f,x)}function c(f,x,y,k,D){return x===null||x.tag!==7?(x=Pn(y,f.mode,k,D),x.return=f,x):(x=a(x,y),x.return=f,x)}function p(f,x,y){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Ml(""+x,f.mode,y),x.return=f,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Es:return y=ia(x.type,x.key,x.props,null,f.mode,y),y.ref=Tr(f,null,x),y.return=f,y;case Vn:return x=Rl(x,f.mode,y),x.return=f,x;case Kt:var k=x._init;return p(f,k(x._payload),y)}if(Lr(x)||Cr(x))return x=Pn(x,f.mode,y,null),x.return=f,x;zs(f,x)}return null}function h(f,x,y,k){var D=x!==null?x.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return D!==null?null:o(f,x,""+y,k);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Es:return y.key===D?d(f,x,y,k):null;case Vn:return y.key===D?u(f,x,y,k):null;case Kt:return D=y._init,h(f,x,D(y._payload),k)}if(Lr(y)||Cr(y))return D!==null?null:c(f,x,y,k,null);zs(f,y)}return null}function w(f,x,y,k,D){if(typeof k=="string"&&k!==""||typeof k=="number")return f=f.get(y)||null,o(x,f,""+k,D);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Es:return f=f.get(k.key===null?y:k.key)||null,d(x,f,k,D);case Vn:return f=f.get(k.key===null?y:k.key)||null,u(x,f,k,D);case Kt:var T=k._init;return w(f,x,y,T(k._payload),D)}if(Lr(k)||Cr(k))return f=f.get(y)||null,c(x,f,k,D,null);zs(x,k)}return null}function m(f,x,y,k){for(var D=null,T=null,C=x,A=x=0,R=null;C!==null&&A<y.length;A++){C.index>A?(R=C,C=null):R=C.sibling;var O=h(f,C,y[A],k);if(O===null){C===null&&(C=R);break}e&&C&&O.alternate===null&&t(f,C),x=l(O,x,A),T===null?D=O:T.sibling=O,T=O,C=R}if(A===y.length)return n(f,C),fe&&vn(f,A),D;if(C===null){for(;A<y.length;A++)C=p(f,y[A],k),C!==null&&(x=l(C,x,A),T===null?D=C:T.sibling=C,T=C);return fe&&vn(f,A),D}for(C=s(f,C);A<y.length;A++)R=w(C,f,A,y[A],k),R!==null&&(e&&R.alternate!==null&&C.delete(R.key===null?A:R.key),x=l(R,x,A),T===null?D=R:T.sibling=R,T=R);return e&&C.forEach(function(S){return t(f,S)}),fe&&vn(f,A),D}function b(f,x,y,k){var D=Cr(y);if(typeof D!="function")throw Error(M(150));if(y=D.call(y),y==null)throw Error(M(151));for(var T=D=null,C=x,A=x=0,R=null,O=y.next();C!==null&&!O.done;A++,O=y.next()){C.index>A?(R=C,C=null):R=C.sibling;var S=h(f,C,O.value,k);if(S===null){C===null&&(C=R);break}e&&C&&S.alternate===null&&t(f,C),x=l(S,x,A),T===null?D=S:T.sibling=S,T=S,C=R}if(O.done)return n(f,C),fe&&vn(f,A),D;if(C===null){for(;!O.done;A++,O=y.next())O=p(f,O.value,k),O!==null&&(x=l(O,x,A),T===null?D=O:T.sibling=O,T=O);return fe&&vn(f,A),D}for(C=s(f,C);!O.done;A++,O=y.next())O=w(C,f,A,O.value,k),O!==null&&(e&&O.alternate!==null&&C.delete(O.key===null?A:O.key),x=l(O,x,A),T===null?D=O:T.sibling=O,T=O);return e&&C.forEach(function(I){return t(f,I)}),fe&&vn(f,A),D}function N(f,x,y,k){if(typeof y=="object"&&y!==null&&y.type===Hn&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Es:e:{for(var D=y.key,T=x;T!==null;){if(T.key===D){if(D=y.type,D===Hn){if(T.tag===7){n(f,T.sibling),x=a(T,y.props.children),x.return=f,f=x;break e}}else if(T.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Kt&&Mc(D)===T.type){n(f,T.sibling),x=a(T,y.props),x.ref=Tr(f,T,y),x.return=f,f=x;break e}n(f,T);break}else t(f,T);T=T.sibling}y.type===Hn?(x=Pn(y.props.children,f.mode,k,y.key),x.return=f,f=x):(k=ia(y.type,y.key,y.props,null,f.mode,k),k.ref=Tr(f,x,y),k.return=f,f=k)}return i(f);case Vn:e:{for(T=y.key;x!==null;){if(x.key===T)if(x.tag===4&&x.stateNode.containerInfo===y.containerInfo&&x.stateNode.implementation===y.implementation){n(f,x.sibling),x=a(x,y.children||[]),x.return=f,f=x;break e}else{n(f,x);break}else t(f,x);x=x.sibling}x=Rl(y,f.mode,k),x.return=f,f=x}return i(f);case Kt:return T=y._init,N(f,x,T(y._payload),k)}if(Lr(y))return m(f,x,y,k);if(Cr(y))return b(f,x,y,k);zs(f,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,x!==null&&x.tag===6?(n(f,x.sibling),x=a(x,y),x.return=f,f=x):(n(f,x),x=Ml(y,f.mode,k),x.return=f,f=x),i(f)):n(f,x)}return N}var ur=Vu(!0),Hu=Vu(!1),ja=hn(null),wa=null,qn=null,go=null;function yo(){go=qn=wa=null}function vo(e){var t=ja.current;he(ja),e._currentValue=t}function ki(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function ar(e,t){wa=e,go=qn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ve=!0),e.firstContext=null)}function ot(e){var t=e._currentValue;if(go!==e)if(e={context:e,memoizedValue:t,next:null},qn===null){if(wa===null)throw Error(M(308));qn=e,wa.dependencies={lanes:0,firstContext:e}}else qn=qn.next=e;return t}var wn=null;function bo(e){wn===null?wn=[e]:wn.push(e)}function Gu(e,t,n,s){var a=t.interleaved;return a===null?(n.next=n,bo(t)):(n.next=a.next,a.next=n),t.interleaved=n,Ft(e,s)}function Ft(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Yt=!1;function No(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function _t(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function an(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,ne&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,Ft(e,n)}return a=s.interleaved,a===null?(t.next=t,bo(s)):(t.next=a.next,a.next=t),s.interleaved=t,Ft(e,n)}function ta(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,ao(e,n)}}function Rc(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var a=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?a=l=i:l=l.next=i,n=n.next}while(n!==null);l===null?a=l=t:l=l.next=t}else a=l=t;n={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ka(e,t,n,s){var a=e.updateQueue;Yt=!1;var l=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var d=o,u=d.next;d.next=null,i===null?l=u:i.next=u,i=d;var c=e.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==i&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=d))}if(l!==null){var p=a.baseState;i=0,c=u=d=null,o=l;do{var h=o.lane,w=o.eventTime;if((s&h)===h){c!==null&&(c=c.next={eventTime:w,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,b=o;switch(h=t,w=n,b.tag){case 1:if(m=b.payload,typeof m=="function"){p=m.call(w,p,h);break e}p=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=b.payload,h=typeof m=="function"?m.call(w,p,h):m,h==null)break e;p=ve({},p,h);break e;case 2:Yt=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[o]:h.push(o))}else w={eventTime:w,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=w,d=p):c=c.next=w,i|=h;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;h=o,o=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(c===null&&(d=p),a.baseState=d,a.firstBaseUpdate=u,a.lastBaseUpdate=c,t=a.shared.interleaved,t!==null){a=t;do i|=a.lane,a=a.next;while(a!==t)}else l===null&&(a.shared.lanes=0);Tn|=i,e.lanes=i,e.memoizedState=p}}function _c(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=n,typeof a!="function")throw Error(M(191,a));a.call(s)}}}var bs={},Pt=hn(bs),is=hn(bs),os=hn(bs);function kn(e){if(e===bs)throw Error(M(174));return e}function jo(e,t){switch(me(os,t),me(is,e),me(Pt,bs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:si(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=si(t,e)}he(Pt),me(Pt,t)}function mr(){he(Pt),he(is),he(os)}function Ku(e){kn(os.current);var t=kn(Pt.current),n=si(t,e.type);t!==n&&(me(is,e),me(Pt,n))}function wo(e){is.current===e&&(he(Pt),he(is))}var xe=hn(0);function Sa(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Dl=[];function ko(){for(var e=0;e<Dl.length;e++)Dl[e]._workInProgressVersionPrimary=null;Dl.length=0}var na=Ut.ReactCurrentDispatcher,El=Ut.ReactCurrentBatchConfig,An=0,ge=null,Se=null,Pe=null,Ca=!1,Wr=!1,cs=0,Df=0;function Ie(){throw Error(M(321))}function So(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!jt(e[n],t[n]))return!1;return!0}function Co(e,t,n,s,a,l){if(An=l,ge=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,na.current=e===null||e.memoizedState===null?If:Of,e=n(s,a),Wr){l=0;do{if(Wr=!1,cs=0,25<=l)throw Error(M(301));l+=1,Pe=Se=null,t.updateQueue=null,na.current=Mf,e=n(s,a)}while(Wr)}if(na.current=Pa,t=Se!==null&&Se.next!==null,An=0,Pe=Se=ge=null,Ca=!1,t)throw Error(M(300));return e}function Po(){var e=cs!==0;return cs=0,e}function kt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pe===null?ge.memoizedState=Pe=e:Pe=Pe.next=e,Pe}function ct(){if(Se===null){var e=ge.alternate;e=e!==null?e.memoizedState:null}else e=Se.next;var t=Pe===null?ge.memoizedState:Pe.next;if(t!==null)Pe=t,Se=e;else{if(e===null)throw Error(M(310));Se=e,e={memoizedState:Se.memoizedState,baseState:Se.baseState,baseQueue:Se.baseQueue,queue:Se.queue,next:null},Pe===null?ge.memoizedState=Pe=e:Pe=Pe.next=e}return Pe}function ds(e,t){return typeof t=="function"?t(e):t}function Al(e){var t=ct(),n=t.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=e;var s=Se,a=s.baseQueue,l=n.pending;if(l!==null){if(a!==null){var i=a.next;a.next=l.next,l.next=i}s.baseQueue=a=l,n.pending=null}if(a!==null){l=a.next,s=s.baseState;var o=i=null,d=null,u=l;do{var c=u.lane;if((An&c)===c)d!==null&&(d=d.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:e(s,u.action);else{var p={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};d===null?(o=d=p,i=s):d=d.next=p,ge.lanes|=c,Tn|=c}u=u.next}while(u!==null&&u!==l);d===null?i=s:d.next=o,jt(s,t.memoizedState)||(Ve=!0),t.memoizedState=s,t.baseState=i,t.baseQueue=d,n.lastRenderedState=s}if(e=n.interleaved,e!==null){a=e;do l=a.lane,ge.lanes|=l,Tn|=l,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Tl(e){var t=ct(),n=t.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=e;var s=n.dispatch,a=n.pending,l=t.memoizedState;if(a!==null){n.pending=null;var i=a=a.next;do l=e(l,i.action),i=i.next;while(i!==a);jt(l,t.memoizedState)||(Ve=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,s]}function Yu(){}function Qu(e,t){var n=ge,s=ct(),a=t(),l=!jt(s.memoizedState,a);if(l&&(s.memoizedState=a,Ve=!0),s=s.queue,Do(qu.bind(null,n,s,e),[e]),s.getSnapshot!==t||l||Pe!==null&&Pe.memoizedState.tag&1){if(n.flags|=2048,us(9,Xu.bind(null,n,s,a,t),void 0,null),De===null)throw Error(M(349));An&30||Ju(n,t,a)}return a}function Ju(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ge.updateQueue,t===null?(t={lastEffect:null,stores:null},ge.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Xu(e,t,n,s){t.value=n,t.getSnapshot=s,Zu(t)&&em(e)}function qu(e,t,n){return n(function(){Zu(t)&&em(e)})}function Zu(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!jt(e,n)}catch{return!0}}function em(e){var t=Ft(e,1);t!==null&&bt(t,e,1,-1)}function Lc(e){var t=kt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:e},t.queue=e,e=e.dispatch=Tf.bind(null,ge,e),[t.memoizedState,e]}function us(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=ge.updateQueue,t===null?(t={lastEffect:null,stores:null},ge.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function tm(){return ct().memoizedState}function ra(e,t,n,s){var a=kt();ge.flags|=e,a.memoizedState=us(1|t,n,void 0,s===void 0?null:s)}function Wa(e,t,n,s){var a=ct();s=s===void 0?null:s;var l=void 0;if(Se!==null){var i=Se.memoizedState;if(l=i.destroy,s!==null&&So(s,i.deps)){a.memoizedState=us(t,n,l,s);return}}ge.flags|=e,a.memoizedState=us(1|t,n,l,s)}function $c(e,t){return ra(8390656,8,e,t)}function Do(e,t){return Wa(2048,8,e,t)}function nm(e,t){return Wa(4,2,e,t)}function rm(e,t){return Wa(4,4,e,t)}function sm(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function am(e,t,n){return n=n!=null?n.concat([e]):null,Wa(4,4,sm.bind(null,t,e),n)}function Eo(){}function lm(e,t){var n=ct();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&So(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function im(e,t){var n=ct();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&So(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function om(e,t,n){return An&21?(jt(n,t)||(n=pu(),ge.lanes|=n,Tn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ve=!0),e.memoizedState=n)}function Ef(e,t){var n=oe;oe=n!==0&&4>n?n:4,e(!0);var s=El.transition;El.transition={};try{e(!1),t()}finally{oe=n,El.transition=s}}function cm(){return ct().memoizedState}function Af(e,t,n){var s=on(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},dm(e))um(t,n);else if(n=Gu(e,t,n,s),n!==null){var a=$e();bt(n,e,s,a),mm(n,t,s)}}function Tf(e,t,n){var s=on(e),a={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(dm(e))um(t,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var i=t.lastRenderedState,o=l(i,n);if(a.hasEagerState=!0,a.eagerState=o,jt(o,i)){var d=t.interleaved;d===null?(a.next=a,bo(t)):(a.next=d.next,d.next=a),t.interleaved=a;return}}catch{}finally{}n=Gu(e,t,a,s),n!==null&&(a=$e(),bt(n,e,s,a),mm(n,t,s))}}function dm(e){var t=e.alternate;return e===ge||t!==null&&t===ge}function um(e,t){Wr=Ca=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function mm(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,ao(e,n)}}var Pa={readContext:ot,useCallback:Ie,useContext:Ie,useEffect:Ie,useImperativeHandle:Ie,useInsertionEffect:Ie,useLayoutEffect:Ie,useMemo:Ie,useReducer:Ie,useRef:Ie,useState:Ie,useDebugValue:Ie,useDeferredValue:Ie,useTransition:Ie,useMutableSource:Ie,useSyncExternalStore:Ie,useId:Ie,unstable_isNewReconciler:!1},If={readContext:ot,useCallback:function(e,t){return kt().memoizedState=[e,t===void 0?null:t],e},useContext:ot,useEffect:$c,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ra(4194308,4,sm.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ra(4194308,4,e,t)},useInsertionEffect:function(e,t){return ra(4,2,e,t)},useMemo:function(e,t){var n=kt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=kt();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Af.bind(null,ge,e),[s.memoizedState,e]},useRef:function(e){var t=kt();return e={current:e},t.memoizedState=e},useState:Lc,useDebugValue:Eo,useDeferredValue:function(e){return kt().memoizedState=e},useTransition:function(){var e=Lc(!1),t=e[0];return e=Ef.bind(null,e[1]),kt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=ge,a=kt();if(fe){if(n===void 0)throw Error(M(407));n=n()}else{if(n=t(),De===null)throw Error(M(349));An&30||Ju(s,t,n)}a.memoizedState=n;var l={value:n,getSnapshot:t};return a.queue=l,$c(qu.bind(null,s,l,e),[e]),s.flags|=2048,us(9,Xu.bind(null,s,l,n,t),void 0,null),n},useId:function(){var e=kt(),t=De.identifierPrefix;if(fe){var n=Rt,s=Mt;n=(s&~(1<<32-vt(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=cs++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Df++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Of={readContext:ot,useCallback:lm,useContext:ot,useEffect:Do,useImperativeHandle:am,useInsertionEffect:nm,useLayoutEffect:rm,useMemo:im,useReducer:Al,useRef:tm,useState:function(){return Al(ds)},useDebugValue:Eo,useDeferredValue:function(e){var t=ct();return om(t,Se.memoizedState,e)},useTransition:function(){var e=Al(ds)[0],t=ct().memoizedState;return[e,t]},useMutableSource:Yu,useSyncExternalStore:Qu,useId:cm,unstable_isNewReconciler:!1},Mf={readContext:ot,useCallback:lm,useContext:ot,useEffect:Do,useImperativeHandle:am,useInsertionEffect:nm,useLayoutEffect:rm,useMemo:im,useReducer:Tl,useRef:tm,useState:function(){return Tl(ds)},useDebugValue:Eo,useDeferredValue:function(e){var t=ct();return Se===null?t.memoizedState=e:om(t,Se.memoizedState,e)},useTransition:function(){var e=Tl(ds)[0],t=ct().memoizedState;return[e,t]},useMutableSource:Yu,useSyncExternalStore:Qu,useId:cm,unstable_isNewReconciler:!1};function xt(e,t){if(e&&e.defaultProps){t=ve({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Si(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:ve({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ka={isMounted:function(e){return(e=e._reactInternals)?Rn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=$e(),a=on(e),l=_t(s,a);l.payload=t,n!=null&&(l.callback=n),t=an(e,l,a),t!==null&&(bt(t,e,a,s),ta(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=$e(),a=on(e),l=_t(s,a);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=an(e,l,a),t!==null&&(bt(t,e,a,s),ta(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=$e(),s=on(e),a=_t(n,s);a.tag=2,t!=null&&(a.callback=t),t=an(e,a,s),t!==null&&(bt(t,e,s,n),ta(t,e,s))}};function Fc(e,t,n,s,a,l,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,l,i):t.prototype&&t.prototype.isPureReactComponent?!rs(n,s)||!rs(a,l):!0}function pm(e,t,n){var s=!1,a=mn,l=t.contextType;return typeof l=="object"&&l!==null?l=ot(l):(a=Ge(t)?Dn:Re.current,s=t.contextTypes,l=(s=s!=null)?cr(e,a):mn),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ka,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function zc(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Ka.enqueueReplaceState(t,t.state,null)}function Ci(e,t,n,s){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},No(e);var l=t.contextType;typeof l=="object"&&l!==null?a.context=ot(l):(l=Ge(t)?Dn:Re.current,a.context=cr(e,l)),a.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(Si(e,t,l,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Ka.enqueueReplaceState(a,a.state,null),ka(e,n,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function pr(e,t){try{var n="",s=t;do n+=ih(s),s=s.return;while(s);var a=n}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:a,digest:null}}function Il(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Pi(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Rf=typeof WeakMap=="function"?WeakMap:Map;function hm(e,t,n){n=_t(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){Ea||(Ea=!0,Li=s),Pi(e,t)},n}function fm(e,t,n){n=_t(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;n.payload=function(){return s(a)},n.callback=function(){Pi(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Pi(e,t),typeof s!="function"&&(ln===null?ln=new Set([this]):ln.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function Uc(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new Rf;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(n)||(a.add(n),e=Qf.bind(null,e,t,n),t.then(e,e))}function Bc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Vc(e,t,n,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=_t(-1,1),t.tag=2,an(n,t,1))),n.lanes|=1),e)}var _f=Ut.ReactCurrentOwner,Ve=!1;function Le(e,t,n,s){t.child=e===null?Hu(t,null,n,s):ur(t,e.child,n,s)}function Hc(e,t,n,s,a){n=n.render;var l=t.ref;return ar(t,a),s=Co(e,t,n,s,l,a),n=Po(),e!==null&&!Ve?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,zt(e,t,a)):(fe&&n&&ho(t),t.flags|=1,Le(e,t,s,a),t.child)}function Gc(e,t,n,s,a){if(e===null){var l=n.type;return typeof l=="function"&&!Lo(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,xm(e,t,l,s,a)):(e=ia(n.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&a)){var i=l.memoizedProps;if(n=n.compare,n=n!==null?n:rs,n(i,s)&&e.ref===t.ref)return zt(e,t,a)}return t.flags|=1,e=cn(l,s),e.ref=t.ref,e.return=t,t.child=e}function xm(e,t,n,s,a){if(e!==null){var l=e.memoizedProps;if(rs(l,s)&&e.ref===t.ref)if(Ve=!1,t.pendingProps=s=l,(e.lanes&a)!==0)e.flags&131072&&(Ve=!0);else return t.lanes=e.lanes,zt(e,t,a)}return Di(e,t,n,s,a)}function gm(e,t,n){var s=t.pendingProps,a=s.children,l=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},me(er,Ye),Ye|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,me(er,Ye),Ye|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=l!==null?l.baseLanes:n,me(er,Ye),Ye|=s}else l!==null?(s=l.baseLanes|n,t.memoizedState=null):s=n,me(er,Ye),Ye|=s;return Le(e,t,a,n),t.child}function ym(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Di(e,t,n,s,a){var l=Ge(n)?Dn:Re.current;return l=cr(t,l),ar(t,a),n=Co(e,t,n,s,l,a),s=Po(),e!==null&&!Ve?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,zt(e,t,a)):(fe&&s&&ho(t),t.flags|=1,Le(e,t,n,a),t.child)}function Wc(e,t,n,s,a){if(Ge(n)){var l=!0;va(t)}else l=!1;if(ar(t,a),t.stateNode===null)sa(e,t),pm(t,n,s),Ci(t,n,s,a),s=!0;else if(e===null){var i=t.stateNode,o=t.memoizedProps;i.props=o;var d=i.context,u=n.contextType;typeof u=="object"&&u!==null?u=ot(u):(u=Ge(n)?Dn:Re.current,u=cr(t,u));var c=n.getDerivedStateFromProps,p=typeof c=="function"||typeof i.getSnapshotBeforeUpdate=="function";p||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==s||d!==u)&&zc(t,i,s,u),Yt=!1;var h=t.memoizedState;i.state=h,ka(t,s,i,a),d=t.memoizedState,o!==s||h!==d||He.current||Yt?(typeof c=="function"&&(Si(t,n,c,s),d=t.memoizedState),(o=Yt||Fc(t,n,o,s,h,d,u))?(p||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=d),i.props=s,i.state=d,i.context=u,s=o):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{i=t.stateNode,Wu(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:xt(t.type,o),i.props=u,p=t.pendingProps,h=i.context,d=n.contextType,typeof d=="object"&&d!==null?d=ot(d):(d=Ge(n)?Dn:Re.current,d=cr(t,d));var w=n.getDerivedStateFromProps;(c=typeof w=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==p||h!==d)&&zc(t,i,s,d),Yt=!1,h=t.memoizedState,i.state=h,ka(t,s,i,a);var m=t.memoizedState;o!==p||h!==m||He.current||Yt?(typeof w=="function"&&(Si(t,n,w,s),m=t.memoizedState),(u=Yt||Fc(t,n,u,s,h,m,d)||!1)?(c||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(s,m,d),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(s,m,d)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=m),i.props=s,i.state=m,i.context=d,s=u):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),s=!1)}return Ei(e,t,n,s,l,a)}function Ei(e,t,n,s,a,l){ym(e,t);var i=(t.flags&128)!==0;if(!s&&!i)return a&&Tc(t,n,!1),zt(e,t,l);s=t.stateNode,_f.current=t;var o=i&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&i?(t.child=ur(t,e.child,null,l),t.child=ur(t,null,o,l)):Le(e,t,o,l),t.memoizedState=s.state,a&&Tc(t,n,!0),t.child}function vm(e){var t=e.stateNode;t.pendingContext?Ac(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ac(e,t.context,!1),jo(e,t.containerInfo)}function Kc(e,t,n,s,a){return dr(),xo(a),t.flags|=256,Le(e,t,n,s),t.child}var Ai={dehydrated:null,treeContext:null,retryLane:0};function Ti(e){return{baseLanes:e,cachePool:null,transitions:null}}function bm(e,t,n){var s=t.pendingProps,a=xe.current,l=!1,i=(t.flags&128)!==0,o;if((o=i)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),me(xe,a&1),e===null)return wi(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=s.children,e=s.fallback,l?(s=t.mode,l=t.child,i={mode:"hidden",children:i},!(s&1)&&l!==null?(l.childLanes=0,l.pendingProps=i):l=Ja(i,s,0,null),e=Pn(e,s,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Ti(n),t.memoizedState=Ai,e):Ao(t,i));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return Lf(e,t,i,s,o,a,n);if(l){l=s.fallback,i=t.mode,a=e.child,o=a.sibling;var d={mode:"hidden",children:s.children};return!(i&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=d,t.deletions=null):(s=cn(a,d),s.subtreeFlags=a.subtreeFlags&14680064),o!==null?l=cn(o,l):(l=Pn(l,i,n,null),l.flags|=2),l.return=t,s.return=t,s.sibling=l,t.child=s,s=l,l=t.child,i=e.child.memoizedState,i=i===null?Ti(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},l.memoizedState=i,l.childLanes=e.childLanes&~n,t.memoizedState=Ai,s}return l=e.child,e=l.sibling,s=cn(l,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Ao(e,t){return t=Ja({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Us(e,t,n,s){return s!==null&&xo(s),ur(t,e.child,null,n),e=Ao(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Lf(e,t,n,s,a,l,i){if(n)return t.flags&256?(t.flags&=-257,s=Il(Error(M(422))),Us(e,t,i,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=s.fallback,a=t.mode,s=Ja({mode:"visible",children:s.children},a,0,null),l=Pn(l,a,i,null),l.flags|=2,s.return=t,l.return=t,s.sibling=l,t.child=s,t.mode&1&&ur(t,e.child,null,i),t.child.memoizedState=Ti(i),t.memoizedState=Ai,l);if(!(t.mode&1))return Us(e,t,i,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var o=s.dgst;return s=o,l=Error(M(419)),s=Il(l,s,void 0),Us(e,t,i,s)}if(o=(i&e.childLanes)!==0,Ve||o){if(s=De,s!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|i)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,Ft(e,a),bt(s,e,a,-1))}return _o(),s=Il(Error(M(421))),Us(e,t,i,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Jf.bind(null,e),a._reactRetry=t,null):(e=l.treeContext,Qe=sn(a.nextSibling),Je=t,fe=!0,yt=null,e!==null&&(st[at++]=Mt,st[at++]=Rt,st[at++]=En,Mt=e.id,Rt=e.overflow,En=t),t=Ao(t,s.children),t.flags|=4096,t)}function Yc(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),ki(e.return,t,n)}function Ol(e,t,n,s,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=s,l.tail=n,l.tailMode=a)}function Nm(e,t,n){var s=t.pendingProps,a=s.revealOrder,l=s.tail;if(Le(e,t,s.children,n),s=xe.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Yc(e,n,t);else if(e.tag===19)Yc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(me(xe,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Sa(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Ol(t,!1,a,n,l);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Sa(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Ol(t,!0,n,null,l);break;case"together":Ol(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function sa(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Tn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(M(153));if(t.child!==null){for(e=t.child,n=cn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=cn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function $f(e,t,n){switch(t.tag){case 3:vm(t),dr();break;case 5:Ku(t);break;case 1:Ge(t.type)&&va(t);break;case 4:jo(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;me(ja,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(me(xe,xe.current&1),t.flags|=128,null):n&t.child.childLanes?bm(e,t,n):(me(xe,xe.current&1),e=zt(e,t,n),e!==null?e.sibling:null);me(xe,xe.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return Nm(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),me(xe,xe.current),s)break;return null;case 22:case 23:return t.lanes=0,gm(e,t,n)}return zt(e,t,n)}var jm,Ii,wm,km;jm=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ii=function(){};wm=function(e,t,n,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,kn(Pt.current);var l=null;switch(n){case"input":a=ei(e,a),s=ei(e,s),l=[];break;case"select":a=ve({},a,{value:void 0}),s=ve({},s,{value:void 0}),l=[];break;case"textarea":a=ri(e,a),s=ri(e,s),l=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=ga)}ai(n,s);var i;n=null;for(u in a)if(!s.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var o=a[u];for(i in o)o.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Jr.hasOwnProperty(u)?l||(l=[]):(l=l||[]).push(u,null));for(u in s){var d=s[u];if(o=a!=null?a[u]:void 0,s.hasOwnProperty(u)&&d!==o&&(d!=null||o!=null))if(u==="style")if(o){for(i in o)!o.hasOwnProperty(i)||d&&d.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in d)d.hasOwnProperty(i)&&o[i]!==d[i]&&(n||(n={}),n[i]=d[i])}else n||(l||(l=[]),l.push(u,n)),n=d;else u==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,o=o?o.__html:void 0,d!=null&&o!==d&&(l=l||[]).push(u,d)):u==="children"?typeof d!="string"&&typeof d!="number"||(l=l||[]).push(u,""+d):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Jr.hasOwnProperty(u)?(d!=null&&u==="onScroll"&&pe("scroll",e),l||o===d||(l=[])):(l=l||[]).push(u,d))}n&&(l=l||[]).push("style",n);var u=l;(t.updateQueue=u)&&(t.flags|=4)}};km=function(e,t,n,s){n!==s&&(t.flags|=4)};function Ir(e,t){if(!fe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Oe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function Ff(e,t,n){var s=t.pendingProps;switch(fo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oe(t),null;case 1:return Ge(t.type)&&ya(),Oe(t),null;case 3:return s=t.stateNode,mr(),he(He),he(Re),ko(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Fs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,yt!==null&&(zi(yt),yt=null))),Ii(e,t),Oe(t),null;case 5:wo(t);var a=kn(os.current);if(n=t.type,e!==null&&t.stateNode!=null)wm(e,t,n,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(M(166));return Oe(t),null}if(e=kn(Pt.current),Fs(t)){s=t.stateNode,n=t.type;var l=t.memoizedProps;switch(s[St]=t,s[ls]=l,e=(t.mode&1)!==0,n){case"dialog":pe("cancel",s),pe("close",s);break;case"iframe":case"object":case"embed":pe("load",s);break;case"video":case"audio":for(a=0;a<Fr.length;a++)pe(Fr[a],s);break;case"source":pe("error",s);break;case"img":case"image":case"link":pe("error",s),pe("load",s);break;case"details":pe("toggle",s);break;case"input":rc(s,l),pe("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!l.multiple},pe("invalid",s);break;case"textarea":ac(s,l),pe("invalid",s)}ai(n,l),a=null;for(var i in l)if(l.hasOwnProperty(i)){var o=l[i];i==="children"?typeof o=="string"?s.textContent!==o&&(l.suppressHydrationWarning!==!0&&$s(s.textContent,o,e),a=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(l.suppressHydrationWarning!==!0&&$s(s.textContent,o,e),a=["children",""+o]):Jr.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&pe("scroll",s)}switch(n){case"input":As(s),sc(s,l,!0);break;case"textarea":As(s),lc(s);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(s.onclick=ga)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=qd(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=i.createElement(n,{is:s.is}):(e=i.createElement(n),n==="select"&&(i=e,s.multiple?i.multiple=!0:s.size&&(i.size=s.size))):e=i.createElementNS(e,n),e[St]=t,e[ls]=s,jm(e,t,!1,!1),t.stateNode=e;e:{switch(i=li(n,s),n){case"dialog":pe("cancel",e),pe("close",e),a=s;break;case"iframe":case"object":case"embed":pe("load",e),a=s;break;case"video":case"audio":for(a=0;a<Fr.length;a++)pe(Fr[a],e);a=s;break;case"source":pe("error",e),a=s;break;case"img":case"image":case"link":pe("error",e),pe("load",e),a=s;break;case"details":pe("toggle",e),a=s;break;case"input":rc(e,s),a=ei(e,s),pe("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=ve({},s,{value:void 0}),pe("invalid",e);break;case"textarea":ac(e,s),a=ri(e,s),pe("invalid",e);break;default:a=s}ai(n,a),o=a;for(l in o)if(o.hasOwnProperty(l)){var d=o[l];l==="style"?tu(e,d):l==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Zd(e,d)):l==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Xr(e,d):typeof d=="number"&&Xr(e,""+d):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Jr.hasOwnProperty(l)?d!=null&&l==="onScroll"&&pe("scroll",e):d!=null&&Zi(e,l,d,i))}switch(n){case"input":As(e),sc(e,s,!1);break;case"textarea":As(e),lc(e);break;case"option":s.value!=null&&e.setAttribute("value",""+un(s.value));break;case"select":e.multiple=!!s.multiple,l=s.value,l!=null?tr(e,!!s.multiple,l,!1):s.defaultValue!=null&&tr(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=ga)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Oe(t),null;case 6:if(e&&t.stateNode!=null)km(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(M(166));if(n=kn(os.current),kn(Pt.current),Fs(t)){if(s=t.stateNode,n=t.memoizedProps,s[St]=t,(l=s.nodeValue!==n)&&(e=Je,e!==null))switch(e.tag){case 3:$s(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&$s(s.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[St]=t,t.stateNode=s}return Oe(t),null;case 13:if(he(xe),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(fe&&Qe!==null&&t.mode&1&&!(t.flags&128))Bu(),dr(),t.flags|=98560,l=!1;else if(l=Fs(t),s!==null&&s.dehydrated!==null){if(e===null){if(!l)throw Error(M(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(M(317));l[St]=t}else dr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Oe(t),l=!1}else yt!==null&&(zi(yt),yt=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||xe.current&1?Ce===0&&(Ce=3):_o())),t.updateQueue!==null&&(t.flags|=4),Oe(t),null);case 4:return mr(),Ii(e,t),e===null&&ss(t.stateNode.containerInfo),Oe(t),null;case 10:return vo(t.type._context),Oe(t),null;case 17:return Ge(t.type)&&ya(),Oe(t),null;case 19:if(he(xe),l=t.memoizedState,l===null)return Oe(t),null;if(s=(t.flags&128)!==0,i=l.rendering,i===null)if(s)Ir(l,!1);else{if(Ce!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Sa(e),i!==null){for(t.flags|=128,Ir(l,!1),s=i.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)l=n,e=s,l.flags&=14680066,i=l.alternate,i===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,e=i.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return me(xe,xe.current&1|2),t.child}e=e.sibling}l.tail!==null&&je()>hr&&(t.flags|=128,s=!0,Ir(l,!1),t.lanes=4194304)}else{if(!s)if(e=Sa(i),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ir(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!fe)return Oe(t),null}else 2*je()-l.renderingStartTime>hr&&n!==1073741824&&(t.flags|=128,s=!0,Ir(l,!1),t.lanes=4194304);l.isBackwards?(i.sibling=t.child,t.child=i):(n=l.last,n!==null?n.sibling=i:t.child=i,l.last=i)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=je(),t.sibling=null,n=xe.current,me(xe,s?n&1|2:n&1),t):(Oe(t),null);case 22:case 23:return Ro(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Ye&1073741824&&(Oe(t),t.subtreeFlags&6&&(t.flags|=8192)):Oe(t),null;case 24:return null;case 25:return null}throw Error(M(156,t.tag))}function zf(e,t){switch(fo(t),t.tag){case 1:return Ge(t.type)&&ya(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return mr(),he(He),he(Re),ko(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return wo(t),null;case 13:if(he(xe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(M(340));dr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return he(xe),null;case 4:return mr(),null;case 10:return vo(t.type._context),null;case 22:case 23:return Ro(),null;case 24:return null;default:return null}}var Bs=!1,Me=!1,Uf=typeof WeakSet=="function"?WeakSet:Set,B=null;function Zn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Ne(e,t,s)}else n.current=null}function Oi(e,t,n){try{n()}catch(s){Ne(e,t,s)}}var Qc=!1;function Bf(e,t){if(xi=ha,e=Eu(),po(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var a=s.anchorOffset,l=s.focusNode;s=s.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var i=0,o=-1,d=-1,u=0,c=0,p=e,h=null;t:for(;;){for(var w;p!==n||a!==0&&p.nodeType!==3||(o=i+a),p!==l||s!==0&&p.nodeType!==3||(d=i+s),p.nodeType===3&&(i+=p.nodeValue.length),(w=p.firstChild)!==null;)h=p,p=w;for(;;){if(p===e)break t;if(h===n&&++u===a&&(o=i),h===l&&++c===s&&(d=i),(w=p.nextSibling)!==null)break;p=h,h=p.parentNode}p=w}n=o===-1||d===-1?null:{start:o,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(gi={focusedElem:e,selectionRange:n},ha=!1,B=t;B!==null;)if(t=B,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,B=e;else for(;B!==null;){t=B;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var b=m.memoizedProps,N=m.memoizedState,f=t.stateNode,x=f.getSnapshotBeforeUpdate(t.elementType===t.type?b:xt(t.type,b),N);f.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(k){Ne(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,B=e;break}B=t.return}return m=Qc,Qc=!1,m}function Kr(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&Oi(t,n,l)}a=a.next}while(a!==s)}}function Ya(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function Mi(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Sm(e){var t=e.alternate;t!==null&&(e.alternate=null,Sm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[St],delete t[ls],delete t[bi],delete t[kf],delete t[Sf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Cm(e){return e.tag===5||e.tag===3||e.tag===4}function Jc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Cm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ri(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ga));else if(s!==4&&(e=e.child,e!==null))for(Ri(e,t,n),e=e.sibling;e!==null;)Ri(e,t,n),e=e.sibling}function _i(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(_i(e,t,n),e=e.sibling;e!==null;)_i(e,t,n),e=e.sibling}var Ee=null,gt=!1;function Wt(e,t,n){for(n=n.child;n!==null;)Pm(e,t,n),n=n.sibling}function Pm(e,t,n){if(Ct&&typeof Ct.onCommitFiberUnmount=="function")try{Ct.onCommitFiberUnmount(za,n)}catch{}switch(n.tag){case 5:Me||Zn(n,t);case 6:var s=Ee,a=gt;Ee=null,Wt(e,t,n),Ee=s,gt=a,Ee!==null&&(gt?(e=Ee,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ee.removeChild(n.stateNode));break;case 18:Ee!==null&&(gt?(e=Ee,n=n.stateNode,e.nodeType===8?Cl(e.parentNode,n):e.nodeType===1&&Cl(e,n),ts(e)):Cl(Ee,n.stateNode));break;case 4:s=Ee,a=gt,Ee=n.stateNode.containerInfo,gt=!0,Wt(e,t,n),Ee=s,gt=a;break;case 0:case 11:case 14:case 15:if(!Me&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var l=a,i=l.destroy;l=l.tag,i!==void 0&&(l&2||l&4)&&Oi(n,t,i),a=a.next}while(a!==s)}Wt(e,t,n);break;case 1:if(!Me&&(Zn(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(o){Ne(n,t,o)}Wt(e,t,n);break;case 21:Wt(e,t,n);break;case 22:n.mode&1?(Me=(s=Me)||n.memoizedState!==null,Wt(e,t,n),Me=s):Wt(e,t,n);break;default:Wt(e,t,n)}}function Xc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Uf),t.forEach(function(s){var a=Xf.bind(null,e,s);n.has(s)||(n.add(s),s.then(a,a))})}}function ht(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var a=n[s];try{var l=e,i=t,o=i;e:for(;o!==null;){switch(o.tag){case 5:Ee=o.stateNode,gt=!1;break e;case 3:Ee=o.stateNode.containerInfo,gt=!0;break e;case 4:Ee=o.stateNode.containerInfo,gt=!0;break e}o=o.return}if(Ee===null)throw Error(M(160));Pm(l,i,a),Ee=null,gt=!1;var d=a.alternate;d!==null&&(d.return=null),a.return=null}catch(u){Ne(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Dm(t,e),t=t.sibling}function Dm(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ht(t,e),wt(e),s&4){try{Kr(3,e,e.return),Ya(3,e)}catch(b){Ne(e,e.return,b)}try{Kr(5,e,e.return)}catch(b){Ne(e,e.return,b)}}break;case 1:ht(t,e),wt(e),s&512&&n!==null&&Zn(n,n.return);break;case 5:if(ht(t,e),wt(e),s&512&&n!==null&&Zn(n,n.return),e.flags&32){var a=e.stateNode;try{Xr(a,"")}catch(b){Ne(e,e.return,b)}}if(s&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,i=n!==null?n.memoizedProps:l,o=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{o==="input"&&l.type==="radio"&&l.name!=null&&Jd(a,l),li(o,i);var u=li(o,l);for(i=0;i<d.length;i+=2){var c=d[i],p=d[i+1];c==="style"?tu(a,p):c==="dangerouslySetInnerHTML"?Zd(a,p):c==="children"?Xr(a,p):Zi(a,c,p,u)}switch(o){case"input":ti(a,l);break;case"textarea":Xd(a,l);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var w=l.value;w!=null?tr(a,!!l.multiple,w,!1):h!==!!l.multiple&&(l.defaultValue!=null?tr(a,!!l.multiple,l.defaultValue,!0):tr(a,!!l.multiple,l.multiple?[]:"",!1))}a[ls]=l}catch(b){Ne(e,e.return,b)}}break;case 6:if(ht(t,e),wt(e),s&4){if(e.stateNode===null)throw Error(M(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(b){Ne(e,e.return,b)}}break;case 3:if(ht(t,e),wt(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{ts(t.containerInfo)}catch(b){Ne(e,e.return,b)}break;case 4:ht(t,e),wt(e);break;case 13:ht(t,e),wt(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(Oo=je())),s&4&&Xc(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(Me=(u=Me)||c,ht(t,e),Me=u):ht(t,e),wt(e),s&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(B=e,c=e.child;c!==null;){for(p=B=c;B!==null;){switch(h=B,w=h.child,h.tag){case 0:case 11:case 14:case 15:Kr(4,h,h.return);break;case 1:Zn(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){s=h,n=h.return;try{t=s,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(b){Ne(s,n,b)}}break;case 5:Zn(h,h.return);break;case 22:if(h.memoizedState!==null){Zc(p);continue}}w!==null?(w.return=h,B=w):Zc(p)}c=c.sibling}e:for(c=null,p=e;;){if(p.tag===5){if(c===null){c=p;try{a=p.stateNode,u?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(o=p.stateNode,d=p.memoizedProps.style,i=d!=null&&d.hasOwnProperty("display")?d.display:null,o.style.display=eu("display",i))}catch(b){Ne(e,e.return,b)}}}else if(p.tag===6){if(c===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(b){Ne(e,e.return,b)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;c===p&&(c=null),p=p.return}c===p&&(c=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:ht(t,e),wt(e),s&4&&Xc(e);break;case 21:break;default:ht(t,e),wt(e)}}function wt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Cm(n)){var s=n;break e}n=n.return}throw Error(M(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(Xr(a,""),s.flags&=-33);var l=Jc(e);_i(e,l,a);break;case 3:case 4:var i=s.stateNode.containerInfo,o=Jc(e);Ri(e,o,i);break;default:throw Error(M(161))}}catch(d){Ne(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Vf(e,t,n){B=e,Em(e)}function Em(e,t,n){for(var s=(e.mode&1)!==0;B!==null;){var a=B,l=a.child;if(a.tag===22&&s){var i=a.memoizedState!==null||Bs;if(!i){var o=a.alternate,d=o!==null&&o.memoizedState!==null||Me;o=Bs;var u=Me;if(Bs=i,(Me=d)&&!u)for(B=a;B!==null;)i=B,d=i.child,i.tag===22&&i.memoizedState!==null?ed(a):d!==null?(d.return=i,B=d):ed(a);for(;l!==null;)B=l,Em(l),l=l.sibling;B=a,Bs=o,Me=u}qc(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,B=l):qc(e)}}function qc(e){for(;B!==null;){var t=B;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Me||Ya(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Me)if(n===null)s.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:xt(t.type,n.memoizedProps);s.componentDidUpdate(a,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&_c(t,l,s);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}_c(t,i,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var p=c.dehydrated;p!==null&&ts(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}Me||t.flags&512&&Mi(t)}catch(h){Ne(t,t.return,h)}}if(t===e){B=null;break}if(n=t.sibling,n!==null){n.return=t.return,B=n;break}B=t.return}}function Zc(e){for(;B!==null;){var t=B;if(t===e){B=null;break}var n=t.sibling;if(n!==null){n.return=t.return,B=n;break}B=t.return}}function ed(e){for(;B!==null;){var t=B;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ya(4,t)}catch(d){Ne(t,n,d)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(d){Ne(t,a,d)}}var l=t.return;try{Mi(t)}catch(d){Ne(t,l,d)}break;case 5:var i=t.return;try{Mi(t)}catch(d){Ne(t,i,d)}}}catch(d){Ne(t,t.return,d)}if(t===e){B=null;break}var o=t.sibling;if(o!==null){o.return=t.return,B=o;break}B=t.return}}var Hf=Math.ceil,Da=Ut.ReactCurrentDispatcher,To=Ut.ReactCurrentOwner,it=Ut.ReactCurrentBatchConfig,ne=0,De=null,ke=null,Ae=0,Ye=0,er=hn(0),Ce=0,ms=null,Tn=0,Qa=0,Io=0,Yr=null,Be=null,Oo=0,hr=1/0,It=null,Ea=!1,Li=null,ln=null,Vs=!1,Zt=null,Aa=0,Qr=0,$i=null,aa=-1,la=0;function $e(){return ne&6?je():aa!==-1?aa:aa=je()}function on(e){return e.mode&1?ne&2&&Ae!==0?Ae&-Ae:Pf.transition!==null?(la===0&&(la=pu()),la):(e=oe,e!==0||(e=window.event,e=e===void 0?16:bu(e.type)),e):1}function bt(e,t,n,s){if(50<Qr)throw Qr=0,$i=null,Error(M(185));gs(e,n,s),(!(ne&2)||e!==De)&&(e===De&&(!(ne&2)&&(Qa|=n),Ce===4&&Xt(e,Ae)),We(e,s),n===1&&ne===0&&!(t.mode&1)&&(hr=je()+500,Ga&&fn()))}function We(e,t){var n=e.callbackNode;Ch(e,t);var s=pa(e,e===De?Ae:0);if(s===0)n!==null&&cc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&cc(n),t===1)e.tag===0?Cf(td.bind(null,e)):Fu(td.bind(null,e)),jf(function(){!(ne&6)&&fn()}),n=null;else{switch(hu(s)){case 1:n=so;break;case 4:n=uu;break;case 16:n=ma;break;case 536870912:n=mu;break;default:n=ma}n=Lm(n,Am.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Am(e,t){if(aa=-1,la=0,ne&6)throw Error(M(327));var n=e.callbackNode;if(lr()&&e.callbackNode!==n)return null;var s=pa(e,e===De?Ae:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Ta(e,s);else{t=s;var a=ne;ne|=2;var l=Im();(De!==e||Ae!==t)&&(It=null,hr=je()+500,Cn(e,t));do try{Kf();break}catch(o){Tm(e,o)}while(!0);yo(),Da.current=l,ne=a,ke!==null?t=0:(De=null,Ae=0,t=Ce)}if(t!==0){if(t===2&&(a=ui(e),a!==0&&(s=a,t=Fi(e,a))),t===1)throw n=ms,Cn(e,0),Xt(e,s),We(e,je()),n;if(t===6)Xt(e,s);else{if(a=e.current.alternate,!(s&30)&&!Gf(a)&&(t=Ta(e,s),t===2&&(l=ui(e),l!==0&&(s=l,t=Fi(e,l))),t===1))throw n=ms,Cn(e,0),Xt(e,s),We(e,je()),n;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(M(345));case 2:bn(e,Be,It);break;case 3:if(Xt(e,s),(s&130023424)===s&&(t=Oo+500-je(),10<t)){if(pa(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){$e(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=vi(bn.bind(null,e,Be,It),t);break}bn(e,Be,It);break;case 4:if(Xt(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var i=31-vt(s);l=1<<i,i=t[i],i>a&&(a=i),s&=~l}if(s=a,s=je()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Hf(s/1960))-s,10<s){e.timeoutHandle=vi(bn.bind(null,e,Be,It),s);break}bn(e,Be,It);break;case 5:bn(e,Be,It);break;default:throw Error(M(329))}}}return We(e,je()),e.callbackNode===n?Am.bind(null,e):null}function Fi(e,t){var n=Yr;return e.current.memoizedState.isDehydrated&&(Cn(e,t).flags|=256),e=Ta(e,t),e!==2&&(t=Be,Be=n,t!==null&&zi(t)),e}function zi(e){Be===null?Be=e:Be.push.apply(Be,e)}function Gf(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var a=n[s],l=a.getSnapshot;a=a.value;try{if(!jt(l(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Xt(e,t){for(t&=~Io,t&=~Qa,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-vt(t),s=1<<n;e[n]=-1,t&=~s}}function td(e){if(ne&6)throw Error(M(327));lr();var t=pa(e,0);if(!(t&1))return We(e,je()),null;var n=Ta(e,t);if(e.tag!==0&&n===2){var s=ui(e);s!==0&&(t=s,n=Fi(e,s))}if(n===1)throw n=ms,Cn(e,0),Xt(e,t),We(e,je()),n;if(n===6)throw Error(M(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bn(e,Be,It),We(e,je()),null}function Mo(e,t){var n=ne;ne|=1;try{return e(t)}finally{ne=n,ne===0&&(hr=je()+500,Ga&&fn())}}function In(e){Zt!==null&&Zt.tag===0&&!(ne&6)&&lr();var t=ne;ne|=1;var n=it.transition,s=oe;try{if(it.transition=null,oe=1,e)return e()}finally{oe=s,it.transition=n,ne=t,!(ne&6)&&fn()}}function Ro(){Ye=er.current,he(er)}function Cn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Nf(n)),ke!==null)for(n=ke.return;n!==null;){var s=n;switch(fo(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&ya();break;case 3:mr(),he(He),he(Re),ko();break;case 5:wo(s);break;case 4:mr();break;case 13:he(xe);break;case 19:he(xe);break;case 10:vo(s.type._context);break;case 22:case 23:Ro()}n=n.return}if(De=e,ke=e=cn(e.current,null),Ae=Ye=t,Ce=0,ms=null,Io=Qa=Tn=0,Be=Yr=null,wn!==null){for(t=0;t<wn.length;t++)if(n=wn[t],s=n.interleaved,s!==null){n.interleaved=null;var a=s.next,l=n.pending;if(l!==null){var i=l.next;l.next=a,s.next=i}n.pending=s}wn=null}return e}function Tm(e,t){do{var n=ke;try{if(yo(),na.current=Pa,Ca){for(var s=ge.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Ca=!1}if(An=0,Pe=Se=ge=null,Wr=!1,cs=0,To.current=null,n===null||n.return===null){Ce=1,ms=t,ke=null;break}e:{var l=e,i=n.return,o=n,d=t;if(t=Ae,o.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var u=d,c=o,p=c.tag;if(!(c.mode&1)&&(p===0||p===11||p===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var w=Bc(i);if(w!==null){w.flags&=-257,Vc(w,i,o,l,t),w.mode&1&&Uc(l,u,t),t=w,d=u;var m=t.updateQueue;if(m===null){var b=new Set;b.add(d),t.updateQueue=b}else m.add(d);break e}else{if(!(t&1)){Uc(l,u,t),_o();break e}d=Error(M(426))}}else if(fe&&o.mode&1){var N=Bc(i);if(N!==null){!(N.flags&65536)&&(N.flags|=256),Vc(N,i,o,l,t),xo(pr(d,o));break e}}l=d=pr(d,o),Ce!==4&&(Ce=2),Yr===null?Yr=[l]:Yr.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var f=hm(l,d,t);Rc(l,f);break e;case 1:o=d;var x=l.type,y=l.stateNode;if(!(l.flags&128)&&(typeof x.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ln===null||!ln.has(y)))){l.flags|=65536,t&=-t,l.lanes|=t;var k=fm(l,o,t);Rc(l,k);break e}}l=l.return}while(l!==null)}Mm(n)}catch(D){t=D,ke===n&&n!==null&&(ke=n=n.return);continue}break}while(!0)}function Im(){var e=Da.current;return Da.current=Pa,e===null?Pa:e}function _o(){(Ce===0||Ce===3||Ce===2)&&(Ce=4),De===null||!(Tn&268435455)&&!(Qa&268435455)||Xt(De,Ae)}function Ta(e,t){var n=ne;ne|=2;var s=Im();(De!==e||Ae!==t)&&(It=null,Cn(e,t));do try{Wf();break}catch(a){Tm(e,a)}while(!0);if(yo(),ne=n,Da.current=s,ke!==null)throw Error(M(261));return De=null,Ae=0,Ce}function Wf(){for(;ke!==null;)Om(ke)}function Kf(){for(;ke!==null&&!gh();)Om(ke)}function Om(e){var t=_m(e.alternate,e,Ye);e.memoizedProps=e.pendingProps,t===null?Mm(e):ke=t,To.current=null}function Mm(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=zf(n,t),n!==null){n.flags&=32767,ke=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ce=6,ke=null;return}}else if(n=Ff(n,t,Ye),n!==null){ke=n;return}if(t=t.sibling,t!==null){ke=t;return}ke=t=e}while(t!==null);Ce===0&&(Ce=5)}function bn(e,t,n){var s=oe,a=it.transition;try{it.transition=null,oe=1,Yf(e,t,n,s)}finally{it.transition=a,oe=s}return null}function Yf(e,t,n,s){do lr();while(Zt!==null);if(ne&6)throw Error(M(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(M(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(Ph(e,l),e===De&&(ke=De=null,Ae=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Vs||(Vs=!0,Lm(ma,function(){return lr(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=it.transition,it.transition=null;var i=oe;oe=1;var o=ne;ne|=4,To.current=null,Bf(e,n),Dm(n,e),hf(gi),ha=!!xi,gi=xi=null,e.current=n,Vf(n),yh(),ne=o,oe=i,it.transition=l}else e.current=n;if(Vs&&(Vs=!1,Zt=e,Aa=a),l=e.pendingLanes,l===0&&(ln=null),Nh(n.stateNode),We(e,je()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],s(a.value,{componentStack:a.stack,digest:a.digest});if(Ea)throw Ea=!1,e=Li,Li=null,e;return Aa&1&&e.tag!==0&&lr(),l=e.pendingLanes,l&1?e===$i?Qr++:(Qr=0,$i=e):Qr=0,fn(),null}function lr(){if(Zt!==null){var e=hu(Aa),t=it.transition,n=oe;try{if(it.transition=null,oe=16>e?16:e,Zt===null)var s=!1;else{if(e=Zt,Zt=null,Aa=0,ne&6)throw Error(M(331));var a=ne;for(ne|=4,B=e.current;B!==null;){var l=B,i=l.child;if(B.flags&16){var o=l.deletions;if(o!==null){for(var d=0;d<o.length;d++){var u=o[d];for(B=u;B!==null;){var c=B;switch(c.tag){case 0:case 11:case 15:Kr(8,c,l)}var p=c.child;if(p!==null)p.return=c,B=p;else for(;B!==null;){c=B;var h=c.sibling,w=c.return;if(Sm(c),c===u){B=null;break}if(h!==null){h.return=w,B=h;break}B=w}}}var m=l.alternate;if(m!==null){var b=m.child;if(b!==null){m.child=null;do{var N=b.sibling;b.sibling=null,b=N}while(b!==null)}}B=l}}if(l.subtreeFlags&2064&&i!==null)i.return=l,B=i;else e:for(;B!==null;){if(l=B,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Kr(9,l,l.return)}var f=l.sibling;if(f!==null){f.return=l.return,B=f;break e}B=l.return}}var x=e.current;for(B=x;B!==null;){i=B;var y=i.child;if(i.subtreeFlags&2064&&y!==null)y.return=i,B=y;else e:for(i=x;B!==null;){if(o=B,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Ya(9,o)}}catch(D){Ne(o,o.return,D)}if(o===i){B=null;break e}var k=o.sibling;if(k!==null){k.return=o.return,B=k;break e}B=o.return}}if(ne=a,fn(),Ct&&typeof Ct.onPostCommitFiberRoot=="function")try{Ct.onPostCommitFiberRoot(za,e)}catch{}s=!0}return s}finally{oe=n,it.transition=t}}return!1}function nd(e,t,n){t=pr(n,t),t=hm(e,t,1),e=an(e,t,1),t=$e(),e!==null&&(gs(e,1,t),We(e,t))}function Ne(e,t,n){if(e.tag===3)nd(e,e,n);else for(;t!==null;){if(t.tag===3){nd(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ln===null||!ln.has(s))){e=pr(n,e),e=fm(t,e,1),t=an(t,e,1),e=$e(),t!==null&&(gs(t,1,e),We(t,e));break}}t=t.return}}function Qf(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=$e(),e.pingedLanes|=e.suspendedLanes&n,De===e&&(Ae&n)===n&&(Ce===4||Ce===3&&(Ae&130023424)===Ae&&500>je()-Oo?Cn(e,0):Io|=n),We(e,t)}function Rm(e,t){t===0&&(e.mode&1?(t=Os,Os<<=1,!(Os&130023424)&&(Os=4194304)):t=1);var n=$e();e=Ft(e,t),e!==null&&(gs(e,t,n),We(e,n))}function Jf(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Rm(e,n)}function Xf(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(M(314))}s!==null&&s.delete(t),Rm(e,n)}var _m;_m=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||He.current)Ve=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ve=!1,$f(e,t,n);Ve=!!(e.flags&131072)}else Ve=!1,fe&&t.flags&1048576&&zu(t,Na,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;sa(e,t),e=t.pendingProps;var a=cr(t,Re.current);ar(t,n),a=Co(null,t,s,e,a,n);var l=Po();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ge(s)?(l=!0,va(t)):l=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,No(t),a.updater=Ka,t.stateNode=a,a._reactInternals=t,Ci(t,s,e,n),t=Ei(null,t,s,!0,l,n)):(t.tag=0,fe&&l&&ho(t),Le(null,t,a,n),t=t.child),t;case 16:s=t.elementType;e:{switch(sa(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=Zf(s),e=xt(s,e),a){case 0:t=Di(null,t,s,e,n);break e;case 1:t=Wc(null,t,s,e,n);break e;case 11:t=Hc(null,t,s,e,n);break e;case 14:t=Gc(null,t,s,xt(s.type,e),n);break e}throw Error(M(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:xt(s,a),Di(e,t,s,a,n);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:xt(s,a),Wc(e,t,s,a,n);case 3:e:{if(vm(t),e===null)throw Error(M(387));s=t.pendingProps,l=t.memoizedState,a=l.element,Wu(e,t),ka(t,s,null,n);var i=t.memoizedState;if(s=i.element,l.isDehydrated)if(l={element:s,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){a=pr(Error(M(423)),t),t=Kc(e,t,s,n,a);break e}else if(s!==a){a=pr(Error(M(424)),t),t=Kc(e,t,s,n,a);break e}else for(Qe=sn(t.stateNode.containerInfo.firstChild),Je=t,fe=!0,yt=null,n=Hu(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(dr(),s===a){t=zt(e,t,n);break e}Le(e,t,s,n)}t=t.child}return t;case 5:return Ku(t),e===null&&wi(t),s=t.type,a=t.pendingProps,l=e!==null?e.memoizedProps:null,i=a.children,yi(s,a)?i=null:l!==null&&yi(s,l)&&(t.flags|=32),ym(e,t),Le(e,t,i,n),t.child;case 6:return e===null&&wi(t),null;case 13:return bm(e,t,n);case 4:return jo(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=ur(t,null,s,n):Le(e,t,s,n),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:xt(s,a),Hc(e,t,s,a,n);case 7:return Le(e,t,t.pendingProps,n),t.child;case 8:return Le(e,t,t.pendingProps.children,n),t.child;case 12:return Le(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,l=t.memoizedProps,i=a.value,me(ja,s._currentValue),s._currentValue=i,l!==null)if(jt(l.value,i)){if(l.children===a.children&&!He.current){t=zt(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var o=l.dependencies;if(o!==null){i=l.child;for(var d=o.firstContext;d!==null;){if(d.context===s){if(l.tag===1){d=_t(-1,n&-n),d.tag=2;var u=l.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?d.next=d:(d.next=c.next,c.next=d),u.pending=d}}l.lanes|=n,d=l.alternate,d!==null&&(d.lanes|=n),ki(l.return,n,t),o.lanes|=n;break}d=d.next}}else if(l.tag===10)i=l.type===t.type?null:l.child;else if(l.tag===18){if(i=l.return,i===null)throw Error(M(341));i.lanes|=n,o=i.alternate,o!==null&&(o.lanes|=n),ki(i,n,t),i=l.sibling}else i=l.child;if(i!==null)i.return=l;else for(i=l;i!==null;){if(i===t){i=null;break}if(l=i.sibling,l!==null){l.return=i.return,i=l;break}i=i.return}l=i}Le(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,ar(t,n),a=ot(a),s=s(a),t.flags|=1,Le(e,t,s,n),t.child;case 14:return s=t.type,a=xt(s,t.pendingProps),a=xt(s.type,a),Gc(e,t,s,a,n);case 15:return xm(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:xt(s,a),sa(e,t),t.tag=1,Ge(s)?(e=!0,va(t)):e=!1,ar(t,n),pm(t,s,a),Ci(t,s,a,n),Ei(null,t,s,!0,e,n);case 19:return Nm(e,t,n);case 22:return gm(e,t,n)}throw Error(M(156,t.tag))};function Lm(e,t){return du(e,t)}function qf(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lt(e,t,n,s){return new qf(e,t,n,s)}function Lo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Zf(e){if(typeof e=="function")return Lo(e)?1:0;if(e!=null){if(e=e.$$typeof,e===to)return 11;if(e===no)return 14}return 2}function cn(e,t){var n=e.alternate;return n===null?(n=lt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ia(e,t,n,s,a,l){var i=2;if(s=e,typeof e=="function")Lo(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Hn:return Pn(n.children,a,l,t);case eo:i=8,a|=8;break;case Jl:return e=lt(12,n,t,a|2),e.elementType=Jl,e.lanes=l,e;case Xl:return e=lt(13,n,t,a),e.elementType=Xl,e.lanes=l,e;case ql:return e=lt(19,n,t,a),e.elementType=ql,e.lanes=l,e;case Kd:return Ja(n,a,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Gd:i=10;break e;case Wd:i=9;break e;case to:i=11;break e;case no:i=14;break e;case Kt:i=16,s=null;break e}throw Error(M(130,e==null?e:typeof e,""))}return t=lt(i,n,t,a),t.elementType=e,t.type=s,t.lanes=l,t}function Pn(e,t,n,s){return e=lt(7,e,s,t),e.lanes=n,e}function Ja(e,t,n,s){return e=lt(22,e,s,t),e.elementType=Kd,e.lanes=n,e.stateNode={isHidden:!1},e}function Ml(e,t,n){return e=lt(6,e,null,t),e.lanes=n,e}function Rl(e,t,n){return t=lt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ex(e,t,n,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fl(0),this.expirationTimes=fl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fl(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function $o(e,t,n,s,a,l,i,o,d){return e=new ex(e,t,n,o,d),t===1?(t=1,l===!0&&(t|=8)):t=0,l=lt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},No(l),e}function tx(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vn,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function $m(e){if(!e)return mn;e=e._reactInternals;e:{if(Rn(e)!==e||e.tag!==1)throw Error(M(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ge(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(M(171))}if(e.tag===1){var n=e.type;if(Ge(n))return $u(e,n,t)}return t}function Fm(e,t,n,s,a,l,i,o,d){return e=$o(n,s,!0,e,a,l,i,o,d),e.context=$m(null),n=e.current,s=$e(),a=on(n),l=_t(s,a),l.callback=t??null,an(n,l,a),e.current.lanes=a,gs(e,a,s),We(e,s),e}function Xa(e,t,n,s){var a=t.current,l=$e(),i=on(a);return n=$m(n),t.context===null?t.context=n:t.pendingContext=n,t=_t(l,i),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=an(a,t,i),e!==null&&(bt(e,a,i,l),ta(e,a,i)),i}function Ia(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function rd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Fo(e,t){rd(e,t),(e=e.alternate)&&rd(e,t)}function nx(){return null}var zm=typeof reportError=="function"?reportError:function(e){console.error(e)};function zo(e){this._internalRoot=e}qa.prototype.render=zo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(M(409));Xa(e,t,null,null)};qa.prototype.unmount=zo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;In(function(){Xa(null,e,null,null)}),t[$t]=null}};function qa(e){this._internalRoot=e}qa.prototype.unstable_scheduleHydration=function(e){if(e){var t=gu();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Jt.length&&t!==0&&t<Jt[n].priority;n++);Jt.splice(n,0,e),n===0&&vu(e)}};function Uo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Za(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function sd(){}function rx(e,t,n,s,a){if(a){if(typeof s=="function"){var l=s;s=function(){var u=Ia(i);l.call(u)}}var i=Fm(t,s,e,0,null,!1,!1,"",sd);return e._reactRootContainer=i,e[$t]=i.current,ss(e.nodeType===8?e.parentNode:e),In(),i}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var o=s;s=function(){var u=Ia(d);o.call(u)}}var d=$o(e,0,!1,null,null,!1,!1,"",sd);return e._reactRootContainer=d,e[$t]=d.current,ss(e.nodeType===8?e.parentNode:e),In(function(){Xa(t,d,n,s)}),d}function el(e,t,n,s,a){var l=n._reactRootContainer;if(l){var i=l;if(typeof a=="function"){var o=a;a=function(){var d=Ia(i);o.call(d)}}Xa(t,i,e,a)}else i=rx(n,t,e,a,s);return Ia(i)}fu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=$r(t.pendingLanes);n!==0&&(ao(t,n|1),We(t,je()),!(ne&6)&&(hr=je()+500,fn()))}break;case 13:In(function(){var s=Ft(e,1);if(s!==null){var a=$e();bt(s,e,1,a)}}),Fo(e,1)}};lo=function(e){if(e.tag===13){var t=Ft(e,134217728);if(t!==null){var n=$e();bt(t,e,134217728,n)}Fo(e,134217728)}};xu=function(e){if(e.tag===13){var t=on(e),n=Ft(e,t);if(n!==null){var s=$e();bt(n,e,t,s)}Fo(e,t)}};gu=function(){return oe};yu=function(e,t){var n=oe;try{return oe=e,t()}finally{oe=n}};oi=function(e,t,n){switch(t){case"input":if(ti(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var a=Ha(s);if(!a)throw Error(M(90));Qd(s),ti(s,a)}}}break;case"textarea":Xd(e,n);break;case"select":t=n.value,t!=null&&tr(e,!!n.multiple,t,!1)}};su=Mo;au=In;var sx={usingClientEntryPoint:!1,Events:[vs,Yn,Ha,nu,ru,Mo]},Or={findFiberByHostInstance:jn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ax={bundleType:Or.bundleType,version:Or.version,rendererPackageName:Or.rendererPackageName,rendererConfig:Or.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ut.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ou(e),e===null?null:e.stateNode},findFiberByHostInstance:Or.findFiberByHostInstance||nx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hs.isDisabled&&Hs.supportsFiber)try{za=Hs.inject(ax),Ct=Hs}catch{}}qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sx;qe.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Uo(t))throw Error(M(200));return tx(e,t,null,n)};qe.createRoot=function(e,t){if(!Uo(e))throw Error(M(299));var n=!1,s="",a=zm;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=$o(e,1,!1,null,null,n,!1,s,a),e[$t]=t.current,ss(e.nodeType===8?e.parentNode:e),new zo(t)};qe.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(M(188)):(e=Object.keys(e).join(","),Error(M(268,e)));return e=ou(t),e=e===null?null:e.stateNode,e};qe.flushSync=function(e){return In(e)};qe.hydrate=function(e,t,n){if(!Za(t))throw Error(M(200));return el(null,e,t,!0,n)};qe.hydrateRoot=function(e,t,n){if(!Uo(e))throw Error(M(405));var s=n!=null&&n.hydratedSources||null,a=!1,l="",i=zm;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=Fm(t,null,e,1,n??null,a,!1,l,i),e[$t]=t.current,ss(e),s)for(e=0;e<s.length;e++)n=s[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new qa(t)};qe.render=function(e,t,n){if(!Za(t))throw Error(M(200));return el(null,e,t,!1,n)};qe.unmountComponentAtNode=function(e){if(!Za(e))throw Error(M(40));return e._reactRootContainer?(In(function(){el(null,null,e,!1,function(){e._reactRootContainer=null,e[$t]=null})}),!0):!1};qe.unstable_batchedUpdates=Mo;qe.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!Za(n))throw Error(M(200));if(e==null||e._reactInternals===void 0)throw Error(M(38));return el(e,t,n,!1,s)};qe.version="18.3.1-next-f1338f8080-20240426";function Um(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Um)}catch(e){console.error(e)}}Um(),Ud.exports=qe;var lx=Ud.exports,ad=lx;Yl.createRoot=ad.createRoot,Yl.hydrateRoot=ad.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ps(){return ps=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ps.apply(this,arguments)}var en;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(en||(en={}));const ld="popstate";function ix(e){e===void 0&&(e={});function t(s,a){let{pathname:l,search:i,hash:o}=s.location;return Ui("",{pathname:l,search:i,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:Oa(a)}return cx(t,n,null,e)}function ye(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Bo(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function ox(){return Math.random().toString(36).substr(2,8)}function id(e,t){return{usr:e.state,key:e.key,idx:t}}function Ui(e,t,n,s){return n===void 0&&(n=null),ps({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?vr(t):t,{state:n,key:t&&t.key||s||ox()})}function Oa(e){let{pathname:t="/",search:n="",hash:s=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function vr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function cx(e,t,n,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:l=!1}=s,i=a.history,o=en.Pop,d=null,u=c();u==null&&(u=0,i.replaceState(ps({},i.state,{idx:u}),""));function c(){return(i.state||{idx:null}).idx}function p(){o=en.Pop;let N=c(),f=N==null?null:N-u;u=N,d&&d({action:o,location:b.location,delta:f})}function h(N,f){o=en.Push;let x=Ui(b.location,N,f);u=c()+1;let y=id(x,u),k=b.createHref(x);try{i.pushState(y,"",k)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;a.location.assign(k)}l&&d&&d({action:o,location:b.location,delta:1})}function w(N,f){o=en.Replace;let x=Ui(b.location,N,f);u=c();let y=id(x,u),k=b.createHref(x);i.replaceState(y,"",k),l&&d&&d({action:o,location:b.location,delta:0})}function m(N){let f=a.location.origin!=="null"?a.location.origin:a.location.href,x=typeof N=="string"?N:Oa(N);return x=x.replace(/ $/,"%20"),ye(f,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,f)}let b={get action(){return o},get location(){return e(a,i)},listen(N){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(ld,p),d=N,()=>{a.removeEventListener(ld,p),d=null}},createHref(N){return t(a,N)},createURL:m,encodeLocation(N){let f=m(N);return{pathname:f.pathname,search:f.search,hash:f.hash}},push:h,replace:w,go(N){return i.go(N)}};return b}var od;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(od||(od={}));function dx(e,t,n){return n===void 0&&(n="/"),ux(e,t,n)}function ux(e,t,n,s){let a=typeof t=="string"?vr(t):t,l=fr(a.pathname||"/",n);if(l==null)return null;let i=Bm(e);mx(i);let o=null;for(let d=0;o==null&&d<i.length;++d){let u=wx(l);o=Nx(i[d],u)}return o}function Bm(e,t,n,s){t===void 0&&(t=[]),n===void 0&&(n=[]),s===void 0&&(s="");let a=(l,i,o)=>{let d={relativePath:o===void 0?l.path||"":o,caseSensitive:l.caseSensitive===!0,childrenIndex:i,route:l};d.relativePath.startsWith("/")&&(ye(d.relativePath.startsWith(s),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(s.length));let u=dn([s,d.relativePath]),c=n.concat(d);l.children&&l.children.length>0&&(ye(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Bm(l.children,t,c,u)),!(l.path==null&&!l.index)&&t.push({path:u,score:vx(u,l.index),routesMeta:c})};return e.forEach((l,i)=>{var o;if(l.path===""||!((o=l.path)!=null&&o.includes("?")))a(l,i);else for(let d of Vm(l.path))a(l,i,d)}),t}function Vm(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(s.length===0)return a?[l,""]:[l];let i=Vm(s.join("/")),o=[];return o.push(...i.map(d=>d===""?l:[l,d].join("/"))),a&&o.push(...i),o.map(d=>e.startsWith("/")&&d===""?"/":d)}function mx(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:bx(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const px=/^:[\w-]+$/,hx=3,fx=2,xx=1,gx=10,yx=-2,cd=e=>e==="*";function vx(e,t){let n=e.split("/"),s=n.length;return n.some(cd)&&(s+=yx),t&&(s+=fx),n.filter(a=>!cd(a)).reduce((a,l)=>a+(px.test(l)?hx:l===""?xx:gx),s)}function bx(e,t){return e.length===t.length&&e.slice(0,-1).every((s,a)=>s===t[a])?e[e.length-1]-t[t.length-1]:0}function Nx(e,t,n){let{routesMeta:s}=e,a={},l="/",i=[];for(let o=0;o<s.length;++o){let d=s[o],u=o===s.length-1,c=l==="/"?t:t.slice(l.length)||"/",p=Bi({path:d.relativePath,caseSensitive:d.caseSensitive,end:u},c),h=d.route;if(!p)return null;Object.assign(a,p.params),i.push({params:a,pathname:dn([l,p.pathname]),pathnameBase:Dx(dn([l,p.pathnameBase])),route:h}),p.pathnameBase!=="/"&&(l=dn([l,p.pathnameBase]))}return i}function Bi(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=jx(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let l=a[0],i=l.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:s.reduce((u,c,p)=>{let{paramName:h,isOptional:w}=c;if(h==="*"){let b=o[p]||"";i=l.slice(0,l.length-b.length).replace(/(.)\/+$/,"$1")}const m=o[p];return w&&!m?u[h]=void 0:u[h]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:l,pathnameBase:i,pattern:e}}function jx(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Bo(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,d)=>(s.push({paramName:o,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function wx(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Bo(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function fr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}const kx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Sx=e=>kx.test(e);function Cx(e,t){t===void 0&&(t="/");let{pathname:n,search:s="",hash:a=""}=typeof e=="string"?vr(e):e,l;if(n)if(Sx(n))l=n;else{if(n.includes("//")){let i=n;n=n.replace(/\/\/+/g,"/"),Bo(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+n))}n.startsWith("/")?l=dd(n.substring(1),"/"):l=dd(n,t)}else l=t;return{pathname:l,search:Ex(s),hash:Ax(a)}}function dd(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function _l(e,t,n,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Px(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Vo(e,t){let n=Px(e);return t?n.map((s,a)=>a===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function Ho(e,t,n,s){s===void 0&&(s=!1);let a;typeof e=="string"?a=vr(e):(a=ps({},e),ye(!a.pathname||!a.pathname.includes("?"),_l("?","pathname","search",a)),ye(!a.pathname||!a.pathname.includes("#"),_l("#","pathname","hash",a)),ye(!a.search||!a.search.includes("#"),_l("#","search","hash",a)));let l=e===""||a.pathname==="",i=l?"/":a.pathname,o;if(i==null)o=n;else{let p=t.length-1;if(!s&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),p-=1;a.pathname=h.join("/")}o=p>=0?t[p]:"/"}let d=Cx(a,o),u=i&&i!=="/"&&i.endsWith("/"),c=(l||i===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(u||c)&&(d.pathname+="/"),d}const dn=e=>e.join("/").replace(/\/\/+/g,"/"),Dx=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Ex=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Ax=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Tx(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Hm=["post","put","patch","delete"];new Set(Hm);const Ix=["get",...Hm];new Set(Ix);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hs(){return hs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},hs.apply(this,arguments)}const tl=g.createContext(null),Gm=g.createContext(null),Bt=g.createContext(null),nl=g.createContext(null),Dt=g.createContext({outlet:null,matches:[],isDataRoute:!1}),Wm=g.createContext(null);function Ox(e,t){let{relative:n}=t===void 0?{}:t;br()||ye(!1);let{basename:s,navigator:a}=g.useContext(Bt),{hash:l,pathname:i,search:o}=rl(e,{relative:n}),d=i;return s!=="/"&&(d=i==="/"?s:dn([s,i])),a.createHref({pathname:d,search:o,hash:l})}function br(){return g.useContext(nl)!=null}function xn(){return br()||ye(!1),g.useContext(nl).location}function Km(e){g.useContext(Bt).static||g.useLayoutEffect(e)}function dt(){let{isDataRoute:e}=g.useContext(Dt);return e?Yx():Mx()}function Mx(){br()||ye(!1);let e=g.useContext(tl),{basename:t,future:n,navigator:s}=g.useContext(Bt),{matches:a}=g.useContext(Dt),{pathname:l}=xn(),i=JSON.stringify(Vo(a,n.v7_relativeSplatPath)),o=g.useRef(!1);return Km(()=>{o.current=!0}),g.useCallback(function(u,c){if(c===void 0&&(c={}),!o.current)return;if(typeof u=="number"){s.go(u);return}let p=Ho(u,JSON.parse(i),l,c.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:dn([t,p.pathname])),(c.replace?s.replace:s.push)(p,c.state,c)},[t,s,i,l,e])}const Rx=g.createContext(null);function _x(e){let t=g.useContext(Dt).outlet;return t&&g.createElement(Rx.Provider,{value:e},t)}function Ym(){let{matches:e}=g.useContext(Dt),t=e[e.length-1];return t?t.params:{}}function rl(e,t){let{relative:n}=t===void 0?{}:t,{future:s}=g.useContext(Bt),{matches:a}=g.useContext(Dt),{pathname:l}=xn(),i=JSON.stringify(Vo(a,s.v7_relativeSplatPath));return g.useMemo(()=>Ho(e,JSON.parse(i),l,n==="path"),[e,i,l,n])}function Lx(e,t){return $x(e,t)}function $x(e,t,n,s){br()||ye(!1);let{navigator:a}=g.useContext(Bt),{matches:l}=g.useContext(Dt),i=l[l.length-1],o=i?i.params:{};i&&i.pathname;let d=i?i.pathnameBase:"/";i&&i.route;let u=xn(),c;if(t){var p;let N=typeof t=="string"?vr(t):t;d==="/"||(p=N.pathname)!=null&&p.startsWith(d)||ye(!1),c=N}else c=u;let h=c.pathname||"/",w=h;if(d!=="/"){let N=d.replace(/^\//,"").split("/");w="/"+h.replace(/^\//,"").split("/").slice(N.length).join("/")}let m=dx(e,{pathname:w}),b=Vx(m&&m.map(N=>Object.assign({},N,{params:Object.assign({},o,N.params),pathname:dn([d,a.encodeLocation?a.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?d:dn([d,a.encodeLocation?a.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),l,n,s);return t&&b?g.createElement(nl.Provider,{value:{location:hs({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:en.Pop}},b):b}function Fx(){let e=Kx(),t=Tx(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),n?g.createElement("pre",{style:a},n):null,null)}const zx=g.createElement(Fx,null);class Ux extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?g.createElement(Dt.Provider,{value:this.props.routeContext},g.createElement(Wm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Bx(e){let{routeContext:t,match:n,children:s}=e,a=g.useContext(tl);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),g.createElement(Dt.Provider,{value:t},s)}function Vx(e,t,n,s){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),s===void 0&&(s=null),e==null){var l;if(!n)return null;if(n.errors)e=n.matches;else if((l=s)!=null&&l.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,o=(a=n)==null?void 0:a.errors;if(o!=null){let c=i.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);c>=0||ye(!1),i=i.slice(0,Math.min(i.length,c+1))}let d=!1,u=-1;if(n&&s&&s.v7_partialHydration)for(let c=0;c<i.length;c++){let p=i[c];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=c),p.route.id){let{loaderData:h,errors:w}=n,m=p.route.loader&&h[p.route.id]===void 0&&(!w||w[p.route.id]===void 0);if(p.route.lazy||m){d=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((c,p,h)=>{let w,m=!1,b=null,N=null;n&&(w=o&&p.route.id?o[p.route.id]:void 0,b=p.route.errorElement||zx,d&&(u<0&&h===0?(Qx("route-fallback"),m=!0,N=null):u===h&&(m=!0,N=p.route.hydrateFallbackElement||null)));let f=t.concat(i.slice(0,h+1)),x=()=>{let y;return w?y=b:m?y=N:p.route.Component?y=g.createElement(p.route.Component,null):p.route.element?y=p.route.element:y=c,g.createElement(Bx,{match:p,routeContext:{outlet:c,matches:f,isDataRoute:n!=null},children:y})};return n&&(p.route.ErrorBoundary||p.route.errorElement||h===0)?g.createElement(Ux,{location:n.location,revalidation:n.revalidation,component:b,error:w,children:x(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):x()},null)}var Qm=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Qm||{}),Jm=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Jm||{});function Hx(e){let t=g.useContext(tl);return t||ye(!1),t}function Gx(e){let t=g.useContext(Gm);return t||ye(!1),t}function Wx(e){let t=g.useContext(Dt);return t||ye(!1),t}function Xm(e){let t=Wx(),n=t.matches[t.matches.length-1];return n.route.id||ye(!1),n.route.id}function Kx(){var e;let t=g.useContext(Wm),n=Gx(),s=Xm();return t!==void 0?t:(e=n.errors)==null?void 0:e[s]}function Yx(){let{router:e}=Hx(Qm.UseNavigateStable),t=Xm(Jm.UseNavigateStable),n=g.useRef(!1);return Km(()=>{n.current=!0}),g.useCallback(function(a,l){l===void 0&&(l={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,hs({fromRouteId:t},l)))},[e,t])}const ud={};function Qx(e,t,n){ud[e]||(ud[e]=!0)}function Jx(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Go(e){let{to:t,replace:n,state:s,relative:a}=e;br()||ye(!1);let{future:l,static:i}=g.useContext(Bt),{matches:o}=g.useContext(Dt),{pathname:d}=xn(),u=dt(),c=Ho(t,Vo(o,l.v7_relativeSplatPath),d,a==="path"),p=JSON.stringify(c);return g.useEffect(()=>u(JSON.parse(p),{replace:n,state:s,relative:a}),[u,p,a,n,s]),null}function Xx(e){return _x(e.context)}function be(e){ye(!1)}function qx(e){let{basename:t="/",children:n=null,location:s,navigationType:a=en.Pop,navigator:l,static:i=!1,future:o}=e;br()&&ye(!1);let d=t.replace(/^\/*/,"/"),u=g.useMemo(()=>({basename:d,navigator:l,static:i,future:hs({v7_relativeSplatPath:!1},o)}),[d,o,l,i]);typeof s=="string"&&(s=vr(s));let{pathname:c="/",search:p="",hash:h="",state:w=null,key:m="default"}=s,b=g.useMemo(()=>{let N=fr(c,d);return N==null?null:{location:{pathname:N,search:p,hash:h,state:w,key:m},navigationType:a}},[d,c,p,h,w,m,a]);return b==null?null:g.createElement(Bt.Provider,{value:u},g.createElement(nl.Provider,{children:n,value:b}))}function Zx(e){let{children:t,location:n}=e;return Lx(Vi(t),n)}new Promise(()=>{});function Vi(e,t){t===void 0&&(t=[]);let n=[];return g.Children.forEach(e,(s,a)=>{if(!g.isValidElement(s))return;let l=[...t,a];if(s.type===g.Fragment){n.push.apply(n,Vi(s.props.children,l));return}s.type!==be&&ye(!1),!s.props.index||!s.props.children||ye(!1);let i={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(i.children=Vi(s.props.children,l)),n.push(i)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ma(){return Ma=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ma.apply(this,arguments)}function qm(e,t){if(e==null)return{};var n={},s=Object.keys(e),a,l;for(l=0;l<s.length;l++)a=s[l],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function eg(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function tg(e,t){return e.button===0&&(!t||t==="_self")&&!eg(e)}function Hi(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let s=e[n];return t.concat(Array.isArray(s)?s.map(a=>[n,a]):[[n,s]])},[]))}function ng(e,t){let n=Hi(e);return t&&t.forEach((s,a)=>{n.has(a)||t.getAll(a).forEach(l=>{n.append(a,l)})}),n}const rg=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],sg=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],ag="6";try{window.__reactRouterVersion=ag}catch{}const lg=g.createContext({isTransitioning:!1}),ig="startTransition",md=Yp[ig];function og(e){let{basename:t,children:n,future:s,window:a}=e,l=g.useRef();l.current==null&&(l.current=ix({window:a,v5Compat:!0}));let i=l.current,[o,d]=g.useState({action:i.action,location:i.location}),{v7_startTransition:u}=s||{},c=g.useCallback(p=>{u&&md?md(()=>d(p)):d(p)},[d,u]);return g.useLayoutEffect(()=>i.listen(c),[i,c]),g.useEffect(()=>Jx(s),[s]),g.createElement(qx,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:i,future:s})}const cg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",dg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,K=g.forwardRef(function(t,n){let{onClick:s,relative:a,reloadDocument:l,replace:i,state:o,target:d,to:u,preventScrollReset:c,viewTransition:p}=t,h=qm(t,rg),{basename:w}=g.useContext(Bt),m,b=!1;if(typeof u=="string"&&dg.test(u)&&(m=u,cg))try{let y=new URL(window.location.href),k=u.startsWith("//")?new URL(y.protocol+u):new URL(u),D=fr(k.pathname,w);k.origin===y.origin&&D!=null?u=D+k.search+k.hash:b=!0}catch{}let N=Ox(u,{relative:a}),f=mg(u,{replace:i,state:o,target:d,preventScrollReset:c,relative:a,viewTransition:p});function x(y){s&&s(y),y.defaultPrevented||f(y)}return g.createElement("a",Ma({},h,{href:m||N,onClick:b||l?s:x,ref:n,target:d}))}),pd=g.forwardRef(function(t,n){let{"aria-current":s="page",caseSensitive:a=!1,className:l="",end:i=!1,style:o,to:d,viewTransition:u,children:c}=t,p=qm(t,sg),h=rl(d,{relative:p.relative}),w=xn(),m=g.useContext(Gm),{navigator:b,basename:N}=g.useContext(Bt),f=m!=null&&pg(h)&&u===!0,x=b.encodeLocation?b.encodeLocation(h).pathname:h.pathname,y=w.pathname,k=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;a||(y=y.toLowerCase(),k=k?k.toLowerCase():null,x=x.toLowerCase()),k&&N&&(k=fr(k,N)||k);const D=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let T=y===x||!i&&y.startsWith(x)&&y.charAt(D)==="/",C=k!=null&&(k===x||!i&&k.startsWith(x)&&k.charAt(x.length)==="/"),A={isActive:T,isPending:C,isTransitioning:f},R=T?s:void 0,O;typeof l=="function"?O=l(A):O=[l,T?"active":null,C?"pending":null,f?"transitioning":null].filter(Boolean).join(" ");let S=typeof o=="function"?o(A):o;return g.createElement(K,Ma({},p,{"aria-current":R,className:O,ref:n,style:S,to:d,viewTransition:u}),typeof c=="function"?c(A):c)});var Gi;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Gi||(Gi={}));var hd;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(hd||(hd={}));function ug(e){let t=g.useContext(tl);return t||ye(!1),t}function mg(e,t){let{target:n,replace:s,state:a,preventScrollReset:l,relative:i,viewTransition:o}=t===void 0?{}:t,d=dt(),u=xn(),c=rl(e,{relative:i});return g.useCallback(p=>{if(tg(p,n)){p.preventDefault();let h=s!==void 0?s:Oa(u)===Oa(c);d(e,{replace:h,state:a,preventScrollReset:l,relative:i,viewTransition:o})}},[u,d,c,s,a,n,e,l,i,o])}function Zm(e){let t=g.useRef(Hi(e)),n=g.useRef(!1),s=xn(),a=g.useMemo(()=>ng(s.search,n.current?null:t.current),[s.search]),l=dt(),i=g.useCallback((o,d)=>{const u=Hi(typeof o=="function"?o(a):o);n.current=!0,l("?"+u,d)},[l,a]);return[a,i]}function pg(e,t){t===void 0&&(t={});let n=g.useContext(lg);n==null&&ye(!1);let{basename:s}=ug(Gi.useViewTransitionState),a=rl(e,{relative:t.relative});if(!n.isTransitioning)return!1;let l=fr(n.currentLocation.pathname,s)||n.currentLocation.pathname,i=fr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Bi(a.pathname,i)!=null||Bi(a.pathname,l)!=null}const ep=[{value:"America/New_York",label:"Eastern (New York, Boston, Miami)",abbr:"ET"},{value:"America/Chicago",label:"Central (Chicago, Houston, Dallas)",abbr:"CT"},{value:"America/Denver",label:"Mountain (Denver, Phoenix, Salt Lake City)",abbr:"MT"},{value:"America/Phoenix",label:"Arizona (Phoenix  no daylight saving)",abbr:"MST"},{value:"America/Los_Angeles",label:"Pacific (Los Angeles, Seattle, San Francisco)",abbr:"PT"},{value:"America/Anchorage",label:"Alaska (Anchorage)",abbr:"AKT"},{value:"Pacific/Honolulu",label:"Hawaii (Honolulu)",abbr:"HT"}],hg="America/New_York",tp="gumgauge-timezone";function fd(){try{const e=localStorage.getItem(tp);if(e&&ep.some(t=>t.value===e))return e}catch{}return hg}function fg(e){try{localStorage.setItem(tp,e)}catch{}}const np=g.createContext(null);function xg({children:e}){const[t,n]=g.useState(fd);g.useEffect(()=>{n(fd())},[]);const s=a=>{fg(a),n(a)};return r.jsx(np.Provider,{value:{timezone:t,setTimezone:s},children:e})}function Nr(){const e=g.useContext(np);if(!e)throw new Error("useTimezoneContext must be used within TimezoneProvider");return e}const On="gumgauge-admin-session",Nt="gumgauge-demo-mode",gg="gumgauge",xd=["X-ray","Panoramic X-ray","Bitewing","Periapical","Radiograph","CBCT (Cone Beam CT)","CT scan","MRI","Ultrasound","Intraoral photo","Extraoral photo","Photograph","GumGauge Scan","Other"],rp=["Checkup","Cleaning","Emergency","Extraction","Filling","Follow-up","GumGauge Scan","New patient","Root canal","Whitening","Other"],rt=["MB","B","DB","ML","L","DL"];function oa(e){return e<=350?"Healthy":e<=530?"Moderate":"Unhealthy"}function yg(e){const t=Math.max(0,Math.min(1023,e));return Math.round(100-t/1023*100)}const vg="demo-clinic-001",Nn={dentist1:"demo-staff-001",dentist2:"demo-staff-002",hygienist:"demo-staff-003",receptionist:"demo-staff-004",assistant:"demo-staff-005"},te=["demo-patient-001","demo-patient-002","demo-patient-003","demo-patient-004","demo-patient-005","demo-patient-006","demo-patient-007","demo-patient-008"];function bg(){const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}function V(e,t){const n=new Date(e+"T12:00:00");return n.setDate(n.getDate()+t),n.toISOString().slice(0,10)}function Ng(){const e=new Date().toISOString();return{id:vg,name:"Sunset Family Dental",address:"4521 Oak Boulevard, Suite 200",city:"Austin",state:"Texas",zip:"78731",phone:"(512) 555-0142",timezone:"America/Chicago",registeredAt:e,deviceCount:2}}function jg(){const e=new Date().toISOString(),t=bg(),n=V(t,1),s=V(t,7),a=V(t,14),l=V(t,-30),i=V(t,-7);return[{id:te[0],firstName:"Maria",lastName:"Santos",dateOfBirth:"1985-03-12",phone:"(512) 555-0101",email:"maria.santos@email.com",address:"1200 Riverside Dr, Austin, TX 78741",allergies:"Penicillin",medicalConditions:"Hypertension",currentMedications:"Lisinopril 10mg daily",emergencyContactName:"Carlos Santos",emergencyContactPhone:"(512) 555-0102",insuranceProvider:"UnitedHealthcare",insurancePlan:"PPO",insuranceMemberId:"UHC-8821-4492",insuranceGroupNumber:"GP-7722",insuranceDeductibleAnnual:500,insuranceDeductibleRemaining:200,dateOfAppointment:t,dateOfNextAppointment:s,appointmentTime:"09:00",nextAppointmentTime:"10:30",appointmentType:"Cleaning",appointmentDoctor:"Dr. Sarah Chen",chiefComplaint:"Routine 6-month cleaning",treatmentPlan:"Continue 6-month recall. Monitor lower right molar for possible sealant.",lastCleaningDate:l,dentistNotes:"Patient in good oral health. No new caries. Recommended fluoride varnish at next visit.",appointmentDurationMinutes:45,nextAppointmentDurationMinutes:30,appointmentRoom:"Op 1",nextAppointmentRoom:"Op 2",appointmentStatus:"In Chair",recallIntervalMonths:6,currentVisitStartedAt:new Date(Date.now()-15*60*1e3).toISOString(),currentVisitNotes:"Patient checked in. X-rays reviewed. Prophy in progress.",currentVisitUseVoiceNotes:!1,visitHistory:[{startedAt:`${l}T09:00:00`,endedAt:`${l}T09:45:00`,durationMinutes:45,clinicalSummary:"Prophylaxis completed. No issues.",voiceNotesConsent:!1},{startedAt:`${V(l,-180)}T14:00:00`,endedAt:`${V(l,-180)}T14:50:00`,durationMinutes:50,clinicalSummary:"Cleaning and exam. One small filling discussed for future.",voiceNotesConsent:!1}],clinicalNotes:[{id:"cn1",date:l,content:"Prophylaxis (D1110) completed. Bitewings taken. No caries. Patient educated on flossing.",author:"Dr. Sarah Chen",createdAt:`${l}T10:00:00`},{id:"cn2",date:V(l,-180),content:"Routine cleaning. Mild gingivitis in lower anteriorrecommended improved flossing.",author:"Dr. Sarah Chen",createdAt:`${V(l,-180)}T15:00:00`}],balanceDue:0,paymentHistory:[{id:"ph1",date:l,amount:125,note:"Prophylaxis",amountOutOfPocket:25,amountWithInsurance:100}],paymentMethods:[{id:"pm1",type:"Card",lastFour:"4242",cardBrand:"Visa",nameOnCard:"Maria Santos",expiryMonth:12,expiryYear:2027,addedAt:`${l}T08:00:00`}],invoiceLines:[{id:"inv1",appointmentDate:l,procedureCode:"D1110",description:"Prophylaxis - adult",amount:125,amountWithInsurance:100,amountOutOfPocket:25,status:"Paid",addedAt:`${l}T09:00:00`}],prescriptions:[{id:"rx1",date:V(l,-365),medication:"Amoxicillin",strength:"500mg capsule",sig:"Take 1 capsule by mouth three times daily for 7 days",quantity:21,refills:0,prescriberName:"Dr. Sarah Chen",prescriberCredentials:"DDS",signedAt:`${V(l,-365)}T11:00:00`}],treatmentPlans:[{id:"tp1",createdAt:l,phases:[{id:"ph1",name:"Phase 1: Prevention",procedures:[{code:"D1110",description:"Prophylaxis - adult",estimatedFee:125}],notes:"Every 6 months"}],status:"In progress",acceptedAt:l,presentedBy:"Dr. Sarah Chen"}],perioExams:[{id:"pe1",examDate:l,teeth:[{tooth:3,pd:[2,2,2,2,2,2],bleeding:[!1,!1,!1,!1,!1,!1]},{tooth:2,pd:[2,3,2,2,2,2],bleeding:[!1,!0,!1,!1,!1,!1]},{tooth:1,pd:[2,2,2,2,2,2],bleeding:[!1,!1,!1,!1,!1,!1]}],notes:"Overall healthy. Slight bleeding at #2 B."}],gumGaugeExams:[{id:"gg1",scanDate:l,teeth:[{tooth:8,density:280,lightPenetrationPercent:73,healthResult:oa(280)},{tooth:7,density:310,lightPenetrationPercent:70,healthResult:oa(310)},{tooth:6,density:290,lightPenetrationPercent:72,healthResult:oa(290)}],notes:"Baseline GumGauge scan. Results within normal range."}],toothConditions:[{id:"tc1",tooth:3,surface:"O",condition:"Existing Restoration",status:"Completed",completedAt:V(l,-730),note:"Composite",addedAt:`${V(l,-730)}T00:00:00`}],documents:[{id:"doc1",type:"Consent",title:"Treatment consent - prophylaxis",date:l,addedAt:`${l}T08:30:00`},{id:"doc2",type:"Insurance",title:"Insurance card on file",date:l,addedAt:`${l}T08:30:00`}],lastRecallReminderSent:V(t,-150),lastAppointmentReminderSent:V(t,-2),createdAt:`${V(t,-400)}T00:00:00`,updatedAt:e},{id:te[1],firstName:"James",lastName:"Wilson",dateOfBirth:"1972-08-22",phone:"(512) 555-0202",email:"j.wilson@email.com",address:"8900 Research Blvd, Austin, TX 78758",allergies:"No known allergies",medicalConditions:"Diabetes (Type 2)",currentMedications:"Metformin 500mg twice daily",emergencyContactName:"Linda Wilson",emergencyContactPhone:"(512) 555-0203",insuranceProvider:"Humana",insurancePlan:"PPO",insuranceMemberId:"HUM-4412-8891",insuranceGroupNumber:"GRP-1122",insuranceDeductibleAnnual:250,insuranceDeductibleRemaining:100,dateOfAppointment:t,dateOfNextAppointment:a,appointmentTime:"10:15",nextAppointmentTime:"14:00",appointmentType:"Filling",appointmentDoctor:"Dr. Michael Torres",chiefComplaint:"Sensitivity on upper left molar",treatmentPlan:"D2392 resin 2 surfaces tooth #14. Possible crown if decay deeper.",lastCleaningDate:i,dentistNotes:"Moderate caries on #14 MO. Patient prefers composite. Schedule 45 min.",appointmentDurationMinutes:45,nextAppointmentDurationMinutes:60,appointmentRoom:"Op 3",nextAppointmentRoom:"Op 3",appointmentStatus:"Scheduled",recallIntervalMonths:6,visitHistory:[{startedAt:`${i}T10:00:00`,endedAt:`${i}T10:40:00`,durationMinutes:40,clinicalSummary:"Exam and cleaning. Caries noted #14.",voiceNotesConsent:!1}],clinicalNotes:[{id:"cn1",date:i,content:"D0150 comprehensive exam. Caries #14 MO. Treatment plan presented and accepted. D2392 scheduled.",author:"Dr. Michael Torres",createdAt:`${i}T11:00:00`}],balanceDue:85,paymentHistory:[{id:"ph1",date:i,amount:150,note:"Comprehensive exam",amountOutOfPocket:50,amountWithInsurance:100}],paymentMethods:[{id:"pm1",type:"Card",lastFour:"5555",cardBrand:"Mastercard",nameOnCard:"James Wilson",expiryMonth:6,expiryYear:2026,addedAt:`${i}T09:00:00`}],invoiceLines:[{id:"inv1",appointmentDate:i,procedureCode:"D0150",description:"Comprehensive oral evaluation",amount:150,amountWithInsurance:100,amountOutOfPocket:50,status:"Paid",addedAt:`${i}T10:00:00`},{id:"inv2",appointmentDate:t,procedureCode:"D2392",description:"Resin - 2 surfaces, posterior",amount:225,amountWithInsurance:140,amountOutOfPocket:85,status:"Pending",addedAt:e}],prescriptions:[],treatmentPlans:[{id:"tp1",createdAt:i,phases:[{id:"ph1",name:"Phase 1: Restorative",procedures:[{code:"D2392",description:"Resin - 2 surfaces, posterior (#14)",estimatedFee:225}],notes:"MO composite"}],status:"Accepted",acceptedAt:i,presentedBy:"Dr. Michael Torres"}],perioExams:[],gumGaugeExams:[],toothConditions:[{id:"tc1",tooth:14,surface:"MO",condition:"Caries",status:"Planned",note:"D2392 scheduled",addedAt:`${i}T00:00:00`}],documents:[{id:"doc1",type:"Consent",title:"Treatment consent",date:i,addedAt:`${i}T09:30:00`}],lastAppointmentReminderSent:V(t,-1),createdAt:`${V(t,-200)}T00:00:00`,updatedAt:e},{id:te[2],firstName:"Yuki",lastName:"Tanaka",dateOfBirth:"1991-11-05",phone:"(512) 555-0303",email:"yuki.tanaka@email.com",address:"2200 Guadalupe St, Austin, TX 78705",allergies:"Latex",medicalConditions:"None",currentMedications:"None",emergencyContactName:"Ken Tanaka",emergencyContactPhone:"(512) 555-0304",insuranceProvider:"Cigna",insurancePlan:"DPPO",insuranceMemberId:"CIG-2298-7741",insuranceGroupNumber:"DENT-4455",dateOfAppointment:t,dateOfNextAppointment:s,appointmentTime:"14:00",nextAppointmentTime:"09:00",appointmentType:"GumGauge Scan",appointmentDoctor:"Dr. Sarah Chen",chiefComplaint:"Wants to track gum health over time",treatmentPlan:"Baseline GumGauge scan. Follow-up in 6 months.",dentistNotes:"New patient. No latex products. Schedule in non-latex operatory.",appointmentDurationMinutes:30,nextAppointmentDurationMinutes:30,appointmentRoom:"Op 2",nextAppointmentRoom:"Op 2",appointmentStatus:"Checked In",recallIntervalMonths:6,visitHistory:[],clinicalNotes:[],balanceDue:0,paymentHistory:[],paymentMethods:[],invoiceLines:[],prescriptions:[],treatmentPlans:[],perioExams:[],gumGaugeExams:[],toothConditions:[],documents:[],createdAt:`${V(t,-30)}T00:00:00`,updatedAt:e},{id:te[3],firstName:"Robert",lastName:"Johnson",dateOfBirth:"1958-01-30",phone:"(512) 555-0404",email:"r.johnson@email.com",address:"5000 Burnet Rd, Austin, TX 78756",allergies:"Sulfa drugs",medicalConditions:"Hypertension, Blood thinners (anticoagulants)",currentMedications:"Amlodipine 5mg, Warfarin 5mg daily",emergencyContactName:"Susan Johnson",emergencyContactPhone:"(512) 555-0405",insuranceProvider:"UnitedHealthcare",insurancePlan:"Medicare",insuranceMemberId:"UHC-MCR-9921",insuranceGroupNumber:"MCR-001",dateOfAppointment:n,dateOfNextAppointment:V(t,21),appointmentTime:"08:30",nextAppointmentTime:"11:00",appointmentType:"Root canal",appointmentDoctor:"Dr. Michael Torres",chiefComplaint:"Severe pain upper right back tooth",treatmentPlan:"D3330 endodontic therapy tooth #3. Crown to follow.",lastCleaningDate:l,dentistNotes:"Medical clearance for anticoagulants obtained. Use local hemostasis. No sulfa abx.",appointmentDurationMinutes:90,nextAppointmentDurationMinutes:60,appointmentRoom:"Op 3",nextAppointmentRoom:"Op 3",appointmentStatus:"Scheduled",recallIntervalMonths:6,visitHistory:[{startedAt:`${i}T15:00:00`,endedAt:`${i}T15:45:00`,durationMinutes:45,clinicalSummary:"Emergency exam. Diagnosis: necrotic pulp #3. RCT recommended.",voiceNotesConsent:!1}],clinicalNotes:[{id:"cn1",date:i,content:"Emergency visit. Pulp test #3 negative. Radiograph shows periapical radiolucency. D3330 and D2740 treatment plan accepted.",author:"Dr. Michael Torres",createdAt:`${i}T16:00:00`}],balanceDue:450,paymentHistory:[{id:"ph1",date:i,amount:150,note:"Emergency exam",amountOutOfPocket:150}],paymentMethods:[{id:"pm1",type:"Card",lastFour:"1234",cardBrand:"Visa",nameOnCard:"Robert Johnson",expiryMonth:3,expiryYear:2028,addedAt:`${i}T14:30:00`}],invoiceLines:[{id:"inv1",appointmentDate:i,procedureCode:"D0150",description:"Comprehensive oral evaluation (emergency)",amount:150,status:"Paid",addedAt:`${i}T15:00:00`},{id:"inv2",appointmentDate:n,procedureCode:"D3330",description:"Endodontic therapy - molar (#3)",amount:1295,amountWithInsurance:845,amountOutOfPocket:450,status:"Pending",addedAt:e}],insuranceClaims:[{id:"cl1",date:n,procedureCodes:["D3330"],description:"Root canal #3",amount:1295,status:"Draft",note:"To send after RCT"}],prescriptions:[{id:"rx1",date:i,medication:"Amoxicillin",strength:"500mg capsule",sig:"Take 1 capsule by mouth three times daily for 7 days (no sulfa)",quantity:21,refills:0,prescriberName:"Dr. Michael Torres",prescriberCredentials:"DDS",signedAt:`${i}T16:30:00`}],treatmentPlans:[{id:"tp1",createdAt:i,phases:[{id:"ph1",name:"Phase 1: Endodontic",procedures:[{code:"D3330",description:"Endodontic therapy - molar (#3)",estimatedFee:1295}]},{id:"ph2",name:"Phase 2: Restorative",procedures:[{code:"D2740",description:"Crown - porcelain/ceramic (#3)",estimatedFee:1295}],notes:"After RCT healing"}],status:"Accepted",acceptedAt:i,presentedBy:"Dr. Michael Torres"}],perioExams:[],gumGaugeExams:[],toothConditions:[{id:"tc1",tooth:3,condition:"Root Canal",status:"Planned",note:"D3330 scheduled",addedAt:`${i}T00:00:00`}],documents:[{id:"doc1",type:"Referral",title:"Medical clearance - anticoagulation",date:i,note:"Cleared for RCT",addedAt:`${i}T14:00:00`}],lastAppointmentReminderSent:V(t,-1),createdAt:`${V(t,-500)}T00:00:00`,updatedAt:e},{id:te[4],firstName:"Emily",lastName:"Davis",dateOfBirth:"2008-06-14",phone:"(512) 555-0505",email:"emily.davis.parent@email.com",address:"3100 Bee Caves Rd, Austin, TX 78746",allergies:"No known allergies",medicalConditions:"None",currentMedications:"None",emergencyContactName:"David Davis",emergencyContactPhone:"(512) 555-0506",insuranceProvider:"CVS Health (Aetna)",insurancePlan:"DHMO",insuranceMemberId:"AET-5543-2210",insuranceGroupNumber:"CHILD-8899",dateOfAppointment:s,dateOfNextAppointment:V(t,90),appointmentTime:"15:30",nextAppointmentTime:"16:00",appointmentType:"Checkup",appointmentDoctor:"Dr. Sarah Chen",chiefComplaint:"Routine pediatric checkup",treatmentPlan:"D0120 periodic eval, D1120 prophy. Sealants if indicated.",lastCleaningDate:V(t,-180),dentistNotes:"Minor. Parent present for visits. Good hygiene per mom.",appointmentDurationMinutes:30,nextAppointmentDurationMinutes:30,appointmentRoom:"Op 1",nextAppointmentRoom:"Op 1",recallIntervalMonths:6,visitHistory:[{startedAt:`${V(t,-180)}T16:00:00`,endedAt:`${V(t,-180)}T16:35:00`,durationMinutes:35,clinicalSummary:"Child prophy and exam. No caries.",voiceNotesConsent:!1}],clinicalNotes:[{id:"cn1",date:V(t,-180),content:"D1120 prophy, D0120 exam. All clear. Next recall in 6 months.",author:"Dr. Sarah Chen",createdAt:`${V(t,-180)}T17:00:00`}],balanceDue:0,paymentHistory:[{id:"ph1",date:V(t,-180),amount:95,note:"Child prophy",amountWithInsurance:95,amountOutOfPocket:0}],paymentMethods:[],invoiceLines:[{id:"inv1",appointmentDate:V(t,-180),procedureCode:"D1120",description:"Prophylaxis - child",amount:95,amountWithInsurance:95,amountOutOfPocket:0,status:"Paid",addedAt:`${V(t,-180)}T16:00:00`}],prescriptions:[],treatmentPlans:[],perioExams:[],gumGaugeExams:[],toothConditions:[],documents:[],lastRecallReminderSent:V(t,-30),createdAt:`${V(t,-400)}T00:00:00`,updatedAt:e},{id:te[5],firstName:"Patricia",lastName:"Martinez",dateOfBirth:"1965-09-28",phone:"(512) 555-0606",email:"p.martinez@email.com",address:"6500 N Lamar Blvd, Austin, TX 78752",allergies:"Penicillin, Codeine",medicalConditions:"Diabetes, Osteoporosis",currentMedications:"Metformin, Alendronate weekly",emergencyContactName:"Jose Martinez",emergencyContactPhone:"(512) 555-0607",insuranceProvider:"Blue Cross Blue Shield of Michigan",insurancePlan:"PPO",insuranceMemberId:"BCBS-7721-3344",insuranceGroupNumber:"BC-9988",insuranceDeductibleAnnual:500,insuranceDeductibleRemaining:500,dateOfAppointment:a,dateOfNextAppointment:V(t,98),appointmentTime:"11:00",nextAppointmentTime:"10:00",appointmentType:"New patient",appointmentDoctor:"Dr. Michael Torres",chiefComplaint:"First visit to practice, need full exam",treatmentPlan:"D0150 comprehensive exam, full series X-rays. Treatment plan to follow.",dentistNotes:"New patient. Medical hx significantavoid penicillin/codeine. Pre-med not required per AHA.",appointmentDurationMinutes:60,nextAppointmentDurationMinutes:45,appointmentRoom:"Op 2",nextAppointmentRoom:"Op 2",recallIntervalMonths:6,visitHistory:[],clinicalNotes:[],balanceDue:0,paymentHistory:[],paymentMethods:[],invoiceLines:[],prescriptions:[],treatmentPlans:[],perioExams:[],gumGaugeExams:[],toothConditions:[],documents:[],createdAt:`${V(t,-14)}T00:00:00`,updatedAt:e},{id:te[6],firstName:"David",lastName:"Kim",dateOfBirth:"1982-04-17",phone:"(512) 555-0707",email:"david.kim@email.com",address:"9828 Great Hills Trail, Austin, TX 78759",allergies:"No known allergies",medicalConditions:"Anxiety / depression",currentMedications:"Sertraline 50mg daily",emergencyContactName:"Sarah Kim",emergencyContactPhone:"(512) 555-0708",insuranceProvider:"Kaiser Permanente",insurancePlan:"HMO",insuranceMemberId:"KP-2298-8877",insuranceGroupNumber:"HMO-4411",dateOfAppointment:V(t,3),dateOfNextAppointment:V(t,93),appointmentTime:"09:00",nextAppointmentTime:"14:30",appointmentType:"Follow-up",appointmentDoctor:"Dr. Sarah Chen",chiefComplaint:"Follow-up after extraction",treatmentPlan:"Healing check #19. Discuss implant or bridge options.",lastCleaningDate:V(t,-60),dentistNotes:"Extraction #19 completed 2 weeks ago. Patient considering implant. Sedation may be option given anxiety.",appointmentDurationMinutes:30,nextAppointmentDurationMinutes:60,appointmentRoom:"Op 1",nextAppointmentRoom:"Op 3",recallIntervalMonths:6,visitHistory:[{startedAt:`${V(t,-14)}T09:30:00`,endedAt:`${V(t,-14)}T10:15:00`,durationMinutes:45,clinicalSummary:"D7240 extraction #19. Gauze and post-op instructions given.",voiceNotesConsent:!1}],clinicalNotes:[{id:"cn1",date:V(t,-14),content:"Extraction #19. Socket preserved. Rx: ibuprofen, avoid straw. Follow-up in 2 weeks.",author:"Dr. Sarah Chen",createdAt:`${V(t,-14)}T10:30:00`}],balanceDue:0,paymentHistory:[{id:"ph1",date:V(t,-14),amount:195,note:"Extraction",amountOutOfPocket:50,amountWithInsurance:145}],paymentMethods:[{id:"pm1",type:"Card",lastFour:"8765",cardBrand:"Discover",nameOnCard:"David Kim",expiryMonth:9,expiryYear:2027,addedAt:`${V(t,-14)}T09:00:00`}],invoiceLines:[{id:"inv1",appointmentDate:V(t,-14),procedureCode:"D7240",description:"Extraction - erupted tooth (#19)",amount:195,amountWithInsurance:145,amountOutOfPocket:50,status:"Paid",addedAt:`${V(t,-14)}T09:30:00`}],prescriptions:[{id:"rx1",date:V(t,-14),medication:"Ibuprofen",strength:"400mg tablet",sig:"Take 1 tablet by mouth every 6 hours as needed for pain",quantity:20,refills:0,prescriberName:"Dr. Sarah Chen",prescriberCredentials:"DDS",signedAt:`${V(t,-14)}T10:15:00`}],treatmentPlans:[{id:"tp1",createdAt:V(t,-14),phases:[{id:"ph1",name:"Phase 1: Extraction",procedures:[{code:"D7240",description:"Extraction #19",estimatedFee:195}],notes:"Completed"},{id:"ph2",name:"Phase 2: Replacement",procedures:[{code:"Implant",description:"Implant #19",estimatedFee:3500},{code:"D6057",description:"Implant crown",estimatedFee:1295}],notes:"To discuss at follow-up"}],status:"In progress",acceptedAt:V(t,-14),presentedBy:"Dr. Sarah Chen"}],perioExams:[],gumGaugeExams:[],toothConditions:[{id:"tc1",tooth:19,condition:"Extraction",status:"Completed",completedAt:V(t,-14).toString(),note:"Healing",addedAt:`${V(t,-14)}T00:00:00`}],documents:[{id:"doc1",type:"Consent",title:"Extraction consent",date:V(t,-14),addedAt:`${V(t,-14)}T09:00:00`}],lastAppointmentReminderSent:V(t,-2),createdAt:`${V(t,-300)}T00:00:00`,updatedAt:e},{id:te[7],firstName:"Lisa",lastName:"Nguyen",dateOfBirth:"1995-12-03",phone:"(512) 555-0808",email:"lisa.nguyen@email.com",address:"4477 S Lamar Blvd, Austin, TX 78745",allergies:"Latex",medicalConditions:"None",currentMedications:"None",emergencyContactName:"Tom Nguyen",emergencyContactPhone:"(512) 555-0809",insuranceProvider:"UnitedHealthcare",insurancePlan:"PPO",insuranceMemberId:"UHC-3344-5566",insuranceGroupNumber:"GP-2233",dateOfAppointment:V(t,5),dateOfNextAppointment:V(t,185),appointmentTime:"13:00",nextAppointmentTime:"09:00",appointmentType:"Whitening",appointmentDoctor:"Dr. Sarah Chen",chiefComplaint:"In-office whitening",treatmentPlan:"In-office whitening (full arch). Take-home trays for maintenance.",dentistNotes:"No latex. Patient has had cleaning within 6 months. Good candidate for whitening.",appointmentDurationMinutes:90,nextAppointmentDurationMinutes:30,appointmentRoom:"Op 2",nextAppointmentRoom:"Op 2",recallIntervalMonths:6,visitHistory:[],clinicalNotes:[],balanceDue:0,paymentHistory:[],paymentMethods:[],invoiceLines:[],prescriptions:[],treatmentPlans:[{id:"tp1",createdAt:V(t,-7),phases:[{id:"ph1",name:"Whitening",procedures:[{description:"In-office whitening",estimatedFee:450},{description:"Take-home trays",estimatedFee:250}],notes:"Optional take-home"}],status:"Accepted",acceptedAt:V(t,-7),presentedBy:"Dr. Sarah Chen"}],perioExams:[],gumGaugeExams:[],toothConditions:[],documents:[],createdAt:`${V(t,-60)}T00:00:00`,updatedAt:e}]}function wg(){const e=new Date().toISOString();return[{id:Nn.dentist1,firstName:"Sarah",lastName:"Chen",position:"Dentist",email:"sarah.chen@sunsetdental.demo",phone:"(512) 555-0143",loginEmail:"dr.chen@demo",password:"demo",hireDate:"2020-06-01",status:"Active",licenseNumber:"TX-12345",licenseExpiry:"2026-12-31",emergencyContactName:"James Chen",emergencyContactPhone:"(512) 555-0199",notes:"Lead dentist. General and preventive.",assignedPatientIds:[te[0],te[2],te[4],te[6],te[7]],createdAt:e,updatedAt:e},{id:Nn.dentist2,firstName:"Michael",lastName:"Torres",position:"Dentist",email:"michael.torres@sunsetdental.demo",phone:"(512) 555-0144",loginEmail:"dr.torres@demo",password:"demo",hireDate:"2021-03-15",status:"Active",licenseNumber:"TX-22345",licenseExpiry:"2027-06-30",emergencyContactName:"Maria Torres",emergencyContactPhone:"(512) 555-0198",notes:"Restorative and endo.",assignedPatientIds:[te[1],te[3],te[5]],createdAt:e,updatedAt:e},{id:Nn.hygienist,firstName:"Jennifer",lastName:"Walsh",position:"Dental Hygienist",email:"jennifer.walsh@sunsetdental.demo",phone:"(512) 555-0145",hireDate:"2019-08-01",status:"Active",emergencyContactName:"Tom Walsh",emergencyContactPhone:"(512) 555-0197",notes:"Full-time hygienist.",assignedPatientIds:[],createdAt:e,updatedAt:e},{id:Nn.receptionist,firstName:"Amy",lastName:"Rivera",position:"Front Desk / Receptionist",email:"amy.rivera@sunsetdental.demo",phone:"(512) 555-0146",hireDate:"2022-01-10",status:"Active",emergencyContactName:"Carlos Rivera",emergencyContactPhone:"(512) 555-0196",notes:"Scheduling and check-in.",createdAt:e,updatedAt:e},{id:Nn.assistant,firstName:"David",lastName:"Park",position:"Dental Assistant",email:"david.park@sunsetdental.demo",phone:"(512) 555-0147",hireDate:"2023-02-20",status:"Active",emergencyContactName:"Grace Park",emergencyContactPhone:"(512) 555-0195",notes:"Chairside assistant.",createdAt:e,updatedAt:e}]}function kg(){const e=new Date,t=[],n=(s,a,l,i,o,d)=>{const u=new Date(e);u.setDate(u.getDate()-s),t.push({id:`demo-audit-${t.length+1}`,timestamp:u.toISOString(),actor:"Dr. Sarah Chen",action:a,entityType:l,entityId:i,details:o})};return n(0,"chart.view","patient",te[0],"Maria Santos"),n(0,"chart.view","patient",te[1],"James Wilson"),n(1,"patient.update","patient",te[1],"Appointment rescheduled"),n(1,"patient.update","patient",te[3],"Treatment plan accepted"),n(2,"chart.view","patient",te[3],"Robert Johnson"),n(2,"patient.update","patient",te[2],"Yuki Tanaka"),n(3,"patient.create","patient",te[2],"Yuki Tanaka"),n(3,"chart.view","patient",te[6],"David Kim"),n(4,"patient.update","patient",te[6],"Payment recorded"),n(4,"staff.update","staff",Nn.dentist1),n(5,"chart.view","patient",te[4],"Emily Davis"),n(5,"patient.update","patient",te[0],"Clinical note added"),n(6,"chart.view","patient",te[7],"Lisa Nguyen"),n(6,"patient.update","patient",te[5],"New patient intake"),n(7,"staff.create","staff",Nn.assistant,"David Park"),n(7,"chart.view","patient",te[1],"James Wilson"),n(8,"patient.update","patient",te[3],"Prescription signed"),n(8,"chart.view","patient",te[0],"Maria Santos"),n(9,"patient.update","patient",te[0],"Visit ended"),n(10,"chart.view","patient",te[4],"Emily Davis"),n(10,"patient.update","patient",te[4],"Recall reminder sent"),t}const Sg="gumgauge-audit",Ra="gumgauge-demo-audit";let sp;function ap(){try{return typeof sessionStorage<"u"&&sessionStorage.getItem(Nt)==="1"}catch{return!1}}function Wo(){return ap()?Ra:Sg}function Cg(){if(ap())try{if(localStorage.getItem(Ra))return;const t=kg();localStorage.setItem(Ra,JSON.stringify(t))}catch{}}function Ll(e){sp=e}function lp(){const e=Wo();e===Ra&&Cg();try{const t=localStorage.getItem(e);return t?JSON.parse(t):[]}catch{return[]}}function Pg(e,t){const n=e.slice(-2e3);localStorage.setItem(t,JSON.stringify(n))}function _n(e){const t=Wo(),n=lp();n.push({...e,id:crypto.randomUUID(),actor:e.actor??sp??"System"}),Pg(n,t)}function ip(e){let t=lp();return e!=null&&e.entityType&&(t=t.filter(n=>n.entityType===e.entityType)),e!=null&&e.entityId&&(t=t.filter(n=>n.entityId===e.entityId)),t=t.reverse(),e!=null&&e.limit&&(t=t.slice(0,e.limit)),t}function Dg(){try{localStorage.setItem(Wo(),JSON.stringify([]))}catch{}}const Eg="gumgauge-staff",_a="gumgauge-demo-staff";function op(){try{return typeof sessionStorage<"u"&&sessionStorage.getItem(Nt)==="1"}catch{return!1}}function cp(){return op()?_a:Eg}function Ag(){if(op())try{if(localStorage.getItem(_a))return;const t=wg();localStorage.setItem(_a,JSON.stringify(t))}catch{}}function jr(){const e=cp();e===_a&&Ag();try{const t=localStorage.getItem(e);return t?JSON.parse(t):[]}catch{return[]}}function Ko(e){const t=cp();localStorage.setItem(t,JSON.stringify(e))}function zr(e){return jr().find(t=>t.id===e)}function Tg(e,t){return jr().find(s=>{var a;return((a=s.loginEmail)==null?void 0:a.trim().toLowerCase())===e.trim().toLowerCase()&&s.password===t})}function Ig(e){const t=jr(),n=new Date().toISOString(),s={...e,id:crypto.randomUUID(),createdAt:n,updatedAt:n};return t.push(s),Ko(t),_n({timestamp:n,action:"staff.create",entityType:"staff",entityId:s.id,details:`${s.firstName} ${s.lastName}`}),s}function Og(e,t){const n=jr(),s=n.findIndex(l=>l.id===e);if(s===-1)return null;const a=new Date().toISOString();return n[s]={...n[s],...t,updatedAt:a},Ko(n),_n({timestamp:a,action:"staff.update",entityType:"staff",entityId:e}),n[s]}function Mg(e){const t=jr(),n=t.find(a=>a.id===e),s=t.filter(a=>a.id!==e);return s.length===t.length?!1:(Ko(s),_n({timestamp:new Date().toISOString(),action:"staff.delete",entityType:"staff",entityId:e,details:n?`${n.firstName} ${n.lastName}`:void 0}),!0)}const Mr="gumgauge-signed-in-staff-id",Rg=15*60*1e3;function _g(){try{return sessionStorage.getItem(On)==="1"}catch{return!1}}function Lg(){try{return typeof sessionStorage<"u"&&sessionStorage.getItem(Nt)==="1"}catch{return!1}}const dp=g.createContext(null);function $g({children:e}){const[t,n]=g.useState(()=>{try{return sessionStorage.getItem(Mr)}catch{return null}}),[s,a]=g.useState(null);g.useEffect(()=>{if(!t){a(null);return}const c=zr(t);a(c||null),c||(sessionStorage.removeItem(Mr),n(null))},[t]),g.useEffect(()=>{if(!t)return;let c;const p=()=>{clearTimeout(c),c=setTimeout(()=>{n(null),a(null),Ll(void 0);try{sessionStorage.removeItem(Mr)}catch{}},Rg)};p();const h=["mousedown","keydown","scroll","touchstart"];return h.forEach(w=>window.addEventListener(w,p)),()=>{clearTimeout(c),h.forEach(w=>window.removeEventListener(w,p))}},[t]);const l=(c,p)=>{const h=Tg(c.trim(),p);if(h){n(h.id),Ll(`${h.firstName} ${h.lastName}`);try{sessionStorage.setItem(Mr,h.id)}catch{}return!0}return!1},i=()=>{n(null),a(null),Ll(void 0);try{sessionStorage.removeItem(Mr)}catch{}},o=_g(),d=Lg(),u=!!s||o||d;return r.jsx(dp.Provider,{value:{staff:s,isSignedIn:u,isAdmin:o,login:l,logout:i},children:e})}function wr(){const e=g.useContext(dp);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}const gd={sm:"h-8",md:"h-10",lg:"h-14",xl:"h-32 sm:h-40 md:h-48"},Fg={sm:"text-lg",md:"text-xl",lg:"text-2xl",xl:"text-3xl"};function Yo({className:e="",showText:t=!1,size:n="md",variant:s="light"}){const[a,l]=ir.useState(!1),i=s==="dark"?"text-white":"text-navy";return r.jsxs("div",{className:`flex items-center gap-2 bg-transparent ${e}`,children:[a?r.jsx("div",{className:`${gd[n]} min-w-[2.5rem] flex items-center justify-center rounded-lg px-2 ${s==="dark"?"bg-white/20":"bg-navy"}`,"aria-hidden":!0,children:r.jsx("span",{className:"text-white font-bold text-sm",children:"GG"})}):r.jsx("img",{src:"/logo.png",alt:"GumGauge",className:`${gd[n]} w-auto object-contain flex-shrink-0 bg-transparent`,onError:()=>l(!0)}),t&&r.jsx("span",{className:`font-semibold ${i} ${Fg[n]}`,children:"GumGauge"})]})}const zg=["January","February","March","April","May","June","July","August","September","October","November","December"];function Z(e){if(!e)return"";const t=e.slice(0,10),[n,s,a]=t.split("-").map(Number);return!s||s<1||s>12||!a||a<1||a>31?e:`${zg[s-1]} ${a}, ${n}`}function $l(e){return new Intl.DateTimeFormat("en-CA",{timeZone:e,year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date)}function Fl(e){const t=new Date,n=new Intl.DateTimeFormat("en-US",{timeZone:e,month:"long",day:"numeric",year:"numeric"}).format(t),s=new Intl.DateTimeFormat("en-US",{timeZone:e,hour:"numeric",minute:"2-digit",second:"2-digit",hour12:!0}).format(t);return{date:n,time:s,full:`${n}  ${s}`}}function Wi(e,t){const n=new Date(e),s=new Intl.DateTimeFormat("en-US",{timeZone:t,month:"long",day:"numeric",year:"numeric"}).format(n),a=new Intl.DateTimeFormat("en-US",{timeZone:t,hour:"numeric",minute:"2-digit",second:"2-digit",hour12:!0}).format(n);return`${s}  ${a}`}function up(e){const[t,n]=g.useState(()=>Fl(e));return g.useEffect(()=>{n(Fl(e));const s=setInterval(()=>n(Fl(e)),1e3);return()=>clearInterval(s)},[e]),t}function sl(e){const[t,n]=g.useState(()=>$l(e));return g.useEffect(()=>{n($l(e));const s=setInterval(()=>n($l(e)),6e4);return()=>clearInterval(s)},[e]),t}const mp="gumgauge-clinic",fs="gumgauge-demo-clinic";function Qo(){try{return typeof sessionStorage<"u"&&sessionStorage.getItem(Nt)==="1"}catch{return!1}}function pp(){return Qo()?fs:mp}function Ug(){if(Qo())try{if(localStorage.getItem(fs))return;const t=Ng();localStorage.setItem(fs,JSON.stringify(t))}catch{}}function hp(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch{return null}}function Ns(){const e=pp();return e===fs&&Ug(),hp(e)}function Bg(){try{localStorage.removeItem(mp),Qo()&&localStorage.removeItem(fs)}catch{}}function Vg(e){const t=pp(),n=hp(t),s=new Date().toISOString(),a={id:(n==null?void 0:n.id)??crypto.randomUUID(),name:e.name,address:e.address??(n==null?void 0:n.address),city:e.city??(n==null?void 0:n.city),state:e.state??(n==null?void 0:n.state),zip:e.zip??(n==null?void 0:n.zip),phone:e.phone??(n==null?void 0:n.phone),timezone:e.timezone??(n==null?void 0:n.timezone),registeredAt:(n==null?void 0:n.registeredAt)??s,deviceCount:e.deviceCount??(n==null?void 0:n.deviceCount)??1};try{localStorage.setItem(t,JSON.stringify(a))}catch{}return a}const al=[{label:"Clinical",positions:["Dentist","Pediatric Dentist","Dental Hygienist","Dental Assistant","Certified Dental Assistant (CDA)","Sterilization Technician"]},{label:"Front office",positions:["Front Desk / Receptionist","Patient Coordinator","Billing / Insurance Coordinator","Office Manager","Practice Manager"]},{label:"Specialists",positions:["Orthodontist","Endodontist","Periodontist","Oral Surgeon"]},{label:"Support",positions:["Dental Lab Technician"]}];al.flatMap(e=>[...e.positions]);const fp=["Active","On leave","Inactive"],Jo=["Dentist","Pediatric Dentist","Orthodontist","Endodontist","Periodontist","Oral Surgeon","Dental Hygienist"],xp=["Dentist","Pediatric Dentist","Orthodontist","Endodontist","Periodontist","Oral Surgeon"],Hg="gumgauge-patients",La="gumgauge-demo-patients";function gp(){try{return typeof sessionStorage<"u"&&sessionStorage.getItem(Nt)==="1"}catch{return!1}}function yp(){return gp()?La:Hg}function Gg(){if(gp())try{if(localStorage.getItem(La))return;const t=jg();localStorage.setItem(La,JSON.stringify(t))}catch{}}function we(){const e=yp();e===La&&Gg();try{const t=localStorage.getItem(e);return t?JSON.parse(t):[]}catch{return[]}}function ll(e){const t=yp();localStorage.setItem(t,JSON.stringify(e))}function Y(e){return we().find(t=>t.id===e)}function Wg(e){const t=we(),n=new Date().toISOString(),s={...e,id:crypto.randomUUID(),createdAt:n,updatedAt:n};return t.push(s),ll(t),_n({timestamp:n,action:"patient.create",entityType:"patient",entityId:s.id,details:`${s.firstName} ${s.lastName}`}),s}function ae(e,t){const n=we(),s=n.findIndex(l=>l.id===e);if(s===-1)return null;const a=new Date().toISOString();return n[s]={...n[s],...t,updatedAt:a},ll(n),_n({timestamp:a,action:"patient.update",entityType:"patient",entityId:e}),n[s]}function Kg(e){const t=we(),n=t.find(a=>a.id===e),s=t.filter(a=>a.id!==e);return s.length===t.length?!1:(ll(s),_n({timestamp:new Date().toISOString(),action:"patient.delete",entityType:"patient",entityId:e,details:n?`${n.firstName} ${n.lastName}`:void 0}),!0)}function Yg(){const e=we(),t=new Date().toISOString(),n=e.map(s=>({...s,visitHistory:[],currentVisitStartedAt:void 0,currentVisitNotes:void 0,currentVisitUseVoiceNotes:void 0,updatedAt:t}));ll(n)}function Qg(){const e=dt(),[t,n]=g.useState(""),[s,a]=g.useState(!1),[l,i]=g.useState([]),o=g.useRef(null),d=g.useRef(null);return g.useEffect(()=>{const u=c=>{var p;(c.ctrlKey||c.metaKey)&&c.key==="k"&&(c.preventDefault(),(p=d.current)==null||p.focus(),a(!0))};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[]),g.useEffect(()=>{if(!t.trim()){i([]);return}const u=t.trim().toLowerCase(),p=we().filter(h=>`${h.firstName} ${h.lastName}`.toLowerCase().includes(u)||h.dateOfBirth&&h.dateOfBirth.includes(u)||h.phone&&h.phone.replace(/\D/g,"").includes(u.replace(/\D/g,""))||h.email&&h.email.toLowerCase().includes(u));i(p.slice(0,10))},[t]),g.useEffect(()=>{const u=c=>{o.current&&!o.current.contains(c.target)&&a(!1)};return document.addEventListener("click",u),()=>document.removeEventListener("click",u)},[]),r.jsxs("div",{ref:o,className:"relative px-3 pb-2",children:[r.jsx("label",{className:"sr-only",htmlFor:"global-search",children:"Search patients"}),r.jsx("input",{ref:d,id:"global-search",type:"search",placeholder:"Search patients (Ctrl+K)",value:t,onChange:u=>{n(u.target.value),a(!0)},onFocus:()=>a(!0),onKeyDown:u=>{u.key==="Escape"&&a(!1)},className:"w-full px-3 py-2 text-sm rounded-lg bg-navy-light/50 border border-navy-light text-white placeholder:text-sky-light/70 focus:outline-none focus:ring-1 focus:ring-sky"}),s&&(t.trim()||l.length>0)&&r.jsx("div",{className:"absolute left-3 right-3 top-full mt-1 z-50 bg-white border border-sky/40 rounded-lg shadow-xl max-h-64 overflow-auto",children:l.length===0?r.jsx("p",{className:"p-3 text-sm text-navy/60",children:"No patients match."}):r.jsx("ul",{className:"py-1",children:l.map(u=>r.jsx("li",{children:r.jsxs("button",{type:"button",onClick:()=>{e(`/dashboard/patients/${u.id}`),n(""),a(!1)},className:"w-full text-left px-3 py-2 text-sm text-navy hover:bg-sky/10 flex justify-between gap-2",children:[r.jsxs("span",{className:"font-medium",children:[u.firstName," ",u.lastName]}),r.jsx("span",{className:"text-navy/60 truncate",children:u.dateOfBirth})]})},u.id))})})]})}const zl=[{to:"/dashboard",label:"Dashboard"},{to:"/dashboard/analytics",label:"Analytics"},{to:"/dashboard/patients",label:"Patients"},{to:"/dashboard/billing",label:"Billing"},{to:"/dashboard/staff",label:"Staff"},{to:"/dashboard/appointments",label:"Appointments"},{to:"/dashboard/device-scan",label:"Device Scan"},{to:"/dashboard/recall",label:"Recall"},{to:"/dashboard/audit",label:"Audit log"},{to:"/dashboard/clinic",label:"Clinic"}];function Jg(){const e=dt(),t=Ns(),{timezone:n,setTimezone:s}=Nr(),{staff:a,isSignedIn:l,isAdmin:i,logout:o}=wr(),{full:d}=up(n);return r.jsxs("div",{className:"flex min-h-screen bg-white",children:[r.jsxs("aside",{className:"w-56 flex-shrink-0 bg-navy flex flex-col",children:[r.jsxs("div",{className:"p-4 border-b border-navy-light bg-transparent",children:[r.jsx(Yo,{size:"md"}),(t==null?void 0:t.name)&&r.jsx("p",{className:"text-sky-light text-xs mt-2 truncate",title:t.name,children:t.name})]}),r.jsx(Qg,{}),r.jsx("nav",{className:"flex-1 p-3 space-y-1",children:(()=>{const u=typeof sessionStorage<"u"&&sessionStorage.getItem(On)==="1",c=typeof sessionStorage<"u"&&sessionStorage.getItem(Nt)==="1";let p=a&&Jo.includes(a.position)?[...zl,{to:"/dashboard/my-patients",label:"My patients"}]:zl;return c&&(p=zl),u?[...p,{to:"/dashboard/clinic-log",label:"Clinic Log"}]:p})().map(({to:u,label:c})=>r.jsx(pd,{to:u,className:({isActive:p})=>`block px-4 py-3 rounded-lg text-sm font-medium transition-colors ${p?"bg-sky/20 text-white":"text-sky-light hover:bg-navy-light hover:text-white"}`,children:c},u))}),r.jsxs("div",{className:"p-3 border-t border-navy-light space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sky-light/80 text-xs mb-1 px-1",children:"Time zone"}),r.jsx("select",{value:n,onChange:u=>s(u.target.value),className:"w-full px-2 py-1.5 text-xs rounded bg-navy-light/50 text-white border border-navy-light focus:outline-none focus:ring-1 focus:ring-sky",children:ep.map(u=>r.jsx("option",{value:u.value,children:u.label},u.value))})]}),r.jsx("p",{className:"text-sky-light/90 text-xs px-1 leading-tight",title:d,children:d}),l&&a?r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"text-sky-light text-xs px-1 font-medium",children:["Signed in as ",xp.includes(a.position)?`Dr. ${a.firstName} ${a.lastName}`:`${a.firstName} ${a.lastName}`]}),r.jsx("button",{type:"button",onClick:()=>{o(),e("/",{replace:!0})},className:"w-full mt-2 px-4 py-2 text-xs font-medium rounded-lg bg-white/10 text-sky-light hover:bg-white/20 transition-colors",children:"Sign out"})]}):typeof sessionStorage<"u"&&sessionStorage.getItem(Nt)==="1"?r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-sky-light text-xs px-1 font-medium",children:"Demo mode"}),r.jsx("button",{type:"button",onClick:()=>{try{sessionStorage.removeItem(Nt)}catch{}e("/",{replace:!0})},className:"w-full mt-2 px-4 py-2 text-xs font-medium rounded-lg bg-white/10 text-sky-light hover:bg-white/20 transition-colors",children:"Exit demo"})]}):i?r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-sky-light text-xs px-1 font-medium",children:"Admin"}),r.jsx("button",{type:"button",onClick:()=>{try{sessionStorage.removeItem(On)}catch{}e("/",{replace:!0})},className:"w-full mt-2 px-4 py-2 text-xs font-medium rounded-lg bg-white/10 text-sky-light hover:bg-white/20 transition-colors",children:"Log out (Admin)"})]}):r.jsxs(r.Fragment,{children:[r.jsx(pd,{to:"/signin",className:"block w-full mt-2 px-4 py-2 text-xs font-medium rounded-lg bg-white/10 text-sky-light hover:bg-white/20 transition-colors text-center",children:"Sign in"}),r.jsx("button",{type:"button",onClick:()=>e("/",{replace:!0}),className:"w-full mt-2 px-4 py-2 text-xs font-medium rounded-lg bg-white/10 text-sky-light hover:bg-white/20 transition-colors",children:"Log out"})]}),r.jsx("p",{className:"text-sky-light/80 text-xs px-4",children:"GumGauge Dental"})]})]}),r.jsx("main",{className:"flex-1 overflow-auto bg-sky-light/30",children:r.jsx(Xx,{})})]})}function Xg(){const e=dt(),[t,n]=g.useState(!1),s=()=>{n(!0);try{sessionStorage.removeItem(Nt)}catch{}setTimeout(()=>e("/dashboard",{replace:!0}),400)},a=()=>{try{sessionStorage.setItem(Nt,"1")}catch{}e("/dashboard",{replace:!0})};return r.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-navy relative",children:[r.jsx("div",{className:"absolute top-6 right-6 flex gap-2",children:r.jsx(K,{to:"/admin",className:"px-4 py-2 text-sky-light text-sm font-medium hover:text-white border border-white/30 rounded-lg hover:bg-white/10",children:"Admin"})}),r.jsxs("div",{className:"splash-glimmer-wrapper flex flex-col items-center gap-8",children:[r.jsx("div",{className:"splash-logo-glimmer",children:r.jsx(Yo,{size:"xl",variant:"dark"})}),r.jsxs("h1",{className:"splash-tagline-wrapper text-2xl sm:text-3xl md:text-4xl font-semibold text-center tracking-tight",children:[r.jsx("span",{className:"splash-tagline-outline",children:"GumGauge  The Future of Dental Care"}),r.jsx("span",{className:"splash-tagline-fill",children:"GumGauge  The Future of Dental Care"})]})]}),r.jsxs("div",{className:"mt-12 flex flex-col sm:flex-row flex-wrap items-center justify-center gap-4",children:[r.jsx("button",{type:"button",onClick:s,disabled:t,className:"px-10 py-4 bg-white text-navy font-semibold text-lg rounded-xl border-2 border-black shadow-lg shadow-black/20 hover:bg-sky-light hover:shadow-xl hover:shadow-black/25 hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-white/50 focus:ring-offset-2 focus:ring-offset-navy active:scale-[0.98] transition-all duration-200 disabled:opacity-80 disabled:hover:translate-y-0",children:"Start System"}),r.jsx("button",{type:"button",onClick:a,className:"px-10 py-4 bg-amber-400 text-navy font-semibold text-lg rounded-xl border-2 border-amber-500 shadow-lg hover:bg-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-400/50 focus:ring-offset-2 focus:ring-offset-navy active:scale-[0.98] transition-all duration-200",children:"Demo"}),r.jsx(K,{to:"/signin",className:"px-10 py-4 bg-white/10 text-white font-medium text-lg rounded-xl border-2 border-white/40 hover:bg-white/20 focus:outline-none focus:ring-2 focus:ring-white/50 focus:ring-offset-2 focus:ring-offset-navy transition-all inline-block text-center",children:"Log-in"})]})]})}function qg(){const e=dt(),[t]=Zm(),n=t.get("returnTo")||"/dashboard",{login:s}=wr(),[a,l]=g.useState(""),[i,o]=g.useState(""),[d,u]=g.useState(""),c=p=>{if(p.preventDefault(),u(""),!a.trim()||!i){u("Please enter your login email and password.");return}s(a.trim(),i)?e(n.startsWith("/")?n:`/${n}`,{replace:!0}):u("Invalid login email or password. Please try again.")};return r.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-navy p-4",children:r.jsxs("div",{className:"w-full max-w-sm",children:[r.jsx("div",{className:"flex justify-center mb-6",children:r.jsx(Yo,{size:"lg",variant:"dark"})}),r.jsx("h1",{className:"text-xl font-semibold text-white text-center mb-2",children:"Sign in"}),r.jsx("p",{className:"text-sky-light/90 text-sm text-center mb-6",children:"Enter your clinic credentials to log in as your profile and treat patients."}),r.jsxs("form",{onSubmit:c,className:"bg-white/10 rounded-xl border border-white/20 p-6 space-y-4",autoComplete:"off",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sky-light/90 text-sm mb-1",children:"Login email or username"}),r.jsx("input",{type:"text",autoComplete:"off",value:a,onChange:p=>l(p.target.value),placeholder:"e.g. jane@practice.com",className:"w-full px-3 py-2 rounded-lg border border-sky/60 bg-white text-navy"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sky-light/90 text-sm mb-1",children:"Password"}),r.jsx("input",{type:"password",autoComplete:"off",value:i,onChange:p=>o(p.target.value),placeholder:"",className:"w-full px-3 py-2 rounded-lg border border-sky/60 bg-white text-navy"})]}),d&&r.jsx("p",{className:"text-amber-200 text-sm bg-amber-900/30 px-3 py-2 rounded-lg",role:"alert",children:d}),r.jsx("button",{type:"submit",className:"w-full px-4 py-2 bg-white text-navy font-medium rounded-lg hover:bg-sky-light border-2 border-black",children:"Sign in"})]}),r.jsx("p",{className:"mt-4 text-center",children:r.jsx(K,{to:"/",className:"text-sky-light hover:text-white text-sm font-medium",children:" Back to Start System"})})]})})}function Zg(){try{return typeof sessionStorage<"u"&&sessionStorage.getItem(Nt)==="1"}catch{return!1}}function ey(){const e=Ns(),{timezone:t}=Nr(),n=sl(t),{full:s}=up(t),[a,l]=g.useState(()=>we());g.useEffect(()=>{l(we())},[]);const i=a.filter(u=>u.currentVisitStartedAt).sort((u,c)=>(c.currentVisitStartedAt??"").localeCompare(u.currentVisitStartedAt??"")),o=a.filter(u=>u.dateOfAppointment===n).sort((u,c)=>(u.appointmentTime||"00:00").localeCompare(c.appointmentTime||"00:00")),d=a.filter(u=>u.dateOfNextAppointment&&u.dateOfNextAppointment>=n).sort((u,c)=>{const p=u.dateOfNextAppointment.localeCompare(c.dateOfNextAppointment);return p!==0?p:(u.nextAppointmentTime||"00:00").localeCompare(c.nextAppointmentTime||"00:00")}).slice(0,5);return r.jsxs("div",{className:"p-8",children:[Zg()&&r.jsxs("div",{className:"mb-4 px-4 py-2 bg-amber-50 border border-amber-200 rounded-lg text-amber-900 text-sm",children:[r.jsx("strong",{children:"Demo mode."})," Youre viewing sample data. You can explore patients, charts, appointments, and clinic info. Changes are saved only for this demo session."]}),r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-2",children:[r.jsx("h1",{className:"text-2xl font-semibold text-navy",children:"Dashboard"}),(e==null?void 0:e.name)&&r.jsx("p",{className:"text-navy/70 text-sm font-medium",children:e.name})]}),r.jsx("p",{className:"text-navy/70 mb-1",children:s}),r.jsx("p",{className:"text-navy/50 text-sm mb-4",children:"Live  based on selected time zone"}),r.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[r.jsx(K,{to:"/dashboard/patients/new",className:"px-4 py-2 bg-navy text-white rounded-lg font-medium hover:bg-navy-light inline-block",children:"+ Add patient"}),r.jsx(K,{to:"/dashboard/analytics",className:"px-4 py-2 border border-sky/60 rounded-lg font-medium text-navy hover:bg-sky/10 inline-block",children:"Analytics"}),r.jsxs("span",{className:"text-navy/60 text-sm",children:[i.length," in progress  ",o.length," today"]})]}),r.jsxs("div",{className:"bg-green-50 rounded-xl shadow-sm border-2 border-green-200 p-6 mb-6",children:[r.jsx("h2",{className:"text-lg font-medium text-green-900 mb-1",children:"Visits in progress"}),r.jsx("p",{className:"text-sm text-green-800/70 mb-4",children:"Patients currently in the office  visible to all dentists and front office staff."}),i.length===0?r.jsx("p",{className:"text-green-800/70",children:"No visits in progress."}):r.jsx("ul",{className:"space-y-2",children:i.map(u=>r.jsxs("li",{className:"flex flex-wrap items-center justify-between gap-x-4 gap-y-1 py-2 border-b border-green-200 last:border-0",children:[r.jsxs("span",{className:"text-green-900 font-medium",children:[u.firstName," ",u.lastName]}),r.jsxs("span",{className:"text-green-800/80 text-sm",children:["Started ",u.currentVisitStartedAt&&Wi(u.currentVisitStartedAt,t)]}),r.jsx(K,{to:`/dashboard/patients/${u.id}`,className:"text-green-700 text-sm font-medium hover:underline shrink-0",children:"Open chart"})]},u.id))})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-6 mb-6",children:[r.jsx("h2",{className:"text-lg font-medium text-navy mb-4",children:"Today's appointments"}),o.length===0?r.jsx("p",{className:"text-navy/60",children:"No appointments today."}):r.jsx("ul",{className:"space-y-2",children:o.map(u=>r.jsxs("li",{className:"flex flex-wrap items-center justify-between gap-x-4 gap-y-1 py-2 border-b border-sky/20 last:border-0",children:[r.jsxs("span",{className:"text-navy",children:[u.firstName," ",u.lastName,u.appointmentTime&&r.jsx("span",{className:"text-navy/70 text-sm ml-2",children:u.appointmentTime}),u.currentVisitStartedAt&&r.jsx("span",{className:"ml-2 inline-flex items-center rounded bg-green-100 px-2 py-0.5 text-xs font-medium text-green-800",children:"In progress"})]}),r.jsxs("span",{className:"text-navy/70 text-sm",children:[u.appointmentType&&r.jsx("span",{children:u.appointmentType}),u.appointmentType&&u.appointmentDoctor&&"  ",u.appointmentDoctor&&r.jsxs("span",{children:["with ",u.appointmentDoctor]}),!u.appointmentType&&!u.appointmentDoctor&&""]}),r.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[!u.currentVisitStartedAt&&r.jsx(K,{to:`/dashboard/patients/${u.id}?startVisit=1`,className:"px-3 py-1.5 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 inline-block",children:"Start visit"}),r.jsx(K,{to:`/dashboard/patients/${u.id}`,className:"text-sky-dark text-sm font-medium hover:underline",children:"Chart"})]})]},u.id))})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-6",children:[r.jsx("h2",{className:"text-lg font-medium text-navy mb-4",children:"Upcoming next appointments"}),d.length===0?r.jsx("p",{className:"text-navy/60",children:"No upcoming next appointments."}):r.jsx("ul",{className:"space-y-2",children:d.map(u=>r.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-sky/20 last:border-0",children:[r.jsxs("span",{className:"text-navy",children:[u.firstName," ",u.lastName]}),r.jsxs("span",{className:"text-navy/70 text-sm",children:[Z(u.dateOfNextAppointment),u.nextAppointmentTime?` ${u.nextAppointmentTime}`:""]}),r.jsx(K,{to:`/dashboard/patients/${u.id}`,className:"text-sky-dark text-sm font-medium hover:underline",children:"View chart"})]},u.id))})]})]})}function vp(e,t,n){const s=u=>{const c=String(u);return c.includes(",")||c.includes('"')||c.includes(`
`)?`"${c.replace(/"/g,'""')}"`:c},a=u=>u.map(s).join(","),l=[a(t),...n.map(a)].join(`\r
`),i=new Blob([l],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(i),d=document.createElement("a");d.href=o,d.download=e,d.click(),URL.revokeObjectURL(o)}const ty=[{value:"name-asc",label:"Name (A  Z)"},{value:"name-desc",label:"Name (Z  A)"},{value:"dob-asc",label:"DOB (oldest first)"},{value:"dob-desc",label:"DOB (newest first)"},{value:"apptDate-asc",label:"Appt date (earliest first)"},{value:"apptDate-desc",label:"Appt date (latest first)"},{value:"apptTime-asc",label:"Appt time (earliest first)"},{value:"apptTime-desc",label:"Appt time (latest first)"},{value:"nextApptDate-asc",label:"Next appt date (earliest first)"},{value:"nextApptDate-desc",label:"Next appt date (latest first)"}];function ny(e,t,n){const s=n==="asc"?1:-1;return[...e].sort((a,l)=>{let i=0;switch(t){case"name":{const o=`${a.firstName} ${a.lastName}`.toLowerCase(),d=`${l.firstName} ${l.lastName}`.toLowerCase();i=o.localeCompare(d);break}case"dob":i=(a.dateOfBirth||"").localeCompare(l.dateOfBirth||"");break;case"apptDate":i=(a.dateOfAppointment||"").localeCompare(l.dateOfAppointment||"");break;case"apptTime":{const o=a.appointmentTime||"00:00",d=l.appointmentTime||"00:00";i=o.localeCompare(d)||(a.dateOfAppointment||"").localeCompare(l.dateOfAppointment||"");break}case"nextApptDate":i=(a.dateOfNextAppointment||"").localeCompare(l.dateOfNextAppointment||"");break;case"nextApptTime":{const o=a.nextAppointmentTime||"00:00",d=l.nextAppointmentTime||"00:00";i=o.localeCompare(d)||(a.dateOfNextAppointment||"").localeCompare(l.dateOfNextAppointment||"");break}}return i*s})}function ry(){const[e,t]=g.useState(""),[n,s]=g.useState("name-asc"),a=g.useMemo(()=>we(),[]),l=g.useMemo(()=>a.filter(u=>`${u.firstName} ${u.lastName}`.toLowerCase().includes(e.toLowerCase())||u.email&&u.email.toLowerCase().includes(e.toLowerCase())),[a,e]),[i,o]=n.split("-"),d=g.useMemo(()=>ny(l,i,o),[l,i,o]);return r.jsxs("div",{className:"p-8",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[r.jsx("h1",{className:"text-2xl font-semibold text-navy",children:"Patients"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:()=>{const u=["First name","Last name","DOB","Phone","Email","Appt date","Appt time","Next appt date"],c=d.map(p=>[p.firstName,p.lastName,p.dateOfBirth??"",p.phone??"",p.email??"",p.dateOfAppointment??"",p.appointmentTime??"",p.dateOfNextAppointment??""]);vp(`patients-${new Date().toISOString().slice(0,10)}.csv`,u,c)},className:"inline-flex items-center justify-center px-4 py-2 border border-sky/60 rounded-lg font-medium text-navy hover:bg-sky/10",children:"Export CSV"}),r.jsx(K,{to:"/dashboard/patients/new",className:"inline-flex items-center justify-center px-4 py-2 bg-navy text-white rounded-lg font-medium hover:bg-navy-light transition-colors",children:"+ Add patient"})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:[r.jsx("input",{type:"search",placeholder:"Search by name or email...",value:e,onChange:u=>t(u.target.value),className:"flex-1 max-w-md px-4 py-2 border border-sky/60 rounded-lg bg-white text-navy placeholder-navy/50 focus:outline-none focus:ring-2 focus:ring-sky focus:border-transparent"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("label",{className:"text-sm text-navy/70 whitespace-nowrap",children:"Sort by"}),r.jsx("select",{value:n,onChange:u=>s(u.target.value),className:"px-3 py-2 border border-sky/60 rounded-lg bg-white text-navy min-w-[200px]",children:ty.map(u=>r.jsx("option",{value:u.value,children:u.label},u.value))})]})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 overflow-hidden",children:d.length===0?r.jsx("div",{className:"p-8 text-center text-navy/60",children:a.length===0?"No patients yet. Add your first patient above.":"No patients match your search."}):r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-navy/5 border-b border-sky/40",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-navy",children:"Name"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-navy",children:"DOB"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-navy",children:"Allergies"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-navy",children:"Appointment"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-navy",children:"Next"}),r.jsx("th",{className:"w-24"})]})}),r.jsx("tbody",{children:d.map(u=>r.jsxs("tr",{className:"border-b border-sky/20 hover:bg-sky/10",children:[r.jsxs("td",{className:"py-3 px-4 font-medium text-navy",children:[u.firstName," ",u.lastName]}),r.jsx("td",{className:"py-3 px-4 text-navy/80",children:Z(u.dateOfBirth)}),r.jsx("td",{className:"py-3 px-4",children:u.allergies?r.jsx("span",{className:"text-amber-700 bg-amber-100 text-xs px-2 py-0.5 rounded",title:u.allergies,children:u.allergies.length>20?`${u.allergies.slice(0,20)}`:u.allergies}):r.jsx("span",{className:"text-navy/50",children:""})}),r.jsxs("td",{className:"py-3 px-4 text-navy/80",children:[Z(u.dateOfAppointment),u.appointmentTime?` ${u.appointmentTime}`:""]}),r.jsx("td",{className:"py-3 px-4 text-navy/80",children:u.dateOfNextAppointment?Z(u.dateOfNextAppointment)+(u.nextAppointmentTime?` ${u.nextAppointmentTime}`:""):""}),r.jsx("td",{className:"py-3 px-4",children:r.jsx(K,{to:`/dashboard/patients/${u.id}`,className:"text-sky-dark font-medium text-sm hover:underline",children:"Chart"})})]},u.id))})]})})]})}const sy=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],ay=[17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32];function yd(e){return e==="Healthy"?"#22c55e":e==="Moderate"?"#eab308":e==="Unhealthy"?"#dc2626":"#94a3b8"}function bp({exams:e,selectedExamId:t,onSelectExamId:n,selectedTooth:s,onSelectTooth:a,showDateDropdown:l=!0}){const i=g.useMemo(()=>e.find(u=>u.id===t)??e[e.length-1]??null,[e,t]),o=g.useMemo(()=>i?new Map(i.teeth.map(u=>[u.tooth,u])):new Map,[i]),d=s!=null?o.get(s):null;return e.length===0?r.jsx("div",{className:"rounded-xl border border-sky/40 bg-sky/5 p-4 text-center text-navy/70 text-sm",children:"No GumGauge scans yet. Run a scan and add readings to the chart to see results here."}):r.jsxs("div",{className:"space-y-4",children:[l&&r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsx("label",{className:"text-sm font-medium text-navy",children:"Scan date"}),r.jsx("select",{value:t??(i==null?void 0:i.id)??"",onChange:u=>{n(u.target.value||null),a(null)},className:"px-3 py-2 border border-sky/60 rounded-lg bg-white text-sm",children:e.map(u=>r.jsx("option",{value:u.id,children:Z(u.scanDate)},u.id))})]}),r.jsx("p",{className:"text-xs text-navy/60",children:"Click a tooth to see its light penetration % and health. Colors: green = Healthy, amber = Moderate, red = Unhealthy."}),r.jsx("div",{className:"flex flex-col items-center",children:r.jsxs("svg",{viewBox:"0 0 320 140",className:"w-full max-w-md h-auto",style:{maxHeight:"220px"},children:[r.jsxs("g",{transform:"translate(10, 10)",children:[r.jsx("text",{x:"0",y:"-2",className:"text-[10px] fill-navy/70",children:"Upper (1-16)"}),sy.map((u,c)=>{const p=o.get(u),h=yd(p==null?void 0:p.healthResult),w=s===u,m=c%8*38+2,b=Math.floor(c/8)*32;return r.jsxs("g",{children:[r.jsx("rect",{x:m,y:b,width:34,height:26,rx:4,fill:h,stroke:w?"#0f172a":"#64748b",strokeWidth:w?2.5:1,opacity:.9,className:"cursor-pointer",onClick:()=>a(s===u?null:u)}),r.jsx("text",{x:m+17,y:b+16,textAnchor:"middle",fontSize:"10",fill:"#fff",fontWeight:"600",children:u})]},u)})]}),r.jsxs("g",{transform:"translate(10, 88)",children:[r.jsx("text",{x:"0",y:"-2",className:"text-[10px] fill-navy/70",children:"Lower (17-32)"}),ay.map((u,c)=>{const p=o.get(u),h=yd(p==null?void 0:p.healthResult),w=s===u,m=c%8*38+2,b=Math.floor(c/8)*32;return r.jsxs("g",{children:[r.jsx("rect",{x:m,y:b,width:34,height:26,rx:4,fill:h,stroke:w?"#0f172a":"#64748b",strokeWidth:w?2.5:1,opacity:.9,className:"cursor-pointer",onClick:()=>a(s===u?null:u)}),r.jsx("text",{x:m+17,y:b+16,textAnchor:"middle",fontSize:"10",fill:"#fff",fontWeight:"600",children:u})]},u)})]})]})}),d!=null&&s!=null&&r.jsxs("div",{className:"rounded-lg border-2 border-navy/30 bg-white p-3 text-sm",children:[r.jsxs("p",{className:"font-medium text-navy",children:["Tooth ",s]}),r.jsxs("p",{className:"text-navy/80",children:["Light penetration: ",r.jsx("strong",{children:d.lightPenetrationPercent!=null?`${d.lightPenetrationPercent}%`:""})]}),r.jsxs("p",{className:"text-navy/80",children:["Health: ",r.jsx("strong",{className:d.healthResult==="Unhealthy"?"text-red-600":d.healthResult==="Moderate"?"text-amber-700":"",children:d.healthResult??""})]})]})]})}const vd=[32,31,30,29,28,27,26,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,1,2,3,4,5,6,7,8,9,10];function ly({exams:e,gumGaugeExams:t=[],onSaveExam:n,onDeleteExam:s,readOnly:a}){const[l,i]=g.useState("numeric"),[o,d]=g.useState([]),[u,c]=g.useState(!1),[p,h]=g.useState(new Date().toISOString().slice(0,10)),[w,m]=g.useState(vd.map(S=>({tooth:S,pd:[...Array(6)],bleeding:Array(6).fill(!1),suppuration:Array(6).fill(!1)}))),[b,N]=g.useState(""),f=(S,I,_)=>{m(J=>J.map(Q=>Q.tooth===S?{...Q,[I]:_}:Q))},x=()=>{const S=w.map(I=>{var _,J,Q;return{...I,pd:(_=I.pd)==null?void 0:_.map(q=>q==null?void 0:Number(q)),gm:(J=I.gm)==null?void 0:J.map(q=>q==null?void 0:Number(q)),cal:(Q=I.cal)==null?void 0:Q.map(q=>q==null?void 0:Number(q))}});n({examDate:p,teeth:S,notes:b||void 0}),c(!1),h(new Date().toISOString().slice(0,10)),m(vd.map(I=>({tooth:I,pd:[...Array(6)],bleeding:Array(6).fill(!1),suppuration:Array(6).fill(!1)}))),N("")},y=e.filter(S=>o.includes(S.id)),k=e.length>0?e[e.length-1]:null,[D,T]=g.useState(null),[C,A]=g.useState(null),R=t.length>0?t.find(S=>S.id===D)??t[t.length-1]:null,O=R?new Map(R.teeth.map(S=>[S.tooth,S])):null;return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsx("span",{className:"text-sm font-medium text-navy",children:"View:"}),r.jsx("button",{type:"button",onClick:()=>i("numeric"),className:`px-3 py-1.5 rounded-lg text-sm font-medium ${l==="numeric"?"bg-navy text-white":"bg-sky/20 text-navy"}`,children:"Numeric"}),r.jsx("button",{type:"button",onClick:()=>i("graphic"),className:`px-3 py-1.5 rounded-lg text-sm font-medium ${l==="graphic"?"bg-navy text-white":"bg-sky/20 text-navy"}`,children:"Graphic"}),e.length>1&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"text-sm text-navy/70",children:"Compare:"}),r.jsx("select",{multiple:!0,value:o,onChange:S=>d(Array.from(S.target.selectedOptions,I=>I.value)),className:"border border-sky/60 rounded-lg px-2 py-1 text-sm max-w-[200px]",children:e.map(S=>r.jsx("option",{value:S.id,children:Z(S.examDate)},S.id))})]}),!a&&r.jsx("button",{type:"button",onClick:()=>c(!0),className:"ml-auto px-3 py-1.5 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700",children:"+ New exam"})]}),u&&r.jsxs("div",{className:"border-2 border-sky/40 rounded-xl p-4 bg-sky/5 space-y-4",children:[r.jsx("h4",{className:"font-medium text-navy",children:"New periodontal exam"}),r.jsxs("div",{className:"flex gap-4 items-center",children:[r.jsx("label",{className:"text-sm text-navy/70",children:"Exam date"}),r.jsx("input",{type:"date",value:p,onChange:S=>h(S.target.value),className:"px-3 py-2 border border-sky/60 rounded-lg"})]}),r.jsx("p",{className:"text-xs text-navy/60",children:"PD = Pocket depth (mm), B = Bleeding. Enter values per site (MB, B, DB, ML, L, DL)."}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"overflow-x-auto border border-sky/30 rounded-lg p-2 bg-white",children:[r.jsx("h5",{className:"text-sm font-medium text-navy mb-2",children:"Teeth 116"}),r.jsxs("table",{className:"text-xs border border-sky/40 w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-sky/10",children:[r.jsx("th",{className:"px-2 py-1 border border-sky/30",children:"Tooth"}),rt.map(S=>r.jsxs("th",{className:"px-1 py-1 border border-sky/30",children:["PD ",S]},S)),rt.map(S=>r.jsxs("th",{className:"px-1 py-1 border border-sky/30",children:["B ",S]},`b-${S}`))]})}),r.jsx("tbody",{children:w.filter(S=>S.tooth>=1&&S.tooth<=16).sort((S,I)=>S.tooth-I.tooth).map(S=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-2 py-1 border border-sky/30 font-medium",children:S.tooth}),rt.map((I,_)=>{var J;return r.jsx("td",{className:"px-1 py-0 border border-sky/30",children:r.jsx("input",{type:"number",min:0,max:15,className:"w-10 px-0.5 py-0.5 border rounded",value:((J=S.pd)==null?void 0:J[_])??"",onChange:Q=>{const q=Q.target.value===""?void 0:Number(Q.target.value),ce=[...S.pd??Array(6).fill(void 0)];ce[_]=q,f(S.tooth,"pd",ce)}})},I)}),rt.map((I,_)=>{var J;return r.jsx("td",{className:"px-1 py-0 border border-sky/30",children:r.jsx("input",{type:"checkbox",checked:((J=S.bleeding)==null?void 0:J[_])??!1,onChange:Q=>{const q=[...S.bleeding??Array(6).fill(!1)];q[_]=Q.target.checked,f(S.tooth,"bleeding",q)}})},`b-${I}`)})]},S.tooth))})]})]}),r.jsxs("div",{className:"overflow-x-auto border border-sky/30 rounded-lg p-2 bg-white",children:[r.jsx("h5",{className:"text-sm font-medium text-navy mb-2",children:"Teeth 1732"}),r.jsxs("table",{className:"text-xs border border-sky/40 w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-sky/10",children:[r.jsx("th",{className:"px-2 py-1 border border-sky/30",children:"Tooth"}),rt.map(S=>r.jsxs("th",{className:"px-1 py-1 border border-sky/30",children:["PD ",S]},S)),rt.map(S=>r.jsxs("th",{className:"px-1 py-1 border border-sky/30",children:["B ",S]},`b-${S}`))]})}),r.jsx("tbody",{children:w.filter(S=>S.tooth>=17&&S.tooth<=32).sort((S,I)=>S.tooth-I.tooth).map(S=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-2 py-1 border border-sky/30 font-medium",children:S.tooth}),rt.map((I,_)=>{var J;return r.jsx("td",{className:"px-1 py-0 border border-sky/30",children:r.jsx("input",{type:"number",min:0,max:15,className:"w-10 px-0.5 py-0.5 border rounded",value:((J=S.pd)==null?void 0:J[_])??"",onChange:Q=>{const q=Q.target.value===""?void 0:Number(Q.target.value),ce=[...S.pd??Array(6).fill(void 0)];ce[_]=q,f(S.tooth,"pd",ce)}})},I)}),rt.map((I,_)=>{var J;return r.jsx("td",{className:"px-1 py-0 border border-sky/30",children:r.jsx("input",{type:"checkbox",checked:((J=S.bleeding)==null?void 0:J[_])??!1,onChange:Q=>{const q=[...S.bleeding??Array(6).fill(!1)];q[_]=Q.target.checked,f(S.tooth,"bleeding",q)}})},`b-${I}`)})]},S.tooth))})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Notes"}),r.jsx("textarea",{value:b,onChange:S=>N(S.target.value),rows:2,className:"w-full px-3 py-2 border border-sky/60 rounded-lg text-sm"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:x,className:"px-4 py-2 bg-navy text-white rounded-lg text-sm font-medium",children:"Save exam"}),r.jsx("button",{type:"button",onClick:()=>c(!1),className:"px-4 py-2 border border-navy/30 rounded-lg text-sm",children:"Cancel"})]})]}),l==="numeric"&&(y.length>0||k)&&r.jsx("div",{className:"overflow-x-auto",children:(y.length>0?y:k?[k]:[]).map(S=>r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"font-medium text-navy",children:Z(S.examDate)}),!a&&s&&r.jsx("button",{type:"button",onClick:()=>s(S.id),className:"text-xs text-red-600 hover:underline",children:"Delete"})]}),r.jsxs("table",{className:"text-xs border border-sky/40 w-full",children:[r.jsxs("thead",{children:[r.jsxs("tr",{className:"bg-sky/10",children:[r.jsx("th",{className:"px-2 py-1 border border-sky/30",children:"Tooth"}),rt.map(I=>r.jsx("th",{className:"px-1 py-1 border border-sky/30",colSpan:2,children:I},I))]}),r.jsxs("tr",{className:"bg-sky/5",children:[r.jsx("th",{className:"px-2 py-1 border border-sky/30"}),rt.map(I=>r.jsxs(ir.Fragment,{children:[r.jsx("th",{className:"px-1 py-1 border border-sky/30",children:"PD"}),r.jsx("th",{className:"px-1 py-1 border border-sky/30",children:"B"})]},I))]})]}),r.jsx("tbody",{children:S.teeth.slice(0,32).map(I=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-2 py-1 border border-sky/30 font-medium",children:I.tooth}),rt.map((_,J)=>{var Q,q;return r.jsxs(ir.Fragment,{children:[r.jsx("td",{className:"px-1 py-1 border border-sky/30",children:((Q=I.pd)==null?void 0:Q[J])??""}),r.jsx("td",{className:"px-1 py-1 border border-sky/30",children:(q=I.bleeding)!=null&&q[J]?"":""})]},_)})]},I.tooth))})]}),S.notes&&r.jsx("p",{className:"text-xs text-navy/70 mt-1",children:S.notes})]},S.id))}),l==="graphic"&&k&&r.jsxs("div",{className:"border border-sky/40 rounded-lg p-4 bg-white",children:[r.jsxs("p",{className:"text-sm font-medium text-navy mb-2",children:["Graphic view  ",Z(k.examDate)]}),r.jsx("div",{className:"grid grid-cols-8 gap-1 text-center",children:k.teeth.slice(0,32).map(S=>r.jsxs("div",{className:"border border-sky/30 rounded p-1 bg-sky/5",children:[r.jsx("span",{className:"text-xs font-medium",children:S.tooth}),r.jsx("div",{className:"flex justify-center gap-0.5 mt-0.5",children:(S.pd??[]).slice(0,6).map((I,_)=>r.jsx("span",{className:`text-[10px] w-4 ${I!==void 0&&I>=5?"text-red-600 font-medium":"text-navy/70"}`,title:rt[_],children:I??""},_))}),(S.bleeding??[]).some(Boolean)&&r.jsx("span",{className:"text-red-500 text-[10px]",children:"B"})]},S.tooth))}),r.jsx("p",{className:"text-xs text-navy/60 mt-2",children:"Pocket depths (mm) by site. Red = 5+ mm. B = bleeding."})]}),R&&O&&r.jsxs("div",{className:"border border-green-200 rounded-xl p-4 bg-green-50/80 space-y-4",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsx("h4",{className:"text-sm font-semibold text-navy",children:"GumGauge device results (auto-filled from scan)"}),t.length>1&&r.jsxs(r.Fragment,{children:[r.jsx("label",{className:"text-xs text-navy/70",children:"Scan date:"}),r.jsx("select",{value:D??R.id,onChange:S=>T(S.target.value||null),className:"px-2 py-1 border border-sky/60 rounded-lg bg-white text-sm",children:t.map(S=>r.jsx("option",{value:S.id,children:Z(S.scanDate)},S.id))})]})]}),r.jsxs("p",{className:"text-xs text-navy/70",children:[t.length===1&&`Scan date: ${Z(R.scanDate)}  `,"Light penetration % and health evaluation from device. Use with perio chart above."]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"overflow-x-auto border border-sky/30 rounded-lg p-2 bg-white",children:[r.jsx("h5",{className:"text-xs font-medium text-navy mb-2",children:"Teeth 116"}),r.jsxs("table",{className:"text-xs w-full border border-sky/40",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-sky/10",children:[r.jsx("th",{className:"px-2 py-1 border border-sky/30",children:"Tooth"}),r.jsx("th",{className:"px-2 py-1 border border-sky/30",children:"Light %"}),r.jsx("th",{className:"px-2 py-1 border border-sky/30",children:"Health"})]})}),r.jsx("tbody",{children:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16].map(S=>{const I=O.get(S);return r.jsxs("tr",{children:[r.jsx("td",{className:"px-2 py-1 border border-sky/30 font-medium",children:S}),r.jsx("td",{className:"px-2 py-1 border border-sky/30",children:(I==null?void 0:I.lightPenetrationPercent)!=null?`${I.lightPenetrationPercent}%`:""}),r.jsx("td",{className:`px-2 py-1 border border-sky/30 ${(I==null?void 0:I.healthResult)==="Unhealthy"?"text-red-600 font-medium":(I==null?void 0:I.healthResult)==="Moderate"?"text-amber-700":""}`,children:(I==null?void 0:I.healthResult)??""})]},S)})})]})]}),r.jsxs("div",{className:"overflow-x-auto border border-sky/30 rounded-lg p-2 bg-white",children:[r.jsx("h5",{className:"text-xs font-medium text-navy mb-2",children:"Teeth 1732"}),r.jsxs("table",{className:"text-xs w-full border border-sky/40",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-sky/10",children:[r.jsx("th",{className:"px-2 py-1 border border-sky/30",children:"Tooth"}),r.jsx("th",{className:"px-2 py-1 border border-sky/30",children:"Light %"}),r.jsx("th",{className:"px-2 py-1 border border-sky/30",children:"Health"})]})}),r.jsx("tbody",{children:[17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32].map(S=>{const I=O.get(S);return r.jsxs("tr",{children:[r.jsx("td",{className:"px-2 py-1 border border-sky/30 font-medium",children:S}),r.jsx("td",{className:"px-2 py-1 border border-sky/30",children:(I==null?void 0:I.lightPenetrationPercent)!=null?`${I.lightPenetrationPercent}%`:""}),r.jsx("td",{className:`px-2 py-1 border border-sky/30 ${(I==null?void 0:I.healthResult)==="Unhealthy"?"text-red-600 font-medium":(I==null?void 0:I.healthResult)==="Moderate"?"text-amber-700":""}`,children:(I==null?void 0:I.healthResult)??""})]},S)})})]})]})]}),r.jsxs("div",{className:"mt-4 pt-4 border-t border-green-200",children:[r.jsx("p",{className:"text-xs font-medium text-navy mb-2",children:"Interactive view  click a tooth to see details"}),r.jsx(bp,{exams:t,selectedExamId:D??(R==null?void 0:R.id)??null,onSelectExamId:T,selectedTooth:C,onSelectTooth:A,showDateDropdown:!1})]})]}),e.length===0&&!u&&r.jsx("p",{className:"text-navy/60 text-sm",children:"No periodontal exams yet. Add an exam to record pocket depths, bleeding, and compare over time."})]})}const Gs=[{id:"new-patient",name:"New patient exam",placeholder:`Chief complaint:
Medical history reviewed:
Clinical findings:
Treatment discussed:
Plan:`},{id:"prophy",name:"Prophylaxis",placeholder:`Prophy completed. Findings:
Patient education:
Next recall:`},{id:"srp",name:"Scaling and root planing",placeholder:`Areas treated:
Anesthesia:
Post-op instructions:
Follow-up:`},{id:"emergency",name:"Emergency visit",placeholder:`Chief complaint:
Clinical findings:
Treatment rendered:
Disposition:`},{id:"restorative",name:"Restorative",placeholder:`Tooth/teeth:
Procedure:
Materials:
Notes:`},{id:"extraction",name:"Extraction",placeholder:`Tooth:
Indication:
Anesthesia:
Technique:
Post-op instructions:`},{id:"custom",name:"Free form",placeholder:"Enter clinical note..."}];function iy({notes:e,onAdd:t,onDelete:n,readOnly:s}){const[a,l]=g.useState(!1),[i,o]=g.useState(Gs[0].id),[d,u]=g.useState(""),[c,p]=g.useState(new Date().toISOString().slice(0,10)),h=Gs.find(b=>b.id===i),w=()=>{t({date:c,templateId:i==="custom"?void 0:i,content:d,author:void 0}),l(!1),u(""),p(new Date().toISOString().slice(0,10))},m=()=>{h!=null&&h.placeholder&&u(h.placeholder)};return r.jsxs("div",{className:"space-y-4",children:[!s&&r.jsx("div",{className:"flex flex-wrap items-center gap-2",children:r.jsx("button",{type:"button",onClick:()=>l(!0),className:"px-3 py-1.5 bg-navy text-white rounded-lg text-sm font-medium hover:bg-navy-light",children:"+ Add progress note"})}),a&&r.jsxs("div",{className:"border-2 border-sky/40 rounded-xl p-4 bg-sky/5 space-y-3",children:[r.jsx("h4",{className:"font-medium text-navy",children:"New clinical / progress note"}),r.jsxs("div",{className:"flex flex-wrap gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-navy/70 mb-1",children:"Date"}),r.jsx("input",{type:"date",value:c,onChange:b=>p(b.target.value),className:"px-3 py-2 border border-sky/60 rounded-lg text-sm"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-navy/70 mb-1",children:"Template"}),r.jsx("select",{value:i,onChange:b=>{o(b.target.value),u("")},className:"px-3 py-2 border border-sky/60 rounded-lg bg-white text-sm",children:Gs.map(b=>r.jsx("option",{value:b.id,children:b.name},b.id))})]}),(h==null?void 0:h.placeholder)&&r.jsx("button",{type:"button",onClick:m,className:"self-end px-3 py-2 border border-sky/60 rounded-lg text-sm",children:"Load template"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-navy/70 mb-1",children:"Content"}),r.jsx("textarea",{value:d,onChange:b=>u(b.target.value),rows:8,placeholder:h==null?void 0:h.placeholder,className:"w-full px-3 py-2 border border-sky/60 rounded-lg text-sm resize-y"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:w,className:"px-4 py-2 bg-navy text-white rounded-lg text-sm font-medium",children:"Save note"}),r.jsx("button",{type:"button",onClick:()=>{l(!1),u("")},className:"px-4 py-2 border border-navy/30 rounded-lg text-sm",children:"Cancel"})]})]}),r.jsx("ul",{className:"space-y-3",children:[...e].reverse().map(b=>{var N;return r.jsxs("li",{className:"border border-sky/30 rounded-lg p-3 bg-white",children:[r.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[r.jsx("span",{className:"text-sm font-medium text-navy",children:Z(b.date)}),b.templateId&&r.jsx("span",{className:"text-xs text-navy/60",children:((N=Gs.find(f=>f.id===b.templateId))==null?void 0:N.name)??b.templateId}),!s&&n&&r.jsx("button",{type:"button",onClick:()=>n(b.id),className:"text-xs text-red-600 hover:underline",children:"Delete"})]}),r.jsx("pre",{className:"text-sm text-navy/90 whitespace-pre-wrap font-sans",children:b.content})]},b.id)})}),e.length===0&&!a&&r.jsx("p",{className:"text-navy/60 text-sm",children:"No clinical notes yet."})]})}const Sn=[{code:"D0120",description:"Periodic oral evaluation",defaultFee:75},{code:"D0150",description:"Comprehensive oral evaluation",defaultFee:150},{code:"D0210",description:"Intraoral - complete series of radiographs",defaultFee:185},{code:"D0220",description:"Intraoral - periapical first film",defaultFee:35},{code:"D0274",description:"Bitewing - 4 films",defaultFee:95},{code:"D1110",description:"Prophylaxis - adult",defaultFee:125},{code:"D1120",description:"Prophylaxis - child",defaultFee:95},{code:"D1351",description:"Dental sealant - per tooth",defaultFee:55},{code:"D2140",description:"Amalgam - 1 surface, primary",defaultFee:135},{code:"D2150",description:"Amalgam - 2 surfaces, primary",defaultFee:155},{code:"D2160",description:"Amalgam - 3 surfaces, primary",defaultFee:175},{code:"D2330",description:"Resin - 1 surface, anterior",defaultFee:185},{code:"D2391",description:"Resin - 1 surface, posterior",defaultFee:195},{code:"D2392",description:"Resin - 2 surfaces, posterior",defaultFee:225},{code:"D2393",description:"Resin - 3 surfaces, posterior",defaultFee:265},{code:"D2740",description:"Crown - porcelain/ceramic",defaultFee:1295},{code:"D2750",description:"Crown - porcelain fused to metal",defaultFee:1195},{code:"D2790",description:"Crown - full cast noble metal",defaultFee:1095},{code:"D3110",description:"Pulp cap - direct",defaultFee:95},{code:"D3220",description:"Therapeutic pulpotomy",defaultFee:195},{code:"D3310",description:"Endodontic therapy - anterior",defaultFee:995},{code:"D3320",description:"Endodontic therapy - bicuspid",defaultFee:1095},{code:"D3330",description:"Endodontic therapy - molar",defaultFee:1295},{code:"D4210",description:"Gingivectomy - 4 or more teeth",defaultFee:395},{code:"D4341",description:"Scaling and root planing - per quadrant",defaultFee:285},{code:"D7240",description:"Extraction - erupted tooth",defaultFee:195},{code:"D9230",description:"Analgesia - nitrous oxide",defaultFee:85},{code:"D9248",description:"Non-intravenous conscious sedation",defaultFee:295}];function Np(e){var t;return(t=Sn.find(n=>n.code===e))==null?void 0:t.defaultFee}const jp=["Penicillin","Amoxicillin","Latex","Sulfa drugs","Aspirin","Ibuprofen","Codeine","Local anesthetic (e.g. lidocaine)","Nickel","No known allergies"],wp=["Diabetes","Hypertension","Heart disease","Asthma","Blood thinners (anticoagulants)","Osteoporosis","Pregnancy","Cancer / chemotherapy","HIV/AIDS","Hepatitis","Rheumatoid arthritis","Thyroid disorder","Kidney disease","Liver disease","Anxiety / depression","Epilepsy","None"],kp=["None","Metformin","Lisinopril","Amlodipine","Warfarin","Aspirin","Insulin","Levothyroxine","Omeprazole","Atorvastatin","Metoprolol","Albuterol","Gabapentin","Sertraline","Amitriptyline"],Sp=["PPO","HMO","EPO","DHMO","DPPO","Indemnity","Medicare","Medicaid","Select plan"],Cp=["Implant consultation","TMJ follow-up","Crown delivery","Bridge delivery","Denture adjustment","Botox / filler","Sleep apnea appliance","Invisalign check","Bonding","Veneer consultation","Oral surgery consultation","Periodontal surgery","Emergency pain"],Pp=["Routine checkup","Cleaning","Tooth pain","Sensitive teeth","Broken tooth","Lost filling","Bleeding gums","Bad breath","Jaw pain","Cosmetic consultation","Denture problem","Impacted tooth","Swelling","Follow-up","Second opinion","Reason for visit"],bd=["Op 1","Op 2","Op 3","Op 4","Op 5","Op 6","Operatory 1","Operatory 2","Room 1","Room 2","Room A","Room B","Suite 1","Suite 2"],oy=["DDS","DMD","MD","DO","RPh","DDS, MS","DMD, MS","DDS, PhD"],cy=["250mg capsule","500mg capsule","500mg tablet","250mg/5ml suspension","500mg/5ml suspension","0.12% rinse","400mg tablet","5mg tablet","10mg tablet","325mg tablet","0.5mg tablet","1% gel"],dy=["Phase 1: Emergency","Phase 2: Restorative","Phase 3: Perio","Phase 4: Endo","Phase 5: Crowns / prosthetics","Phase 6: Implants","Phase 7: Ortho","Phase 8: Maintenance","Phase 1: Evaluation","Phase 2: Surgical","Phase 3: Maintenance"],Nd=["Panoramic X-ray","Bitewing","Periapical","Full mouth series","CBCT","Intraoral photo","GumGauge Scan","Panoramic X-ray Jan","Bitewing 4-film","Periapical #3","Pre-op","Post-op"],Dp=["Root canal #3","Root canal #14","Root canal #19","Extraction #1","Extraction - erupted tooth","Crown #3","Crown #14","Prophylaxis - adult","Scaling and root planing - per quadrant","Periodic oral evaluation","Comprehensive oral evaluation","Bitewing - 4 films","Intraoral - complete series","Resin - 1 surface, posterior","Resin - 2 surfaces, posterior","Amalgam - 2 surfaces, primary","Crown - porcelain/ceramic","Endodontic therapy - molar","Dental sealant - per tooth","Pulp cap - direct"];function Ws(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}function uy({plans:e,patientName:t,onAddPlan:n,onUpdatePlan:s,onDeletePlan:a,onAssignToBilling:l,readOnly:i}){const[o,d]=g.useState(!1),[u,c]=g.useState([]),[p,h]=g.useState("Draft"),[w,m]=g.useState(""),b=()=>{c(C=>[...C,{id:crypto.randomUUID(),name:"",procedures:[{description:"",estimatedFee:void 0}],notes:""}])},N=(C,A)=>{c(R=>R.map(O=>O.id===C?{...O,...A}:O))},f=(C,A,R)=>{c(O=>O.map(S=>S.id===C?{...S,procedures:S.procedures.map((I,_)=>_===A?{...I,...R}:I)}:S))},x=C=>{c(A=>A.map(R=>R.id===C?{...R,procedures:[...R.procedures,{description:"",estimatedFee:void 0}]}:R))},y=(C,A)=>{c(R=>R.map(O=>O.id===C?{...O,procedures:O.procedures.filter((S,I)=>I!==A)}:O))},k=()=>{u.length!==0&&(n({createdAt:new Date().toISOString(),phases:u,status:p,notes:w||void 0}),d(!1),c([]),h("Draft"),m(""))},D=C=>{const A=C.phases.map(O=>`<div class="phase"><h3>${O.name}</h3><table><thead><tr><th>Code</th><th>Description</th><th>Est. fee</th></tr></thead><tbody>${O.procedures.map(S=>`<tr><td>${S.code??""}</td><td>${S.description}</td><td>${S.estimatedFee!=null?Ws(S.estimatedFee):""}</td></tr>`).join("")}</tbody></table>${O.notes?`<p>${O.notes}</p>`:""}</div>`).join(""),R=C.phases.flatMap(O=>O.procedures).reduce((O,S)=>O+(S.estimatedFee??0),0);return`<h2>Treatment Plan  ${t}</h2><p>Created ${Z(C.createdAt)}</p>${A}${C.notes?`<p>${C.notes}</p>`:""}<p><strong>Total estimated: ${Ws(R)}</strong></p>`},T=C=>{const A=window.open("","_blank");A&&(A.document.write(`
      <!DOCTYPE html><html><head><title>Treatment Plan - ${t}</title>
      <style>body{font-family:sans-serif;padding:2rem;max-width:800px;margin:0 auto} table{width:100%;border-collapse:collapse} th,td{border:1px solid #ccc;padding:8px;text-align:left} th{background:#f0f0f0} .phase{margin-top:1.5rem} h2{margin-top:0} h3{margin-top:1rem}</style>
      </head><body>${D(C)}</body></html>
    `),A.document.close(),A.print(),A.close())};return r.jsxs("div",{className:"space-y-4",children:[!i&&r.jsx("div",{className:"flex flex-wrap items-center gap-2",children:r.jsx("button",{type:"button",onClick:()=>d(!0),className:"px-3 py-1.5 bg-navy text-white rounded-lg text-sm font-medium hover:bg-navy-light",children:"+ New treatment plan"})}),o&&r.jsxs("div",{className:"border-2 border-sky/40 rounded-xl p-4 bg-sky/5 space-y-4",children:[r.jsx("h4",{className:"font-medium text-navy",children:"New treatment plan"}),u.length===0?r.jsx("button",{type:"button",onClick:b,className:"px-3 py-2 bg-sky/20 text-navy rounded-lg text-sm font-medium",children:"+ Add phase"}):u.map(C=>r.jsxs("div",{className:"border border-sky/30 rounded-lg p-3 bg-white",children:[r.jsx("input",{type:"text",value:C.name,onChange:A=>N(C.id,{name:A.target.value}),placeholder:"Phase name (e.g. Phase 1: Emergency)",list:"treatment-phase-name-list",autoComplete:"off",className:"w-full px-3 py-2 border border-sky/60 rounded-lg text-sm mb-2"}),r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-sky/10",children:[r.jsx("th",{className:"px-2 py-1 text-left",children:"Code"}),r.jsx("th",{className:"px-2 py-1 text-left",children:"Description"}),r.jsx("th",{className:"px-2 py-1 text-right",children:"Est. fee"}),r.jsx("th",{className:"w-8"})]})}),r.jsx("tbody",{children:C.procedures.map((A,R)=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-2 py-1",children:r.jsxs("select",{value:A.code??"",onChange:O=>{const S=O.target.value,I=Sn.find(_=>_.code===S);f(C.id,R,{code:S||void 0,description:I?I.description:A.description,estimatedFee:S?Np(S)??A.estimatedFee:A.estimatedFee})},className:"w-28 px-2 py-1 border rounded bg-white text-sm",children:[r.jsx("option",{value:"",children:""}),Sn.map(O=>r.jsxs("option",{value:O.code,children:[O.code," ",O.description,O.defaultFee!=null?`  $${O.defaultFee}`:""]},O.code))]})}),r.jsx("td",{className:"px-2 py-1",children:r.jsx("input",{type:"text",value:A.description,onChange:O=>f(C.id,R,{description:O.target.value}),placeholder:"Procedure",list:"treatment-procedure-desc-list",autoComplete:"off",className:"w-full px-2 py-1 border rounded"})}),r.jsx("td",{className:"px-2 py-1 text-right",children:r.jsx("input",{type:"number",min:0,step:.01,value:A.estimatedFee??"",onChange:O=>f(C.id,R,{estimatedFee:O.target.value===""?void 0:Number(O.target.value)}),placeholder:"0",className:"w-24 px-2 py-1 border rounded text-right"})}),r.jsx("td",{children:r.jsx("button",{type:"button",onClick:()=>y(C.id,R),className:"text-red-600 text-xs",children:""})})]},R))})]}),r.jsx("button",{type:"button",onClick:()=>x(C.id),className:"mt-1 text-sm text-sky-dark font-medium",children:"+ Add procedure"})]},C.id)),r.jsx("datalist",{id:"treatment-phase-name-list",children:dy.map(C=>r.jsx("option",{value:C},C))}),r.jsx("datalist",{id:"treatment-procedure-desc-list",children:Dp.map(C=>r.jsx("option",{value:C},C))}),u.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:b,className:"px-3 py-2 border border-sky/60 rounded-lg text-sm",children:"+ Add another phase"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-navy/70 mb-1",children:"Status"}),r.jsxs("select",{value:p,onChange:C=>h(C.target.value),className:"px-3 py-2 border border-sky/60 rounded-lg text-sm",children:[r.jsx("option",{value:"Draft",children:"Draft"}),r.jsx("option",{value:"Accepted",children:"Accepted"}),r.jsx("option",{value:"In progress",children:"In progress"}),r.jsx("option",{value:"Completed",children:"Completed"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-navy/70 mb-1",children:"Notes"}),r.jsx("textarea",{value:w,onChange:C=>m(C.target.value),rows:2,className:"w-full px-3 py-2 border border-sky/60 rounded-lg text-sm"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:k,className:"px-4 py-2 bg-navy text-white rounded-lg text-sm font-medium",children:"Save plan"}),r.jsx("button",{type:"button",onClick:()=>{d(!1),c([])},className:"px-4 py-2 border border-navy/30 rounded-lg text-sm",children:"Cancel"})]})]})]}),e.map(C=>r.jsxs("div",{className:"border border-sky/40 rounded-xl p-4 bg-white",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-3",children:[r.jsxs("span",{className:"text-sm font-medium text-navy",children:[Z(C.createdAt),"  ",C.status??"Draft"]}),r.jsxs("div",{className:"flex gap-2",children:[!i&&r.jsxs("select",{value:C.status??"Draft",onChange:A=>{const R=A.target.value,O=new Date().toISOString();R==="Accepted"?s(C.id,{status:"Accepted",acceptedAt:O}):R==="Declined"?s(C.id,{status:"Declined",declinedAt:O}):s(C.id,{status:R})},className:"px-2 py-1 border border-sky/60 rounded text-sm",children:[r.jsx("option",{value:"Draft",children:"Draft"}),r.jsx("option",{value:"Accepted",children:"Accepted"}),r.jsx("option",{value:"Declined",children:"Declined"}),r.jsx("option",{value:"In progress",children:"In progress"}),r.jsx("option",{value:"Completed",children:"Completed"})]}),r.jsx("button",{type:"button",onClick:()=>T(C),className:"px-3 py-1.5 border border-sky/60 rounded-lg text-sm font-medium",children:"Print / Email"}),!i&&l&&r.jsx("button",{type:"button",onClick:()=>l(C),className:"px-3 py-1.5 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700",children:"Assign to Billing"}),!i&&a&&r.jsx("button",{type:"button",onClick:()=>a(C.id),className:"text-xs text-red-600 hover:underline",children:"Delete"})]})]}),r.jsxs("div",{className:"treatment-plan-print",children:[r.jsxs("h2",{className:"text-lg font-semibold text-navy mb-1",children:["Treatment Plan  ",t]}),r.jsxs("p",{className:"text-sm text-navy/70 mb-4",children:["Created ",Z(C.createdAt)]}),C.phases.map(A=>r.jsxs("div",{className:"phase",children:[r.jsx("h3",{className:"font-medium text-navy mt-4 mb-2",children:A.name}),r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-sky/10",children:[r.jsx("th",{className:"px-2 py-1 text-left border border-sky/30",children:"Code"}),r.jsx("th",{className:"px-2 py-1 text-left border border-sky/30",children:"Description"}),r.jsx("th",{className:"px-2 py-1 text-right border border-sky/30",children:"Est. fee"})]})}),r.jsx("tbody",{children:A.procedures.map((R,O)=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-2 py-1 border border-sky/30",children:R.code??""}),r.jsx("td",{className:"px-2 py-1 border border-sky/30",children:R.description}),r.jsx("td",{className:"px-2 py-1 text-right border border-sky/30",children:R.estimatedFee!=null?Ws(R.estimatedFee):""})]},O))})]}),A.notes&&r.jsx("p",{className:"text-xs text-navy/70 mt-1",children:A.notes})]},A.id)),C.notes&&r.jsx("p",{className:"text-sm text-navy/80 mt-4",children:C.notes}),r.jsxs("p",{className:"text-xs text-navy/60 mt-4",children:["Total estimated: ",Ws(C.phases.flatMap(A=>A.procedures).reduce((A,R)=>A+(R.estimatedFee??0),0))]})]})]},C.id)),e.length===0&&!o&&r.jsx("p",{className:"text-navy/60 text-sm",children:"No formal treatment plans yet."})]})}function _e({id:e,title:t,subtitle:n,children:s,defaultOpen:a=!0,badge:l}){const[i,o]=g.useState(()=>{try{const u=`gumgauge-chart-section-${e}`,c=localStorage.getItem(u);return c!==null?c==="1":a}catch{return a}}),d=()=>{const u=!i;o(u);try{localStorage.setItem(`gumgauge-chart-section-${e}`,u?"1":"0")}catch{}};return r.jsxs("section",{className:"border-b border-sky/20 last:border-0",children:[r.jsx("button",{type:"button",onClick:d,className:"w-full flex items-center justify-between gap-2 py-3 text-left focus:outline-none focus:ring-2 focus:ring-sky/50 focus:ring-inset rounded-lg","aria-expanded":i,"aria-controls":`section-${e}`,id:`section-toggle-${e}`,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`inline-block transition-transform ${i?"rotate-90":""}`,"aria-hidden":!0,children:""}),r.jsx("h2",{className:"text-sm font-semibold text-navy uppercase tracking-wide",children:t}),l!=null&&r.jsx("span",{className:"text-xs text-navy/60 font-normal normal-case",children:l})]})}),n&&i&&r.jsx("p",{className:"text-xs text-navy/60 mb-2 pl-6 -mt-1",children:n}),r.jsx("div",{id:`section-${e}`,role:"region","aria-labelledby":`section-toggle-${e}`,className:i?"pb-4":"hidden",children:s})]})}const Qt=["UnitedHealthcare","Anthem (Elevance Health)","Kaiser Permanente","Centene Corporation","Humana","CVS Health (Aetna)","Cigna","Health Care Service Corporation (HCSC)","Molina Healthcare","Independence Health Group","Blue Cross Blue Shield of Michigan","Highmark","Blue Shield of California","Florida Blue","Capital Health Plan","UPMC Health Plan","CareFirst BlueCross BlueShield","EmblemHealth","Health Net","Oscar Health"],Ke="Other",Ul=typeof window<"u"&&(window.SpeechRecognition||window.webkitSpeechRecognition);function my(e){const[t,n]=g.useState(!1),[s,a]=g.useState(""),[l,i]=g.useState(null),o=g.useRef(null),d=g.useRef(e==null?void 0:e.onFinalTranscript);d.current=e==null?void 0:e.onFinalTranscript;const u=!!Ul,c=g.useCallback(()=>{const h=o.current;if(h){try{h.stop()}catch{}o.current=null}n(!1),a("")},[]),p=g.useCallback(()=>{if(!Ul){i("Speech recognition is not supported in this browser. Try Chrome or Edge.");return}i(null);const h=new Ul;h.continuous=!0,h.interimResults=!0,h.lang=e==null?void 0:e.lang,h.maxAlternatives=1,h.onresult=w=>{var N;let m="",b="";for(let f=w.resultIndex;f<w.results.length;f++){const x=w.results[f],y=((N=x[0])==null?void 0:N.transcript)??"";x.isFinal?b+=y:m+=y}m&&a(m),b&&d.current&&d.current(b)},h.onend=()=>{n(!1),a(""),o.current=null},h.onerror=w=>{w.error==="not-allowed"?i("Microphone access was denied."):w.error==="no-speech"?i(null):i(w.message||"Speech recognition error."),n(!1),a(""),o.current=null};try{h.start(),o.current=h,n(!0)}catch(w){i(w instanceof Error?w.message:"Could not start recognition.")}},[e==null?void 0:e.lang]);return g.useEffect(()=>()=>{const h=o.current;if(h){try{h.abort()}catch{}o.current=null}},[]),{isSupported:u,isListening:t,interimTranscript:s,error:l,start:p,stop:c}}function py(e){if(!e.trim())return"";const n=e.trim().split(/\n|[.!?]+/).map(l=>l.trim()).filter(l=>l.length>8),s=new Set,a=[];for(const l of n){const i=l.slice(0,50).toLowerCase();s.has(i)||(s.add(i),a.push(" "+l.replace(/^[\s\-]+/,"")))}return a.join(`
`)}const hy=["Amoxicillin","Amoxicillin-Clavulanate","Azithromycin","Clindamycin","Ibuprofen","Acetaminophen","Naproxen","Hydrocodone-Acetaminophen","Tramadol","Penicillin VK","Metronidazole","Chlorhexidine gluconate","Fluoride toothpaste","Other"];function fy({prescriptions:e,patientName:t,patientDob:n,defaultPrescriberName:s="",defaultPrescriberCredentials:a="DDS",defaultDeaNumber:l="",signedInStaffId:i,onAdd:o,onDelete:d,readOnly:u=!1}){const[c,p]=g.useState(!1),[h,w]=g.useState("Other"),[m,b]=g.useState(""),[N,f]=g.useState(""),[x,y]=g.useState(""),[k,D]=g.useState(""),[T,C]=g.useState("0"),[A,R]=g.useState(s),[O,S]=g.useState(a),[I,_]=g.useState(l),[J,Q]=g.useState(""),q=h==="Other"?m:h,ce=()=>{const E=parseInt(k,10),X=parseInt(T,10);!q.trim()||!x.trim()||Number.isNaN(E)||E<1||(o({date:new Date().toISOString().slice(0,10),medication:q.trim(),strength:N.trim()||void 0,sig:x.trim(),quantity:E,refills:Number.isNaN(X)||X<0?0:X,prescriberName:A.trim()||"Prescriber",prescriberCredentials:O.trim()||void 0,deaNumber:I.trim()||void 0,prescribedByStaffId:i,note:J.trim()||void 0}),p(!1),w("Other"),b(""),f(""),y(""),D(""),C("0"),R(s),S(a),_(l),Q(""))},F=E=>{const X=E.strength?`${E.medication} ${E.strength}`:E.medication;return`
      <div class="rx-block" style="margin-top:1.5rem; padding:1rem; border:1px solid #333;">
        <p style="margin:0 0 0.5rem 0;"><strong>Patient:</strong> ${t} &nbsp; <strong>DOB:</strong> ${Z(n)}</p>
        <p style="margin:0 0 0.5rem 0;"><strong>Date:</strong> ${Z(E.date)}</p>
        <p style="margin:0 0 0.5rem 0; font-size:1.1em;"><strong>${X}</strong></p>
        <p style="margin:0 0 0.5rem 0;"><strong>Sig:</strong> ${E.sig}</p>
        <p style="margin:0 0 0.5rem 0;"><strong>Quantity:</strong> ${E.quantity} &nbsp; <strong>Refills:</strong> ${E.refills}</p>
        <p style="margin:0.5rem 0 0 0;">_________________________</p>
        <p style="margin:0; font-size:0.95em;">${E.prescriberName}${E.prescriberCredentials?`, ${E.prescriberCredentials}`:""}</p>
        ${E.deaNumber?`<p style="margin:0; font-size:0.85em;">DEA: ${E.deaNumber}</p>`:""}
      </div>`},H=E=>{const X=window.open("","_blank");X&&(X.document.write(`
      <!DOCTYPE html><html><head><title>Prescription - ${t}</title>
      <style>
        body { font-family: Georgia, serif; padding: 2rem; max-width: 600px; margin: 0 auto; }
        .rx-block { font-size: 14px; }
      </style></head><body>
      <h2 style="margin-top:0;">Prescription</h2>
      ${F(E)}
      </body></html>
    `),X.document.close(),X.print(),X.close())};return r.jsxs("div",{className:"space-y-4",children:[!u&&r.jsx("div",{className:"flex flex-wrap items-center gap-2",children:r.jsx("button",{type:"button",onClick:()=>p(!0),className:"px-3 py-1.5 bg-navy text-white rounded-lg text-sm font-medium hover:bg-navy-light",children:"+ New prescription"})}),c&&r.jsxs("div",{className:"border-2 border-sky/40 rounded-xl p-4 bg-sky/5 space-y-4",children:[r.jsx("h4",{className:"font-medium text-navy",children:"New prescription"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Medication *"}),r.jsx("select",{value:h,onChange:E=>w(E.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white",children:hy.map(E=>r.jsx("option",{value:E,children:E},E))}),h==="Other"&&r.jsx("input",{type:"text",value:m,onChange:E=>b(E.target.value),placeholder:"Type medication name",className:"w-full mt-1 px-3 py-2 border border-sky/60 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Strength / form"}),r.jsx("input",{type:"text",value:N,onChange:E=>f(E.target.value),placeholder:"e.g. 500mg capsule",list:"rx-strength-list",autoComplete:"off",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"}),r.jsx("datalist",{id:"rx-strength-list",children:cy.map(E=>r.jsx("option",{value:E},E))})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Sig (directions for use) *"}),r.jsx("input",{type:"text",value:x,onChange:E=>y(E.target.value),placeholder:"e.g. Take 1 tablet by mouth twice daily for 7 days",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Quantity *"}),r.jsx("input",{type:"number",min:1,value:k,onChange:E=>D(E.target.value),placeholder:"e.g. 30",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Refills"}),r.jsx("input",{type:"number",min:0,value:T,onChange:E=>C(E.target.value),placeholder:"0",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Prescriber name *"}),r.jsx("input",{type:"text",value:A,onChange:E=>R(E.target.value),placeholder:"e.g. Dr. Smith",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Credentials"}),r.jsx("input",{type:"text",value:O,onChange:E=>S(E.target.value),placeholder:"e.g. DDS",list:"rx-credentials-list",autoComplete:"off",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"}),r.jsx("datalist",{id:"rx-credentials-list",children:oy.map(E=>r.jsx("option",{value:E},E))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"DEA number (if controlled)"}),r.jsx("input",{type:"text",value:I,onChange:E=>_(E.target.value),placeholder:"Optional",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Note (optional)"}),r.jsx("input",{type:"text",value:J,onChange:E=>Q(E.target.value),placeholder:"e.g. Take with food",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:ce,className:"px-4 py-2 bg-navy text-white rounded-lg text-sm font-medium",children:"Sign & save prescription"}),r.jsx("button",{type:"button",onClick:()=>p(!1),className:"px-4 py-2 border border-navy/30 rounded-lg text-sm",children:"Cancel"})]})]}),e.length===0&&!c&&r.jsx("p",{className:"text-navy/60 text-sm",children:"No prescriptions on file."}),e.map(E=>r.jsxs("div",{className:"border border-sky/40 rounded-xl p-4 bg-white",children:[r.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 mb-2",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium text-navy",children:[E.medication,E.strength?` ${E.strength}`:""]}),r.jsxs("p",{className:"text-sm text-navy/70",children:[Z(E.date),"  ",E.prescriberName,E.prescriberCredentials?`, ${E.prescriberCredentials}`:""]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:()=>H(E),className:"px-3 py-1.5 border border-sky/60 rounded-lg text-sm font-medium hover:bg-sky/10",children:"Print"}),!u&&d&&r.jsx("button",{type:"button",onClick:()=>d(E.id),className:"text-xs text-red-600 hover:underline",children:"Delete"})]})]}),r.jsxs("p",{className:"text-sm text-navy/80",children:[r.jsx("strong",{children:"Sig:"})," ",E.sig]}),r.jsxs("p",{className:"text-sm text-navy/70",children:["Quantity: ",E.quantity,"  Refills: ",E.refills]}),E.note&&r.jsx("p",{className:"text-xs text-navy/60 mt-1",children:E.note})]},E.id))]})}function xy({allergies:e,medicalConditions:t,currentMedications:n}){const s=e==null?void 0:e.trim(),a=t==null?void 0:t.trim(),l=n==null?void 0:n.trim();return!s&&!a&&!l?null:r.jsxs("div",{className:"mb-6 rounded-xl border-2 border-amber-400 bg-amber-50 p-4 shadow-sm",children:[r.jsxs("h3",{className:"text-sm font-semibold uppercase tracking-wide text-amber-900 mb-2 flex items-center gap-2",children:[r.jsx("span",{className:"inline-block h-2 w-2 rounded-full bg-amber-500","aria-hidden":!0}),"Medical alerts"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-sm",children:[s&&r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-amber-900",children:"Allergies:"}),r.jsx("span",{className:"ml-1 text-amber-800",children:e})]}),a&&r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-amber-900",children:"Conditions:"}),r.jsx("span",{className:"ml-1 text-amber-800",children:t})]}),l&&r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-amber-900",children:"Current medications:"}),r.jsx("span",{className:"ml-1 text-amber-800",children:n})]})]})]})}const Rr={Sound:"bg-sky/30 border-sky/50",Caries:"bg-red-400 border-red-600","Existing Restoration":"bg-blue-200 border-blue-500",Missing:"bg-navy/30 border-navy/50",Planned:"bg-amber-300 border-amber-500",Implant:"bg-purple-200 border-purple-500",Crown:"bg-blue-100 border-blue-400","Root Canal":"bg-green-200 border-green-500",Extraction:"bg-navy/20 border-navy/40",Other:"bg-sky/20 border-sky/40"},Bl=["Sound","Caries","Existing Restoration","Missing","Planned","Crown","Root Canal","Implant","Extraction","Other"];function jd(e,t){return e.find(n=>n.tooth===t&&!n.surface)}function gy({conditions:e,onChange:t,readOnly:n}){const[s,a]=g.useState(null),[l,i]=g.useState(!1),o=(p,h,w="Planned")=>{const m=e.find(f=>f.tooth===p&&!f.surface),b=e.filter(f=>f.tooth!==p||f.surface),N=new Date().toISOString();t(m?[...b,{...m,condition:h,status:w,completedAt:w==="Completed"?N:void 0}]:[...b,{id:crypto.randomUUID(),tooth:p,condition:h,status:w,addedAt:N,completedAt:w==="Completed"?N:void 0}]),a(null)},d=p=>{t(e.filter(h=>h.tooth!==p)),a(null)},u=Array.from({length:16},(p,h)=>1+h),c=Array.from({length:16},(p,h)=>17+h);return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[r.jsx("span",{className:"text-xs font-medium text-navy/70",children:"Upper (116)"}),r.jsx("div",{className:"flex gap-1 flex-wrap",children:u.map(p=>{const h=jd(e,p),w=s===p;return r.jsxs("div",{className:"relative",children:[r.jsx("button",{type:"button",onClick:()=>n?null:a(w?null:p),className:`w-8 h-8 rounded border-2 text-xs font-medium flex items-center justify-center transition-colors ${h?Rr[h.condition]:"bg-white border-sky/40 text-navy/60"} ${w?"ring-2 ring-navy ring-offset-1":""}`,title:h?`${p}: ${h.condition} (${h.status})`:`Tooth ${p}`,children:p}),w&&!n&&r.jsxs("div",{className:"absolute left-0 top-full mt-1 z-10 bg-white border border-sky/40 rounded-lg shadow-lg p-2 min-w-[180px]",children:[r.jsxs("p",{className:"text-xs text-navy/70 mb-1",children:["Tooth ",p]}),r.jsx("div",{className:"flex flex-wrap gap-1",children:Bl.map(m=>r.jsx("button",{type:"button",onClick:()=>o(p,m),className:`px-2 py-1 text-xs rounded border ${Rr[m]}`,children:m},m))}),r.jsxs("div",{className:"flex gap-1 mt-2",children:[r.jsx("button",{type:"button",onClick:()=>o(p,(h==null?void 0:h.condition)??"Sound","Completed"),className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded",children:"Mark completed"}),h&&r.jsx("button",{type:"button",onClick:()=>d(p),className:"px-2 py-1 text-xs text-red-600 hover:bg-red-50 rounded",children:"Clear"})]})]})]},p)})})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsx("span",{className:"text-xs font-medium text-navy/70",children:"Lower (1732)"}),r.jsx("div",{className:"flex gap-1 flex-wrap",children:c.map(p=>{const h=jd(e,p),w=s===p;return r.jsxs("div",{className:"relative",children:[r.jsx("button",{type:"button",onClick:()=>n?null:a(w?null:p),className:`w-8 h-8 rounded border-2 text-xs font-medium flex items-center justify-center transition-colors ${h?Rr[h.condition]:"bg-white border-sky/40 text-navy/60"} ${w?"ring-2 ring-navy ring-offset-1":""}`,title:h?`${p}: ${h.condition} (${h.status})`:`Tooth ${p}`,children:p}),w&&!n&&r.jsxs("div",{className:"absolute left-0 top-full mt-1 z-10 bg-white border border-sky/40 rounded-lg shadow-lg p-2 min-w-[180px]",children:[r.jsxs("p",{className:"text-xs text-navy/70 mb-1",children:["Tooth ",p]}),r.jsx("div",{className:"flex flex-wrap gap-1",children:Bl.map(m=>r.jsx("button",{type:"button",onClick:()=>o(p,m),className:`px-2 py-1 text-xs rounded border ${Rr[m]}`,children:m},m))}),r.jsxs("div",{className:"flex gap-1 mt-2",children:[r.jsx("button",{type:"button",onClick:()=>o(p,(h==null?void 0:h.condition)??"Sound","Completed"),className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded",children:"Mark completed"}),h&&r.jsx("button",{type:"button",onClick:()=>d(p),className:"px-2 py-1 text-xs text-red-600 hover:bg-red-50 rounded",children:"Clear"})]})]})]},p)})})]}),r.jsx("div",{className:"flex flex-wrap gap-2 pt-2 border-t border-sky/20",children:Bl.map(p=>r.jsxs("span",{className:`inline-flex items-center gap-1 text-xs ${Rr[p]} px-2 py-0.5 rounded`,children:[r.jsx("span",{className:"w-2 h-2 rounded-full bg-current opacity-70"}),p]},p))})]})}const Un=10,Bn=3;function de({label:e,value:t,editing:n,formValue:s,onChange:a,type:l="text",placeholder:i,rows:o,preWrap:d,required:u,listId:c,options:p}){return r.jsxs("div",{className:o?"md:col-span-2":"",children:[e?r.jsxs("label",{className:"block text-sm text-navy/70 mb-1",children:[e,u&&r.jsx("span",{className:"text-red-500 ml-0.5","aria-label":"required",children:"*"})]}):null,n?l==="textarea"?r.jsx("textarea",{value:s,onChange:h=>a(h.target.value),rows:o??3,placeholder:i,className:"w-full px-3 py-2 border border-sky/60 rounded-lg resize-y"}):r.jsxs(r.Fragment,{children:[r.jsx("input",{type:l,value:s,onChange:h=>a(h.target.value),placeholder:i,className:"w-full px-3 py-2 border border-sky/60 rounded-lg",list:c,autoComplete:c?"off":void 0}),c&&p&&p.length>0&&r.jsx("datalist",{id:c,children:p.map(h=>r.jsx("option",{value:h},h))})]}):r.jsx("p",{className:`text-navy ${d?"whitespace-pre-wrap":""}`,children:t||""})]})}function yy(){var ws,ks,Ss,Cs,Ps,Sr;const{id:e}=Ym(),[t,n]=Zm(),s=dt(),{timezone:a}=Nr(),{staff:l,isSignedIn:i}=wr(),o=i&&l&&xp.includes(l.position),u=`/dashboard/patients/${e}`+(t.toString()?`?${t.toString()}`:""),[c,p]=g.useState(Y(e||"")),[h,w]=g.useState(!1),[m,b]=g.useState(c||null),[N,f]=g.useState(!1),[x,y]=g.useState(null),k=g.useRef(null),[D,T]=g.useState(""),[C,A]=g.useState(!1),[R,O]=g.useState(!1),[S,I]=g.useState(!1),[_,J]=g.useState(!1),[Q,q]=g.useState(""),[ce,F]=g.useState("X-ray"),H=g.useRef(null);if(g.useEffect(()=>{const v=Y(e||"");p(v),b(v||null),v!=null&&v.insuranceProvider&&v.insuranceProvider!==Ke&&!Qt.includes(v.insuranceProvider)?T(v.insuranceProvider):T("")},[e]),g.useEffect(()=>{if(!h||!m)return;m.insuranceProvider&&!Qt.includes(m.insuranceProvider)&&T(m.insuranceProvider||"")},[h,m==null?void 0:m.insuranceProvider]),g.useEffect(()=>{t.get("startVisit")==="1"&&c&&!c.currentVisitStartedAt&&(A(!0),n(v=>{const z=new URLSearchParams(v);return z.delete("startVisit"),z},{replace:!0}))},[c==null?void 0:c.id,c==null?void 0:c.currentVisitStartedAt,t,n]),g.useEffect(()=>{c!=null&&c.id&&_n({timestamp:new Date().toISOString(),action:"chart.view",entityType:"patient",entityId:c.id,details:`${c.firstName} ${c.lastName}`})},[c==null?void 0:c.id]),!c)return r.jsxs("div",{className:"p-8",children:[r.jsx("p",{className:"text-navy/70",children:"Patient not found."}),r.jsx(K,{to:"/dashboard/patients",className:"text-sky-dark font-medium mt-2 inline-block hover:underline",children:"Back to patients"})]});const E=()=>{if(!m)return;const v={...m};v.insuranceProvider===Ke&&(v.insuranceProvider=D.trim()||void 0);const z=ie=>ie===""||ie===void 0?void 0:Number(ie);v.appointmentDurationMinutes=z(v.appointmentDurationMinutes),v.nextAppointmentDurationMinutes=z(v.nextAppointmentDurationMinutes),v.recallIntervalMonths=z(v.recallIntervalMonths),v.balanceDue=z(v.balanceDue),ae(c.id,v),p(Y(c.id)),b(Y(c.id)),w(!1)},X=()=>{Kg(c.id),s("/dashboard/patients",{replace:!0})},$=(v,z)=>{m&&b({...m,[v]:z})},P=(m==null?void 0:m.patientImages)??c.patientImages??[],L=v=>{m&&b({...m,patientImages:v})},[W,le]=g.useState(""),[re,et]=g.useState("X-ray"),tt=v=>{var ue;const z=(ue=v.target.files)==null?void 0:ue[0];if(v.target.value="",!z||!m)return;if(P.length>=Un){alert(`Maximum ${Un} images per patient. Remove one to add another.`);return}if(z.size>Bn*1024*1024){alert(`File is too large. Please use an image under ${Bn} MB.`);return}const ie=new FileReader;ie.onload=()=>{const nt=ie.result,mt=W.trim()||z.name.replace(/\.[^.]+$/,"")||"Image",j={id:crypto.randomUUID(),label:mt,type:re,dataUrl:nt,dateAdded:new Date().toISOString()};L([...P,j]),le("")},ie.readAsDataURL(z)},gn=v=>{L(P.filter(z=>z.id!==v))},kr=v=>{var nt;const z=(nt=v.target.files)==null?void 0:nt[0];if(v.target.value="",!z||!c)return;const ie=c.patientImages??[];if(ie.length>=Un){alert(`Maximum ${Un} images per patient. Remove one to add another.`);return}if(z.size>Bn*1024*1024){alert(`File is too large. Please use an image under ${Bn} MB.`);return}const ue=new FileReader;ue.onload=()=>{const mt=ue.result,j=Q.trim()||z.name.replace(/\.[^.]+$/,"")||"Image",U={id:crypto.randomUUID(),label:j,type:ce,dataUrl:mt,dateAdded:new Date().toISOString()};ae(c.id,{patientImages:[...ie,U]}),p(Y(c.id)),b(Y(c.id)),J(!1),q("")},ue.readAsDataURL(z)},ut=()=>A(!0),Ln=()=>{if(!c)return;const v=R&&S;ae(c.id,{currentVisitStartedAt:new Date().toISOString(),currentVisitUseVoiceNotes:v||void 0,currentVisitNotes:v?"":void 0}),p(Y(c.id)),b(Y(c.id)),A(!1),O(!1),I(!1)},js=()=>{if(!c||!c.currentVisitStartedAt)return;const v=new Date().toISOString(),z=Math.round((new Date(v).getTime()-new Date(c.currentVisitStartedAt).getTime())/6e4),ie={startedAt:c.currentVisitStartedAt,endedAt:v,durationMinutes:z,clinicalSummary:c.currentVisitNotes||void 0,voiceNotesConsent:c.currentVisitUseVoiceNotes||void 0},ue=[...c.visitHistory||[],ie];ae(c.id,{currentVisitStartedAt:void 0,currentVisitUseVoiceNotes:void 0,currentVisitNotes:void 0,visitHistory:ue}),p(Y(c.id)),b(Y(c.id))},Vt=v=>{c!=null&&c.id&&(ae(c.id,{currentVisitNotes:v}),p(Y(c.id)),b(Y(c.id)))},G=v=>{if(!(c!=null&&c.id)||!v.trim())return;const z=Y(c.id);if(!z)return;const ie=z.currentVisitNotes??"",ue=ie?`${ie} ${v.trim()}`:v.trim();ae(c.id,{currentVisitNotes:ue}),p(Y(c.id)),b(Y(c.id))},{isSupported:Et,isListening:Ht,interimTranscript:$n,error:Fn,start:il,stop:ol}=my({onFinalTranscript:G,lang:"en-US"}),cl=()=>{const v=(c==null?void 0:c.currentVisitNotes)??"";if(!v.trim())return;const z=py(v);if(!z)return;const ie=`

--- Clinical summary ---
`,ue=v.includes("--- Clinical summary ---")?v.replace(/\n\n--- Clinical summary ---[\s\S]*$/,"").trim():v;Vt(ue+ie+z)};return r.jsxs("div",{className:"p-8",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsx(K,{to:"/dashboard/patients",className:"text-sky-dark text-sm font-medium hover:underline mb-2 inline-block",children:" Patients"}),r.jsxs("h1",{className:"text-2xl font-semibold text-navy",children:["Patient chart: ",c.firstName," ",c.lastName]})]}),r.jsx("div",{className:"flex gap-2",children:h?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:E,className:"px-4 py-2 bg-navy text-white rounded-lg font-medium hover:bg-navy-light",children:"Save"}),r.jsx("button",{onClick:()=>{b(c),w(!1),f(!1)},className:"px-4 py-2 border border-navy/30 rounded-lg",children:"Cancel"})]}):r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>w(!0),className:"px-4 py-2 bg-navy text-white rounded-lg font-medium hover:bg-navy-light",children:"Edit"}),o?N?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:X,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-medium",children:"Confirm delete"}),r.jsx("button",{onClick:()=>f(!1),className:"px-4 py-2 border border-navy/30 rounded-lg",children:"Cancel"})]}):r.jsx("button",{onClick:()=>f(!0),className:"px-4 py-2 border border-red-300 text-red-600 rounded-lg font-medium hover:bg-red-50",children:"Delete"}):r.jsx("span",{className:"px-4 py-2 text-navy/50 text-sm",title:"Only a dentist from the clinic can delete a patient chart. Sign in as a dentist.",children:"Delete (dentist only)"})]})})]}),r.jsx(xy,{allergies:c.allergies,medicalConditions:c.medicalConditions,currentMedications:c.currentMedications}),r.jsxs("div",{className:"mb-6 flex flex-wrap items-center gap-2",children:[r.jsx(K,{to:`/dashboard/billing?patient=${c.id}`,className:"px-3 py-1.5 border border-sky/60 rounded-lg text-sm font-medium text-navy hover:bg-sky/10",children:"Send statement"}),r.jsx(K,{to:`/dashboard/appointments?patient=${c.id}`,className:"px-3 py-1.5 border border-sky/60 rounded-lg text-sm font-medium text-navy hover:bg-sky/10",children:"Schedule next"}),r.jsx(K,{to:"/dashboard/recall",className:"px-3 py-1.5 border border-sky/60 rounded-lg text-sm font-medium text-navy hover:bg-sky/10",children:"Recall list"}),i&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>{const v=new Date().toISOString().slice(0,10);ae(c.id,{lastRecallReminderSent:v}),p(Y(c.id)),b(Y(c.id))},className:"px-3 py-1.5 border border-sky/60 rounded-lg text-sm font-medium text-navy hover:bg-sky/10",children:"Send recall reminder"}),r.jsx("button",{type:"button",onClick:()=>{const v=new Date().toISOString().slice(0,10);ae(c.id,{lastAppointmentReminderSent:v}),p(Y(c.id)),b(Y(c.id))},className:"px-3 py-1.5 border border-sky/60 rounded-lg text-sm font-medium text-navy hover:bg-sky/10",children:"Send appointment reminder"})]})]}),c.currentVisitStartedAt&&r.jsxs("div",{className:"mb-6 flex flex-wrap items-center justify-between gap-3 rounded-xl border-2 border-green-500 bg-green-50 px-4 py-3",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-semibold text-green-800",children:"Visit in progress"}),r.jsxs("span",{className:"ml-2 text-green-700 text-sm",children:[" started at ",Wi(c.currentVisitStartedAt,a)]})]}),i?r.jsx("button",{type:"button",onClick:js,className:"px-4 py-2 bg-green-700 text-white rounded-lg font-medium hover:bg-green-800",children:"End visit"}):r.jsx(K,{to:`/signin?returnTo=${encodeURIComponent(u)}`,className:"px-4 py-2 bg-green-700 text-white rounded-lg font-medium hover:bg-green-800 inline-block",children:"Sign in to end visit"})]}),!c.currentVisitStartedAt&&r.jsx("div",{className:"mb-6",children:i?r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:ut,className:"px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700",children:"Start visit"}),r.jsx("p",{className:"mt-1 text-sm text-navy/60",children:"Mark that this patient is in the office for their appointment."})]}):r.jsxs("p",{className:"text-navy/80",children:[r.jsx(K,{to:`/signin?returnTo=${encodeURIComponent(u)}`,className:"text-sky-dark font-medium hover:underline",children:"Sign in"})," ","to start a patient visit or record treatment."]})}),c.currentVisitStartedAt&&c.currentVisitUseVoiceNotes&&r.jsxs("div",{className:"mb-6 rounded-xl border-2 border-sky/40 bg-sky/5 p-4",children:[r.jsx("h3",{className:"text-sm font-semibold text-navy uppercase tracking-wide mb-1",children:"Visit session  AI voice notes"}),r.jsx("p",{className:"text-xs text-navy/60 mb-3",children:"Patient identity is not stored with recordings. Notes are linked only to this visit for clinical use."}),Et?r.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[Ht?r.jsxs("button",{type:"button",onClick:ol,className:"px-4 py-2 bg-navy text-white rounded-lg text-sm font-medium hover:bg-navy-light flex items-center gap-2",children:[r.jsx("span",{className:"inline-flex h-2 w-2 rounded-full bg-red-400 animate-pulse","aria-hidden":!0}),"Stop recording"]}):r.jsxs("button",{type:"button",onClick:il,className:"px-4 py-2 bg-red-600 text-white rounded-lg text-sm font-medium hover:bg-red-700 flex items-center gap-2",children:[r.jsx("span",{className:"inline-flex h-2 w-2 rounded-full bg-white","aria-hidden":!0}),"Start recording"]}),r.jsx("button",{type:"button",onClick:cl,disabled:!(c.currentVisitNotes??"").trim(),className:"px-4 py-2 bg-sky-dark text-white rounded-lg text-sm font-medium hover:bg-navy disabled:opacity-50 disabled:cursor-not-allowed",children:"Generate bullet points"}),Ht&&r.jsx("span",{className:"text-sm text-navy/70",children:"Listening (speak into your microphone)"})]}):r.jsx("p",{className:"text-amber-700 text-sm mb-2",children:"Microphone speech recognition is not supported in this browser. Use Chrome or Edge, or type notes below."}),Fn&&r.jsx("p",{className:"text-red-600 text-sm mb-2",role:"alert",children:Fn}),$n&&r.jsx("p",{className:"text-sm text-navy/60 italic mb-2",children:$n}),r.jsx("textarea",{value:c.currentVisitNotes??"",onChange:v=>Vt(v.target.value),onBlur:v=>Vt(v.target.value),rows:8,placeholder:"Transcript will appear here as you speak, or type notes manually. Click Generate bullet points for a concise clinical summary.",className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white resize-y text-sm"})]}),C&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"start-visit-title",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl border border-sky/40 p-6 max-w-md w-full",children:[r.jsx("h2",{id:"start-visit-title",className:"text-lg font-semibold text-navy mb-4",children:"Start visit"}),r.jsx("p",{className:"text-sm text-navy/70 mb-4",children:"Choose options before starting the visit."}),r.jsxs("label",{className:"flex items-start gap-2 mb-3 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:R,onChange:v=>O(v.target.checked),className:"mt-1 rounded border-sky/60"}),r.jsx("span",{className:"text-sm text-navy",children:"Use AI voice notes with patient consent (records conversation for clinical notes)"})]}),R&&r.jsxs("label",{className:"flex items-start gap-2 mb-4 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:S,onChange:v=>I(v.target.checked),className:"mt-1 rounded border-sky/60"}),r.jsx("span",{className:"text-sm text-navy",children:"Patient has given consent to record this conversation. Anonymity is maintained for the recording."})]}),r.jsxs("div",{className:"flex gap-3 justify-end mt-6",children:[r.jsx("button",{type:"button",onClick:()=>{A(!1),O(!1),I(!1)},className:"px-4 py-2 border border-navy/30 rounded-lg font-medium",children:"Cancel"}),r.jsx("button",{type:"button",onClick:Ln,className:"px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700",children:"Start visit"})]})]})}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-6 space-y-1",children:[r.jsx(_e,{id:"demographics",title:"Demographics",defaultOpen:!0,children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(de,{label:"First name",value:c.firstName,editing:!!h&&!!m,formValue:(m==null?void 0:m.firstName)??"",onChange:v=>$("firstName",v),required:!0}),r.jsx(de,{label:"Last name",value:c.lastName,editing:!!h&&!!m,formValue:(m==null?void 0:m.lastName)??"",onChange:v=>$("lastName",v),required:!0}),r.jsx(de,{label:"Date of birth",value:Z(c.dateOfBirth),editing:!!h&&!!m,formValue:(m==null?void 0:m.dateOfBirth)??"",type:"date",onChange:v=>$("dateOfBirth",v),required:!0}),r.jsx(de,{label:"Phone",value:c.phone??"",editing:!!h&&!!m,formValue:(m==null?void 0:m.phone)??"",onChange:v=>$("phone",v)}),r.jsx(de,{label:"Email",value:c.email??"",editing:!!h&&!!m,formValue:(m==null?void 0:m.email)??"",type:"email",onChange:v=>$("email",v)}),r.jsx(de,{label:"Address",value:c.address??"",editing:!!h&&!!m,formValue:(m==null?void 0:m.address)??"",onChange:v=>$("address",v)})]})}),r.jsx(_e,{id:"medical",title:"Medical history",subtitle:"Relevant for treatment safety (e.g. drug allergies, conditions affecting care)",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(de,{label:"Allergies",value:c.allergies??"",editing:!!h&&!!m,formValue:(m==null?void 0:m.allergies)??"",placeholder:"e.g. Penicillin, latex",listId:"patient-allergies-list",options:jp,onChange:v=>$("allergies",v)}),r.jsx(de,{label:"Medical conditions",value:c.medicalConditions??"",editing:!!h&&!!m,formValue:(m==null?void 0:m.medicalConditions)??"",placeholder:"e.g. Diabetes, hypertension",listId:"patient-medical-conditions-list",options:wp,onChange:v=>$("medicalConditions",v)}),r.jsx(de,{label:"Current medications",value:c.currentMedications??"",editing:!!h&&!!m,formValue:(m==null?void 0:m.currentMedications)??"",placeholder:"List current medications",listId:"patient-current-medications-list",options:kp,onChange:v=>$("currentMedications",v)}),r.jsx(de,{label:"Emergency contact name",value:c.emergencyContactName??"",editing:!!h&&!!m,formValue:(m==null?void 0:m.emergencyContactName)??"",onChange:v=>$("emergencyContactName",v)}),r.jsx(de,{label:"Emergency contact phone",value:c.emergencyContactPhone??"",editing:!!h&&!!m,formValue:(m==null?void 0:m.emergencyContactPhone)??"",onChange:v=>$("emergencyContactPhone",v)})]})}),r.jsx(_e,{id:"insurance",title:"Insurance",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:m?"md:col-span-2":"",children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Insurance provider"}),h&&m?r.jsxs(r.Fragment,{children:[r.jsxs("select",{value:Qt.includes(m.insuranceProvider)?m.insuranceProvider:Ke,onChange:v=>{const z=v.target.value;$("insuranceProvider",z),z!==Ke&&T("")},className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white",children:[r.jsx("option",{value:"",children:"Select provider"}),Qt.map(v=>r.jsx("option",{value:v,children:v},v)),r.jsx("option",{value:Ke,children:Ke})]}),(m.insuranceProvider===Ke||m.insuranceProvider&&!Qt.includes(m.insuranceProvider))&&r.jsxs("div",{className:"mt-3",children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Custom provider name (free response)"}),r.jsx("input",{type:"text",autoComplete:"off",list:"patient-insurance-custom-list",value:m.insuranceProvider===Ke?D:m.insuranceProvider||"",onChange:v=>{const z=v.target.value;m.insuranceProvider===Ke?T(z):$("insuranceProvider",z)},placeholder:"Type your insurance provider name here",className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white text-navy"}),r.jsx("datalist",{id:"patient-insurance-custom-list",children:Qt.map(v=>r.jsx("option",{value:v},v))})]})]}):r.jsx("p",{className:"text-navy",children:c.insuranceProvider||""})]}),r.jsx(de,{label:"Plan name",value:c.insurancePlan??"",editing:!!h&&!!m,formValue:(m==null?void 0:m.insurancePlan)??"",listId:"patient-insurance-plan-list",options:Sp,onChange:v=>$("insurancePlan",v)}),r.jsx(de,{label:"Member ID",value:c.insuranceMemberId??"",editing:!!h&&!!m,formValue:(m==null?void 0:m.insuranceMemberId)??"",onChange:v=>$("insuranceMemberId",v)}),r.jsx(de,{label:"Group number",value:c.insuranceGroupNumber??"",editing:!!h&&!!m,formValue:(m==null?void 0:m.insuranceGroupNumber)??"",onChange:v=>$("insuranceGroupNumber",v)})]})}),r.jsx(_e,{id:"appointments",title:"Appointments",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(de,{label:"Date of appointment",value:Z(c.dateOfAppointment)+(c.appointmentTime?` ${c.appointmentTime}`:""),editing:!!h&&!!m,formValue:(m==null?void 0:m.dateOfAppointment)??"",type:"date",onChange:v=>$("dateOfAppointment",v)}),r.jsx(de,{label:"Appointment time",value:c.appointmentTime??"",editing:!!h&&!!m,formValue:(m==null?void 0:m.appointmentTime)??"",type:"time",onChange:v=>$("appointmentTime",v)}),r.jsx(de,{label:"Date of next appointment",value:c.dateOfNextAppointment?Z(c.dateOfNextAppointment):"",editing:!!h&&!!m,formValue:(m==null?void 0:m.dateOfNextAppointment)??"",type:"date",onChange:v=>$("dateOfNextAppointment",v)}),r.jsx(de,{label:"Next appointment time",value:c.nextAppointmentTime??"",editing:!!h&&!!m,formValue:(m==null?void 0:m.nextAppointmentTime)??"",type:"time",onChange:v=>$("nextAppointmentTime",v)}),r.jsxs("div",{className:(m==null?void 0:m.appointmentType)==="Other"?"md:col-span-2":"",children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Appointment type"}),h&&m?r.jsxs(r.Fragment,{children:[r.jsxs("select",{value:m.appointmentType??"",onChange:v=>$("appointmentType",v.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white",children:[r.jsx("option",{value:"",children:""}),rp.map(v=>r.jsx("option",{value:v,children:v},v))]}),m.appointmentType==="Other"&&r.jsxs("div",{className:"mt-2",children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Describe appointment type (free response)"}),r.jsx("input",{type:"text",list:"patient-appointment-type-other-list",autoComplete:"off",value:m.appointmentTypeOther??"",onChange:v=>$("appointmentTypeOther",v.target.value),placeholder:"e.g. Implant consultation, TMJ follow-up",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"}),r.jsx("datalist",{id:"patient-appointment-type-other-list",children:Cp.map(v=>r.jsx("option",{value:v},v))})]})]}):r.jsx("p",{className:"text-navy",children:c.appointmentType==="Other"&&c.appointmentTypeOther?`Other (${c.appointmentTypeOther})`:c.appointmentType||""})]}),r.jsx(de,{label:"Doctor (performing appointment)",value:c.appointmentDoctor??"",editing:!!h&&!!m,formValue:(m==null?void 0:m.appointmentDoctor)??"",placeholder:"e.g. Dr. Smith",onChange:v=>$("appointmentDoctor",v)}),r.jsx(de,{label:"Duration (minutes)",value:c.appointmentDurationMinutes!=null?String(c.appointmentDurationMinutes):"",editing:!!h&&!!m,formValue:(m==null?void 0:m.appointmentDurationMinutes)!=null?String(m.appointmentDurationMinutes):"",placeholder:"e.g. 60",onChange:v=>$("appointmentDurationMinutes",v===""?"":v)}),r.jsx(de,{label:"Room / operatory",value:c.appointmentRoom??"",editing:!!h&&!!m,formValue:(m==null?void 0:m.appointmentRoom)??"",placeholder:"e.g. Op 1",listId:"patient-room-list",options:bd,onChange:v=>$("appointmentRoom",v)}),r.jsx(de,{label:"Next appointment duration (min)",value:c.nextAppointmentDurationMinutes!=null?String(c.nextAppointmentDurationMinutes):"",editing:!!h&&!!m,formValue:(m==null?void 0:m.nextAppointmentDurationMinutes)!=null?String(m.nextAppointmentDurationMinutes):"",placeholder:"e.g. 30",onChange:v=>$("nextAppointmentDurationMinutes",v===""?"":v)}),r.jsx(de,{label:"Next appointment room",value:c.nextAppointmentRoom??"",editing:!!h&&!!m,formValue:(m==null?void 0:m.nextAppointmentRoom)??"",placeholder:"e.g. Op 2",listId:"patient-next-room-list",options:bd,onChange:v=>$("nextAppointmentRoom",v)}),r.jsx(de,{label:"Recall / recurring (months)",value:c.recallIntervalMonths!=null?String(c.recallIntervalMonths):"",editing:!!h&&!!m,formValue:(m==null?void 0:m.recallIntervalMonths)!=null?String(m.recallIntervalMonths):"",placeholder:"e.g. 6 for 6-month prophy",onChange:v=>$("recallIntervalMonths",v===""?"":v)})]})}),r.jsxs(_e,{id:"images",title:"Images & imaging",badge:P.length>0?`${P.length} file${P.length!==1?"s":""}`:void 0,subtitle:"X-rays, radiographs, CT, MRI, photos. Upload from your device (stored with this chart).",children:[h&&m&&r.jsxs("div",{className:"mb-4 p-4 bg-sky/10 rounded-lg border border-sky/30",children:[r.jsx("p",{className:"text-sm font-medium text-navy mb-2",children:"Add image"}),r.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[r.jsxs("div",{className:"min-w-[160px]",children:[r.jsx("label",{className:"block text-xs text-navy/70 mb-1",children:"Label"}),r.jsx("input",{type:"text",value:W,onChange:v=>le(v.target.value),placeholder:"e.g. Panoramic X-ray Jan 2026",list:"patient-image-label-list",autoComplete:"off",className:"w-full px-3 py-2 border border-sky/60 rounded-lg text-sm"}),r.jsx("datalist",{id:"patient-image-label-list",children:Nd.map(v=>r.jsx("option",{value:v},v))})]}),r.jsxs("div",{className:"min-w-[120px]",children:[r.jsx("label",{className:"block text-xs text-navy/70 mb-1",children:"Type"}),r.jsx("select",{value:re,onChange:v=>et(v.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white text-sm",children:xd.map(v=>r.jsx("option",{value:v,children:v},v))})]}),r.jsxs("div",{children:[r.jsx("input",{ref:k,type:"file",accept:"image/*",onChange:tt,className:"hidden"}),r.jsx("button",{type:"button",onClick:()=>{var v;return(v=k.current)==null?void 0:v.click()},className:"px-4 py-2 bg-navy text-white rounded-lg text-sm font-medium hover:bg-navy-light",children:"Choose file"})]})]}),r.jsxs("p",{className:"text-xs text-navy/50 mt-2",children:["Max ",Un," images, under ",Bn," MB each."]})]}),!h&&P.length<Un&&r.jsx("button",{type:"button",onClick:()=>J(!0),className:"mb-3 px-4 py-2 bg-sky/20 text-navy rounded-lg text-sm font-medium hover:bg-sky/30 border border-sky/40",children:"+ Add image"}),P.length===0?r.jsxs("p",{className:"text-navy/60",children:["No images attached. ",h&&m?"Use the form above to upload.":"Click Add image above to upload without editing the whole chart."]}):r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:P.map(v=>r.jsxs("div",{className:"border border-sky/40 rounded-lg overflow-hidden bg-navy/5",children:[r.jsx("button",{type:"button",onClick:()=>y(v),className:"block w-full aspect-square p-1 focus:outline-none focus:ring-2 focus:ring-sky",children:r.jsx("img",{src:v.dataUrl,alt:v.label,className:"w-full h-full object-contain"})}),r.jsxs("div",{className:"p-2",children:[r.jsx("p",{className:"text-sm font-medium text-navy truncate",title:v.label,children:v.label}),r.jsx("span",{className:"text-xs text-navy/60 capitalize",children:v.type}),r.jsxs("div",{className:"flex gap-1 mt-1",children:[r.jsx("button",{type:"button",onClick:()=>y(v),className:"text-xs text-sky-dark font-medium hover:underline",children:"View"}),h&&m&&r.jsx("button",{type:"button",onClick:()=>gn(v.id),className:"text-xs text-red-600 font-medium hover:underline",children:"Remove"})]})]})]},v.id))})]}),r.jsx(_e,{id:"clinical",title:"Clinical",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(de,{label:"Chief complaint",value:c.chiefComplaint??"",editing:!!h&&!!m,formValue:(m==null?void 0:m.chiefComplaint)??"",placeholder:"Reason for visit",listId:"patient-chief-complaint-list",options:Pp,onChange:v=>$("chiefComplaint",v)}),r.jsx(de,{label:"Last cleaning date",value:c.lastCleaningDate?Z(c.lastCleaningDate):"",editing:!!h&&!!m,formValue:(m==null?void 0:m.lastCleaningDate)??"",type:"date",onChange:v=>$("lastCleaningDate",v)}),r.jsx(de,{label:"Treatment plan",value:c.treatmentPlan??"",editing:!!h&&!!m,formValue:(m==null?void 0:m.treatmentPlan)??"",type:"textarea",rows:3,preWrap:!0,placeholder:"Planned treatment",onChange:v=>$("treatmentPlan",v)})]})}),r.jsx(_e,{id:"dentist-notes",title:"Dentist's notes",children:r.jsx(de,{label:"",value:c.dentistNotes??"",editing:!!h&&!!m,formValue:(m==null?void 0:m.dentistNotes)??"",type:"textarea",rows:6,preWrap:!0,placeholder:"Clinical notes, procedures performed, charting notes, etc.",onChange:v=>$("dentistNotes",v)})}),r.jsx(_e,{id:"perio",title:"Perio charting",subtitle:"Pocket depths (PD), bleeding; numeric and graphic views. GumGauge device results (light %, health) auto-fill from Device Scan and show below.",children:r.jsx(ly,{exams:c.perioExams??[],gumGaugeExams:c.gumGaugeExams??[],onSaveExam:v=>{const z={...v,id:crypto.randomUUID()};ae(c.id,{perioExams:[...c.perioExams??[],z]}),p(Y(c.id)),b(Y(c.id))},onDeleteExam:v=>{ae(c.id,{perioExams:(c.perioExams??[]).filter(z=>z.id!==v)}),p(Y(c.id)),b(Y(c.id))},readOnly:!i})}),r.jsx(_e,{id:"restorative",title:"Restorative chart",subtitle:"Tooth-by-tooth conditions: caries, existing restorations, missing, planned. Click a tooth to set or change.",children:r.jsx(gy,{conditions:c.toothConditions??[],onChange:v=>{ae(c.id,{toothConditions:v}),p(Y(c.id)),b(Y(c.id))},readOnly:!i})}),r.jsx(_e,{id:"clinical-notes",title:"Clinical notes / progress notes",subtitle:"Structured clinical notes with optional templates.",children:r.jsx(iy,{notes:c.clinicalNotes??[],onAdd:v=>{const z={...v,id:crypto.randomUUID(),createdAt:new Date().toISOString()};ae(c.id,{clinicalNotes:[...c.clinicalNotes??[],z]}),p(Y(c.id)),b(Y(c.id))},onDelete:v=>{ae(c.id,{clinicalNotes:(c.clinicalNotes??[]).filter(z=>z.id!==v)}),p(Y(c.id)),b(Y(c.id))},readOnly:!i})}),r.jsx(_e,{id:"prescriptions",title:"Prescriptions",badge:(ws=c.prescriptions)!=null&&ws.length?`${c.prescriptions.length} Rx`:void 0,subtitle:"Write prescriptions with sig, quantity, refills. Printable like a real Rx.",children:r.jsx(fy,{prescriptions:c.prescriptions??[],patientName:`${c.firstName} ${c.lastName}`,patientDob:c.dateOfBirth,defaultPrescriberName:l?`Dr. ${l.firstName} ${l.lastName}`:void 0,defaultPrescriberCredentials:"DDS",signedInStaffId:l==null?void 0:l.id,onAdd:v=>{const z={...v,id:crypto.randomUUID(),signedAt:new Date().toISOString()};ae(c.id,{prescriptions:[...c.prescriptions??[],z]}),p(Y(c.id)),b(Y(c.id))},onDelete:v=>{ae(c.id,{prescriptions:(c.prescriptions??[]).filter(z=>z.id!==v)}),p(Y(c.id)),b(Y(c.id))},readOnly:!i})}),r.jsxs(_e,{id:"billing",title:"Billing",subtitle:"Balance and payment history. For full billing (payment methods, send to insurance) use the Billing tab.",children:[r.jsx("div",{className:"mb-3",children:r.jsx(K,{to:"/dashboard/billing",className:"text-sky-dark font-medium text-sm hover:underline",children:"Open Billing tab "})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Balance due"}),h&&m?r.jsx("input",{type:"number",min:0,step:.01,value:m.balanceDue??"",onChange:v=>$("balanceDue",v.target.value===""?"":v.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"}):r.jsx("p",{className:"text-navy",children:c.balanceDue!=null?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(c.balanceDue):""})]})}),(((ks=c.paymentHistory)==null?void 0:ks.length)??0)>0&&r.jsxs("div",{className:"mt-3",children:[r.jsx("p",{className:"text-xs font-medium text-navy/80 mb-1",children:"Payment history"}),r.jsx("ul",{className:"space-y-1 text-sm",children:(c.paymentHistory??[]).map(v=>r.jsxs("li",{className:"flex justify-between text-navy/80",children:[r.jsxs("span",{children:[Z(v.date),v.note?`  ${v.note}`:""]}),r.jsx("span",{className:"font-medium",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(v.amount)})]},v.id))})]}),h&&m&&r.jsx("button",{type:"button",onClick:()=>{const v=prompt("Payment amount (e.g. 150)");if(v===null||v==="")return;const z=Number(v);if(Number.isNaN(z)||z<=0)return;const ie=prompt("Note (optional)"),ue={id:crypto.randomUUID(),date:new Date().toISOString().slice(0,10),amount:z,note:ie??void 0},nt=[...m.paymentHistory??[],ue],mt=m.balanceDue??0;ae(c.id,{paymentHistory:nt,balanceDue:Math.max(0,mt-z)}),p(Y(c.id)),b(Y(c.id))},className:"mt-2 px-3 py-2 border border-green-600 text-green-700 rounded-lg text-sm font-medium hover:bg-green-50",children:"+ Record payment"})]}),r.jsxs(_e,{id:"documents",title:"Documents",badge:(Ss=c.documents)!=null&&Ss.length?`${c.documents.length}`:void 0,subtitle:"Consent forms, referrals, lab slips, insurance documents.",children:[r.jsx("ul",{className:"space-y-2 mb-3",children:(c.documents??[]).map(v=>r.jsxs("li",{className:"flex flex-wrap items-center justify-between gap-2 py-2 border-b border-sky/20 last:border-0",children:[r.jsxs("span",{className:"text-navy font-medium",children:[v.type,": ",v.title]}),r.jsx("span",{className:"text-sm text-navy/70",children:Z(v.date)}),i&&r.jsx("button",{type:"button",onClick:()=>{ae(c.id,{documents:(c.documents??[]).filter(z=>z.id!==v.id)}),p(Y(c.id)),b(Y(c.id))},className:"text-xs text-red-600 hover:underline",children:"Remove"})]},v.id))}),i&&r.jsx("button",{type:"button",onClick:()=>{const v=prompt("Type (Consent, Referral, Lab, Insurance, Other)","Consent"),z=prompt("Title",""),ie=prompt("Date (YYYY-MM-DD)",new Date().toISOString().slice(0,10));if(!z||!ie)return;const nt=v&&["Consent","Referral","Lab","Insurance","Other"].includes(v)?v:"Other",mt={id:crypto.randomUUID(),type:nt,title:z,date:ie,addedAt:new Date().toISOString()};ae(c.id,{documents:[...c.documents??[],mt]}),p(Y(c.id)),b(Y(c.id))},className:"px-3 py-2 border border-sky/60 rounded-lg text-sm font-medium text-navy hover:bg-sky/10",children:"+ Add document"})]}),r.jsx(_e,{id:"treatment-plans",title:"Treatment plans",subtitle:"Formal plans with phases, procedures, and estimated costs (prices auto-fill from procedure codes). Printable.",children:r.jsx(uy,{plans:c.treatmentPlans??[],patientName:`${c.firstName} ${c.lastName}`,onAddPlan:v=>{const z={...v,id:crypto.randomUUID()};ae(c.id,{treatmentPlans:[...c.treatmentPlans??[],z]}),p(Y(c.id)),b(Y(c.id))},onUpdatePlan:(v,z)=>{const ie=(c.treatmentPlans??[]).map(ue=>ue.id===v?{...ue,...z}:ue);ae(c.id,{treatmentPlans:ie}),p(Y(c.id)),b(Y(c.id))},onDeletePlan:v=>{ae(c.id,{treatmentPlans:(c.treatmentPlans??[]).filter(z=>z.id!==v)}),p(Y(c.id)),b(Y(c.id))},onAssignToBilling:v=>{const z=c.dateOfAppointment||new Date().toISOString().slice(0,10),ie=new Date().toISOString(),ue=v.phases.flatMap(j=>j.procedures.filter(U=>U.description.trim()||U.estimatedFee!=null&&U.estimatedFee>0).map(U=>({id:crypto.randomUUID(),appointmentDate:z,procedureCode:U.code,description:U.description||"Procedure",amount:U.estimatedFee??0,status:"Pending",addedAt:ie})));if(ue.length===0)return;const nt=c.invoiceLines??[],mt=ue.reduce((j,U)=>j+U.amount,0);ae(c.id,{invoiceLines:[...nt,...ue],balanceDue:(c.balanceDue??0)+mt}),p(Y(c.id)),b(Y(c.id))},readOnly:!i})}),(((Cs=c.visitHistory)==null?void 0:Cs.length)??0)>0&&r.jsx(_e,{id:"visit-history",title:"Visit history",badge:`${((Ps=c.visitHistory)==null?void 0:Ps.length)??0} visit${(((Sr=c.visitHistory)==null?void 0:Sr.length)??0)!==1?"s":""}`,subtitle:"Time in office for past visits (catalogued when you end a visit).",children:r.jsx("ul",{className:"space-y-2",children:[...c.visitHistory??[]].reverse().map((v,z)=>r.jsxs("li",{className:"py-2 border-b border-sky/20 last:border-0 text-sm",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1",children:[r.jsx("span",{className:"text-navy/80",children:Wi(v.startedAt,a)}),r.jsx("span",{className:"text-navy font-medium",children:v.durationMinutes>=60?`${Math.floor(v.durationMinutes/60)} hr ${v.durationMinutes%60} min`:`${v.durationMinutes} min`}),v.voiceNotesConsent&&r.jsx("span",{className:"text-xs text-sky-dark bg-sky/20 px-1.5 py-0.5 rounded",children:"Voice notes"})]}),v.clinicalSummary&&r.jsx("p",{className:"mt-1 text-navy/70 whitespace-pre-wrap text-xs",children:v.clinicalSummary})]},z))})})]}),_&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"add-image-title",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl border border-sky/40 p-6 max-w-md w-full",children:[r.jsx("h2",{id:"add-image-title",className:"text-lg font-semibold text-navy mb-4",children:"Add image"}),r.jsx("p",{className:"text-sm text-navy/70 mb-4",children:"Add an image without editing the whole chart."}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Label"}),r.jsx("input",{type:"text",value:Q,onChange:v=>q(v.target.value),placeholder:"e.g. Panoramic X-ray Jan 2026",list:"patient-quick-add-label-list",autoComplete:"off",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"}),r.jsx("datalist",{id:"patient-quick-add-label-list",children:Nd.map(v=>r.jsx("option",{value:v},v))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Type"}),r.jsx("select",{value:ce,onChange:v=>F(v.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white",children:xd.map(v=>r.jsx("option",{value:v,children:v},v))})]}),r.jsxs("div",{children:[r.jsx("input",{ref:H,type:"file",accept:"image/*",onChange:kr,className:"hidden"}),r.jsx("button",{type:"button",onClick:()=>{var v;return(v=H.current)==null?void 0:v.click()},className:"px-4 py-2 bg-navy text-white rounded-lg text-sm font-medium hover:bg-navy-light",children:"Choose file"}),r.jsxs("span",{className:"ml-2 text-xs text-navy/60",children:["Max ",Bn," MB"]})]})]}),r.jsx("div",{className:"flex gap-3 justify-end mt-6",children:r.jsx("button",{type:"button",onClick:()=>{J(!1),q("")},className:"px-4 py-2 border border-navy/30 rounded-lg font-medium",children:"Cancel"})})]})}),x&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-4",onClick:()=>y(null),role:"dialog","aria-modal":"true","aria-label":"View image",children:r.jsxs("div",{className:"relative max-w-full max-h-full",onClick:v=>v.stopPropagation(),children:[r.jsx("img",{src:x.dataUrl,alt:x.label,className:"max-w-full max-h-[90vh] object-contain rounded shadow-lg"}),r.jsx("p",{className:"text-white text-center mt-2 text-sm",children:x.label}),r.jsx("button",{type:"button",onClick:()=>y(null),className:"absolute -top-10 right-0 px-3 py-1 bg-white text-navy rounded font-medium hover:bg-gray-100",children:"Close"})]})})]})}const vy={firstName:"",lastName:"",dateOfBirth:"",phone:"",email:"",address:"",allergies:"",medicalConditions:"",currentMedications:"",emergencyContactName:"",emergencyContactPhone:"",insuranceProvider:"",insuranceOther:"",insurancePlan:"",appointmentTypeOther:"",insuranceMemberId:"",insuranceGroupNumber:"",dateOfAppointment:new Date().toISOString().slice(0,10),appointmentTime:"",dateOfNextAppointment:"",nextAppointmentTime:"",appointmentType:"",appointmentDoctor:"",chiefComplaint:"",treatmentPlan:"",lastCleaningDate:"",dentistNotes:""};function by(){const e=dt(),[t,n]=g.useState(vy),s=(o,d)=>{n(u=>({...u,[o]:d}))},a=o=>o.trim()?o.trim():void 0,l=o=>{o.preventDefault();const d=Wg({firstName:t.firstName,lastName:t.lastName,dateOfBirth:t.dateOfBirth,phone:a(t.phone),email:a(t.email),address:a(t.address),allergies:a(t.allergies),medicalConditions:a(t.medicalConditions),currentMedications:a(t.currentMedications),emergencyContactName:a(t.emergencyContactName),emergencyContactPhone:a(t.emergencyContactPhone),insuranceProvider:a(t.insuranceProvider===Ke?t.insuranceOther:t.insuranceProvider),insurancePlan:a(t.insurancePlan),insuranceMemberId:a(t.insuranceMemberId),insuranceGroupNumber:a(t.insuranceGroupNumber),dateOfAppointment:t.dateOfAppointment,dateOfNextAppointment:t.dateOfNextAppointment||"",appointmentTime:a(t.appointmentTime),nextAppointmentTime:a(t.nextAppointmentTime),appointmentType:a(t.appointmentType),appointmentTypeOther:t.appointmentType==="Other"?a(t.appointmentTypeOther):void 0,appointmentDoctor:a(t.appointmentDoctor),chiefComplaint:a(t.chiefComplaint),treatmentPlan:a(t.treatmentPlan),lastCleaningDate:a(t.lastCleaningDate),dentistNotes:t.dentistNotes});e(`/dashboard/patients/${d.id}`,{replace:!0})},i=(o,d)=>r.jsxs("section",{children:[r.jsx("h2",{className:"text-sm font-semibold text-navy uppercase tracking-wide mb-3",children:o}),d]});return r.jsxs("div",{className:"p-8",children:[r.jsx(K,{to:"/dashboard/patients",className:"text-sky-dark text-sm font-medium hover:underline mb-4 inline-block",children:" Patients"}),r.jsx("h1",{className:"text-2xl font-semibold text-navy mb-6",children:"New patient"}),r.jsxs("form",{onSubmit:l,className:"bg-white rounded-xl shadow-sm border border-sky/40 p-6 space-y-6 max-w-2xl",children:[i("Demographics",r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"First name *"}),r.jsx("input",{required:!0,value:t.firstName,onChange:o=>s("firstName",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Last name *"}),r.jsx("input",{required:!0,value:t.lastName,onChange:o=>s("lastName",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Date of birth *"}),r.jsx("input",{required:!0,type:"date",value:t.dateOfBirth,onChange:o=>s("dateOfBirth",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Phone"}),r.jsx("input",{value:t.phone,onChange:o=>s("phone",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Email"}),r.jsx("input",{type:"email",value:t.email,onChange:o=>s("email",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Address"}),r.jsx("input",{value:t.address,onChange:o=>s("address",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]})]})),i("Medical history",r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-xs text-navy/60 mb-2",children:"Allergies, conditions, and medications relevant to dental treatment"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Allergies"}),r.jsx("input",{value:t.allergies,onChange:o=>s("allergies",o.target.value),placeholder:"e.g. Penicillin, latex",list:"new-patient-allergies-list",autoComplete:"off",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"}),r.jsx("datalist",{id:"new-patient-allergies-list",children:jp.map(o=>r.jsx("option",{value:o},o))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Medical conditions"}),r.jsx("input",{value:t.medicalConditions,onChange:o=>s("medicalConditions",o.target.value),placeholder:"e.g. Diabetes, hypertension",list:"new-patient-medical-list",autoComplete:"off",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"}),r.jsx("datalist",{id:"new-patient-medical-list",children:wp.map(o=>r.jsx("option",{value:o},o))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Current medications"}),r.jsx("input",{value:t.currentMedications,onChange:o=>s("currentMedications",o.target.value),list:"new-patient-medications-list",autoComplete:"off",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"}),r.jsx("datalist",{id:"new-patient-medications-list",children:kp.map(o=>r.jsx("option",{value:o},o))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Emergency contact name"}),r.jsx("input",{value:t.emergencyContactName,onChange:o=>s("emergencyContactName",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Emergency contact phone"}),r.jsx("input",{value:t.emergencyContactPhone,onChange:o=>s("emergencyContactPhone",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]})]})]})),i("Insurance",r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Insurance provider"}),r.jsxs("select",{value:t.insuranceProvider,onChange:o=>s("insuranceProvider",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white",children:[r.jsx("option",{value:"",children:"Select provider"}),Qt.map(o=>r.jsx("option",{value:o,children:o},o)),r.jsx("option",{value:Ke,children:Ke})]}),t.insuranceProvider===Ke&&r.jsxs("div",{className:"mt-3",children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Custom provider name"}),r.jsx("input",{type:"text",autoComplete:"off",list:"new-patient-insurance-custom-list",value:t.insuranceOther,onChange:o=>s("insuranceOther",o.target.value),placeholder:"Type insurance provider name",className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white text-navy"}),r.jsx("datalist",{id:"new-patient-insurance-custom-list",children:Qt.map(o=>r.jsx("option",{value:o},o))})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Plan name"}),r.jsx("input",{value:t.insurancePlan,onChange:o=>s("insurancePlan",o.target.value),placeholder:"Select plan",list:"new-patient-plan-list",autoComplete:"off",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"}),r.jsx("datalist",{id:"new-patient-plan-list",children:Sp.map(o=>r.jsx("option",{value:o},o))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Member ID"}),r.jsx("input",{value:t.insuranceMemberId,onChange:o=>s("insuranceMemberId",o.target.value),placeholder:"Member ID",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Group number"}),r.jsx("input",{value:t.insuranceGroupNumber,onChange:o=>s("insuranceGroupNumber",o.target.value),placeholder:"Group number",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]})]})),i("Appointments",r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Date of appointment *"}),r.jsx("input",{required:!0,type:"date",value:t.dateOfAppointment,onChange:o=>s("dateOfAppointment",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Appointment time"}),r.jsx("input",{type:"time",value:t.appointmentTime,onChange:o=>s("appointmentTime",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Date of next appointment"}),r.jsx("input",{type:"date",value:t.dateOfNextAppointment,onChange:o=>s("dateOfNextAppointment",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Next appointment time"}),r.jsx("input",{type:"time",value:t.nextAppointmentTime,onChange:o=>s("nextAppointmentTime",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Appointment type"}),r.jsxs("select",{value:t.appointmentType,onChange:o=>s("appointmentType",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white",children:[r.jsx("option",{value:"",children:""}),rp.map(o=>r.jsx("option",{value:o,children:o},o))]}),t.appointmentType==="Other"&&r.jsxs("div",{className:"mt-2",children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Describe appointment type (free response)"}),r.jsx("input",{type:"text",value:t.appointmentTypeOther,onChange:o=>s("appointmentTypeOther",o.target.value),placeholder:"e.g. Implant consultation, TMJ follow-up",list:"new-patient-appointment-type-other-list",autoComplete:"off",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"}),r.jsx("datalist",{id:"new-patient-appointment-type-other-list",children:Cp.map(o=>r.jsx("option",{value:o},o))})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Doctor (performing appointment)"}),r.jsx("input",{value:t.appointmentDoctor,onChange:o=>s("appointmentDoctor",o.target.value),placeholder:"e.g. Dr. Smith",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]})]})),i("Clinical",r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Chief complaint"}),r.jsx("input",{value:t.chiefComplaint,onChange:o=>s("chiefComplaint",o.target.value),placeholder:"Reason for visit",list:"new-patient-chief-complaint-list",autoComplete:"off",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"}),r.jsx("datalist",{id:"new-patient-chief-complaint-list",children:Pp.map(o=>r.jsx("option",{value:o},o))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Last cleaning date"}),r.jsx("input",{type:"date",value:t.lastCleaningDate,onChange:o=>s("lastCleaningDate",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Treatment plan"}),r.jsx("textarea",{value:t.treatmentPlan,onChange:o=>s("treatmentPlan",o.target.value),rows:3,placeholder:"Planned treatment",className:"w-full px-3 py-2 border border-sky/60 rounded-lg resize-y"})]})]})),i("Dentist's notes",r.jsx("textarea",{value:t.dentistNotes,onChange:o=>s("dentistNotes",o.target.value),rows:4,placeholder:"Clinical notes, procedures performed, charting notes, etc.",className:"w-full px-3 py-2 border border-sky/60 rounded-lg resize-y"})),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{type:"submit",className:"px-4 py-2 bg-navy text-white rounded-lg font-medium hover:bg-navy-light",children:"Save patient"}),r.jsx(K,{to:"/dashboard/patients",className:"px-4 py-2 border border-navy/30 rounded-lg font-medium inline-block",children:"Cancel"})]})]})]})}const wd="09:00",kd=60;function Ny(e){const t=[];return e.forEach(n=>{const s=`${n.firstName} ${n.lastName}`;n.dateOfAppointment&&t.push({id:`apt-${n.id}-${n.dateOfAppointment}`,patientId:n.id,date:n.dateOfAppointment,time:n.appointmentTime??wd,durationMinutes:n.appointmentDurationMinutes??kd,type:"appointment",appointmentType:n.appointmentType,provider:n.appointmentDoctor,room:n.appointmentRoom,patientName:s,status:n.appointmentStatus}),n.dateOfNextAppointment&&t.push({id:`next-${n.id}-${n.dateOfNextAppointment}`,patientId:n.id,date:n.dateOfNextAppointment,time:n.nextAppointmentTime??wd,durationMinutes:n.nextAppointmentDurationMinutes??kd,type:"next",appointmentType:n.appointmentType,provider:n.appointmentDoctor,room:n.nextAppointmentRoom,patientName:s})}),t}function Ks(e){const[t,n]=e.split(":").map(Number);return(t??0)*60+(n??0)}function Sd(e){const t=Math.floor(e/60),n=e%60;return`${String(t).padStart(2,"0")}:${String(n).padStart(2,"0")}`}const Cd=Array.from({length:10},(e,t)=>t+8),Pd=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function Vl(e){const t=new Date(e+"T12:00:00"),n=t.getDay(),s=new Date(t);return s.setDate(t.getDate()-n),Array.from({length:7},(a,l)=>{const i=new Date(s);return i.setDate(s.getDate()+l),i.toISOString().slice(0,10)})}function jy(e){const[t,n]=e.split("-").map(Number),s=new Date(t,n-1,1),a=new Date(t,n,0),l=s.getDay(),i=a.getDate(),o=[],d=new Date(s);d.setDate(1-l);for(let p=0;p<l;p++){const h=new Date(d);h.setDate(d.getDate()+p),o.push({date:h.toISOString().slice(0,10),isCurrentMonth:!1})}for(let p=1;p<=i;p++)o.push({date:`${t}-${String(n).padStart(2,"0")}-${String(p).padStart(2,"0")}`,isCurrentMonth:!0});const u=42-o.length,c=new Date(t,n,1);for(let p=0;p<u;p++){const h=new Date(c);h.setDate(c.getDate()+p),o.push({date:h.toISOString().slice(0,10),isCurrentMonth:!1})}return o}function wy({events:e,currentDate:t,viewMode:n,onDateChange:s,onReschedule:a}){const[l,i]=g.useState(null),[o,d]=g.useState(null),u=(f,x)=>{i(x),f.dataTransfer.setData("text/plain",x.id),f.dataTransfer.effectAllowed="move"},c=()=>{i(null),d(null)},p=(f,x,y)=>{f.preventDefault(),f.dataTransfer.dropEffect="move",d({date:x,time:y})},h=(f,x,y)=>{f.preventDefault();const k=f.dataTransfer.getData("text/plain");k&&a(k,x,y),i(null),d(null)},w=f=>e.filter(x=>x.date===f).sort((x,y)=>Ks(x.time)-Ks(y.time)),m=()=>{const f=new Date(t+"T12:00:00");n==="day"?f.setDate(f.getDate()-1):n==="week"?f.setDate(f.getDate()-7):f.setMonth(f.getMonth()-1),s(f.toISOString().slice(0,10))},b=()=>{const f=new Date(t+"T12:00:00");n==="day"?f.setDate(f.getDate()+1):n==="week"?f.setDate(f.getDate()+7):f.setMonth(f.getMonth()+1),s(f.toISOString().slice(0,10))},N=n==="day"?Z(t):n==="week"?(()=>{const f=Vl(t);return`${Z(f[0])}  ${Z(f[6])}`})():(()=>{const[f,x]=t.split("-").map(Number);return`${["January","February","March","April","May","June","July","August","September","October","November","December"][x-1]} ${f}`})();return r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{type:"button",onClick:m,className:"px-3 py-1.5 border border-sky/60 rounded-lg text-sm font-medium",children:""}),r.jsx("span",{className:"font-medium text-navy min-w-[200px]",children:N}),r.jsx("button",{type:"button",onClick:b,className:"px-3 py-1.5 border border-sky/60 rounded-lg text-sm font-medium",children:""})]})}),n==="day"&&r.jsx("div",{className:"border border-sky/40 rounded-lg overflow-hidden bg-white",children:r.jsxs("div",{className:"grid grid-cols-[60px_1fr]",children:[r.jsx("div",{className:"bg-sky/5 border-b border-sky/30 p-1 text-xs text-navy/70 font-medium"}),r.jsx("div",{className:"border-b border-sky/30 p-1 text-sm font-medium text-navy",children:Z(t)}),Cd.map(f=>{const x=Sd(f*60),y=w(t).filter(D=>{const T=Ks(D.time),C=T+(D.durationMinutes??60);return T<(f+1)*60&&C>f*60}),k=(o==null?void 0:o.date)===t&&(o==null?void 0:o.time)===x;return r.jsxs(ir.Fragment,{children:[r.jsx("div",{className:"bg-sky/5 border-b border-sky/20 p-1 text-xs text-navy/70",children:f===0?"12 AM":f<12?`${f} AM`:f===12?"12 PM":`${f-12} PM`}),r.jsx("div",{className:`min-h-[48px] border-b border-sky/20 p-1 ${k?"bg-green-100":""}`,onDragOver:D=>p(D,t,x),onDrop:D=>h(D,t,x),children:y.map(D=>r.jsxs("div",{draggable:!0,onDragStart:T=>u(T,D),onDragEnd:c,className:`mb-1 rounded px-2 py-1 text-xs border border-sky/40 bg-white cursor-grab active:cursor-grabbing ${(l==null?void 0:l.id)===D.id?"opacity-50":""}`,children:[r.jsx(K,{to:`/dashboard/patients/${D.patientId}`,className:"font-medium text-sky-dark hover:underline",onClick:T=>T.stopPropagation(),children:D.patientName}),r.jsx("span",{className:"text-navy/70 ml-1",children:D.time}),D.durationMinutes&&r.jsxs("span",{className:"text-navy/50 ml-1",children:[D.durationMinutes," min"]}),D.room&&r.jsxs("span",{className:"ml-1 text-navy/50",children:[" ",D.room]})]},D.id))})]},f)})]})}),n==="week"&&r.jsx("div",{className:"border border-sky/40 rounded-lg overflow-hidden bg-white overflow-x-auto",children:r.jsxs("table",{className:"w-full min-w-[800px]",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-sky/5",children:[r.jsx("th",{className:"w-14 p-1 text-xs text-navy/70 font-medium border-r border-sky/30",children:"Time"}),Vl(t).map(f=>r.jsxs("th",{className:"p-1 text-xs font-medium text-navy border-r border-sky/30 last:border-r-0",children:[Pd[new Date(f+"T12:00:00").getDay()]," ",f.slice(8)]},f))]})}),r.jsx("tbody",{children:Cd.map(f=>{const x=Sd(f*60);return r.jsxs("tr",{className:"border-t border-sky/20",children:[r.jsx("td",{className:"p-1 text-xs text-navy/70 border-r border-sky/30",children:f===0?"12 AM":f<12?`${f} AM`:f===12?"12 PM":`${f-12} PM`}),Vl(t).map(y=>{const k=w(y).filter(T=>{const C=Ks(T.time),A=C+(T.durationMinutes??60);return C<(f+1)*60&&A>f*60}),D=(o==null?void 0:o.date)===y&&(o==null?void 0:o.time)===x;return r.jsx("td",{className:`min-w-[100px] min-h-[40px] p-1 align-top border-r border-sky/20 last:border-r-0 ${D?"bg-green-100":""}`,onDragOver:T=>p(T,y,x),onDrop:T=>h(T,y,x),children:k.map(T=>r.jsxs("div",{draggable:!0,onDragStart:C=>u(C,T),onDragEnd:c,className:`rounded px-1 py-0.5 text-xs border border-sky/40 bg-white cursor-grab ${(l==null?void 0:l.id)===T.id?"opacity-50":""}`,children:[r.jsx(K,{to:`/dashboard/patients/${T.patientId}`,className:"text-sky-dark hover:underline",onClick:C=>C.stopPropagation(),children:T.patientName}),T.room&&r.jsxs("span",{className:"text-navy/50",children:[" ",T.room]})]},T.id))},y)})]},f)})})]})}),n==="month"&&r.jsx("div",{className:"border border-sky/40 rounded-lg overflow-hidden bg-white",children:r.jsxs("div",{className:"grid grid-cols-7",children:[Pd.map(f=>r.jsx("div",{className:"p-1 text-center text-xs font-medium text-navy bg-sky/5 border-b border-r border-sky/30 last:border-r-0",children:f},f)),jy(t.slice(0,7)).map(({date:f,isCurrentMonth:x})=>{const y=w(f),k=(o==null?void 0:o.date)===f;return r.jsxs("div",{className:`min-h-[80px] p-1 border-b border-r border-sky/20 last:border-r-0 ${x?"":"bg-sky/5"} ${k?"bg-green-100":""}`,onDragOver:D=>{D.preventDefault(),d({date:f,time:"09:00"})},onDrop:D=>{D.preventDefault();const T=D.dataTransfer.getData("text/plain");T&&a(T,f,"09:00"),d(null)},children:[r.jsx("span",{className:`text-sm ${x?"text-navy":"text-navy/50"}`,children:f.slice(8)}),r.jsxs("div",{className:"mt-0.5 space-y-0.5",children:[y.slice(0,3).map(D=>r.jsx("div",{draggable:!0,onDragStart:T=>u(T,D),onDragEnd:c,className:`rounded px-1 py-0.5 text-xs border border-sky/40 bg-white cursor-grab truncate ${(l==null?void 0:l.id)===D.id?"opacity-50":""}`,title:`${D.patientName} ${D.time}`,children:r.jsxs(K,{to:`/dashboard/patients/${D.patientId}`,className:"text-sky-dark hover:underline",onClick:T=>T.stopPropagation(),children:[D.time," ",D.patientName]})},D.id)),y.length>3&&r.jsxs("span",{className:"text-xs text-navy/60",children:["+",y.length-3," more"]})]})]},f)})]})}),r.jsx("p",{className:"text-xs text-navy/60",children:"Drag an appointment to reschedule. Drop on a day/time to update."})]})}function Ys(e){return e.slice(0,4)}function Hl(e){return e.slice(0,7)}function Gl(e){const t=new Date(e+"T12:00:00"),n=new Date(t);return n.setDate(t.getDate()-t.getDay()),n.toISOString().slice(0,10)}function ky(){const{timezone:e}=Nr(),t=sl(e),[n,s]=g.useState("upcoming"),[a,l]=g.useState("month"),[i,o]=g.useState(""),[d,u]=g.useState(""),[c,p]=g.useState(""),[h,w]=g.useState(""),[m,b]=g.useState("list"),[N,f]=g.useState("week"),[x,y]=g.useState(()=>t),[k,D]=g.useState(()=>we()),T=g.useMemo(()=>Ny(k),[k]),C=()=>D(we()),A=g.useMemo(()=>{const P=new Map;return k.forEach(L=>{const W=L.dateOfAppointment;P.has(W)||P.set(W,[]),P.get(W).push(L)}),P},[k]),R=g.useMemo(()=>{const P=new Map;return k.forEach(L=>{if(!L.dateOfNextAppointment)return;const W=L.dateOfNextAppointment;P.has(W)||P.set(W,[]),P.get(W).push(L)}),P},[k]),O=A.get(t)||[],S=Array.from(R.keys()).filter(P=>P>=t).sort().slice(0,14),I=Array.from(new Set([...A.keys(),...R.keys()])).sort();let _=n==="today"?O.map(P=>({date:t,type:"appointment",patient:P})):n==="upcoming"?S.flatMap(P=>(R.get(P)||[]).map(L=>({date:P,type:"next",patient:L}))):I.flatMap(P=>[...(A.get(P)||[]).map(L=>({date:P,type:"appointment",patient:L})),...(R.get(P)||[]).map(L=>({date:P,type:"next",patient:L}))]);h&&(_=_.filter(P=>P.patient.id===h));const J=parseInt(t.slice(0,4),10),Q=g.useMemo(()=>{const P=_.map(et=>et.date),L=Array.from(new Set(P)),W=Array.from(new Set(L.map(Ys))).sort(),le=Array.from(new Set(L.map(Gl))).sort(),re={};return L.forEach(et=>{const tt=Ys(et),gn=Hl(et);re[tt]||(re[tt]=[]),re[tt].includes(gn)||re[tt].push(gn)}),Object.keys(re).forEach(et=>re[et].sort()),{years:W,weeks:le,monthsByYear:re}},[_]),q=g.useMemo(()=>["January","February","March","April","May","June","July","August","September","October","November","December"].map((L,W)=>({value:String(W+1).padStart(2,"0"),label:L})),[]),ce=d&&c?`${d}-${c}`:"",F=Q.monthsByYear[d??""]??[],H=g.useMemo(()=>a==="month"?ce?_.filter(P=>Hl(P.date)===ce):_:a==="year"?i?_.filter(P=>Ys(P.date)===i):_:a==="week"&&i?_.filter(P=>Gl(P.date)===i):_,[_,a,i,ce]),E=g.useMemo(()=>[...k].sort((P,L)=>`${P.firstName} ${P.lastName}`.localeCompare(`${L.firstName} ${L.lastName}`)),[k]),X=(P,L,W)=>{const le=T.find(re=>re.id===P);le&&(le.type==="next"?ae(le.patientId,{dateOfNextAppointment:L,nextAppointmentTime:W}):ae(le.patientId,{dateOfAppointment:L,appointmentTime:W}),C())},$=g.useMemo(()=>{let P=h?T.filter(L=>L.patientId===h):T;return n==="today"?P=P.filter(L=>L.date===t):n==="upcoming"&&(P=P.filter(L=>L.date>=t&&S.includes(L.date))),a==="month"&&ce?P=P.filter(L=>Hl(L.date)===ce):a==="year"&&i?P=P.filter(L=>Ys(L.date)===i):a==="week"&&i&&(P=P.filter(L=>Gl(L.date)===i)),P},[T,h,n,t,S,a,i,ce]);return r.jsxs("div",{className:"p-8",children:[r.jsx("h1",{className:"text-2xl font-semibold text-navy mb-6",children:"Appointments"}),r.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-4",children:[r.jsx("span",{className:"text-sm text-navy/70",children:"View:"}),["list","calendar"].map(P=>r.jsx("button",{onClick:()=>b(P),className:`px-4 py-2 rounded-lg font-medium capitalize ${m===P?"bg-navy text-white":"bg-white border border-sky/60 text-navy hover:bg-sky/10"}`,children:P},P)),m==="calendar"&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"text-sm text-navy/70 ml-2",children:"Calendar:"}),["day","week","month"].map(P=>r.jsx("button",{onClick:()=>f(P),className:`px-3 py-1.5 rounded-lg text-sm font-medium capitalize ${N===P?"bg-sky-dark text-white":"bg-sky/20 text-navy"}`,children:P},P))]})]}),m==="list"&&H.length>0&&r.jsx("div",{className:"mb-4",children:r.jsx("button",{type:"button",onClick:()=>{const P=["Date","Time","Type","Patient","Duration","Room"],L=H.map(({date:W,type:le,patient:re})=>[Z(W),le==="appointment"?re.appointmentTime??"":re.nextAppointmentTime??"",le==="appointment"?"Appointment":"Next appointment",`${re.firstName} ${re.lastName}`,le==="appointment"?re.appointmentDurationMinutes??"":re.nextAppointmentDurationMinutes??"",le==="appointment"?re.appointmentRoom??"":re.nextAppointmentRoom??""]);vp(`appointments-${new Date().toISOString().slice(0,10)}.csv`,P,L)},className:"px-3 py-2 border border-sky/60 rounded-lg text-sm font-medium text-navy hover:bg-sky/10",children:"Export CSV"})}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:["today","upcoming","all"].map(P=>r.jsx("button",{onClick:()=>{s(P),o("")},className:`px-4 py-2 rounded-lg font-medium capitalize ${n===P?"bg-navy text-white":"bg-white border border-sky/60 text-navy hover:bg-sky/10"}`,children:P},P))}),r.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("label",{className:"text-sm text-navy/70 whitespace-nowrap",children:"Group by"}),r.jsxs("select",{value:a,onChange:P=>{const L=P.target.value;l(L),o(""),u(""),p("")},className:"px-3 py-2 border border-sky/60 rounded-lg bg-white text-navy",children:[r.jsx("option",{value:"year",children:"Year"}),r.jsx("option",{value:"month",children:"Month"}),r.jsx("option",{value:"week",children:"Week"})]})]}),a==="month"?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("label",{className:"text-sm text-navy/70 whitespace-nowrap",children:"Year"}),r.jsxs("select",{value:d,onChange:P=>{u(P.target.value),p("")},className:"px-3 py-2 border border-sky/60 rounded-lg bg-white text-navy min-w-[100px]",children:[r.jsx("option",{value:"",children:"Select year"}),(Q.years.length>0?Q.years:Array.from({length:11},(P,L)=>String(J-5+L))).map(P=>r.jsx("option",{value:P,children:P},P))]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("label",{className:"text-sm text-navy/70 whitespace-nowrap",children:"Month"}),r.jsxs("select",{value:c,onChange:P=>p(P.target.value),className:"px-3 py-2 border border-sky/60 rounded-lg bg-white text-navy min-w-[140px]",children:[r.jsx("option",{value:"",children:"Select month"}),(d?F:[]).length>0?F.map(P=>{const L=q.find(W=>W.value===P);return r.jsx("option",{value:P,children:(L==null?void 0:L.label)??P},P)}):q.map(P=>r.jsx("option",{value:P.value,children:P.label},P.value))]})]})]}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("label",{className:"text-sm text-navy/70 whitespace-nowrap",children:"Show"}),r.jsxs("select",{value:i,onChange:P=>o(P.target.value),className:"px-3 py-2 border border-sky/60 rounded-lg bg-white text-navy min-w-[180px]",children:[r.jsx("option",{value:"",children:a==="year"?"All years":"All weeks"}),a==="year"&&(Q.years.length>0?Q.years:Array.from({length:11},(P,L)=>String(J-5+L))).map(P=>r.jsx("option",{value:P,children:P},P)),a==="week"&&Q.weeks.map(P=>r.jsxs("option",{value:P,children:[Z(P)," (week)"]},P))]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("label",{className:"text-sm text-navy/70 whitespace-nowrap",children:"Patient"}),r.jsxs("select",{value:h,onChange:P=>w(P.target.value),className:"px-3 py-2 border border-sky/60 rounded-lg bg-white text-navy min-w-[180px]",children:[r.jsx("option",{value:"",children:"All patients"}),E.map(P=>r.jsxs("option",{value:P.id,children:[P.firstName," ",P.lastName]},P.id))]})]})]}),m==="calendar"&&r.jsx("div",{className:"mb-6",children:r.jsx(wy,{events:$,currentDate:x,viewMode:N,onDateChange:y,onReschedule:X})}),m==="list"&&r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 overflow-hidden",children:H.length===0?r.jsx("div",{className:"p-8 text-center text-navy/60",children:i||ce||h?"No appointments match the selected filters.":n==="today"?"No appointments today.":n==="upcoming"?"No upcoming next appointments.":"No appointments on file."}):r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-navy/5 border-b border-sky/40",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-navy",children:"Date"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-navy",children:"Type"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-navy",children:"Patient"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-navy",children:"Status"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-navy",children:"Duration"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-navy",children:"Room"}),r.jsx("th",{className:"w-24"})]})}),r.jsx("tbody",{children:H.map(({date:P,type:L,patient:W})=>r.jsxs("tr",{className:"border-b border-sky/20 hover:bg-sky/10",children:[r.jsxs("td",{className:"py-3 px-4 text-navy",children:[Z(P),W.appointmentTime||W.nextAppointmentTime?` ${L==="appointment"?W.appointmentTime:W.nextAppointmentTime}`:""]}),r.jsx("td",{className:"py-3 px-4 text-navy/80",children:L==="appointment"?"Appointment":"Next appointment"}),r.jsxs("td",{className:"py-3 px-4 font-medium text-navy",children:[W.firstName," ",W.lastName]}),r.jsx("td",{className:"py-3 px-4",children:L==="appointment"?r.jsxs("select",{value:W.appointmentStatus??"Scheduled",onChange:le=>{ae(W.id,{appointmentStatus:le.target.value}),C()},className:"text-sm px-2 py-1 border border-sky/60 rounded bg-white text-navy",children:[r.jsx("option",{value:"Scheduled",children:"Scheduled"}),r.jsx("option",{value:"Checked In",children:"Checked In"}),r.jsx("option",{value:"In Chair",children:"In Chair"}),r.jsx("option",{value:"With Doctor",children:"With Doctor"}),r.jsx("option",{value:"Checkout",children:"Checkout"}),r.jsx("option",{value:"No-Show",children:"No-Show"}),r.jsx("option",{value:"Broken",children:"Broken"})]}):r.jsx("span",{className:"text-navy/60",children:""})}),r.jsx("td",{className:"py-3 px-4 text-navy/80",children:L==="appointment"?W.appointmentDurationMinutes?`${W.appointmentDurationMinutes} min`:"":W.nextAppointmentDurationMinutes?`${W.nextAppointmentDurationMinutes} min`:""}),r.jsx("td",{className:"py-3 px-4 text-navy/80",children:L==="appointment"?W.appointmentRoom??"":W.nextAppointmentRoom??""}),r.jsx("td",{className:"py-3 px-4",children:r.jsx(K,{to:`/dashboard/patients/${W.id}`,className:"text-sky-dark font-medium text-sm hover:underline",children:"Chart"})})]},`${W.id}-${P}-${L}`))})]})})]})}function Sy(){const[e,t]=g.useState(""),[n,s]=g.useState(""),a=g.useMemo(()=>jr(),[]),l=g.useMemo(()=>{let i=a;if(e.trim()){const o=e.toLowerCase();i=i.filter(d=>`${d.firstName} ${d.lastName}`.toLowerCase().includes(o)||d.email&&d.email.toLowerCase().includes(o)||d.position.toLowerCase().includes(o))}return n&&(i=i.filter(o=>o.position===n)),i.sort((o,d)=>`${o.lastName} ${o.firstName}`.localeCompare(`${d.lastName} ${d.firstName}`))},[a,e,n]);return r.jsxs("div",{className:"p-8",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[r.jsx("h1",{className:"text-2xl font-semibold text-navy",children:"Staff"}),r.jsx(K,{to:"/dashboard/staff/new",className:"inline-flex items-center justify-center px-4 py-2 bg-navy text-white rounded-lg font-medium hover:bg-navy-light transition-colors",children:"+ Add staff member"})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:[r.jsx("input",{type:"search",placeholder:"Search by name, email, or position...",value:e,onChange:i=>t(i.target.value),className:"flex-1 max-w-md px-4 py-2 border border-sky/60 rounded-lg bg-white text-navy placeholder-navy/50 focus:outline-none focus:ring-2 focus:ring-sky focus:border-transparent"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("label",{className:"text-sm text-navy/70 whitespace-nowrap",children:"Position"}),r.jsxs("select",{value:n,onChange:i=>s(i.target.value),className:"px-3 py-2 border border-sky/60 rounded-lg bg-white text-navy min-w-[200px]",children:[r.jsx("option",{value:"",children:"All positions"}),al.map(i=>r.jsx("optgroup",{label:i.label,children:i.positions.map(o=>r.jsx("option",{value:o,children:o},o))},i.label))]})]})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 overflow-hidden",children:l.length===0?r.jsx("div",{className:"p-8 text-center text-navy/60",children:a.length===0?"No staff yet. Add your first staff member above.":"No staff match your search or filter."}):r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-navy/5 border-b border-sky/40",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-navy",children:"Name"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-navy",children:"Position"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-navy",children:"Status"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-navy",children:"Hire date"}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-navy",children:"Contact"}),r.jsx("th",{className:"w-24"})]})}),r.jsx("tbody",{children:l.map(i=>r.jsxs("tr",{className:"border-b border-sky/20 hover:bg-sky/10",children:[r.jsxs("td",{className:"py-3 px-4 font-medium text-navy",children:[i.firstName," ",i.lastName]}),r.jsx("td",{className:"py-3 px-4 text-navy/80",children:i.position}),r.jsx("td",{className:"py-3 px-4",children:r.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${i.status==="Active"?"bg-green-100 text-green-800":i.status==="On leave"?"bg-amber-100 text-amber-800":"bg-navy/10 text-navy/70"}`,children:i.status})}),r.jsx("td",{className:"py-3 px-4 text-navy/80",children:Z(i.hireDate)}),r.jsx("td",{className:"py-3 px-4 text-navy/80 text-sm",children:i.email||i.phone||""}),r.jsx("td",{className:"py-3 px-4",children:r.jsx(K,{to:`/dashboard/staff/${i.id}`,className:"text-sky-dark font-medium text-sm hover:underline",children:"View"})})]},i.id))})]})})]})}const Cy={firstName:"",lastName:"",position:"",email:"",phone:"",loginEmail:"",password:"",hireDate:new Date().toISOString().slice(0,10),status:"Active",licenseNumber:"",licenseExpiry:"",emergencyContactName:"",emergencyContactPhone:"",notes:""};function Py(){const e=dt(),[t,n]=g.useState(Cy),s=(o,d)=>{n(u=>({...u,[o]:d}))},a=o=>o.trim()?o.trim():void 0,l=o=>{o.preventDefault();const d=Ig({firstName:t.firstName,lastName:t.lastName,position:t.position,email:a(t.email),phone:a(t.phone),loginEmail:a(t.loginEmail)??"",password:t.password,hireDate:t.hireDate,status:t.status,licenseNumber:a(t.licenseNumber),licenseExpiry:a(t.licenseExpiry),emergencyContactName:a(t.emergencyContactName),emergencyContactPhone:a(t.emergencyContactPhone),notes:a(t.notes)});e(`/dashboard/staff/${d.id}`,{replace:!0})},i=(o,d)=>r.jsxs("section",{children:[r.jsx("h2",{className:"text-sm font-semibold text-navy uppercase tracking-wide mb-3",children:o}),d]});return r.jsxs("div",{className:"p-8",children:[r.jsx(K,{to:"/dashboard/staff",className:"text-sky-dark text-sm font-medium hover:underline mb-4 inline-block",children:" Staff"}),r.jsx("h1",{className:"text-2xl font-semibold text-navy mb-6",children:"Add staff member"}),r.jsxs("form",{onSubmit:l,className:"bg-white rounded-xl shadow-sm border border-sky/40 p-6 space-y-6 max-w-2xl",children:[i("Basic information",r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"First name *"}),r.jsx("input",{required:!0,value:t.firstName,onChange:o=>s("firstName",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Last name *"}),r.jsx("input",{required:!0,value:t.lastName,onChange:o=>s("lastName",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Position *"}),r.jsxs("select",{required:!0,value:t.position,onChange:o=>s("position",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white",children:[r.jsx("option",{value:"",children:"Select position"}),al.map(o=>r.jsx("optgroup",{label:o.label,children:o.positions.map(d=>r.jsx("option",{value:d,children:d},d))},o.label))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Status"}),r.jsx("select",{value:t.status,onChange:o=>s("status",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white",children:fp.map(o=>r.jsx("option",{value:o,children:o},o))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Hire date *"}),r.jsx("input",{required:!0,type:"date",value:t.hireDate,onChange:o=>s("hireDate",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]})]})),i("Contact",r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Email"}),r.jsx("input",{type:"email",value:t.email,onChange:o=>s("email",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Phone"}),r.jsx("input",{value:t.phone,onChange:o=>s("phone",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]})]})),i("Login credentials",r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-xs text-navy/60 mb-2",children:"Assigned credentials for this employee to sign in to GumGauge. Leave blank if they will not use sign-in."}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Login email or username"}),r.jsx("input",{type:"text",autoComplete:"off",value:t.loginEmail,onChange:o=>s("loginEmail",o.target.value),placeholder:"e.g. jane@practice.com",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Password"}),r.jsx("input",{type:"password",autoComplete:"new-password",value:t.password,onChange:o=>s("password",o.target.value),placeholder:"Set password for sign-in",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]})]})]})),i("License / certification",r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-xs text-navy/60 mb-2",children:"For roles that require a license (e.g. Dentist, Hygienist, CDA)"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"License number"}),r.jsx("input",{value:t.licenseNumber,onChange:o=>s("licenseNumber",o.target.value),placeholder:"e.g. state license #",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"License expiry"}),r.jsx("input",{type:"date",value:t.licenseExpiry,onChange:o=>s("licenseExpiry",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]})]})]})),i("Emergency contact",r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Name"}),r.jsx("input",{value:t.emergencyContactName,onChange:o=>s("emergencyContactName",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Phone"}),r.jsx("input",{value:t.emergencyContactPhone,onChange:o=>s("emergencyContactPhone",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]})]})),i("Notes",r.jsx("textarea",{value:t.notes,onChange:o=>s("notes",o.target.value),rows:3,placeholder:"Internal notes about this staff member",className:"w-full px-3 py-2 border border-sky/60 rounded-lg resize-y"})),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{type:"submit",className:"px-4 py-2 bg-navy text-white rounded-lg font-medium hover:bg-navy-light",children:"Save staff member"}),r.jsx(K,{to:"/dashboard/staff",className:"px-4 py-2 border border-navy/30 rounded-lg font-medium inline-block",children:"Cancel"})]})]})]})}function ft({label:e,value:t,editing:n,formValue:s,onChange:a,type:l="text",placeholder:i,rows:o}){return r.jsxs("div",{className:o?"md:col-span-2":"",children:[e?r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:e}):null,n?l==="textarea"?r.jsx("textarea",{value:s,onChange:d=>a(d.target.value),rows:o??3,placeholder:i,className:"w-full px-3 py-2 border border-sky/60 rounded-lg resize-y"}):r.jsx("input",{type:l,value:s,onChange:d=>a(d.target.value),placeholder:i,className:"w-full px-3 py-2 border border-sky/60 rounded-lg"}):r.jsx("p",{className:"text-navy",children:t||""})]})}function Dy(){const{id:e}=Ym(),t=dt(),[n,s]=g.useState(zr(e||"")),[a,l]=g.useState(!1),[i,o]=g.useState(n||null),[d,u]=g.useState(!1),[c,p]=g.useState("");if(g.useEffect(()=>{const N=zr(e||"");s(N),o(N||null)},[e]),!n)return r.jsxs("div",{className:"p-8",children:[r.jsx("p",{className:"text-navy/70",children:"Staff member not found."}),r.jsx(K,{to:"/dashboard/staff",className:"text-sky-dark font-medium mt-2 inline-block hover:underline",children:"Back to staff"})]});const h=()=>{if(!i)return;const N={...i};c.trim()!==""&&(N.password=c,p("")),Og(n.id,N),s(zr(n.id)),o(zr(n.id)),l(!1)},w=()=>{Mg(n.id),t("/dashboard/staff",{replace:!0})},m=(N,f)=>{i&&o({...i,[N]:f})},b=(N,f)=>r.jsxs("section",{children:[r.jsx("h2",{className:"text-sm font-semibold text-navy uppercase tracking-wide mb-3",children:N}),f]});return r.jsxs("div",{className:"p-8",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsx(K,{to:"/dashboard/staff",className:"text-sky-dark text-sm font-medium hover:underline mb-2 inline-block",children:" Staff"}),r.jsxs("h1",{className:"text-2xl font-semibold text-navy",children:[n.firstName," ",n.lastName]}),r.jsx("p",{className:"text-navy/70 mt-1",children:n.position})]}),r.jsx("div",{className:"flex gap-2",children:a?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:h,className:"px-4 py-2 bg-navy text-white rounded-lg font-medium hover:bg-navy-light",children:"Save"}),r.jsx("button",{onClick:()=>{o(n),l(!1),u(!1),p("")},className:"px-4 py-2 border border-navy/30 rounded-lg",children:"Cancel"})]}):r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-navy text-white rounded-lg font-medium hover:bg-navy-light",children:"Edit"}),d?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:w,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-medium",children:"Confirm delete"}),r.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 border border-navy/30 rounded-lg",children:"Cancel"})]}):r.jsx("button",{onClick:()=>u(!0),className:"px-4 py-2 border border-red-300 text-red-600 rounded-lg font-medium hover:bg-red-50",children:"Delete"})]})})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-6 space-y-6",children:[b("Basic information",r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ft,{label:"First name",value:n.firstName,editing:!!a&&!!i,formValue:(i==null?void 0:i.firstName)??"",onChange:N=>m("firstName",N)}),r.jsx(ft,{label:"Last name",value:n.lastName,editing:!!a&&!!i,formValue:(i==null?void 0:i.lastName)??"",onChange:N=>m("lastName",N)}),r.jsxs("div",{className:i?"":"md:col-span-2",children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Position"}),a&&i?r.jsx("select",{value:i.position,onChange:N=>m("position",N.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white",children:al.map(N=>r.jsx("optgroup",{label:N.label,children:N.positions.map(f=>r.jsx("option",{value:f,children:f},f))},N.label))}):r.jsx("p",{className:"text-navy",children:n.position})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Status"}),a&&i?r.jsx("select",{value:i.status,onChange:N=>m("status",N.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white",children:fp.map(N=>r.jsx("option",{value:N,children:N},N))}):r.jsx("p",{className:"text-navy",children:n.status})]}),r.jsx(ft,{label:"Hire date",value:n.hireDate?Z(n.hireDate):"",editing:!!a&&!!i,formValue:(i==null?void 0:i.hireDate)??"",type:"date",onChange:N=>m("hireDate",N)})]})),b("Contact",r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ft,{label:"Email",value:n.email??"",editing:!!a&&!!i,formValue:(i==null?void 0:i.email)??"",type:"email",onChange:N=>m("email",N)}),r.jsx(ft,{label:"Phone",value:n.phone??"",editing:!!a&&!!i,formValue:(i==null?void 0:i.phone)??"",onChange:N=>m("phone",N)})]})),b("Login credentials",r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-xs text-navy/60 mb-2",children:"Used by this employee to sign in. Do not display or share passwords."}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a&&i?r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Login email or username"}),r.jsx("input",{type:"text",autoComplete:"off",value:i.loginEmail??"",onChange:N=>m("loginEmail",N.target.value),placeholder:"e.g. jane@practice.com",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"New password (leave blank to keep current)"}),r.jsx("input",{type:"password",autoComplete:"new-password",value:c,onChange:N=>p(N.target.value),placeholder:"",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]})]}):r.jsxs(r.Fragment,{children:[r.jsx(ft,{label:"Login email or username",value:n.loginEmail??"",editing:!1,formValue:"",onChange:()=>{}}),r.jsx("p",{className:"text-navy/60 text-sm",children:"Password is not displayed."})]})})]})),b("License / certification",r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ft,{label:"License number",value:n.licenseNumber??"",editing:!!a&&!!i,formValue:(i==null?void 0:i.licenseNumber)??"",placeholder:"e.g. state license #",onChange:N=>m("licenseNumber",N)}),r.jsx(ft,{label:"License expiry",value:n.licenseExpiry??"",editing:!!a&&!!i,formValue:(i==null?void 0:i.licenseExpiry)??"",type:"date",onChange:N=>m("licenseExpiry",N)})]})),b("Emergency contact",r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ft,{label:"Name",value:n.emergencyContactName??"",editing:!!a&&!!i,formValue:(i==null?void 0:i.emergencyContactName)??"",onChange:N=>m("emergencyContactName",N)}),r.jsx(ft,{label:"Phone",value:n.emergencyContactPhone??"",editing:!!a&&!!i,formValue:(i==null?void 0:i.emergencyContactPhone)??"",onChange:N=>m("emergencyContactPhone",N)})]})),b("Notes",r.jsx(ft,{label:"",value:n.notes??"",editing:!!a&&!!i,formValue:(i==null?void 0:i.notes)??"",type:"textarea",rows:4,placeholder:"Internal notes",onChange:N=>m("notes",N)})),Jo.includes(n.position)&&b("Assigned patients",r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-xs text-navy/60 mb-2",children:'Patients assigned to this provider. They will see these in "My patients".'}),a&&i?r.jsxs("div",{className:"max-h-48 overflow-y-auto border border-sky/40 rounded-lg p-2 space-y-1",children:[we().map(N=>{const f=(i.assignedPatientIds??[]).includes(N.id);return r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-sky/10 px-2 py-1 rounded",children:[r.jsx("input",{type:"checkbox",checked:f,onChange:x=>{if(!i)return;const y=i.assignedPatientIds??[],k=x.target.checked?[...y,N.id]:y.filter(D=>D!==N.id);o({...i,assignedPatientIds:k})},className:"rounded border-sky/60"}),r.jsxs("span",{className:"text-sm text-navy",children:[N.firstName," ",N.lastName]}),r.jsx("span",{className:"text-xs text-navy/60",children:Z(N.dateOfAppointment)})]},N.id)}),we().length===0&&r.jsx("p",{className:"text-navy/60 text-sm",children:"No patients in the system yet."})]}):r.jsx("ul",{className:"space-y-1",children:(n.assignedPatientIds??[]).length===0?r.jsx("li",{className:"text-navy/60 text-sm",children:"No patients assigned."}):we().filter(N=>(n.assignedPatientIds??[]).includes(N.id)).map(N=>r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsxs(K,{to:`/dashboard/patients/${N.id}`,className:"text-sky-dark font-medium hover:underline text-sm",children:[N.firstName," ",N.lastName]}),r.jsx("span",{className:"text-xs text-navy/60",children:Z(N.dateOfAppointment)})]},N.id))})]}))]})]})}function Ey(){const{staff:e,isSignedIn:t,isAdmin:n}=wr(),s=we(),a=e&&Jo.includes(e.position),l=(e==null?void 0:e.assignedPatientIds)??[],i=g.useMemo(()=>s.filter(o=>l.includes(o.id)),[s,l]);return t?n&&!e?r.jsxs("div",{className:"p-8",children:[r.jsx("h1",{className:"text-2xl font-semibold text-navy mb-2",children:"My patients"}),r.jsx("p",{className:"text-navy/70",children:"Demo mode. Use the Patients tab to view and manage patients."}),r.jsx(K,{to:"/dashboard/patients",className:"text-sky-dark font-medium mt-2 inline-block hover:underline",children:"Go to Patients"})]}):a?r.jsxs("div",{className:"p-8",children:[r.jsx("h1",{className:"text-2xl font-semibold text-navy mb-2",children:"My patients"}),r.jsxs("p",{className:"text-navy/70 mb-6",children:["Patients assigned to you (",e.firstName," ",e.lastName,"). Edit your staff profile to change assignments."]}),i.length===0?r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-6",children:[r.jsx("p",{className:"text-navy/60",children:"No patients assigned yet. Assign patients in your staff profile (Staff  your name  Edit  Assigned patients)."}),r.jsx(K,{to:"/dashboard/staff",className:"text-sky-dark font-medium mt-2 inline-block hover:underline",children:"Go to Staff"})]}):r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 overflow-hidden",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-sky/40 bg-sky/5",children:[r.jsx("th",{className:"text-left px-4 py-3 font-semibold text-navy",children:"Patient"}),r.jsx("th",{className:"text-left px-4 py-3 font-semibold text-navy",children:"Appointment"}),r.jsx("th",{className:"text-left px-4 py-3 font-semibold text-navy",children:"Next appointment"}),r.jsx("th",{className:"text-left px-4 py-3 font-semibold text-navy"})]})}),r.jsx("tbody",{children:i.map(o=>r.jsxs("tr",{className:"border-b border-sky/20 hover:bg-sky/5",children:[r.jsxs("td",{className:"px-4 py-3",children:[o.firstName," ",o.lastName]}),r.jsxs("td",{className:"px-4 py-3 text-navy/80",children:[Z(o.dateOfAppointment),o.appointmentTime?` ${o.appointmentTime}`:""]}),r.jsx("td",{className:"px-4 py-3 text-navy/80",children:o.dateOfNextAppointment?Z(o.dateOfNextAppointment):""}),r.jsx("td",{className:"px-4 py-3",children:r.jsx(K,{to:`/dashboard/patients/${o.id}`,className:"text-sky-dark font-medium hover:underline",children:"Chart"})})]},o.id))})]})})]}):r.jsxs("div",{className:"p-8",children:[r.jsx("h1",{className:"text-2xl font-semibold text-navy mb-2",children:"My patients"}),r.jsxs("p",{className:"text-navy/70",children:["Your role (",e.position,") does not have an assigned patient list. Dentists, hygienists, and certain specialists can assign patients and view them here."]})]}):r.jsxs("div",{className:"p-8",children:[r.jsx("p",{className:"text-navy/70",children:"Sign in to see your assigned patients."}),r.jsx(K,{to:"/signin",className:"text-sky-dark font-medium mt-2 inline-block hover:underline",children:"Sign in"})]})}const Dd=3,Ay=500,Qs=6;function Ty(){const e=[];for(let t=1;t<=32;t++){const n=Math.floor(200+Math.random()*400);e.push({tooth:t,density:n,lightPenetrationPercent:yg(n),healthResult:oa(n)})}return e}function Iy(){var X;const e=xn(),t=e.pathname+e.search,{isSignedIn:n}=wr(),s=we(),[a,l]=g.useState(""),[i,o]=g.useState(!1),[d,u]=g.useState(!1),[c,p]=g.useState(!1),[h,w]=g.useState(0),[m,b]=g.useState(50),[N,f]=g.useState(""),[x,y]=g.useState(""),[k,D]=g.useState(0),[T,C]=g.useState(null),[A,R]=g.useState(null),O=g.useRef(null),S=g.useRef(null),I=a?Y(a):null,_=(I==null?void 0:I.gumGaugeExams)??[],J=(I==null?void 0:I.patientImages)??[],Q=J.length<10,q=()=>{o(!0),f("")},ce=()=>{if(!n){f("Sign in to run a scan.");return}if(!a){f("Select a patient first.");return}if(!i){f("Connect the GumGauge device first.");return}f(""),u(!0),p(!1),w(0),S.current&&clearInterval(S.current),S.current=setInterval(()=>{w($=>$>=Qs-1?(S.current&&clearInterval(S.current),S.current=null,u(!1),p(!0),Qs):$+1)},Ay)},F=()=>{if(!n){f("Sign in to add readings to the chart.");return}if(!I)return;const $=Ty(),P={id:crypto.randomUUID(),scanDate:new Date().toISOString().slice(0,10),teeth:$},L=I.gumGaugeExams??[];ae(I.id,{gumGaugeExams:[...L,P]}),f(""),D(W=>W+1),C(P.id)},H=()=>{S.current&&(clearInterval(S.current),S.current=null),u(!1),p(!1),w(0),f("")};g.useEffect(()=>()=>{S.current&&clearInterval(S.current)},[]),g.useEffect(()=>{C(null),R(null)},[a]);const E=$=>{var W;const P=(W=$.target.files)==null?void 0:W[0];if($.target.value="",f(""),y(""),!P)return;if(!I){f("Select a patient first, then upload the scan file.");return}if(J.length>=10){f("This patient already has the maximum of 10 images. Remove one from their chart first.");return}if(P.size>Dd*1024*1024){f(`File must be under ${Dd} MB.`);return}const L=new FileReader;L.onload=()=>{const le=L.result,re={id:crypto.randomUUID(),label:`GumGauge Scan ${new Date().toISOString().slice(0,10)}`,type:"GumGauge Scan",dataUrl:le,dateAdded:new Date().toISOString()},et=[...I.patientImages??[],re];ae(I.id,{patientImages:et}),p(!1),y(`Scan file added to ${I.firstName} ${I.lastName}'s chart. It will appear in their Images section.`),D(tt=>tt+1),setTimeout(()=>y(""),5e3)},L.onerror=()=>f("Could not read the file."),L.readAsDataURL(P)};return r.jsxs("div",{className:"p-8",children:[r.jsx("h1",{className:"text-2xl font-semibold text-navy mb-2",children:"Device Scan"}),r.jsx("p",{className:"text-navy/70 mb-6",children:"Connect the GumGauge scanning device, select a patient, run the scan, and upload results to the patient's scan files."}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-6 space-y-6 max-w-2xl",children:[r.jsxs("section",{children:[r.jsx("h2",{className:"text-sm font-semibold text-navy uppercase tracking-wide mb-3",children:"1. Connect device"}),i?r.jsxs("p",{className:"text-green-700 font-medium flex items-center gap-2",children:[r.jsx("span",{className:"inline-block h-2 w-2 rounded-full bg-green-600"}),"Device connected (simulated)"]}):r.jsx("button",{type:"button",onClick:q,className:"px-4 py-2 bg-navy text-white rounded-lg font-medium hover:bg-navy-light",children:"Connect GumGauge device"}),i&&r.jsxs("div",{className:"mt-3 p-3 bg-sky/10 rounded-lg border border-sky/30",children:[r.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"Light / brightness (%)"}),r.jsx("p",{className:"text-xs text-navy/60 mb-1",children:"Adjusts device LED intensity. When connected via serial, this value is sent to the hardware."}),r.jsx("input",{type:"range",min:0,max:100,value:m,onChange:$=>b(Number($.target.value)),className:"w-full h-2 rounded-lg appearance-none bg-sky/30 accent-navy"}),r.jsxs("span",{className:"text-sm font-medium text-navy",children:[m,"%"]})]}),r.jsx("p",{className:"text-xs text-navy/60 mt-1",children:"In production, this would link to the hardware via USB/Bluetooth."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-sm font-semibold text-navy uppercase tracking-wide mb-3",children:"2. Select patient"}),r.jsxs("select",{value:a,onChange:$=>{l($.target.value),p(!1)},className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white",children:[r.jsx("option",{value:"",children:" Select patient for this scan "}),s.map($=>r.jsxs("option",{value:$.id,children:[$.firstName," ",$.lastName]},$.id))]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-sm font-semibold text-navy uppercase tracking-wide mb-3",children:"3. Run scan"}),!n&&r.jsxs("p",{className:"text-amber-700 text-sm mb-2",children:[r.jsx(K,{to:`/signin?returnTo=${encodeURIComponent(t)}`,className:"font-medium hover:underline",children:"Sign in"})," to run a scan or add readings to the chart."]}),r.jsx("div",{className:"flex flex-wrap items-center gap-2",children:r.jsx("button",{type:"button",onClick:ce,disabled:!n||!a||!i||d,className:"px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Scanning":"Start procedure"})}),d&&r.jsxs("div",{className:"mt-4 p-4 bg-sky/10 rounded-xl border border-sky/40",children:[r.jsxs("p",{className:"text-sm font-medium text-navy mb-2",children:[h<3?"Preparing":h<5?"Confirming":"Complete",h<5&&` (${h<3?"yellow":"green"} ${h%3+1}/3)`]}),r.jsx("div",{className:`h-3 w-full rounded overflow-hidden transition-colors duration-300 ${h>=3?"bg-green-600":"bg-amber-400"} ${h<5?"animate-pulse":""}`,role:"progressbar","aria-valuenow":h>=5?Qs:h+1,"aria-valuemin":0,"aria-valuemax":Qs,"aria-label":"Scan progress"}),r.jsx("p",{className:"text-xs text-navy/60 mt-1",children:h>=5?"Scan complete. Add readings to chart below.":"Solid bar: 3 yellow flashes, then 3 green (3rd green holds)."})]}),r.jsx("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:(d||c)&&r.jsx("button",{type:"button",onClick:H,className:"px-4 py-2 border border-sky/60 text-navy rounded-lg font-medium hover:bg-sky/10",children:"End scan"})}),c&&r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"text-green-700 font-medium mt-2 flex items-center gap-2",children:[r.jsx("span",{className:"inline-block h-2 w-2 rounded-full bg-green-600"}),"Scan complete."]}),r.jsx("p",{className:"text-xs text-navy/70 mt-1 mb-2",children:"Add device readings (light penetration %, health per tooth) to the patient chart. They will appear in the Perio charting section."}),r.jsx("button",{type:"button",onClick:F,disabled:!n,className:"px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add GumGauge readings to chart"})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-sm font-semibold text-navy uppercase tracking-wide mb-3",children:"4. Upload result to patient"}),r.jsx("p",{className:"text-xs text-navy/60 mb-2",children:`Save the scan result directly to the patient's images. It will appear as "GumGauge Scan" in their chart.`}),r.jsx("input",{ref:O,type:"file",accept:"image/*,.pdf",onChange:E,className:"hidden"}),r.jsx("button",{type:"button",onClick:()=>{var $;return($=O.current)==null?void 0:$.click()},disabled:!a||!Q,className:"px-4 py-2 bg-sky-dark text-white rounded-lg font-medium hover:bg-navy disabled:opacity-50 disabled:cursor-not-allowed",children:"Upload scan file"}),!Q&&a&&r.jsx("p",{className:"text-amber-700 text-sm mt-1",children:"This patient has reached the maximum of 10 images. Remove one from their chart first."}),x&&r.jsx("p",{className:"text-green-700 text-sm mt-2 font-medium",role:"status",children:x}),N&&r.jsx("p",{className:"text-red-600 text-sm mt-2",role:"alert",children:N})]}),I&&_.length>0&&r.jsxs("section",{className:"rounded-xl border border-sky/40 bg-green-50/50 p-4",children:[r.jsx("h2",{className:"text-sm font-semibold text-navy uppercase tracking-wide mb-3",children:"View scan results"}),r.jsx("p",{className:"text-xs text-navy/60 mb-3",children:"Select a scan date and click a tooth to see light penetration % and health. Compare past scans with the dropdown."}),r.jsx(bp,{exams:_,selectedExamId:T??((X=_[_.length-1])==null?void 0:X.id)??null,onSelectExamId:C,selectedTooth:A,onSelectTooth:R})]}),I&&r.jsxs("section",{children:[r.jsx("h2",{className:"text-sm font-semibold text-navy uppercase tracking-wide mb-2",children:"Patient chart"}),r.jsxs(K,{to:`/dashboard/patients/${I.id}`,className:"text-sky-dark font-medium hover:underline",children:["Open ",I.firstName," ",I.lastName,"'s chart "]})]})]})]})}function Oy(e,t){if(!e||!t||t<1)return null;const n=new Date(e+"T12:00:00");return n.setMonth(n.getMonth()+t),n.toISOString().slice(0,10)}function My(){const{timezone:e}=Nr(),t=sl(e),n=g.useMemo(()=>we(),[]),s=g.useMemo(()=>n.filter(i=>i.recallIntervalMonths!=null&&i.recallIntervalMonths>=1&&i.lastCleaningDate).map(i=>{const o=Oy(i.lastCleaningDate,i.recallIntervalMonths);return{patient:i,dueDate:o,overdue:o?o<t:!1}}).sort((i,o)=>i.overdue===o.overdue?i.dueDate.localeCompare(o.dueDate):i.overdue?-1:1),[n,t]),a=s.filter(i=>i.overdue),l=s.filter(i=>!i.overdue);return r.jsxs("div",{className:"p-8",children:[r.jsx("h1",{className:"text-2xl font-semibold text-navy mb-2",children:"Recall / recare"}),r.jsx("p",{className:"text-navy/70 mb-6",children:"Patients due for recall based on last cleaning date and recall interval. Set recall interval on the patient chart."}),s.length===0?r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-6",children:r.jsx("p",{className:"text-navy/60",children:'No patients with recall interval set. Edit a patient and set "Recall / recurring (months)" and "Last cleaning date" to see them here.'})}):r.jsxs(r.Fragment,{children:[a.length>0&&r.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-6 mb-6",children:[r.jsxs("h2",{className:"text-lg font-medium text-amber-900 mb-2",children:["Overdue recall (",a.length,")"]}),r.jsx("ul",{className:"space-y-2",children:a.map(({patient:i,dueDate:o})=>r.jsxs("li",{className:"flex flex-wrap items-center gap-x-4 gap-y-1",children:[r.jsxs(K,{to:`/dashboard/patients/${i.id}`,className:"font-medium text-amber-900 hover:underline",children:[i.firstName," ",i.lastName]}),r.jsxs("span",{className:"text-amber-800 text-sm",children:["Due ",Z(o)," (overdue)"]}),r.jsxs("span",{className:"text-amber-700 text-xs",children:["Last cleaning: ",i.lastCleaningDate?Z(i.lastCleaningDate):"","  Every ",i.recallIntervalMonths," mo"]})]},i.id))})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-6",children:[r.jsx("h2",{className:"text-lg font-medium text-navy mb-4",children:"Upcoming recall"}),r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-sky/40",children:[r.jsx("th",{className:"text-left py-2 font-medium text-navy",children:"Patient"}),r.jsx("th",{className:"text-left py-2 font-medium text-navy",children:"Due date"}),r.jsx("th",{className:"text-left py-2 font-medium text-navy",children:"Last cleaning"}),r.jsx("th",{className:"text-left py-2 font-medium text-navy",children:"Interval"}),r.jsx("th",{className:"w-20"})]})}),r.jsx("tbody",{children:l.map(({patient:i,dueDate:o})=>r.jsxs("tr",{className:"border-b border-sky/20",children:[r.jsx("td",{className:"py-2",children:r.jsxs(K,{to:`/dashboard/patients/${i.id}`,className:"font-medium text-navy hover:underline",children:[i.firstName," ",i.lastName]})}),r.jsx("td",{className:"py-2 text-navy/80",children:Z(o)}),r.jsx("td",{className:"py-2 text-navy/80",children:i.lastCleaningDate?Z(i.lastCleaningDate):""}),r.jsxs("td",{className:"py-2 text-navy/80",children:["Every ",i.recallIntervalMonths," mo"]}),r.jsx("td",{className:"py-2",children:r.jsx(K,{to:`/dashboard/patients/${i.id}`,className:"text-sky-dark text-sm font-medium hover:underline",children:"Chart"})})]},i.id))})]})]})]}),r.jsx("p",{className:"mt-4 text-xs text-navy/60",children:"Appointment reminders (email/SMS) would require a backend integration."})]})}function Ry(){const[e,t]=g.useState(""),n=ip({limit:200}),s=e?n.filter(a=>a.entityType===e):n;return r.jsxs("div",{className:"p-8",children:[r.jsx("h1",{className:"text-2xl font-semibold text-navy mb-2",children:"Audit trail"}),r.jsx("p",{className:"text-navy/70 mb-4",children:"Who changed what and when. Last 200 entries."}),r.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-4",children:[r.jsx("label",{className:"text-sm text-navy/70",children:"Filter by type"}),r.jsxs("select",{value:e,onChange:a=>t(a.target.value),className:"px-3 py-2 border border-sky/60 rounded-lg bg-white text-navy",children:[r.jsx("option",{value:"",children:"All"}),r.jsx("option",{value:"patient",children:"Patient"}),r.jsx("option",{value:"staff",children:"Staff"})]})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 overflow-hidden",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-navy/5 border-b border-sky/40",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left py-3 px-4 font-medium text-navy",children:"Time"}),r.jsx("th",{className:"text-left py-3 px-4 font-medium text-navy",children:"Actor"}),r.jsx("th",{className:"text-left py-3 px-4 font-medium text-navy",children:"Action"}),r.jsx("th",{className:"text-left py-3 px-4 font-medium text-navy",children:"Entity"}),r.jsx("th",{className:"text-left py-3 px-4 font-medium text-navy",children:"Details"})]})}),r.jsx("tbody",{children:s.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"py-8 text-center text-navy/60",children:"No audit entries."})}):s.map(a=>r.jsxs("tr",{className:"border-b border-sky/20 hover:bg-sky/5",children:[r.jsx("td",{className:"py-2 px-4 text-navy/80",children:new Date(a.timestamp).toLocaleString()}),r.jsx("td",{className:"py-2 px-4",children:a.actor??""}),r.jsx("td",{className:"py-2 px-4",children:a.action}),r.jsxs("td",{className:"py-2 px-4",children:[a.entityType==="patient"&&r.jsx(K,{to:`/dashboard/patients/${a.entityId}`,className:"text-sky-dark hover:underline",children:"Chart"}),a.entityType==="staff"&&r.jsx(K,{to:`/dashboard/staff/${a.entityId}`,className:"text-sky-dark hover:underline",children:"View"}),a.entityType!=="patient"&&a.entityType!=="staff"&&a.entityId]}),r.jsx("td",{className:"py-2 px-4 text-navy/70",children:a.details??""})]},a.id))})]})})]})}function Wl(e){const t=e.replace(/\D/g,"");if(t.length<4)return;const n=t.slice(0,2),s=t.slice(0,3),a=t.slice(0,4),l=t.length>=6?t.slice(0,6):"";if(t.startsWith("4"))return"Visa";if(t.startsWith("34")||t.startsWith("37"))return"American Express";if(n>="51"&&n<="55"||l>="222100"&&l<="272099")return"Mastercard";if(a==="6011"||s>="644"&&s<="649"||l>="622126"&&l<="622925"||l>="624000"&&l<="626999"||l>="628200"&&l<="628899"||n==="65")return"Discover"}function _y(e){return e.replace(/\D/g,"").slice(-4)}function Ue(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}function Ly(){const{isAdmin:e}=wr(),t=we(),[n,s]=g.useState(""),[a,l]=g.useState(!1),[i,o]=g.useState(""),[d,u]=g.useState(""),[c,p]=g.useState(!1),[h,w]=g.useState("Card"),[m,b]=g.useState(""),[N,f]=g.useState(""),[x,y]=g.useState(""),[k,D]=g.useState(!1),[T,C]=g.useState(""),[A,R]=g.useState(""),[O,S]=g.useState([]),[I,_]=g.useState(""),[J,Q]=g.useState(!1),[q,ce]=g.useState(!1),[F,H]=g.useState(!1),[E,X]=g.useState("outOfPocket"),[$,P]=g.useState(""),[L,W]=g.useState(""),[le,re]=g.useState(""),[et,tt]=g.useState(!1),[gn,kr]=g.useState(()=>new Date().toISOString().slice(0,10)),[ut,Ln]=g.useState(new Set),[js,Vt]=g.useState({}),G=n?Y(n):null,Et=(G==null?void 0:G.balanceDue)??0,Ht=(G==null?void 0:G.paymentMethods)??[],$n=(G==null?void 0:G.paymentHistory)??[],Fn=(G==null?void 0:G.insuranceClaims)??[],il=(G==null?void 0:G.invoiceLines)??[],ol=()=>{if(!G)return;let j,U,se;if(E==="split"){const Tt=Number($),yn=Number(L);if(Number.isNaN(Tt)||Number.isNaN(yn)||Tt<0||yn<0||Tt===0&&yn===0)return;j=Tt+yn,U=Tt,se=yn}else if(E==="withInsurance"){if(j=Number(L),Number.isNaN(j)||j<0)return;se=j}else{if(j=Number(i),Number.isNaN(j)||j<=0)return;U=j}const Gt={id:crypto.randomUUID(),date:new Date().toISOString().slice(0,10),amount:j,note:d.trim()||void 0,paymentMethodId:le||void 0,amountOutOfPocket:U,amountWithInsurance:se},pt=[...$n,Gt],At=Math.max(0,Et-j);ae(G.id,{paymentHistory:pt,balanceDue:At}),l(!1),o(""),u(""),P(""),W(""),re(""),X("outOfPocket")},cl=()=>{if(!G)return;const j=N.trim()?parseInt(N,10):void 0,U=x.trim()?parseInt(x,10):void 0,se=`${G.firstName} ${G.lastName}`.trim();let Gt,pt;h==="Card"&&m.replace(/\D/g,"").length>=4&&(Gt=_y(m),pt=Wl(m)??void 0);const At={id:crypto.randomUUID(),type:h,lastFour:Gt,cardBrand:pt,nameOnCard:se||void 0,expiryMonth:j!=null&&j>=1&&j<=12?j:void 0,expiryYear:U!=null&&U>=2020&&U<=2050?U:void 0,addedAt:new Date().toISOString()},Tt=[...Ht,At];ae(G.id,{paymentMethods:Tt}),p(!1),w("Card"),b(""),f(""),y("")},ws=j=>{G&&ae(G.id,{paymentMethods:Ht.filter(U=>U.id!==j)})},ks=()=>{if(!G)return;const j=Number(A);if(Number.isNaN(j)||j<0)return;const U={id:crypto.randomUUID(),date:new Date().toISOString().slice(0,10),procedureCodes:O.length?O:[""],description:T.trim()||"Insurance claim",amount:j,status:"Sent"},se=[...Fn,U];ae(G.id,{insuranceClaims:se}),D(!1),C(""),R(""),S([]),_("")},Ss=()=>{I.trim()&&(S(j=>[...j,I.trim()]),_(""))},Cs=j=>{Ln(U=>{const se=new Set(U);return se.has(j)?se.delete(j):se.add(j),se})},Ps=(j,U)=>{Vt(se=>({...se,[j]:U}))},Sr=j=>{const U=js[j];if(U!==void 0&&U!==""){const se=Number(U);if(!Number.isNaN(se)&&se>=0)return se}return Np(j)??0},v=()=>{if(!G||ut.size===0)return;const j=new Date().toISOString(),U=Array.from(ut).map(pt=>{const At=Sn.find(yn=>yn.code===pt),Tt=Sr(pt);return{id:crypto.randomUUID(),appointmentDate:gn,procedureCode:pt,description:(At==null?void 0:At.description)??pt,amount:Tt,status:"Pending",addedAt:j}}),se=U.reduce((pt,At)=>pt+At.amount,0),Gt=G.invoiceLines??[];ae(G.id,{invoiceLines:[...Gt,...U],balanceDue:(G.balanceDue??0)+se}),tt(!1),Ln(new Set),Vt({}),kr(new Date().toISOString().slice(0,10))},z=il.reduce((j,U)=>{const se=U.appointmentDate;return j[se]||(j[se]=[]),j[se].push(U),j},{}),ie=Object.keys(z).sort(),ue=we(),nt=ue.reduce((j,U)=>j+(U.paymentHistory??[]).filter(se=>se.date.startsWith(new Date().toISOString().slice(0,7))).reduce((se,Gt)=>se+Gt.amount,0),0),mt=ue.reduce((j,U)=>j+(U.balanceDue??0),0);return r.jsxs("div",{className:"p-8",children:[r.jsx("h1",{className:"text-2xl font-semibold text-navy mb-2",children:"Billing"}),r.jsx("p",{className:"text-navy/70 mb-6",children:"View balance, payment methods, and send claims to insurance. Procedure prices are based on standard fees (e.g. Cleaning $125)."}),e&&r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[r.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"Production (this month)"}),r.jsx("p",{className:"text-xl font-semibold text-navy",children:Ue(nt)})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[r.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"Total outstanding"}),r.jsx("p",{className:"text-xl font-semibold text-navy",children:Ue(mt)})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-1 bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[r.jsx("h2",{className:"text-sm font-semibold text-navy uppercase tracking-wide mb-3",children:"Select patient"}),r.jsxs("select",{value:n,onChange:j=>s(j.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white",children:[r.jsx("option",{value:"",children:" Select patient "}),t.map(j=>r.jsxs("option",{value:j.id,children:[j.firstName," ",j.lastName,(j.balanceDue??0)>0?`  ${Ue(j.balanceDue)} due`:""]},j.id))]}),r.jsx("p",{className:"text-xs text-navy/60 mt-2",children:"Or pick from patients with a balance below."}),(()=>{const j=t.filter(U=>(U.balanceDue??0)>0).sort((U,se)=>(se.balanceDue??0)-(U.balanceDue??0));return j.length===0?r.jsx("p",{className:"text-xs text-navy/50 mt-2",children:"No patients with an unpaid balance."}):r.jsx("ul",{className:"mt-3 border border-sky/30 rounded-lg divide-y divide-sky/20 max-h-48 overflow-y-auto",children:j.map(U=>r.jsx("li",{children:r.jsxs("button",{type:"button",onClick:()=>s(U.id),className:`w-full text-left px-3 py-2 text-sm hover:bg-sky/10 transition-colors ${n===U.id?"bg-sky/20 font-medium text-navy":"text-navy/90"}`,children:[r.jsxs("span",{className:"font-medium",children:[U.firstName," ",U.lastName]}),r.jsxs("span",{className:"ml-2 text-navy/70",children:[Ue(U.balanceDue??0)," due"]})]})},U.id))})})()]}),G&&r.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[r.jsxs("h2",{className:"text-lg font-semibold text-navy",children:[G.firstName," ",G.lastName]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{type:"button",onClick:()=>H(!0),className:"px-3 py-1.5 border border-sky/60 text-navy rounded-lg text-sm font-medium hover:bg-sky/10",children:"Check eligibility"}),G.email&&r.jsx("button",{type:"button",onClick:()=>{ce(!1),Q(!0)},className:"px-3 py-1.5 border border-sky/60 text-navy rounded-lg text-sm font-medium hover:bg-sky/10",children:"Email receipt / invoice"}),r.jsx(K,{to:`/dashboard/patients/${G.id}`,className:"text-sky-dark font-medium text-sm hover:underline",children:"Open chart "})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[r.jsx("h3",{className:"text-sm font-semibold text-navy mb-3",children:"Account summary"}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:r.jsxs("div",{className:"bg-sky/10 rounded-lg p-3 border border-sky/30",children:[r.jsx("p",{className:"text-xs text-navy/70 uppercase tracking-wide",children:"Balance due"}),r.jsx("p",{className:"text-xl font-semibold text-navy mt-0.5",children:Ue(Et)})]})})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:"text-sm font-semibold text-navy",children:"Charges by appointment date"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{type:"button",onClick:()=>{tt(!0),kr(new Date().toISOString().slice(0,10)),Ln(new Set),Vt({})},className:"px-3 py-1.5 bg-navy text-white rounded-lg text-sm font-medium hover:bg-navy-light",children:"+ Add charges"}),r.jsx(K,{to:`/dashboard/patients/${G.id}`,className:"text-xs text-sky-dark font-medium hover:underline",children:"From chart"})]})]}),r.jsx("p",{className:"text-xs text-navy/60 mb-2",children:"What the patient is being charged, grouped by appointment date. Add procedures below or from the patient chart (Assign to Billing)."}),ie.length===0?r.jsx("p",{className:"text-navy/60 text-sm",children:"No charges yet. Click Add charges to add procedures to this patients tab, or assign from Treatment plans on the chart."}):r.jsx("div",{className:"space-y-3",children:ie.map(j=>r.jsxs("div",{className:"border border-sky/20 rounded-lg p-3",children:[r.jsx("p",{className:"text-xs font-medium text-navy/80 mb-2",children:Z(j)}),r.jsxs("ul",{className:"space-y-1 text-sm",children:[z[j].map(U=>r.jsxs("li",{className:"flex justify-between text-navy/90",children:[r.jsxs("span",{children:[U.description,U.procedureCode?` (${U.procedureCode})`:""]}),r.jsx("span",{className:"font-medium",children:Ue(U.amount)})]},U.id)),r.jsxs("li",{className:"flex justify-between text-navy/70 pt-1 border-t border-sky/20",children:[r.jsx("span",{children:"Subtotal"}),r.jsx("span",{className:"font-medium",children:Ue(z[j].reduce((U,se)=>U+se.amount,0))})]})]})]},j))})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[r.jsx("h3",{className:"text-sm font-semibold text-navy mb-3",children:"Payments"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-xs font-medium text-navy/80 uppercase tracking-wide",children:"Payment methods on file"}),r.jsx("button",{type:"button",onClick:()=>p(!0),className:"px-2.5 py-1.5 bg-navy text-white rounded-lg text-xs font-medium hover:bg-navy-light",children:"+ Add"})]}),Ht.length===0?r.jsx("p",{className:"text-sm text-navy/60",children:"No payment methods stored. Add a card or method to apply payments."}):r.jsx("ul",{className:"space-y-1.5",children:Ht.map(j=>r.jsxs("li",{className:"flex items-center justify-between py-2 px-3 rounded-lg bg-sky/5 border border-sky/20 text-sm",children:[r.jsxs("span",{className:"text-navy",children:[j.cardBrand||j.type,j.lastFour?`  ${j.lastFour}`:"",j.nameOnCard?`  ${j.nameOnCard}`:"",j.expiryMonth!=null&&j.expiryYear!=null?` Exp ${String(j.expiryMonth).padStart(2,"0")}/${j.expiryYear}`:""]}),r.jsx("button",{type:"button",onClick:()=>ws(j.id),className:"text-xs text-red-600 hover:underline ml-2",children:"Remove"})]},j.id))})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-xs font-medium text-navy/80 uppercase tracking-wide",children:"Record payment"}),r.jsx("button",{type:"button",onClick:()=>l(!0),className:"px-2.5 py-1.5 bg-green-600 text-white rounded-lg text-xs font-medium hover:bg-green-700",children:"+ Record payment"})]}),r.jsx("p",{className:"text-xs text-navy/60 mb-2",children:"Apply payment to this patient's balance. You can select their posted balance in the modal."}),$n.length===0?r.jsx("p",{className:"text-sm text-navy/60",children:"No payments recorded yet."}):r.jsx("ul",{className:"space-y-1 text-sm border border-sky/20 rounded-lg divide-y divide-sky/20 max-h-40 overflow-y-auto",children:[...$n].reverse().slice(0,10).map(j=>r.jsxs("li",{className:"flex justify-between px-3 py-2 text-navy/90",children:[r.jsxs("span",{children:[Z(j.date),j.note?`  ${j.note}`:""]}),r.jsx("span",{className:"font-medium",children:Ue(j.amount)})]},j.id))})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:"text-sm font-semibold text-navy",children:"Send to insurance"}),r.jsx("button",{type:"button",onClick:()=>D(!0),className:"px-3 py-1.5 bg-sky-dark text-white rounded-lg text-sm font-medium hover:bg-navy",children:"+ Send claim"})]}),r.jsx("p",{className:"text-xs text-navy/60 mb-2",children:"For larger amounts (surgery, root canal, etc.)."}),Fn.length===0?r.jsx("p",{className:"text-navy/60 text-sm",children:"No claims yet."}):r.jsx("ul",{className:"space-y-2 text-sm",children:Fn.map(j=>r.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-sky/20 last:border-0",children:[r.jsxs("span",{className:"text-navy/80",children:[Z(j.date),"  ",j.description,"  ",Ue(j.amount)]}),r.jsx("span",{className:`text-xs font-medium px-1.5 py-0.5 rounded ${j.status==="Paid"?"bg-green-100 text-green-800":j.status==="Partially paid"?"bg-amber-100 text-amber-800":j.status==="Sent"?"bg-sky/20 text-navy":j.status==="Denied"?"bg-red-100 text-red-800":"bg-navy/10 text-navy"}`,children:j.status})]},j.id))})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[r.jsx("h3",{className:"text-sm font-semibold text-navy mb-2",children:"Procedure prices (reference)"}),r.jsx("p",{className:"text-xs text-navy/60 mb-2",children:"Standard fees used for estimates and claims."}),r.jsx("div",{className:"overflow-x-auto max-h-48 overflow-y-auto",children:r.jsxs("table",{className:"text-xs w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-sky/10",children:[r.jsx("th",{className:"px-2 py-1 text-left",children:"Code"}),r.jsx("th",{className:"px-2 py-1 text-left",children:"Description"}),r.jsx("th",{className:"px-2 py-1 text-right",children:"Fee"})]})}),r.jsx("tbody",{children:Sn.filter(j=>j.defaultFee!=null).map(j=>r.jsxs("tr",{className:"border-t border-sky/20",children:[r.jsx("td",{className:"px-2 py-1",children:j.code}),r.jsx("td",{className:"px-2 py-1",children:j.description}),r.jsx("td",{className:"px-2 py-1 text-right font-medium",children:Ue(j.defaultFee)})]},j.code))})]})})]})]})]}),a&&G&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"record-payment-title",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl border border-sky/40 p-6 max-w-md w-full",children:[r.jsx("h2",{id:"record-payment-title",className:"text-lg font-semibold text-navy mb-2",children:"Record payment"}),r.jsxs("p",{className:"text-sm text-navy/70 mb-4",children:["Apply a payment to ",G.firstName," ",G.lastName,"'s account."]}),r.jsxs("div",{className:"mb-4 p-3 bg-sky/10 rounded-lg border border-sky/30",children:[r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsx("span",{className:"text-sm font-medium text-navy",children:"Posted balance due"}),r.jsx("span",{className:"text-lg font-semibold text-navy",children:Ue(Et)})]}),Et>0&&r.jsxs("button",{type:"button",onClick:()=>{const j=Et.toFixed(2);o(j),W(E==="split"?"0":j),P(E==="split"?j:"0")},className:"mt-2 w-full py-2 px-3 bg-navy text-white rounded-lg text-sm font-medium hover:bg-navy-light",children:["Use full balance (",Ue(Et),")"]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-navy mb-2",children:"Payment type"}),r.jsxs("div",{className:"flex flex-wrap gap-4",children:[r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"radio",name:"payType",checked:E==="outOfPocket",onChange:()=>X("outOfPocket"),className:"text-navy"}),r.jsx("span",{className:"text-sm text-navy",children:"Out of pocket"})]}),r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"radio",name:"payType",checked:E==="withInsurance",onChange:()=>X("withInsurance"),className:"text-navy"}),r.jsx("span",{className:"text-sm text-navy",children:"Insurance"})]}),r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"radio",name:"payType",checked:E==="split",onChange:()=>X("split"),className:"text-navy"}),r.jsx("span",{className:"text-sm text-navy",children:"Split (both)"})]})]})]}),E==="outOfPocket"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"Amount ($)"}),r.jsx("input",{type:"number",min:0,step:.01,value:i,onChange:j=>o(j.target.value),placeholder:"0.00",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),E==="withInsurance"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"Amount from insurance ($)"}),r.jsx("input",{type:"number",min:0,step:.01,value:L,onChange:j=>W(j.target.value),placeholder:"0.00",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),E==="split"&&r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"Out of pocket ($)"}),r.jsx("input",{type:"number",min:0,step:.01,value:$,onChange:j=>P(j.target.value),placeholder:"0.00",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"From insurance ($)"}),r.jsx("input",{type:"number",min:0,step:.01,value:L,onChange:j=>W(j.target.value),placeholder:"0.00",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"Payment method (optional)"}),r.jsxs("select",{value:le,onChange:j=>re(j.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white text-navy",children:[r.jsx("option",{value:"",children:" None "}),Ht.map(j=>r.jsxs("option",{value:j.id,children:[j.cardBrand||j.type,j.lastFour?`  ${j.lastFour}`:"","  ",j.nameOnCard||"Card"]},j.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"Note (optional)"}),r.jsx("input",{type:"text",value:d,onChange:j=>u(j.target.value),placeholder:"e.g. Check #1234",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]})]}),r.jsxs("div",{className:"flex gap-3 justify-end mt-6 pt-4 border-t border-sky/30",children:[r.jsx("button",{type:"button",onClick:()=>{l(!1),o(""),u(""),P(""),W(""),re(""),X("outOfPocket")},className:"px-4 py-2 border border-navy/30 rounded-lg font-medium text-navy hover:bg-sky/10",children:"Cancel"}),r.jsx("button",{type:"button",onClick:ol,className:"px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700",children:"Record payment"})]})]})}),c&&G&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"add-method-title",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl border border-sky/40 p-6 max-w-md w-full",children:[r.jsx("h2",{id:"add-method-title",className:"text-lg font-semibold text-navy mb-1",children:"Add payment method"}),r.jsxs("p",{className:"text-sm text-navy/70 mb-4",children:["Card will be saved for ",G.firstName," ",G.lastName,". Card type is detected from the number."]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"Payment type"}),r.jsxs("select",{value:h,onChange:j=>w(j.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white text-navy",children:[r.jsx("option",{value:"Card",children:"Card"}),r.jsx("option",{value:"Check",children:"Check"}),r.jsx("option",{value:"Cash",children:"Cash"}),r.jsx("option",{value:"Other",children:"Other"})]})]}),h==="Card"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"Card number"}),r.jsx("input",{type:"text",inputMode:"numeric",autoComplete:"cc-number",value:m,onChange:j=>b(j.target.value.replace(/\D/g,"").slice(0,19)),placeholder:"Enter full card number",className:"w-full px-3 py-2 border border-sky/60 rounded-lg font-mono"}),m.replace(/\D/g,"").length>=4&&Wl(m)&&r.jsxs("p",{className:"text-xs text-navy/60 mt-1",children:["Detected: ",Wl(m)]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"Expiration month"}),r.jsxs("select",{value:N,onChange:j=>f(j.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white text-navy",children:[r.jsx("option",{value:"",children:"Select month"}),Array.from({length:12},(j,U)=>String(U+1).padStart(2,"0")).map(j=>r.jsx("option",{value:j,children:j},j))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"Expiration year"}),r.jsxs("select",{value:x,onChange:j=>y(j.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white text-navy",children:[r.jsx("option",{value:"",children:"Select year"}),Array.from({length:21},(j,U)=>new Date().getFullYear()+U).map(j=>r.jsx("option",{value:String(j),children:j},j))]})]})]})]})]}),r.jsxs("div",{className:"flex gap-3 justify-end mt-6 pt-4 border-t border-sky/30",children:[r.jsx("button",{type:"button",onClick:()=>{p(!1),b(""),f(""),y("")},className:"px-4 py-2 border border-navy/30 rounded-lg font-medium text-navy hover:bg-sky/10",children:"Cancel"}),r.jsx("button",{type:"button",onClick:cl,className:"px-4 py-2 bg-navy text-white rounded-lg font-medium hover:bg-navy-light",children:"Save payment method"})]})]})}),J&&G&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"email-receipt-title",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl border border-sky/40 p-6 max-w-sm w-full",children:[r.jsx("h2",{id:"email-receipt-title",className:"text-lg font-semibold text-navy mb-4",children:"Email receipt / invoice"}),q?r.jsxs("p",{className:"text-green-700 font-medium",children:["Receipt sent to ",G.email]}):r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"text-sm text-navy/70 mb-4",children:["Send a receipt or invoice to the patient at ",r.jsx("strong",{children:G.email}),". In production this would send an email; for demo you can open your mail client."]}),r.jsx("a",{href:`mailto:${G.email}?subject=Receipt - ${G.firstName} ${G.lastName}&body=Thank you for your payment. Balance due: ${Ue(Et)}.`,target:"_blank",rel:"noopener noreferrer",onClick:()=>ce(!0),className:"inline-block px-4 py-2 bg-navy text-white rounded-lg font-medium hover:bg-navy-light",children:"Open email to patient"})]}),r.jsx("div",{className:"mt-4",children:r.jsx("button",{type:"button",onClick:()=>{Q(!1),ce(!1)},className:"px-4 py-2 border border-navy/30 rounded-lg font-medium",children:"Close"})})]})}),k&&G&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"send-claim-title",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl border border-sky/40 p-6 max-w-md w-full",children:[r.jsx("h2",{id:"send-claim-title",className:"text-lg font-semibold text-navy mb-4",children:"Send claim to insurance"}),r.jsx("p",{className:"text-sm text-navy/70 mb-4",children:"For surgery, root canal, or other larger procedures."}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Description"}),r.jsx("input",{type:"text",value:T,onChange:j=>C(j.target.value),placeholder:"e.g. Root canal #3",list:"billing-claim-description-list",autoComplete:"off",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"}),r.jsx("datalist",{id:"billing-claim-description-list",children:Dp.map(j=>r.jsx("option",{value:j},j))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Procedure codes (CDT)"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("select",{value:I,onChange:j=>_(j.target.value),className:"flex-1 px-3 py-2 border border-sky/60 rounded-lg bg-white text-sm",children:[r.jsx("option",{value:"",children:" Add code "}),Sn.map(j=>r.jsxs("option",{value:j.code,children:[j.code," ",j.description," ",j.defaultFee!=null?`$${j.defaultFee}`:""]},j.code))]}),r.jsx("button",{type:"button",onClick:Ss,className:"px-3 py-2 bg-sky/20 text-navy rounded-lg text-sm font-medium",children:"Add"})]}),O.length>0&&r.jsxs("p",{className:"text-xs text-navy/70 mt-1",children:["Codes: ",O.join(", ")]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Amount ($)"}),r.jsx("input",{type:"number",min:0,step:.01,value:A,onChange:j=>R(j.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]})]}),r.jsxs("div",{className:"flex gap-3 justify-end mt-6",children:[r.jsx("button",{type:"button",onClick:()=>{D(!1),C(""),R(""),S([])},className:"px-4 py-2 border border-navy/30 rounded-lg font-medium",children:"Cancel"}),r.jsx("button",{type:"button",onClick:ks,className:"px-4 py-2 bg-sky-dark text-white rounded-lg font-medium",children:"Send claim"})]})]})}),F&&G&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"eligibility-title",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl border border-sky/40 p-6 max-w-md w-full",children:[r.jsx("h2",{id:"eligibility-title",className:"text-lg font-semibold text-navy mb-4",children:"Insurance eligibility (simulated)"}),r.jsxs("p",{className:"text-sm text-navy/70 mb-4",children:["For ",G.firstName," ",G.lastName,". In production this would query the payer."]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-navy/70",children:"Preventive coverage"}),r.jsx("span",{className:"font-medium",children:"100%"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-navy/70",children:"Basic coverage"}),r.jsx("span",{className:"font-medium",children:"80%"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-navy/70",children:"Major coverage"}),r.jsx("span",{className:"font-medium",children:"50%"})]})]}),r.jsx("button",{type:"button",onClick:()=>H(!1),className:"mt-6 px-4 py-2 border border-navy/30 rounded-lg font-medium",children:"Close"})]})}),et&&G&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"add-charges-title",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl border border-sky/40 p-6 max-w-2xl w-full max-h-[90vh] flex flex-col",children:[r.jsx("h2",{id:"add-charges-title",className:"text-lg font-semibold text-navy mb-2",children:"Add charges to tab"}),r.jsxs("p",{className:"text-sm text-navy/70 mb-3",children:["Multi-select procedures to add to ",G.firstName," ",G.lastName,"'s invoice. Amounts use default fees; you can override per line."]}),r.jsxs("div",{className:"mb-3",children:[r.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Appointment date for these charges"}),r.jsx("input",{type:"date",value:gn,onChange:j=>kr(j.target.value),className:"w-full max-w-[180px] px-3 py-2 border border-sky/60 rounded-lg"})]}),r.jsxs("div",{className:"border border-sky/30 rounded-lg overflow-hidden flex-1 min-h-0 flex flex-col",children:[r.jsxs("div",{className:"bg-sky/10 px-3 py-2 flex justify-between text-xs font-medium text-navy/80 border-b border-sky/30",children:[r.jsx("span",{children:"Procedure"}),r.jsx("span",{className:"w-24 text-right",children:"Amount ($)"})]}),r.jsx("ul",{className:"overflow-y-auto flex-1 divide-y divide-sky/20 max-h-[280px]",children:Sn.map(j=>r.jsxs("li",{className:"flex items-center justify-between gap-3 px-3 py-2 hover:bg-sky/5",children:[r.jsxs("label",{className:"flex items-center gap-2 flex-1 min-w-0 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:ut.has(j.code),onChange:()=>Cs(j.code),className:"rounded border-sky/60"}),r.jsxs("span",{className:"text-sm text-navy truncate",title:`${j.code} ${j.description}`,children:[j.code,"  ",j.description]})]}),r.jsx("input",{type:"number",min:0,step:.01,value:ut.has(j.code)?js[j.code]??(j.defaultFee!=null?String(j.defaultFee):""):"",onChange:U=>Ps(j.code,U.target.value),onClick:U=>U.stopPropagation(),disabled:!ut.has(j.code),className:"w-24 px-2 py-1.5 border border-sky/60 rounded text-sm text-right disabled:bg-sky/10 disabled:text-navy/60",placeholder:j.defaultFee!=null?String(j.defaultFee):"0"})]},j.code))})]}),r.jsxs("div",{className:"mt-3 flex items-center justify-between gap-4 border-t border-sky/30 pt-3",children:[r.jsx("p",{className:"text-sm text-navy/70",children:ut.size===0?"Select one or more procedures":`Selected: ${ut.size}  Total: ${Ue(Array.from(ut).reduce((j,U)=>j+Sr(U),0))}`}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:()=>{tt(!1),Ln(new Set),Vt({})},className:"px-4 py-2 border border-navy/30 rounded-lg font-medium",children:"Cancel"}),r.jsx("button",{type:"button",onClick:v,disabled:ut.size===0,className:"px-4 py-2 bg-navy text-white rounded-lg font-medium hover:bg-navy-light disabled:opacity-50 disabled:cursor-not-allowed",children:"Add to tab"})]})]})]})})]})}function Kl(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}function $y(){const e=Ns(),{timezone:t}=Nr(),n=sl(t),s=n.slice(0,7),a=g.useMemo(()=>we(),[]),l=g.useMemo(()=>a.reduce((m,b)=>m+(b.paymentHistory??[]).filter(N=>N.date===n).reduce((N,f)=>N+f.amount,0),0),[a,n]),i=g.useMemo(()=>a.reduce((m,b)=>m+(b.paymentHistory??[]).filter(N=>N.date.startsWith(s)).reduce((N,f)=>N+f.amount,0),0),[a,s]),o=g.useMemo(()=>a.reduce((m,b)=>m+(b.balanceDue??0),0),[a]),d=g.useMemo(()=>{const m=new Date;return a.filter(b=>{const N=b.recallIntervalMonths??6,f=b.lastCleaningDate;if(!f)return!1;const x=new Date(f+"T12:00:00");return x.setMonth(x.getMonth()+N),x<=m}).length},[a]),u=a.filter(m=>(m.recallIntervalMonths??0)>0||(m.lastCleaningDate??"").length>0).length,c=u>0?Math.round(d/u*100):0,p=g.useMemo(()=>a.filter(m=>m.createdAt.startsWith(s)).length,[a,s]),h=g.useMemo(()=>{const m=a.flatMap(x=>(x.treatmentPlans??[]).map(y=>({...y,patientId:x.id}))),b=m.filter(x=>x.status==="Accepted").length,N=m.filter(x=>x.status==="Declined").length,f=b+N;return{total:m.length,accepted:b,declined:N,presented:f,acceptancePct:f>0?Math.round(b/f*100):0}},[a]),w=g.useMemo(()=>a.reduce((m,b)=>{var N;return m+(((N=b.gumGaugeExams)==null?void 0:N.length)??0)},0),[a]);return e?r.jsxs("div",{className:"p-8",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-2",children:[r.jsx("h1",{className:"text-2xl font-semibold text-navy",children:"Analytics"}),r.jsx("p",{className:"text-navy/70 text-sm font-medium",children:e.name})]}),r.jsx("p",{className:"text-navy/60 text-sm mb-6",children:"Stats for this clinic (assigned to this device)."}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-8",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[r.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"Total patients"}),r.jsx("p",{className:"text-2xl font-semibold text-navy mt-1",children:a.length})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[r.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"Production (today)"}),r.jsx("p",{className:"text-xl font-semibold text-navy mt-1",children:Kl(l)})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[r.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"Production (this month)"}),r.jsx("p",{className:"text-xl font-semibold text-navy mt-1",children:Kl(i)})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[r.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"Total outstanding"}),r.jsx("p",{className:"text-xl font-semibold text-navy mt-1",children:Kl(o)})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[r.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"Recall due"}),r.jsx("p",{className:"text-2xl font-semibold text-navy mt-1",children:d}),r.jsx("p",{className:"text-xs text-navy/60 mt-0.5",children:"patients past due"}),r.jsx(K,{to:"/dashboard/recall",className:"text-xs text-sky-dark mt-1 inline-block hover:underline",children:"View recall"})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[r.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"Recall due %"}),r.jsxs("p",{className:"text-2xl font-semibold text-navy mt-1",children:[c,"%"]}),r.jsx("p",{className:"text-xs text-navy/60 mt-0.5",children:"of those with recall interval"})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[r.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"New patients (this month)"}),r.jsx("p",{className:"text-2xl font-semibold text-navy mt-1",children:p})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[r.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"Case acceptance"}),r.jsxs("p",{className:"text-2xl font-semibold text-navy mt-1",children:[h.acceptancePct,"%"]}),r.jsxs("p",{className:"text-xs text-navy/60 mt-0.5",children:[h.accepted," accepted / ",h.presented," presented"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[r.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"GumGauge scans (total)"}),r.jsx("p",{className:"text-2xl font-semibold text-navy mt-1",children:w})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[r.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"Treatment plans"}),r.jsx("p",{className:"text-2xl font-semibold text-navy mt-1",children:h.total}),r.jsx("p",{className:"text-xs text-navy/60 mt-0.5",children:"total plans on file"})]})]})]}):r.jsxs("div",{className:"p-8",children:[r.jsx("h1",{className:"text-2xl font-semibold text-navy mb-2",children:"Analytics"}),r.jsx("p",{className:"text-navy/70 mb-6",children:"Analytics are shown for the clinic assigned to this device."}),r.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-6 max-w-lg",children:[r.jsx("p",{className:"text-amber-900 font-medium",children:"No clinic assigned"}),r.jsx("p",{className:"text-amber-800/90 text-sm mt-1",children:"Register your clinic or ask your admin to assign this device to a clinic. Then you can view analytics here."}),r.jsx(K,{to:"/dashboard/clinic",className:"inline-block mt-4 px-4 py-2 bg-navy text-white rounded-lg font-medium hover:bg-navy-light",children:"Go to Clinic"})]})]})}const Ep="gumgauge-pending-clinics";function $a(){try{const e=localStorage.getItem(Ep);return e?JSON.parse(e):[]}catch{return[]}}function Ap(e){try{localStorage.setItem(Ep,JSON.stringify(e))}catch{}}function Fy(){return $a()}function zy(e){const t=new Date().toISOString(),n={...e,id:crypto.randomUUID(),submittedAt:t},s=$a();return s.push(n),Ap(s),n}function Uy(e){const t=$a().filter(n=>n.id!==e);return t.length===$a().length?!1:(Ap(t),!0)}const By=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],Vy=["Austin","Houston","Dallas","San Antonio","Fort Worth","El Paso","Arlington","New York","Los Angeles","Chicago","Phoenix","Philadelphia","San Diego","San Jose","Jacksonville","Columbus","Charlotte","Indianapolis","Seattle","Denver","Boston","Nashville","Detroit","Portland","Las Vegas","Memphis","Louisville","Baltimore","Milwaukee","Albuquerque","Tucson","Fresno","Sacramento","Kansas City","Mesa","Atlanta","Omaha","Miami","Oakland","Minneapolis","Cleveland","Wichita","Arlington","Tampa","Honolulu","Aurora","Anaheim","Santa Ana","St. Louis","Riverside","Corpus Christi","Pittsburgh","Lexington","Anchorage","Stockton","Cincinnati","St. Paul","Toledo","Newark","Plano","Henderson","Lincoln","Buffalo","Fort Wayne","Jersey City","St. Petersburg","Chula Vista","Orlando","Laredo","Chandler","Madison","Lubbock","Scottsdale","Reno","Durham","Winston-Salem","Gilbert","Glendale","North Las Vegas","Irving","Fremont","Boise","Richmond","San Bernardino","Birmingham","Spokane","Rochester","Des Moines","Modesto","Fayetteville","Tacoma","Oxnard","Fontana","Columbus","Montgomery","Moreno Valley","Salt Lake City","Little Rock","Augusta","Grand Rapids","Tallahassee","Huntsville","Grand Prairie","Knoxville","Worcester","Newport News","Brownsville","Santa Clarita","Overland Park","Providence","Garden Grove","Santa Rosa","Chattanooga","Oceanside","Fort Lauderdale","Rancho Cucamonga","Santa Clara","Port St. Lucie","Vancouver","Tempe","Springfield","Cape Coral","Pembroke Pines","Sioux Falls","Peoria","Lancaster","Elk Grove","Palmdale","Salinas","Springfield","Pomona","Pasadena","Joliet","Paterson","Kansas City","Torrance","Syracuse","Bridgeport","Hayward","Fort Collins","Corona","Rockford","Savannah","Mesquite","Sunnyvale","Pasadena","Orange","Naples","Aurora","Dayton","Hampton","Hollywood","Killeen","McKinney","Lakewood"];function Hy(){const[e,t]=g.useState(""),[n,s]=g.useState(""),[a,l]=g.useState(""),[i,o]=g.useState(""),[d,u]=g.useState(""),[c,p]=g.useState(""),[h,w]=g.useState("1"),[m,b]=g.useState(!1),N=Ns(),f=()=>{t(""),s(""),l(""),o(""),u(""),p(""),w("1")},x=y=>{y.preventDefault();const k=parseInt(h,10);zy({name:e.trim(),address:n.trim()||void 0,city:a.trim()||void 0,state:i.trim()||void 0,zip:d.trim()||void 0,phone:c.trim()||void 0,deviceCount:Number.isNaN(k)||k<1?1:k}),b(!0),f()};return r.jsxs("div",{className:"p-8",children:[r.jsx("h1",{className:"text-2xl font-semibold text-navy mb-2",children:"Clinic / Office Registration"}),r.jsx("p",{className:"text-navy/70 mb-6",children:"Submit your office info to GumGauge. Company admin will review and assign your clinic; once approved, your clinic name will appear on the dashboard."}),N&&r.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-xl",children:[r.jsxs("p",{className:"text-sm font-medium text-green-800",children:["This device is assigned to: ",r.jsx("strong",{children:N.name})]}),r.jsx("p",{className:"text-xs text-green-700 mt-1",children:"To change details, submit the form below; admin can reassign."})]}),r.jsxs("form",{onSubmit:x,className:"bg-white rounded-xl shadow-sm border border-sky/40 p-6 max-w-xl space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"Clinic name *"}),r.jsx("input",{type:"text",value:e,onChange:y=>t(y.target.value),placeholder:"e.g. Smile Dental Care",className:"w-full px-3 py-2 border border-sky/60 rounded-lg",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"Address"}),r.jsx("input",{type:"text",value:n,onChange:y=>s(y.target.value),placeholder:"Street address",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"City"}),r.jsx("input",{type:"text",value:a,onChange:y=>l(y.target.value),placeholder:"City",className:"w-full px-3 py-2 border border-sky/60 rounded-lg",list:"city-list",autoComplete:"off"}),r.jsx("datalist",{id:"city-list",children:Vy.map(y=>r.jsx("option",{value:y},y))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"State"}),r.jsx("input",{type:"text",value:i,onChange:y=>o(y.target.value),placeholder:"State",className:"w-full px-3 py-2 border border-sky/60 rounded-lg",list:"state-list",autoComplete:"off"}),r.jsx("datalist",{id:"state-list",children:By.map(y=>r.jsx("option",{value:y},y))})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"ZIP"}),r.jsx("input",{type:"text",value:d,onChange:y=>u(y.target.value),placeholder:"ZIP code",className:"w-full px-3 py-2 border border-sky/60 rounded-lg max-w-[120px]"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"Phone"}),r.jsx("input",{type:"tel",value:c,onChange:y=>p(y.target.value),placeholder:"(555) 123-4567",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"Number of GumGauge devices"}),r.jsx("input",{type:"number",min:1,value:h,onChange:y=>w(y.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg max-w-[100px]"})]}),r.jsxs("div",{className:"flex gap-3 pt-2",children:[r.jsx("button",{type:"submit",className:"px-4 py-2 bg-navy text-white rounded-lg font-medium hover:bg-navy-light",children:"Submit for approval"}),r.jsx(K,{to:"/dashboard",className:"px-4 py-2 border border-navy/30 rounded-lg font-medium inline-block",children:"Back to dashboard"})]}),m&&r.jsx("p",{className:"text-green-700 text-sm mt-2",children:"Submitted. GumGauge admin will review and assign your clinic."})]})]})}function Ed(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}function Gy(){const e=dt(),[t,n]=g.useState(null),[s,a]=g.useState([]),[l,i]=g.useState(null),[o,d]=g.useState(!1),[u,c]=g.useState(!1),p=()=>{n(Ns()),a(Fy())};if(g.useEffect(()=>{try{i(sessionStorage.getItem(On)==="1")}catch{i(!1)}p()},[]),l===!1)return r.jsx(Go,{to:"/dashboard",replace:!0});if(l===null)return null;const h=()=>{try{sessionStorage.removeItem(On)}catch{}e("/",{replace:!0})},w=_=>{Vg({name:_.name,address:_.address,city:_.city,state:_.state,zip:_.zip,phone:_.phone,deviceCount:_.deviceCount??1}),Uy(_.id),p()},m=()=>{Dg(),d(!1),p()},b=()=>{Yg(),c(!1),p()},N=ip().length,f=we(),x=f.length,y=f.reduce((_,J)=>{var Q;return _+(((Q=J.gumGaugeExams)==null?void 0:Q.length)??0)},0),k=f.flatMap(_=>(_.gumGaugeExams??[]).map(J=>J.scanDate)),D=new Set(k).size,T=D>0?(y/D).toFixed(1):"0",C=(t==null?void 0:t.deviceCount)??0,A=f.reduce((_,J)=>_+(J.paymentHistory??[]).reduce((Q,q)=>Q+q.amount,0),0),R={};f.forEach(_=>{(_.paymentHistory??[]).forEach(J=>{const Q=J.date.slice(0,7);R[Q]=(R[Q]??0)+J.amount})});const O=Object.keys(R).length,S=O>0?A/O:0,I=[t==null?void 0:t.city,t==null?void 0:t.state,t==null?void 0:t.zip].filter(Boolean).join(", ");return r.jsx("div",{className:"p-6 md:p-8",children:r.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[r.jsx("h1",{className:"text-2xl font-semibold text-navy",children:"GumGauge Admin  Clinic Log"}),r.jsxs("div",{className:"flex items-center gap-2",children:[t&&r.jsxs(K,{to:"/dashboard",className:"px-4 py-2 bg-navy text-white rounded-lg font-medium hover:bg-navy-light",children:["View as ",t.name," "]}),r.jsx("button",{type:"button",onClick:h,className:"px-4 py-2 border border-navy/30 rounded-lg font-medium hover:bg-navy/5",children:"Log out (Admin)"})]})]}),r.jsx("p",{className:"text-navy/70",children:"GumGauge company overview. View clinical stats and log in as a clinic to access their dashboard."}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[r.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"Patients"}),r.jsx("p",{className:"text-2xl font-semibold text-navy",children:x})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[r.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"Total scans"}),r.jsx("p",{className:"text-2xl font-semibold text-navy",children:y})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[r.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"Avg scans/day"}),r.jsx("p",{className:"text-2xl font-semibold text-navy",children:T})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[r.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"Devices"}),r.jsx("p",{className:"text-2xl font-semibold text-navy",children:C})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[r.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"Revenue (total)"}),r.jsx("p",{className:"text-xl font-semibold text-navy",children:Ed(A)})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[r.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"Revenue per month (average)"}),r.jsx("p",{className:"text-xl font-semibold text-navy",children:Ed(S)})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-navy mb-2",children:"Admin actions"}),r.jsx("p",{className:"text-sm text-navy/60 mb-4",children:"Clear audit log or all patient visit history. These actions cannot be undone."}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[r.jsx("div",{className:"flex items-center gap-2",children:o?r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:m,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-medium",children:"Confirm clear"}),r.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 border border-navy/30 rounded-lg",children:"Cancel"})]}):r.jsxs("button",{type:"button",onClick:()=>d(!0),className:"px-4 py-2 border border-red-300 text-red-600 rounded-lg font-medium hover:bg-red-50",children:["Clear audit log (",N," entries)"]})}),r.jsx("div",{className:"flex items-center gap-2",children:u?r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:b,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-medium",children:"Confirm clear"}),r.jsx("button",{type:"button",onClick:()=>c(!1),className:"px-4 py-2 border border-navy/30 rounded-lg",children:"Cancel"})]}):r.jsx("button",{type:"button",onClick:()=>c(!0),className:"px-4 py-2 border border-red-300 text-red-600 rounded-lg font-medium hover:bg-red-50",children:"Clear all patient visit history"})})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-navy mb-2",children:"Pending registrations"}),r.jsx("p",{className:"text-sm text-navy/60 mb-4",children:"Clinics that submitted for approval. Approve to assign them to this device."}),s.length===0?r.jsx("p",{className:"text-navy/60",children:"No pending registrations."}):r.jsx("ul",{className:"space-y-3",children:s.map(_=>r.jsxs("li",{className:"flex flex-wrap items-center justify-between gap-4 py-3 border-b border-sky/20 last:border-0",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-navy",children:_.name}),r.jsxs("p",{className:"text-sm text-navy/70",children:[[_.city,_.state,_.zip].filter(Boolean).join(", "),_.deviceCount!=null&&`  ${_.deviceCount} device(s)`]}),r.jsxs("p",{className:"text-xs text-navy/60",children:["Submitted ",Z(_.submittedAt)]})]}),r.jsx("button",{type:"button",onClick:()=>w(_),className:"px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700",children:"Approve & assign"})]},_.id))})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-navy mb-2",children:"Assigned clinic (this device)"}),r.jsx("p",{className:"text-sm text-navy/60 mb-4",children:"In production, admin would see all clinics across all installations."}),t?r.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4 py-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-navy",children:t.name}),I&&r.jsx("p",{className:"text-sm text-navy/70",children:I}),t.address&&r.jsx("p",{className:"text-sm text-navy/70",children:t.address})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-sm text-navy/70",children:"Devices"}),r.jsx("p",{className:"text-xl font-semibold text-navy",children:t.deviceCount??1})]}),r.jsx("button",{type:"button",onClick:()=>{window.confirm("Unassign this clinic from this device? The clinic can be reassigned later from pending registrations.")&&(Bg(),p())},className:"px-4 py-2 border border-red-300 text-red-600 rounded-lg font-medium hover:bg-red-50",children:"Unassign clinic"})]})]}):r.jsx("p",{className:"text-navy/60",children:"No clinic assigned yet. Approve a pending registration above."})]})]})})}function Wy(){const[e,t]=g.useState(!1),[n,s]=g.useState(""),[a,l]=g.useState("");g.useEffect(()=>{try{sessionStorage.getItem(On)==="1"&&t(!0)}catch{}},[]);const i=o=>{if(o.preventDefault(),l(""),n===gg){try{sessionStorage.setItem(On,"1")}catch{}t(!0)}else l("Invalid password.")};return e?r.jsx(Go,{to:"/dashboard/clinic-log",replace:!0}):r.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-navy p-4",children:r.jsxs("div",{className:"w-full max-w-sm",children:[r.jsx("h1",{className:"text-xl font-semibold text-white text-center mb-2",children:"GumGauge Admin"}),r.jsx("p",{className:"text-sky-light/90 text-sm text-center mb-6",children:"Company login. View clinical stats and switch into clinic views."}),r.jsxs("form",{onSubmit:i,className:"bg-white/10 rounded-xl border border-white/20 p-6 space-y-4",autoComplete:"off",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sky-light/90 text-sm mb-1",children:"Password"}),r.jsx("input",{type:"password",autoComplete:"off",value:n,onChange:o=>s(o.target.value),placeholder:"",className:"w-full px-3 py-2 rounded-lg border border-sky/60 bg-white text-navy"})]}),a&&r.jsx("p",{className:"text-amber-200 text-sm bg-amber-900/30 px-3 py-2 rounded-lg",role:"alert",children:a}),r.jsx("button",{type:"submit",className:"w-full px-4 py-2 bg-white text-navy font-medium rounded-lg hover:bg-sky-light",children:"Log in"})]}),r.jsx("p",{className:"mt-4 text-center",children:r.jsx(K,{to:"/",className:"text-sky-light hover:text-white text-sm font-medium",children:" Back"})})]})})}function Ky(){return r.jsx(xg,{children:r.jsx($g,{children:r.jsxs(Zx,{children:[r.jsx(be,{path:"/",element:r.jsx(Xg,{})}),r.jsx(be,{path:"/signin",element:r.jsx(qg,{})}),r.jsx(be,{path:"/admin",element:r.jsx(Wy,{})}),r.jsxs(be,{path:"/dashboard",element:r.jsx(Jg,{}),children:[r.jsx(be,{index:!0,element:r.jsx(ey,{})}),r.jsx(be,{path:"patients",element:r.jsx(ry,{})}),r.jsx(be,{path:"patients/new",element:r.jsx(by,{})}),r.jsx(be,{path:"patients/:id",element:r.jsx(yy,{})}),r.jsx(be,{path:"staff",element:r.jsx(Sy,{})}),r.jsx(be,{path:"staff/new",element:r.jsx(Py,{})}),r.jsx(be,{path:"staff/:id",element:r.jsx(Dy,{})}),r.jsx(be,{path:"appointments",element:r.jsx(ky,{})}),r.jsx(be,{path:"billing",element:r.jsx(Ly,{})}),r.jsx(be,{path:"analytics",element:r.jsx($y,{})}),r.jsx(be,{path:"my-patients",element:r.jsx(Ey,{})}),r.jsx(be,{path:"device-scan",element:r.jsx(Iy,{})}),r.jsx(be,{path:"recall",element:r.jsx(My,{})}),r.jsx(be,{path:"audit",element:r.jsx(Ry,{})}),r.jsx(be,{path:"clinic",element:r.jsx(Hy,{})}),r.jsx(be,{path:"clinic-log",element:r.jsx(Gy,{})})]}),r.jsx(be,{path:"*",element:r.jsx(Go,{to:"/",replace:!0})})]})})})}Yl.createRoot(document.getElementById("root")).render(r.jsx(ir.StrictMode,{children:r.jsx(og,{children:r.jsx(Ky,{})})}));
