function Yh(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(s,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();function Kh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ku={exports:{}},xl={},Cu={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ys=Symbol.for("react.element"),Jh=Symbol.for("react.portal"),Qh=Symbol.for("react.fragment"),Xh=Symbol.for("react.strict_mode"),qh=Symbol.for("react.profiler"),Zh=Symbol.for("react.provider"),ef=Symbol.for("react.context"),tf=Symbol.for("react.forward_ref"),nf=Symbol.for("react.suspense"),rf=Symbol.for("react.memo"),sf=Symbol.for("react.lazy"),zd=Symbol.iterator;function af(e){return e===null||typeof e!="object"?null:(e=zd&&e[zd]||e["@@iterator"],typeof e=="function"?e:null)}var Du={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Pu=Object.assign,Au={};function Wr(e,t,r){this.props=e,this.context=t,this.refs=Au,this.updater=r||Du}Wr.prototype.isReactComponent={};Wr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Wr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Eu(){}Eu.prototype=Wr.prototype;function Io(e,t,r){this.props=e,this.context=t,this.refs=Au,this.updater=r||Du}var To=Io.prototype=new Eu;To.constructor=Io;Pu(To,Wr.prototype);To.isPureReactComponent=!0;var Bd=Array.isArray,Iu=Object.prototype.hasOwnProperty,Oo={current:null},Tu={key:!0,ref:!0,__self:!0,__source:!0};function Ou(e,t,r){var s,a={},l=null,i=null;if(t!=null)for(s in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(l=""+t.key),t)Iu.call(t,s)&&!Tu.hasOwnProperty(s)&&(a[s]=t[s]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var c=Array(o),m=0;m<o;m++)c[m]=arguments[m+2];a.children=c}if(e&&e.defaultProps)for(s in o=e.defaultProps,o)a[s]===void 0&&(a[s]=o[s]);return{$$typeof:Ys,type:e,key:l,ref:i,props:a,_owner:Oo.current}}function lf(e,t){return{$$typeof:Ys,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Mo(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ys}function of(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Vd=/\/+/g;function Hl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?of(""+e.key):t.toString(36)}function ka(e,t,r,s,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(l){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Ys:case Jh:i=!0}}if(i)return i=e,a=a(i),e=s===""?"."+Hl(i,0):s,Bd(a)?(r="",e!=null&&(r=e.replace(Vd,"$&/")+"/"),ka(a,t,r,"",function(m){return m})):a!=null&&(Mo(a)&&(a=lf(a,r+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(Vd,"$&/")+"/")+e)),t.push(a)),1;if(i=0,s=s===""?".":s+":",Bd(e))for(var o=0;o<e.length;o++){l=e[o];var c=s+Hl(l,o);i+=ka(l,t,r,c,a)}else if(c=af(e),typeof c=="function")for(e=c.call(e),o=0;!(l=e.next()).done;)l=l.value,c=s+Hl(l,o++),i+=ka(l,t,r,c,a);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function sa(e,t,r){if(e==null)return e;var s=[],a=0;return ka(e,s,"","",function(l){return t.call(r,l,a++)}),s}function df(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var st={current:null},Ca={transition:null},cf={ReactCurrentDispatcher:st,ReactCurrentBatchConfig:Ca,ReactCurrentOwner:Oo};function Mu(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:sa,forEach:function(e,t,r){sa(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return sa(e,function(){t++}),t},toArray:function(e){return sa(e,function(t){return t})||[]},only:function(e){if(!Mo(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};se.Component=Wr;se.Fragment=Qh;se.Profiler=qh;se.PureComponent=Io;se.StrictMode=Xh;se.Suspense=nf;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cf;se.act=Mu;se.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=Pu({},e.props),a=e.key,l=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,i=Oo.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)Iu.call(t,c)&&!Tu.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){o=Array(c);for(var m=0;m<c;m++)o[m]=arguments[m+2];s.children=o}return{$$typeof:Ys,type:e.type,key:a,ref:l,props:s,_owner:i}};se.createContext=function(e){return e={$$typeof:ef,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Zh,_context:e},e.Consumer=e};se.createElement=Ou;se.createFactory=function(e){var t=Ou.bind(null,e);return t.type=e,t};se.createRef=function(){return{current:null}};se.forwardRef=function(e){return{$$typeof:tf,render:e}};se.isValidElement=Mo;se.lazy=function(e){return{$$typeof:sf,_payload:{_status:-1,_result:e},_init:df}};se.memo=function(e,t){return{$$typeof:rf,type:e,compare:t===void 0?null:t}};se.startTransition=function(e){var t=Ca.transition;Ca.transition={};try{e()}finally{Ca.transition=t}};se.unstable_act=Mu;se.useCallback=function(e,t){return st.current.useCallback(e,t)};se.useContext=function(e){return st.current.useContext(e)};se.useDebugValue=function(){};se.useDeferredValue=function(e){return st.current.useDeferredValue(e)};se.useEffect=function(e,t){return st.current.useEffect(e,t)};se.useId=function(){return st.current.useId()};se.useImperativeHandle=function(e,t,r){return st.current.useImperativeHandle(e,t,r)};se.useInsertionEffect=function(e,t){return st.current.useInsertionEffect(e,t)};se.useLayoutEffect=function(e,t){return st.current.useLayoutEffect(e,t)};se.useMemo=function(e,t){return st.current.useMemo(e,t)};se.useReducer=function(e,t,r){return st.current.useReducer(e,t,r)};se.useRef=function(e){return st.current.useRef(e)};se.useState=function(e){return st.current.useState(e)};se.useSyncExternalStore=function(e,t,r){return st.current.useSyncExternalStore(e,t,r)};se.useTransition=function(){return st.current.useTransition()};se.version="18.3.1";Cu.exports=se;var g=Cu.exports;const tr=Kh(g),uf=Yh({__proto__:null,default:tr},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mf=g,pf=Symbol.for("react.element"),hf=Symbol.for("react.fragment"),ff=Object.prototype.hasOwnProperty,xf=mf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gf={key:!0,ref:!0,__self:!0,__source:!0};function Ru(e,t,r){var s,a={},l=null,i=null;r!==void 0&&(l=""+r),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(i=t.ref);for(s in t)ff.call(t,s)&&!gf.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:pf,type:e,key:l,ref:i,props:a,_owner:xf.current}}xl.Fragment=hf;xl.jsx=Ru;xl.jsxs=Ru;ku.exports=xl;var n=ku.exports,Ai={},$u={exports:{}},gt={},_u={exports:{}},Lu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,Y){var T=z.length;z.push(Y);e:for(;0<T;){var X=T-1>>>1,_=z[X];if(0<a(_,Y))z[X]=Y,z[T]=_,T=X;else break e}}function r(z){return z.length===0?null:z[0]}function s(z){if(z.length===0)return null;var Y=z[0],T=z.pop();if(T!==Y){z[0]=T;e:for(var X=0,_=z.length,ue=_>>>1;X<ue;){var ge=2*(X+1)-1,Oe=z[ge],$e=ge+1,tt=z[$e];if(0>a(Oe,T))$e<_&&0>a(tt,Oe)?(z[X]=tt,z[$e]=T,X=$e):(z[X]=Oe,z[ge]=T,X=ge);else if($e<_&&0>a(tt,T))z[X]=tt,z[$e]=T,X=$e;else break e}}return Y}function a(z,Y){var T=z.sortIndex-Y.sortIndex;return T!==0?T:z.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var c=[],m=[],d=1,p=null,h=3,w=!1,u=!1,b=!1,C=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(z){for(var Y=r(m);Y!==null;){if(Y.callback===null)s(m);else if(Y.startTime<=z)s(m),Y.sortIndex=Y.expirationTime,t(c,Y);else break;Y=r(m)}}function S(z){if(b=!1,v(z),!u)if(r(c)!==null)u=!0,Z(P);else{var Y=r(m);Y!==null&&me(S,Y.startTime-z)}}function P(z,Y){u=!1,b&&(b=!1,x(O),O=-1),w=!0;var T=h;try{for(v(Y),p=r(c);p!==null&&(!(p.expirationTime>Y)||z&&!j());){var X=p.callback;if(typeof X=="function"){p.callback=null,h=p.priorityLevel;var _=X(p.expirationTime<=Y);Y=e.unstable_now(),typeof _=="function"?p.callback=_:p===r(c)&&s(c),v(Y)}else s(c);p=r(c)}if(p!==null)var ue=!0;else{var ge=r(m);ge!==null&&me(S,ge.startTime-Y),ue=!1}return ue}finally{p=null,h=T,w=!1}}var E=!1,D=null,O=-1,L=5,I=-1;function j(){return!(e.unstable_now()-I<L)}function A(){if(D!==null){var z=e.unstable_now();I=z;var Y=!0;try{Y=D(!0,z)}finally{Y?U():(E=!1,D=null)}}else E=!1}var U;if(typeof y=="function")U=function(){y(A)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,K=q.port2;q.port1.onmessage=A,U=function(){K.postMessage(null)}}else U=function(){C(A,0)};function Z(z){D=z,E||(E=!0,U())}function me(z,Y){O=C(function(){z(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){u||w||(u=!0,Z(P))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(z){switch(h){case 1:case 2:case 3:var Y=3;break;default:Y=h}var T=h;h=Y;try{return z()}finally{h=T}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,Y){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var T=h;h=z;try{return Y()}finally{h=T}},e.unstable_scheduleCallback=function(z,Y,T){var X=e.unstable_now();switch(typeof T=="object"&&T!==null?(T=T.delay,T=typeof T=="number"&&0<T?X+T:X):T=X,z){case 1:var _=-1;break;case 2:_=250;break;case 5:_=1073741823;break;case 4:_=1e4;break;default:_=5e3}return _=T+_,z={id:d++,callback:Y,priorityLevel:z,startTime:T,expirationTime:_,sortIndex:-1},T>X?(z.sortIndex=T,t(m,z),r(c)===null&&z===r(m)&&(b?(x(O),O=-1):b=!0,me(S,T-X))):(z.sortIndex=_,t(c,z),u||w||(u=!0,Z(P))),z},e.unstable_shouldYield=j,e.unstable_wrapCallback=function(z){var Y=h;return function(){var T=h;h=Y;try{return z.apply(this,arguments)}finally{h=T}}}})(Lu);_u.exports=Lu;var yf=_u.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vf=g,xt=yf;function R(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Fu=new Set,ks={};function dr(e,t){_r(e,t),_r(e+"Capture",t)}function _r(e,t){for(ks[e]=t,e=0;e<t.length;e++)Fu.add(t[e])}var sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ei=Object.prototype.hasOwnProperty,bf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hd={},Wd={};function Nf(e){return Ei.call(Wd,e)?!0:Ei.call(Hd,e)?!1:bf.test(e)?Wd[e]=!0:(Hd[e]=!0,!1)}function jf(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function wf(e,t,r,s){if(t===null||typeof t>"u"||jf(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function at(e,t,r,s,a,l,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=i}var Ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ye[e]=new at(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ye[t]=new at(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ye[e]=new at(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ye[e]=new at(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ye[e]=new at(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ye[e]=new at(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ye[e]=new at(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ye[e]=new at(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ye[e]=new at(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ro=/[\-:]([a-z])/g;function $o(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ro,$o);Ye[t]=new at(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ro,$o);Ye[t]=new at(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ro,$o);Ye[t]=new at(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ye[e]=new at(e,1,!1,e.toLowerCase(),null,!1,!1)});Ye.xlinkHref=new at("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ye[e]=new at(e,1,!1,e.toLowerCase(),null,!0,!0)});function _o(e,t,r,s){var a=Ye.hasOwnProperty(t)?Ye[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(wf(t,r,a,s)&&(r=null),s||a===null?Nf(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,s=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var dn=vf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,aa=Symbol.for("react.element"),yr=Symbol.for("react.portal"),vr=Symbol.for("react.fragment"),Lo=Symbol.for("react.strict_mode"),Ii=Symbol.for("react.profiler"),Uu=Symbol.for("react.provider"),zu=Symbol.for("react.context"),Fo=Symbol.for("react.forward_ref"),Ti=Symbol.for("react.suspense"),Oi=Symbol.for("react.suspense_list"),Uo=Symbol.for("react.memo"),yn=Symbol.for("react.lazy"),Bu=Symbol.for("react.offscreen"),Gd=Symbol.iterator;function ts(e){return e===null||typeof e!="object"?null:(e=Gd&&e[Gd]||e["@@iterator"],typeof e=="function"?e:null)}var De=Object.assign,Wl;function us(e){if(Wl===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Wl=t&&t[1]||""}return`
`+Wl+e}var Gl=!1;function Yl(e,t){if(!e||Gl)return"";Gl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(m){var s=m}Reflect.construct(e,[],t)}else{try{t.call()}catch(m){s=m}e.call(t.prototype)}else{try{throw Error()}catch(m){s=m}e()}}catch(m){if(m&&s&&typeof m.stack=="string"){for(var a=m.stack.split(`
`),l=s.stack.split(`
`),i=a.length-1,o=l.length-1;1<=i&&0<=o&&a[i]!==l[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==l[o]){if(i!==1||o!==1)do if(i--,o--,0>o||a[i]!==l[o]){var c=`
`+a[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=o);break}}}finally{Gl=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?us(e):""}function Sf(e){switch(e.tag){case 5:return us(e.type);case 16:return us("Lazy");case 13:return us("Suspense");case 19:return us("SuspenseList");case 0:case 2:case 15:return e=Yl(e.type,!1),e;case 11:return e=Yl(e.type.render,!1),e;case 1:return e=Yl(e.type,!0),e;default:return""}}function Mi(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case vr:return"Fragment";case yr:return"Portal";case Ii:return"Profiler";case Lo:return"StrictMode";case Ti:return"Suspense";case Oi:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case zu:return(e.displayName||"Context")+".Consumer";case Uu:return(e._context.displayName||"Context")+".Provider";case Fo:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Uo:return t=e.displayName||null,t!==null?t:Mi(e.type)||"Memo";case yn:t=e._payload,e=e._init;try{return Mi(e(t))}catch{}}return null}function kf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mi(t);case 8:return t===Lo?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function $n(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Vu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Cf(e){var t=Vu(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,l=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(i){s=""+i,l.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(i){s=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function la(e){e._valueTracker||(e._valueTracker=Cf(e))}function Hu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=Vu(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function La(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ri(e,t){var r=t.checked;return De({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Yd(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=$n(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Wu(e,t){t=t.checked,t!=null&&_o(e,"checked",t,!1)}function $i(e,t){Wu(e,t);var r=$n(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?_i(e,t.type,r):t.hasOwnProperty("defaultValue")&&_i(e,t.type,$n(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Kd(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function _i(e,t,r){(t!=="number"||La(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ms=Array.isArray;function Er(e,t,r,s){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&s&&(e[r].defaultSelected=!0)}else{for(r=""+$n(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Li(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(R(91));return De({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Jd(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(R(92));if(ms(r)){if(1<r.length)throw Error(R(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:$n(r)}}function Gu(e,t){var r=$n(t.value),s=$n(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function Qd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Yu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fi(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Yu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ia,Ku=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ia=ia||document.createElement("div"),ia.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ia.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Cs(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var xs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Df=["Webkit","ms","Moz","O"];Object.keys(xs).forEach(function(e){Df.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),xs[t]=xs[e]})});function Ju(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||xs.hasOwnProperty(e)&&xs[e]?(""+t).trim():t+"px"}function Qu(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,a=Ju(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,a):e[r]=a}}var Pf=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ui(e,t){if(t){if(Pf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(R(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(R(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(R(61))}if(t.style!=null&&typeof t.style!="object")throw Error(R(62))}}function zi(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bi=null;function zo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Vi=null,Ir=null,Tr=null;function Xd(e){if(e=Qs(e)){if(typeof Vi!="function")throw Error(R(280));var t=e.stateNode;t&&(t=Nl(t),Vi(e.stateNode,e.type,t))}}function Xu(e){Ir?Tr?Tr.push(e):Tr=[e]:Ir=e}function qu(){if(Ir){var e=Ir,t=Tr;if(Tr=Ir=null,Xd(e),t)for(e=0;e<t.length;e++)Xd(t[e])}}function Zu(e,t){return e(t)}function em(){}var Kl=!1;function tm(e,t,r){if(Kl)return e(t,r);Kl=!0;try{return Zu(e,t,r)}finally{Kl=!1,(Ir!==null||Tr!==null)&&(em(),qu())}}function Ds(e,t){var r=e.stateNode;if(r===null)return null;var s=Nl(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(R(231,t,typeof r));return r}var Hi=!1;if(sn)try{var ns={};Object.defineProperty(ns,"passive",{get:function(){Hi=!0}}),window.addEventListener("test",ns,ns),window.removeEventListener("test",ns,ns)}catch{Hi=!1}function Af(e,t,r,s,a,l,i,o,c){var m=Array.prototype.slice.call(arguments,3);try{t.apply(r,m)}catch(d){this.onError(d)}}var gs=!1,Fa=null,Ua=!1,Wi=null,Ef={onError:function(e){gs=!0,Fa=e}};function If(e,t,r,s,a,l,i,o,c){gs=!1,Fa=null,Af.apply(Ef,arguments)}function Tf(e,t,r,s,a,l,i,o,c){if(If.apply(this,arguments),gs){if(gs){var m=Fa;gs=!1,Fa=null}else throw Error(R(198));Ua||(Ua=!0,Wi=m)}}function cr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function nm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function qd(e){if(cr(e)!==e)throw Error(R(188))}function Of(e){var t=e.alternate;if(!t){if(t=cr(e),t===null)throw Error(R(188));return t!==e?null:e}for(var r=e,s=t;;){var a=r.return;if(a===null)break;var l=a.alternate;if(l===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===r)return qd(a),e;if(l===s)return qd(a),t;l=l.sibling}throw Error(R(188))}if(r.return!==s.return)r=a,s=l;else{for(var i=!1,o=a.child;o;){if(o===r){i=!0,r=a,s=l;break}if(o===s){i=!0,s=a,r=l;break}o=o.sibling}if(!i){for(o=l.child;o;){if(o===r){i=!0,r=l,s=a;break}if(o===s){i=!0,s=l,r=a;break}o=o.sibling}if(!i)throw Error(R(189))}}if(r.alternate!==s)throw Error(R(190))}if(r.tag!==3)throw Error(R(188));return r.stateNode.current===r?e:t}function rm(e){return e=Of(e),e!==null?sm(e):null}function sm(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=sm(e);if(t!==null)return t;e=e.sibling}return null}var am=xt.unstable_scheduleCallback,Zd=xt.unstable_cancelCallback,Mf=xt.unstable_shouldYield,Rf=xt.unstable_requestPaint,Ie=xt.unstable_now,$f=xt.unstable_getCurrentPriorityLevel,Bo=xt.unstable_ImmediatePriority,lm=xt.unstable_UserBlockingPriority,za=xt.unstable_NormalPriority,_f=xt.unstable_LowPriority,im=xt.unstable_IdlePriority,gl=null,Ht=null;function Lf(e){if(Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(gl,e,void 0,(e.current.flags&128)===128)}catch{}}var Lt=Math.clz32?Math.clz32:zf,Ff=Math.log,Uf=Math.LN2;function zf(e){return e>>>=0,e===0?32:31-(Ff(e)/Uf|0)|0}var oa=64,da=4194304;function ps(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ba(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,a=e.suspendedLanes,l=e.pingedLanes,i=r&268435455;if(i!==0){var o=i&~a;o!==0?s=ps(o):(l&=i,l!==0&&(s=ps(l)))}else i=r&~a,i!==0?s=ps(i):l!==0&&(s=ps(l));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,l=t&-t,a>=l||a===16&&(l&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-Lt(t),a=1<<r,s|=e[r],t&=~a;return s}function Bf(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vf(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var i=31-Lt(l),o=1<<i,c=a[i];c===-1?(!(o&r)||o&s)&&(a[i]=Bf(o,t)):c<=t&&(e.expiredLanes|=o),l&=~o}}function Gi(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function om(){var e=oa;return oa<<=1,!(oa&4194240)&&(oa=64),e}function Jl(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ks(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Lt(t),e[t]=r}function Hf(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Lt(r),l=1<<a;t[a]=0,s[a]=-1,e[a]=-1,r&=~l}}function Vo(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-Lt(r),a=1<<s;a&t|e[s]&t&&(e[s]|=t),r&=~a}}var ce=0;function dm(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var cm,Ho,um,mm,pm,Yi=!1,ca=[],Dn=null,Pn=null,An=null,Ps=new Map,As=new Map,Nn=[],Wf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ec(e,t){switch(e){case"focusin":case"focusout":Dn=null;break;case"dragenter":case"dragleave":Pn=null;break;case"mouseover":case"mouseout":An=null;break;case"pointerover":case"pointerout":Ps.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":As.delete(t.pointerId)}}function rs(e,t,r,s,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:l,targetContainers:[a]},t!==null&&(t=Qs(t),t!==null&&Ho(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Gf(e,t,r,s,a){switch(t){case"focusin":return Dn=rs(Dn,e,t,r,s,a),!0;case"dragenter":return Pn=rs(Pn,e,t,r,s,a),!0;case"mouseover":return An=rs(An,e,t,r,s,a),!0;case"pointerover":var l=a.pointerId;return Ps.set(l,rs(Ps.get(l)||null,e,t,r,s,a)),!0;case"gotpointercapture":return l=a.pointerId,As.set(l,rs(As.get(l)||null,e,t,r,s,a)),!0}return!1}function hm(e){var t=Jn(e.target);if(t!==null){var r=cr(t);if(r!==null){if(t=r.tag,t===13){if(t=nm(r),t!==null){e.blockedOn=t,pm(e.priority,function(){um(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Da(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Ki(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);Bi=s,r.target.dispatchEvent(s),Bi=null}else return t=Qs(r),t!==null&&Ho(t),e.blockedOn=r,!1;t.shift()}return!0}function tc(e,t,r){Da(e)&&r.delete(t)}function Yf(){Yi=!1,Dn!==null&&Da(Dn)&&(Dn=null),Pn!==null&&Da(Pn)&&(Pn=null),An!==null&&Da(An)&&(An=null),Ps.forEach(tc),As.forEach(tc)}function ss(e,t){e.blockedOn===t&&(e.blockedOn=null,Yi||(Yi=!0,xt.unstable_scheduleCallback(xt.unstable_NormalPriority,Yf)))}function Es(e){function t(a){return ss(a,e)}if(0<ca.length){ss(ca[0],e);for(var r=1;r<ca.length;r++){var s=ca[r];s.blockedOn===e&&(s.blockedOn=null)}}for(Dn!==null&&ss(Dn,e),Pn!==null&&ss(Pn,e),An!==null&&ss(An,e),Ps.forEach(t),As.forEach(t),r=0;r<Nn.length;r++)s=Nn[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<Nn.length&&(r=Nn[0],r.blockedOn===null);)hm(r),r.blockedOn===null&&Nn.shift()}var Or=dn.ReactCurrentBatchConfig,Va=!0;function Kf(e,t,r,s){var a=ce,l=Or.transition;Or.transition=null;try{ce=1,Wo(e,t,r,s)}finally{ce=a,Or.transition=l}}function Jf(e,t,r,s){var a=ce,l=Or.transition;Or.transition=null;try{ce=4,Wo(e,t,r,s)}finally{ce=a,Or.transition=l}}function Wo(e,t,r,s){if(Va){var a=Ki(e,t,r,s);if(a===null)ai(e,t,s,Ha,r),ec(e,s);else if(Gf(a,e,t,r,s))s.stopPropagation();else if(ec(e,s),t&4&&-1<Wf.indexOf(e)){for(;a!==null;){var l=Qs(a);if(l!==null&&cm(l),l=Ki(e,t,r,s),l===null&&ai(e,t,s,Ha,r),l===a)break;a=l}a!==null&&s.stopPropagation()}else ai(e,t,s,null,r)}}var Ha=null;function Ki(e,t,r,s){if(Ha=null,e=zo(s),e=Jn(e),e!==null)if(t=cr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=nm(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ha=e,null}function fm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($f()){case Bo:return 1;case lm:return 4;case za:case _f:return 16;case im:return 536870912;default:return 16}default:return 16}}var Sn=null,Go=null,Pa=null;function xm(){if(Pa)return Pa;var e,t=Go,r=t.length,s,a="value"in Sn?Sn.value:Sn.textContent,l=a.length;for(e=0;e<r&&t[e]===a[e];e++);var i=r-e;for(s=1;s<=i&&t[r-s]===a[l-s];s++);return Pa=a.slice(e,1<s?1-s:void 0)}function Aa(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ua(){return!0}function nc(){return!1}function yt(e){function t(r,s,a,l,i){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=l,this.target=i,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(l):l[o]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?ua:nc,this.isPropagationStopped=nc,this}return De(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ua)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ua)},persist:function(){},isPersistent:ua}),t}var Gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yo=yt(Gr),Js=De({},Gr,{view:0,detail:0}),Qf=yt(Js),Ql,Xl,as,yl=De({},Js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ko,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==as&&(as&&e.type==="mousemove"?(Ql=e.screenX-as.screenX,Xl=e.screenY-as.screenY):Xl=Ql=0,as=e),Ql)},movementY:function(e){return"movementY"in e?e.movementY:Xl}}),rc=yt(yl),Xf=De({},yl,{dataTransfer:0}),qf=yt(Xf),Zf=De({},Js,{relatedTarget:0}),ql=yt(Zf),ex=De({},Gr,{animationName:0,elapsedTime:0,pseudoElement:0}),tx=yt(ex),nx=De({},Gr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),rx=yt(nx),sx=De({},Gr,{data:0}),sc=yt(sx),ax={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ix={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ox(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ix[e])?!!t[e]:!1}function Ko(){return ox}var dx=De({},Js,{key:function(e){if(e.key){var t=ax[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Aa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?lx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ko,charCode:function(e){return e.type==="keypress"?Aa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Aa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),cx=yt(dx),ux=De({},yl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ac=yt(ux),mx=De({},Js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ko}),px=yt(mx),hx=De({},Gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),fx=yt(hx),xx=De({},yl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),gx=yt(xx),yx=[9,13,27,32],Jo=sn&&"CompositionEvent"in window,ys=null;sn&&"documentMode"in document&&(ys=document.documentMode);var vx=sn&&"TextEvent"in window&&!ys,gm=sn&&(!Jo||ys&&8<ys&&11>=ys),lc=" ",ic=!1;function ym(e,t){switch(e){case"keyup":return yx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var br=!1;function bx(e,t){switch(e){case"compositionend":return vm(t);case"keypress":return t.which!==32?null:(ic=!0,lc);case"textInput":return e=t.data,e===lc&&ic?null:e;default:return null}}function Nx(e,t){if(br)return e==="compositionend"||!Jo&&ym(e,t)?(e=xm(),Pa=Go=Sn=null,br=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gm&&t.locale!=="ko"?null:t.data;default:return null}}var jx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!jx[e.type]:t==="textarea"}function bm(e,t,r,s){Xu(s),t=Wa(t,"onChange"),0<t.length&&(r=new Yo("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var vs=null,Is=null;function wx(e){Im(e,0)}function vl(e){var t=wr(e);if(Hu(t))return e}function Sx(e,t){if(e==="change")return t}var Nm=!1;if(sn){var Zl;if(sn){var ei="oninput"in document;if(!ei){var dc=document.createElement("div");dc.setAttribute("oninput","return;"),ei=typeof dc.oninput=="function"}Zl=ei}else Zl=!1;Nm=Zl&&(!document.documentMode||9<document.documentMode)}function cc(){vs&&(vs.detachEvent("onpropertychange",jm),Is=vs=null)}function jm(e){if(e.propertyName==="value"&&vl(Is)){var t=[];bm(t,Is,e,zo(e)),tm(wx,t)}}function kx(e,t,r){e==="focusin"?(cc(),vs=t,Is=r,vs.attachEvent("onpropertychange",jm)):e==="focusout"&&cc()}function Cx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return vl(Is)}function Dx(e,t){if(e==="click")return vl(t)}function Px(e,t){if(e==="input"||e==="change")return vl(t)}function Ax(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ut=typeof Object.is=="function"?Object.is:Ax;function Ts(e,t){if(Ut(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!Ei.call(t,a)||!Ut(e[a],t[a]))return!1}return!0}function uc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function mc(e,t){var r=uc(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=uc(r)}}function wm(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?wm(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Sm(){for(var e=window,t=La();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=La(e.document)}return t}function Qo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ex(e){var t=Sm(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&wm(r.ownerDocument.documentElement,r)){if(s!==null&&Qo(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,l=Math.min(s.start,a);s=s.end===void 0?l:Math.min(s.end,a),!e.extend&&l>s&&(a=s,s=l,l=a),a=mc(r,l);var i=mc(r,s);a&&i&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),l>s?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ix=sn&&"documentMode"in document&&11>=document.documentMode,Nr=null,Ji=null,bs=null,Qi=!1;function pc(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Qi||Nr==null||Nr!==La(s)||(s=Nr,"selectionStart"in s&&Qo(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),bs&&Ts(bs,s)||(bs=s,s=Wa(Ji,"onSelect"),0<s.length&&(t=new Yo("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=Nr)))}function ma(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var jr={animationend:ma("Animation","AnimationEnd"),animationiteration:ma("Animation","AnimationIteration"),animationstart:ma("Animation","AnimationStart"),transitionend:ma("Transition","TransitionEnd")},ti={},km={};sn&&(km=document.createElement("div").style,"AnimationEvent"in window||(delete jr.animationend.animation,delete jr.animationiteration.animation,delete jr.animationstart.animation),"TransitionEvent"in window||delete jr.transitionend.transition);function bl(e){if(ti[e])return ti[e];if(!jr[e])return e;var t=jr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in km)return ti[e]=t[r];return e}var Cm=bl("animationend"),Dm=bl("animationiteration"),Pm=bl("animationstart"),Am=bl("transitionend"),Em=new Map,hc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ln(e,t){Em.set(e,t),dr(t,[e])}for(var ni=0;ni<hc.length;ni++){var ri=hc[ni],Tx=ri.toLowerCase(),Ox=ri[0].toUpperCase()+ri.slice(1);Ln(Tx,"on"+Ox)}Ln(Cm,"onAnimationEnd");Ln(Dm,"onAnimationIteration");Ln(Pm,"onAnimationStart");Ln("dblclick","onDoubleClick");Ln("focusin","onFocus");Ln("focusout","onBlur");Ln(Am,"onTransitionEnd");_r("onMouseEnter",["mouseout","mouseover"]);_r("onMouseLeave",["mouseout","mouseover"]);_r("onPointerEnter",["pointerout","pointerover"]);_r("onPointerLeave",["pointerout","pointerover"]);dr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));dr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));dr("onBeforeInput",["compositionend","keypress","textInput","paste"]);dr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));dr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));dr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mx=new Set("cancel close invalid load scroll toggle".split(" ").concat(hs));function fc(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,Tf(s,t,void 0,e),e.currentTarget=null}function Im(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],a=s.event;s=s.listeners;e:{var l=void 0;if(t)for(var i=s.length-1;0<=i;i--){var o=s[i],c=o.instance,m=o.currentTarget;if(o=o.listener,c!==l&&a.isPropagationStopped())break e;fc(a,o,m),l=c}else for(i=0;i<s.length;i++){if(o=s[i],c=o.instance,m=o.currentTarget,o=o.listener,c!==l&&a.isPropagationStopped())break e;fc(a,o,m),l=c}}}if(Ua)throw e=Wi,Ua=!1,Wi=null,e}function fe(e,t){var r=t[to];r===void 0&&(r=t[to]=new Set);var s=e+"__bubble";r.has(s)||(Tm(t,e,2,!1),r.add(s))}function si(e,t,r){var s=0;t&&(s|=4),Tm(r,e,s,t)}var pa="_reactListening"+Math.random().toString(36).slice(2);function Os(e){if(!e[pa]){e[pa]=!0,Fu.forEach(function(r){r!=="selectionchange"&&(Mx.has(r)||si(r,!1,e),si(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[pa]||(t[pa]=!0,si("selectionchange",!1,t))}}function Tm(e,t,r,s){switch(fm(t)){case 1:var a=Kf;break;case 4:a=Jf;break;default:a=Wo}r=a.bind(null,t,r,e),a=void 0,!Hi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function ai(e,t,r,s,a){var l=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var i=s.tag;if(i===3||i===4){var o=s.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(i===4)for(i=s.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;i=i.return}for(;o!==null;){if(i=Jn(o),i===null)return;if(c=i.tag,c===5||c===6){s=l=i;continue e}o=o.parentNode}}s=s.return}tm(function(){var m=l,d=zo(r),p=[];e:{var h=Em.get(e);if(h!==void 0){var w=Yo,u=e;switch(e){case"keypress":if(Aa(r)===0)break e;case"keydown":case"keyup":w=cx;break;case"focusin":u="focus",w=ql;break;case"focusout":u="blur",w=ql;break;case"beforeblur":case"afterblur":w=ql;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=rc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=qf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=px;break;case Cm:case Dm:case Pm:w=tx;break;case Am:w=fx;break;case"scroll":w=Qf;break;case"wheel":w=gx;break;case"copy":case"cut":case"paste":w=rx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=ac}var b=(t&4)!==0,C=!b&&e==="scroll",x=b?h!==null?h+"Capture":null:h;b=[];for(var y=m,v;y!==null;){v=y;var S=v.stateNode;if(v.tag===5&&S!==null&&(v=S,x!==null&&(S=Ds(y,x),S!=null&&b.push(Ms(y,S,v)))),C)break;y=y.return}0<b.length&&(h=new w(h,u,null,r,d),p.push({event:h,listeners:b}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",h&&r!==Bi&&(u=r.relatedTarget||r.fromElement)&&(Jn(u)||u[an]))break e;if((w||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,w?(u=r.relatedTarget||r.toElement,w=m,u=u?Jn(u):null,u!==null&&(C=cr(u),u!==C||u.tag!==5&&u.tag!==6)&&(u=null)):(w=null,u=m),w!==u)){if(b=rc,S="onMouseLeave",x="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(b=ac,S="onPointerLeave",x="onPointerEnter",y="pointer"),C=w==null?h:wr(w),v=u==null?h:wr(u),h=new b(S,y+"leave",w,r,d),h.target=C,h.relatedTarget=v,S=null,Jn(d)===m&&(b=new b(x,y+"enter",u,r,d),b.target=v,b.relatedTarget=C,S=b),C=S,w&&u)t:{for(b=w,x=u,y=0,v=b;v;v=fr(v))y++;for(v=0,S=x;S;S=fr(S))v++;for(;0<y-v;)b=fr(b),y--;for(;0<v-y;)x=fr(x),v--;for(;y--;){if(b===x||x!==null&&b===x.alternate)break t;b=fr(b),x=fr(x)}b=null}else b=null;w!==null&&xc(p,h,w,b,!1),u!==null&&C!==null&&xc(p,C,u,b,!0)}}e:{if(h=m?wr(m):window,w=h.nodeName&&h.nodeName.toLowerCase(),w==="select"||w==="input"&&h.type==="file")var P=Sx;else if(oc(h))if(Nm)P=Px;else{P=Cx;var E=kx}else(w=h.nodeName)&&w.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(P=Dx);if(P&&(P=P(e,m))){bm(p,P,r,d);break e}E&&E(e,h,m),e==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&_i(h,"number",h.value)}switch(E=m?wr(m):window,e){case"focusin":(oc(E)||E.contentEditable==="true")&&(Nr=E,Ji=m,bs=null);break;case"focusout":bs=Ji=Nr=null;break;case"mousedown":Qi=!0;break;case"contextmenu":case"mouseup":case"dragend":Qi=!1,pc(p,r,d);break;case"selectionchange":if(Ix)break;case"keydown":case"keyup":pc(p,r,d)}var D;if(Jo)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else br?ym(e,r)&&(O="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(O="onCompositionStart");O&&(gm&&r.locale!=="ko"&&(br||O!=="onCompositionStart"?O==="onCompositionEnd"&&br&&(D=xm()):(Sn=d,Go="value"in Sn?Sn.value:Sn.textContent,br=!0)),E=Wa(m,O),0<E.length&&(O=new sc(O,e,null,r,d),p.push({event:O,listeners:E}),D?O.data=D:(D=vm(r),D!==null&&(O.data=D)))),(D=vx?bx(e,r):Nx(e,r))&&(m=Wa(m,"onBeforeInput"),0<m.length&&(d=new sc("onBeforeInput","beforeinput",null,r,d),p.push({event:d,listeners:m}),d.data=D))}Im(p,t)})}function Ms(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Wa(e,t){for(var r=t+"Capture",s=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=Ds(e,r),l!=null&&s.unshift(Ms(e,l,a)),l=Ds(e,t),l!=null&&s.push(Ms(e,l,a))),e=e.return}return s}function fr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function xc(e,t,r,s,a){for(var l=t._reactName,i=[];r!==null&&r!==s;){var o=r,c=o.alternate,m=o.stateNode;if(c!==null&&c===s)break;o.tag===5&&m!==null&&(o=m,a?(c=Ds(r,l),c!=null&&i.unshift(Ms(r,c,o))):a||(c=Ds(r,l),c!=null&&i.push(Ms(r,c,o)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var Rx=/\r\n?/g,$x=/\u0000|\uFFFD/g;function gc(e){return(typeof e=="string"?e:""+e).replace(Rx,`
`).replace($x,"")}function ha(e,t,r){if(t=gc(t),gc(e)!==t&&r)throw Error(R(425))}function Ga(){}var Xi=null,qi=null;function Zi(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var eo=typeof setTimeout=="function"?setTimeout:void 0,_x=typeof clearTimeout=="function"?clearTimeout:void 0,yc=typeof Promise=="function"?Promise:void 0,Lx=typeof queueMicrotask=="function"?queueMicrotask:typeof yc<"u"?function(e){return yc.resolve(null).then(e).catch(Fx)}:eo;function Fx(e){setTimeout(function(){throw e})}function li(e,t){var r=t,s=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(s===0){e.removeChild(a),Es(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=a}while(r);Es(t)}function En(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function vc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Yr=Math.random().toString(36).slice(2),Vt="__reactFiber$"+Yr,Rs="__reactProps$"+Yr,an="__reactContainer$"+Yr,to="__reactEvents$"+Yr,Ux="__reactListeners$"+Yr,zx="__reactHandles$"+Yr;function Jn(e){var t=e[Vt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[an]||r[Vt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=vc(e);e!==null;){if(r=e[Vt])return r;e=vc(e)}return t}e=r,r=e.parentNode}return null}function Qs(e){return e=e[Vt]||e[an],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function wr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(R(33))}function Nl(e){return e[Rs]||null}var no=[],Sr=-1;function Fn(e){return{current:e}}function xe(e){0>Sr||(e.current=no[Sr],no[Sr]=null,Sr--)}function he(e,t){Sr++,no[Sr]=e.current,e.current=t}var _n={},et=Fn(_n),ot=Fn(!1),nr=_n;function Lr(e,t){var r=e.type.contextTypes;if(!r)return _n;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in r)a[l]=t[l];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function dt(e){return e=e.childContextTypes,e!=null}function Ya(){xe(ot),xe(et)}function bc(e,t,r){if(et.current!==_n)throw Error(R(168));he(et,t),he(ot,r)}function Om(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(R(108,kf(e)||"Unknown",a));return De({},r,s)}function Ka(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_n,nr=et.current,he(et,e),he(ot,ot.current),!0}function Nc(e,t,r){var s=e.stateNode;if(!s)throw Error(R(169));r?(e=Om(e,t,nr),s.__reactInternalMemoizedMergedChildContext=e,xe(ot),xe(et),he(et,e)):xe(ot),he(ot,r)}var en=null,jl=!1,ii=!1;function Mm(e){en===null?en=[e]:en.push(e)}function Bx(e){jl=!0,Mm(e)}function Un(){if(!ii&&en!==null){ii=!0;var e=0,t=ce;try{var r=en;for(ce=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}en=null,jl=!1}catch(a){throw en!==null&&(en=en.slice(e+1)),am(Bo,Un),a}finally{ce=t,ii=!1}}return null}var kr=[],Cr=0,Ja=null,Qa=0,bt=[],Nt=0,rr=null,tn=1,nn="";function Yn(e,t){kr[Cr++]=Qa,kr[Cr++]=Ja,Ja=e,Qa=t}function Rm(e,t,r){bt[Nt++]=tn,bt[Nt++]=nn,bt[Nt++]=rr,rr=e;var s=tn;e=nn;var a=32-Lt(s)-1;s&=~(1<<a),r+=1;var l=32-Lt(t)+a;if(30<l){var i=a-a%5;l=(s&(1<<i)-1).toString(32),s>>=i,a-=i,tn=1<<32-Lt(t)+a|r<<a|s,nn=l+e}else tn=1<<l|r<<a|s,nn=e}function Xo(e){e.return!==null&&(Yn(e,1),Rm(e,1,0))}function qo(e){for(;e===Ja;)Ja=kr[--Cr],kr[Cr]=null,Qa=kr[--Cr],kr[Cr]=null;for(;e===rr;)rr=bt[--Nt],bt[Nt]=null,nn=bt[--Nt],bt[Nt]=null,tn=bt[--Nt],bt[Nt]=null}var ft=null,ht=null,ve=!1,$t=null;function $m(e,t){var r=jt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function jc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ft=e,ht=En(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ft=e,ht=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=rr!==null?{id:tn,overflow:nn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=jt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ft=e,ht=null,!0):!1;default:return!1}}function ro(e){return(e.mode&1)!==0&&(e.flags&128)===0}function so(e){if(ve){var t=ht;if(t){var r=t;if(!jc(e,t)){if(ro(e))throw Error(R(418));t=En(r.nextSibling);var s=ft;t&&jc(e,t)?$m(s,r):(e.flags=e.flags&-4097|2,ve=!1,ft=e)}}else{if(ro(e))throw Error(R(418));e.flags=e.flags&-4097|2,ve=!1,ft=e}}}function wc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ft=e}function fa(e){if(e!==ft)return!1;if(!ve)return wc(e),ve=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Zi(e.type,e.memoizedProps)),t&&(t=ht)){if(ro(e))throw _m(),Error(R(418));for(;t;)$m(e,t),t=En(t.nextSibling)}if(wc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(R(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ht=En(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ht=null}}else ht=ft?En(e.stateNode.nextSibling):null;return!0}function _m(){for(var e=ht;e;)e=En(e.nextSibling)}function Fr(){ht=ft=null,ve=!1}function Zo(e){$t===null?$t=[e]:$t.push(e)}var Vx=dn.ReactCurrentBatchConfig;function ls(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(R(309));var s=r.stateNode}if(!s)throw Error(R(147,e));var a=s,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(i){var o=a.refs;i===null?delete o[l]:o[l]=i},t._stringRef=l,t)}if(typeof e!="string")throw Error(R(284));if(!r._owner)throw Error(R(290,e))}return e}function xa(e,t){throw e=Object.prototype.toString.call(t),Error(R(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Sc(e){var t=e._init;return t(e._payload)}function Lm(e){function t(x,y){if(e){var v=x.deletions;v===null?(x.deletions=[y],x.flags|=16):v.push(y)}}function r(x,y){if(!e)return null;for(;y!==null;)t(x,y),y=y.sibling;return null}function s(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function a(x,y){return x=Mn(x,y),x.index=0,x.sibling=null,x}function l(x,y,v){return x.index=v,e?(v=x.alternate,v!==null?(v=v.index,v<y?(x.flags|=2,y):v):(x.flags|=2,y)):(x.flags|=1048576,y)}function i(x){return e&&x.alternate===null&&(x.flags|=2),x}function o(x,y,v,S){return y===null||y.tag!==6?(y=hi(v,x.mode,S),y.return=x,y):(y=a(y,v),y.return=x,y)}function c(x,y,v,S){var P=v.type;return P===vr?d(x,y,v.props.children,S,v.key):y!==null&&(y.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===yn&&Sc(P)===y.type)?(S=a(y,v.props),S.ref=ls(x,y,v),S.return=x,S):(S=$a(v.type,v.key,v.props,null,x.mode,S),S.ref=ls(x,y,v),S.return=x,S)}function m(x,y,v,S){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=fi(v,x.mode,S),y.return=x,y):(y=a(y,v.children||[]),y.return=x,y)}function d(x,y,v,S,P){return y===null||y.tag!==7?(y=er(v,x.mode,S,P),y.return=x,y):(y=a(y,v),y.return=x,y)}function p(x,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=hi(""+y,x.mode,v),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case aa:return v=$a(y.type,y.key,y.props,null,x.mode,v),v.ref=ls(x,null,y),v.return=x,v;case yr:return y=fi(y,x.mode,v),y.return=x,y;case yn:var S=y._init;return p(x,S(y._payload),v)}if(ms(y)||ts(y))return y=er(y,x.mode,v,null),y.return=x,y;xa(x,y)}return null}function h(x,y,v,S){var P=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return P!==null?null:o(x,y,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case aa:return v.key===P?c(x,y,v,S):null;case yr:return v.key===P?m(x,y,v,S):null;case yn:return P=v._init,h(x,y,P(v._payload),S)}if(ms(v)||ts(v))return P!==null?null:d(x,y,v,S,null);xa(x,v)}return null}function w(x,y,v,S,P){if(typeof S=="string"&&S!==""||typeof S=="number")return x=x.get(v)||null,o(y,x,""+S,P);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case aa:return x=x.get(S.key===null?v:S.key)||null,c(y,x,S,P);case yr:return x=x.get(S.key===null?v:S.key)||null,m(y,x,S,P);case yn:var E=S._init;return w(x,y,v,E(S._payload),P)}if(ms(S)||ts(S))return x=x.get(v)||null,d(y,x,S,P,null);xa(y,S)}return null}function u(x,y,v,S){for(var P=null,E=null,D=y,O=y=0,L=null;D!==null&&O<v.length;O++){D.index>O?(L=D,D=null):L=D.sibling;var I=h(x,D,v[O],S);if(I===null){D===null&&(D=L);break}e&&D&&I.alternate===null&&t(x,D),y=l(I,y,O),E===null?P=I:E.sibling=I,E=I,D=L}if(O===v.length)return r(x,D),ve&&Yn(x,O),P;if(D===null){for(;O<v.length;O++)D=p(x,v[O],S),D!==null&&(y=l(D,y,O),E===null?P=D:E.sibling=D,E=D);return ve&&Yn(x,O),P}for(D=s(x,D);O<v.length;O++)L=w(D,x,O,v[O],S),L!==null&&(e&&L.alternate!==null&&D.delete(L.key===null?O:L.key),y=l(L,y,O),E===null?P=L:E.sibling=L,E=L);return e&&D.forEach(function(j){return t(x,j)}),ve&&Yn(x,O),P}function b(x,y,v,S){var P=ts(v);if(typeof P!="function")throw Error(R(150));if(v=P.call(v),v==null)throw Error(R(151));for(var E=P=null,D=y,O=y=0,L=null,I=v.next();D!==null&&!I.done;O++,I=v.next()){D.index>O?(L=D,D=null):L=D.sibling;var j=h(x,D,I.value,S);if(j===null){D===null&&(D=L);break}e&&D&&j.alternate===null&&t(x,D),y=l(j,y,O),E===null?P=j:E.sibling=j,E=j,D=L}if(I.done)return r(x,D),ve&&Yn(x,O),P;if(D===null){for(;!I.done;O++,I=v.next())I=p(x,I.value,S),I!==null&&(y=l(I,y,O),E===null?P=I:E.sibling=I,E=I);return ve&&Yn(x,O),P}for(D=s(x,D);!I.done;O++,I=v.next())I=w(D,x,O,I.value,S),I!==null&&(e&&I.alternate!==null&&D.delete(I.key===null?O:I.key),y=l(I,y,O),E===null?P=I:E.sibling=I,E=I);return e&&D.forEach(function(A){return t(x,A)}),ve&&Yn(x,O),P}function C(x,y,v,S){if(typeof v=="object"&&v!==null&&v.type===vr&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case aa:e:{for(var P=v.key,E=y;E!==null;){if(E.key===P){if(P=v.type,P===vr){if(E.tag===7){r(x,E.sibling),y=a(E,v.props.children),y.return=x,x=y;break e}}else if(E.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===yn&&Sc(P)===E.type){r(x,E.sibling),y=a(E,v.props),y.ref=ls(x,E,v),y.return=x,x=y;break e}r(x,E);break}else t(x,E);E=E.sibling}v.type===vr?(y=er(v.props.children,x.mode,S,v.key),y.return=x,x=y):(S=$a(v.type,v.key,v.props,null,x.mode,S),S.ref=ls(x,y,v),S.return=x,x=S)}return i(x);case yr:e:{for(E=v.key;y!==null;){if(y.key===E)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){r(x,y.sibling),y=a(y,v.children||[]),y.return=x,x=y;break e}else{r(x,y);break}else t(x,y);y=y.sibling}y=fi(v,x.mode,S),y.return=x,x=y}return i(x);case yn:return E=v._init,C(x,y,E(v._payload),S)}if(ms(v))return u(x,y,v,S);if(ts(v))return b(x,y,v,S);xa(x,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(r(x,y.sibling),y=a(y,v),y.return=x,x=y):(r(x,y),y=hi(v,x.mode,S),y.return=x,x=y),i(x)):r(x,y)}return C}var Ur=Lm(!0),Fm=Lm(!1),Xa=Fn(null),qa=null,Dr=null,ed=null;function td(){ed=Dr=qa=null}function nd(e){var t=Xa.current;xe(Xa),e._currentValue=t}function ao(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function Mr(e,t){qa=e,ed=Dr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(it=!0),e.firstContext=null)}function St(e){var t=e._currentValue;if(ed!==e)if(e={context:e,memoizedValue:t,next:null},Dr===null){if(qa===null)throw Error(R(308));Dr=e,qa.dependencies={lanes:0,firstContext:e}}else Dr=Dr.next=e;return t}var Qn=null;function rd(e){Qn===null?Qn=[e]:Qn.push(e)}function Um(e,t,r,s){var a=t.interleaved;return a===null?(r.next=r,rd(t)):(r.next=a.next,a.next=r),t.interleaved=r,ln(e,s)}function ln(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var vn=!1;function sd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function rn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function In(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,ie&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,ln(e,r)}return a=s.interleaved,a===null?(t.next=t,rd(s)):(t.next=a.next,a.next=t),s.interleaved=t,ln(e,r)}function Ea(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Vo(e,r)}}function kc(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?a=l=i:l=l.next=i,r=r.next}while(r!==null);l===null?a=l=t:l=l.next=t}else a=l=t;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Za(e,t,r,s){var a=e.updateQueue;vn=!1;var l=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,m=c.next;c.next=null,i===null?l=m:i.next=m,i=c;var d=e.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==i&&(o===null?d.firstBaseUpdate=m:o.next=m,d.lastBaseUpdate=c))}if(l!==null){var p=a.baseState;i=0,d=m=c=null,o=l;do{var h=o.lane,w=o.eventTime;if((s&h)===h){d!==null&&(d=d.next={eventTime:w,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var u=e,b=o;switch(h=t,w=r,b.tag){case 1:if(u=b.payload,typeof u=="function"){p=u.call(w,p,h);break e}p=u;break e;case 3:u.flags=u.flags&-65537|128;case 0:if(u=b.payload,h=typeof u=="function"?u.call(w,p,h):u,h==null)break e;p=De({},p,h);break e;case 2:vn=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[o]:h.push(o))}else w={eventTime:w,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(m=d=w,c=p):d=d.next=w,i|=h;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;h=o,o=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(d===null&&(c=p),a.baseState=c,a.firstBaseUpdate=m,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do i|=a.lane,a=a.next;while(a!==t)}else l===null&&(a.shared.lanes=0);ar|=i,e.lanes=i,e.memoizedState=p}}function Cc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!="function")throw Error(R(191,a));a.call(s)}}}var Xs={},Wt=Fn(Xs),$s=Fn(Xs),_s=Fn(Xs);function Xn(e){if(e===Xs)throw Error(R(174));return e}function ad(e,t){switch(he(_s,t),he($s,e),he(Wt,Xs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Fi(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Fi(t,e)}xe(Wt),he(Wt,t)}function zr(){xe(Wt),xe($s),xe(_s)}function Bm(e){Xn(_s.current);var t=Xn(Wt.current),r=Fi(t,e.type);t!==r&&(he($s,e),he(Wt,r))}function ld(e){$s.current===e&&(xe(Wt),xe($s))}var Se=Fn(0);function el(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var oi=[];function id(){for(var e=0;e<oi.length;e++)oi[e]._workInProgressVersionPrimary=null;oi.length=0}var Ia=dn.ReactCurrentDispatcher,di=dn.ReactCurrentBatchConfig,sr=0,ke=null,Me=null,Fe=null,tl=!1,Ns=!1,Ls=0,Hx=0;function Qe(){throw Error(R(321))}function od(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ut(e[r],t[r]))return!1;return!0}function dd(e,t,r,s,a,l){if(sr=l,ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ia.current=e===null||e.memoizedState===null?Kx:Jx,e=r(s,a),Ns){l=0;do{if(Ns=!1,Ls=0,25<=l)throw Error(R(301));l+=1,Fe=Me=null,t.updateQueue=null,Ia.current=Qx,e=r(s,a)}while(Ns)}if(Ia.current=nl,t=Me!==null&&Me.next!==null,sr=0,Fe=Me=ke=null,tl=!1,t)throw Error(R(300));return e}function cd(){var e=Ls!==0;return Ls=0,e}function Bt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?ke.memoizedState=Fe=e:Fe=Fe.next=e,Fe}function kt(){if(Me===null){var e=ke.alternate;e=e!==null?e.memoizedState:null}else e=Me.next;var t=Fe===null?ke.memoizedState:Fe.next;if(t!==null)Fe=t,Me=e;else{if(e===null)throw Error(R(310));Me=e,e={memoizedState:Me.memoizedState,baseState:Me.baseState,baseQueue:Me.baseQueue,queue:Me.queue,next:null},Fe===null?ke.memoizedState=Fe=e:Fe=Fe.next=e}return Fe}function Fs(e,t){return typeof t=="function"?t(e):t}function ci(e){var t=kt(),r=t.queue;if(r===null)throw Error(R(311));r.lastRenderedReducer=e;var s=Me,a=s.baseQueue,l=r.pending;if(l!==null){if(a!==null){var i=a.next;a.next=l.next,l.next=i}s.baseQueue=a=l,r.pending=null}if(a!==null){l=a.next,s=s.baseState;var o=i=null,c=null,m=l;do{var d=m.lane;if((sr&d)===d)c!==null&&(c=c.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),s=m.hasEagerState?m.eagerState:e(s,m.action);else{var p={lane:d,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};c===null?(o=c=p,i=s):c=c.next=p,ke.lanes|=d,ar|=d}m=m.next}while(m!==null&&m!==l);c===null?i=s:c.next=o,Ut(s,t.memoizedState)||(it=!0),t.memoizedState=s,t.baseState=i,t.baseQueue=c,r.lastRenderedState=s}if(e=r.interleaved,e!==null){a=e;do l=a.lane,ke.lanes|=l,ar|=l,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ui(e){var t=kt(),r=t.queue;if(r===null)throw Error(R(311));r.lastRenderedReducer=e;var s=r.dispatch,a=r.pending,l=t.memoizedState;if(a!==null){r.pending=null;var i=a=a.next;do l=e(l,i.action),i=i.next;while(i!==a);Ut(l,t.memoizedState)||(it=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),r.lastRenderedState=l}return[l,s]}function Vm(){}function Hm(e,t){var r=ke,s=kt(),a=t(),l=!Ut(s.memoizedState,a);if(l&&(s.memoizedState=a,it=!0),s=s.queue,ud(Ym.bind(null,r,s,e),[e]),s.getSnapshot!==t||l||Fe!==null&&Fe.memoizedState.tag&1){if(r.flags|=2048,Us(9,Gm.bind(null,r,s,a,t),void 0,null),Ue===null)throw Error(R(349));sr&30||Wm(r,t,a)}return a}function Wm(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ke.updateQueue,t===null?(t={lastEffect:null,stores:null},ke.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Gm(e,t,r,s){t.value=r,t.getSnapshot=s,Km(t)&&Jm(e)}function Ym(e,t,r){return r(function(){Km(t)&&Jm(e)})}function Km(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ut(e,r)}catch{return!0}}function Jm(e){var t=ln(e,1);t!==null&&Ft(t,e,1,-1)}function Dc(e){var t=Bt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fs,lastRenderedState:e},t.queue=e,e=e.dispatch=Yx.bind(null,ke,e),[t.memoizedState,e]}function Us(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=ke.updateQueue,t===null?(t={lastEffect:null,stores:null},ke.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function Qm(){return kt().memoizedState}function Ta(e,t,r,s){var a=Bt();ke.flags|=e,a.memoizedState=Us(1|t,r,void 0,s===void 0?null:s)}function wl(e,t,r,s){var a=kt();s=s===void 0?null:s;var l=void 0;if(Me!==null){var i=Me.memoizedState;if(l=i.destroy,s!==null&&od(s,i.deps)){a.memoizedState=Us(t,r,l,s);return}}ke.flags|=e,a.memoizedState=Us(1|t,r,l,s)}function Pc(e,t){return Ta(8390656,8,e,t)}function ud(e,t){return wl(2048,8,e,t)}function Xm(e,t){return wl(4,2,e,t)}function qm(e,t){return wl(4,4,e,t)}function Zm(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ep(e,t,r){return r=r!=null?r.concat([e]):null,wl(4,4,Zm.bind(null,t,e),r)}function md(){}function tp(e,t){var r=kt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&od(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function np(e,t){var r=kt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&od(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function rp(e,t,r){return sr&21?(Ut(r,t)||(r=om(),ke.lanes|=r,ar|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,it=!0),e.memoizedState=r)}function Wx(e,t){var r=ce;ce=r!==0&&4>r?r:4,e(!0);var s=di.transition;di.transition={};try{e(!1),t()}finally{ce=r,di.transition=s}}function sp(){return kt().memoizedState}function Gx(e,t,r){var s=On(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},ap(e))lp(t,r);else if(r=Um(e,t,r,s),r!==null){var a=rt();Ft(r,e,s,a),ip(r,t,s)}}function Yx(e,t,r){var s=On(e),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(ap(e))lp(t,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var i=t.lastRenderedState,o=l(i,r);if(a.hasEagerState=!0,a.eagerState=o,Ut(o,i)){var c=t.interleaved;c===null?(a.next=a,rd(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=Um(e,t,a,s),r!==null&&(a=rt(),Ft(r,e,s,a),ip(r,t,s))}}function ap(e){var t=e.alternate;return e===ke||t!==null&&t===ke}function lp(e,t){Ns=tl=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function ip(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Vo(e,r)}}var nl={readContext:St,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useInsertionEffect:Qe,useLayoutEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useMutableSource:Qe,useSyncExternalStore:Qe,useId:Qe,unstable_isNewReconciler:!1},Kx={readContext:St,useCallback:function(e,t){return Bt().memoizedState=[e,t===void 0?null:t],e},useContext:St,useEffect:Pc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ta(4194308,4,Zm.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ta(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ta(4,2,e,t)},useMemo:function(e,t){var r=Bt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=Bt();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Gx.bind(null,ke,e),[s.memoizedState,e]},useRef:function(e){var t=Bt();return e={current:e},t.memoizedState=e},useState:Dc,useDebugValue:md,useDeferredValue:function(e){return Bt().memoizedState=e},useTransition:function(){var e=Dc(!1),t=e[0];return e=Wx.bind(null,e[1]),Bt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=ke,a=Bt();if(ve){if(r===void 0)throw Error(R(407));r=r()}else{if(r=t(),Ue===null)throw Error(R(349));sr&30||Wm(s,t,r)}a.memoizedState=r;var l={value:r,getSnapshot:t};return a.queue=l,Pc(Ym.bind(null,s,l,e),[e]),s.flags|=2048,Us(9,Gm.bind(null,s,l,r,t),void 0,null),r},useId:function(){var e=Bt(),t=Ue.identifierPrefix;if(ve){var r=nn,s=tn;r=(s&~(1<<32-Lt(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=Ls++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Hx++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Jx={readContext:St,useCallback:tp,useContext:St,useEffect:ud,useImperativeHandle:ep,useInsertionEffect:Xm,useLayoutEffect:qm,useMemo:np,useReducer:ci,useRef:Qm,useState:function(){return ci(Fs)},useDebugValue:md,useDeferredValue:function(e){var t=kt();return rp(t,Me.memoizedState,e)},useTransition:function(){var e=ci(Fs)[0],t=kt().memoizedState;return[e,t]},useMutableSource:Vm,useSyncExternalStore:Hm,useId:sp,unstable_isNewReconciler:!1},Qx={readContext:St,useCallback:tp,useContext:St,useEffect:ud,useImperativeHandle:ep,useInsertionEffect:Xm,useLayoutEffect:qm,useMemo:np,useReducer:ui,useRef:Qm,useState:function(){return ui(Fs)},useDebugValue:md,useDeferredValue:function(e){var t=kt();return Me===null?t.memoizedState=e:rp(t,Me.memoizedState,e)},useTransition:function(){var e=ui(Fs)[0],t=kt().memoizedState;return[e,t]},useMutableSource:Vm,useSyncExternalStore:Hm,useId:sp,unstable_isNewReconciler:!1};function Mt(e,t){if(e&&e.defaultProps){t=De({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function lo(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:De({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Sl={isMounted:function(e){return(e=e._reactInternals)?cr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=rt(),a=On(e),l=rn(s,a);l.payload=t,r!=null&&(l.callback=r),t=In(e,l,a),t!==null&&(Ft(t,e,a,s),Ea(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=rt(),a=On(e),l=rn(s,a);l.tag=1,l.payload=t,r!=null&&(l.callback=r),t=In(e,l,a),t!==null&&(Ft(t,e,a,s),Ea(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=rt(),s=On(e),a=rn(r,s);a.tag=2,t!=null&&(a.callback=t),t=In(e,a,s),t!==null&&(Ft(t,e,s,r),Ea(t,e,s))}};function Ac(e,t,r,s,a,l,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,l,i):t.prototype&&t.prototype.isPureReactComponent?!Ts(r,s)||!Ts(a,l):!0}function op(e,t,r){var s=!1,a=_n,l=t.contextType;return typeof l=="object"&&l!==null?l=St(l):(a=dt(t)?nr:et.current,s=t.contextTypes,l=(s=s!=null)?Lr(e,a):_n),t=new t(r,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Sl,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function Ec(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&Sl.enqueueReplaceState(t,t.state,null)}function io(e,t,r,s){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},sd(e);var l=t.contextType;typeof l=="object"&&l!==null?a.context=St(l):(l=dt(t)?nr:et.current,a.context=Lr(e,l)),a.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(lo(e,t,l,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Sl.enqueueReplaceState(a,a.state,null),Za(e,r,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Br(e,t){try{var r="",s=t;do r+=Sf(s),s=s.return;while(s);var a=r}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:a,digest:null}}function mi(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function oo(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Xx=typeof WeakMap=="function"?WeakMap:Map;function dp(e,t,r){r=rn(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){sl||(sl=!0,vo=s),oo(e,t)},r}function cp(e,t,r){r=rn(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;r.payload=function(){return s(a)},r.callback=function(){oo(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){oo(e,t),typeof s!="function"&&(Tn===null?Tn=new Set([this]):Tn.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function Ic(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new Xx;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(r)||(a.add(r),e=ug.bind(null,e,t,r),t.then(e,e))}function Tc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Oc(e,t,r,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=rn(-1,1),t.tag=2,In(r,t,1))),r.lanes|=1),e)}var qx=dn.ReactCurrentOwner,it=!1;function nt(e,t,r,s){t.child=e===null?Fm(t,null,r,s):Ur(t,e.child,r,s)}function Mc(e,t,r,s,a){r=r.render;var l=t.ref;return Mr(t,a),s=dd(e,t,r,s,l,a),r=cd(),e!==null&&!it?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,on(e,t,a)):(ve&&r&&Xo(t),t.flags|=1,nt(e,t,s,a),t.child)}function Rc(e,t,r,s,a){if(e===null){var l=r.type;return typeof l=="function"&&!bd(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=l,up(e,t,l,s,a)):(e=$a(r.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&a)){var i=l.memoizedProps;if(r=r.compare,r=r!==null?r:Ts,r(i,s)&&e.ref===t.ref)return on(e,t,a)}return t.flags|=1,e=Mn(l,s),e.ref=t.ref,e.return=t,t.child=e}function up(e,t,r,s,a){if(e!==null){var l=e.memoizedProps;if(Ts(l,s)&&e.ref===t.ref)if(it=!1,t.pendingProps=s=l,(e.lanes&a)!==0)e.flags&131072&&(it=!0);else return t.lanes=e.lanes,on(e,t,a)}return co(e,t,r,s,a)}function mp(e,t,r){var s=t.pendingProps,a=s.children,l=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},he(Ar,pt),pt|=r;else{if(!(r&1073741824))return e=l!==null?l.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,he(Ar,pt),pt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=l!==null?l.baseLanes:r,he(Ar,pt),pt|=s}else l!==null?(s=l.baseLanes|r,t.memoizedState=null):s=r,he(Ar,pt),pt|=s;return nt(e,t,a,r),t.child}function pp(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function co(e,t,r,s,a){var l=dt(r)?nr:et.current;return l=Lr(t,l),Mr(t,a),r=dd(e,t,r,s,l,a),s=cd(),e!==null&&!it?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,on(e,t,a)):(ve&&s&&Xo(t),t.flags|=1,nt(e,t,r,a),t.child)}function $c(e,t,r,s,a){if(dt(r)){var l=!0;Ka(t)}else l=!1;if(Mr(t,a),t.stateNode===null)Oa(e,t),op(t,r,s),io(t,r,s,a),s=!0;else if(e===null){var i=t.stateNode,o=t.memoizedProps;i.props=o;var c=i.context,m=r.contextType;typeof m=="object"&&m!==null?m=St(m):(m=dt(r)?nr:et.current,m=Lr(t,m));var d=r.getDerivedStateFromProps,p=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";p||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==s||c!==m)&&Ec(t,i,s,m),vn=!1;var h=t.memoizedState;i.state=h,Za(t,s,i,a),c=t.memoizedState,o!==s||h!==c||ot.current||vn?(typeof d=="function"&&(lo(t,r,d,s),c=t.memoizedState),(o=vn||Ac(t,r,o,s,h,c,m))?(p||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),i.props=s,i.state=c,i.context=m,s=o):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{i=t.stateNode,zm(e,t),o=t.memoizedProps,m=t.type===t.elementType?o:Mt(t.type,o),i.props=m,p=t.pendingProps,h=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=St(c):(c=dt(r)?nr:et.current,c=Lr(t,c));var w=r.getDerivedStateFromProps;(d=typeof w=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==p||h!==c)&&Ec(t,i,s,c),vn=!1,h=t.memoizedState,i.state=h,Za(t,s,i,a);var u=t.memoizedState;o!==p||h!==u||ot.current||vn?(typeof w=="function"&&(lo(t,r,w,s),u=t.memoizedState),(m=vn||Ac(t,r,m,s,h,u,c)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(s,u,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(s,u,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=u),i.props=s,i.state=u,i.context=c,s=m):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),s=!1)}return uo(e,t,r,s,l,a)}function uo(e,t,r,s,a,l){pp(e,t);var i=(t.flags&128)!==0;if(!s&&!i)return a&&Nc(t,r,!1),on(e,t,l);s=t.stateNode,qx.current=t;var o=i&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&i?(t.child=Ur(t,e.child,null,l),t.child=Ur(t,null,o,l)):nt(e,t,o,l),t.memoizedState=s.state,a&&Nc(t,r,!0),t.child}function hp(e){var t=e.stateNode;t.pendingContext?bc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&bc(e,t.context,!1),ad(e,t.containerInfo)}function _c(e,t,r,s,a){return Fr(),Zo(a),t.flags|=256,nt(e,t,r,s),t.child}var mo={dehydrated:null,treeContext:null,retryLane:0};function po(e){return{baseLanes:e,cachePool:null,transitions:null}}function fp(e,t,r){var s=t.pendingProps,a=Se.current,l=!1,i=(t.flags&128)!==0,o;if((o=i)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),he(Se,a&1),e===null)return so(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=s.children,e=s.fallback,l?(s=t.mode,l=t.child,i={mode:"hidden",children:i},!(s&1)&&l!==null?(l.childLanes=0,l.pendingProps=i):l=Dl(i,s,0,null),e=er(e,s,r,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=po(r),t.memoizedState=mo,e):pd(t,i));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return Zx(e,t,i,s,o,a,r);if(l){l=s.fallback,i=t.mode,a=e.child,o=a.sibling;var c={mode:"hidden",children:s.children};return!(i&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=Mn(a,c),s.subtreeFlags=a.subtreeFlags&14680064),o!==null?l=Mn(o,l):(l=er(l,i,r,null),l.flags|=2),l.return=t,s.return=t,s.sibling=l,t.child=s,s=l,l=t.child,i=e.child.memoizedState,i=i===null?po(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},l.memoizedState=i,l.childLanes=e.childLanes&~r,t.memoizedState=mo,s}return l=e.child,e=l.sibling,s=Mn(l,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function pd(e,t){return t=Dl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ga(e,t,r,s){return s!==null&&Zo(s),Ur(t,e.child,null,r),e=pd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Zx(e,t,r,s,a,l,i){if(r)return t.flags&256?(t.flags&=-257,s=mi(Error(R(422))),ga(e,t,i,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=s.fallback,a=t.mode,s=Dl({mode:"visible",children:s.children},a,0,null),l=er(l,a,i,null),l.flags|=2,s.return=t,l.return=t,s.sibling=l,t.child=s,t.mode&1&&Ur(t,e.child,null,i),t.child.memoizedState=po(i),t.memoizedState=mo,l);if(!(t.mode&1))return ga(e,t,i,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var o=s.dgst;return s=o,l=Error(R(419)),s=mi(l,s,void 0),ga(e,t,i,s)}if(o=(i&e.childLanes)!==0,it||o){if(s=Ue,s!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|i)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,ln(e,a),Ft(s,e,a,-1))}return vd(),s=mi(Error(R(421))),ga(e,t,i,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=mg.bind(null,e),a._reactRetry=t,null):(e=l.treeContext,ht=En(a.nextSibling),ft=t,ve=!0,$t=null,e!==null&&(bt[Nt++]=tn,bt[Nt++]=nn,bt[Nt++]=rr,tn=e.id,nn=e.overflow,rr=t),t=pd(t,s.children),t.flags|=4096,t)}function Lc(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),ao(e.return,t,r)}function pi(e,t,r,s,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=s,l.tail=r,l.tailMode=a)}function xp(e,t,r){var s=t.pendingProps,a=s.revealOrder,l=s.tail;if(nt(e,t,s.children,r),s=Se.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Lc(e,r,t);else if(e.tag===19)Lc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(he(Se,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&el(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),pi(t,!1,a,r,l);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&el(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}pi(t,!0,r,null,l);break;case"together":pi(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Oa(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function on(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ar|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(R(153));if(t.child!==null){for(e=t.child,r=Mn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Mn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function eg(e,t,r){switch(t.tag){case 3:hp(t),Fr();break;case 5:Bm(t);break;case 1:dt(t.type)&&Ka(t);break;case 4:ad(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;he(Xa,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(he(Se,Se.current&1),t.flags|=128,null):r&t.child.childLanes?fp(e,t,r):(he(Se,Se.current&1),e=on(e,t,r),e!==null?e.sibling:null);he(Se,Se.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return xp(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),he(Se,Se.current),s)break;return null;case 22:case 23:return t.lanes=0,mp(e,t,r)}return on(e,t,r)}var gp,ho,yp,vp;gp=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};ho=function(){};yp=function(e,t,r,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,Xn(Wt.current);var l=null;switch(r){case"input":a=Ri(e,a),s=Ri(e,s),l=[];break;case"select":a=De({},a,{value:void 0}),s=De({},s,{value:void 0}),l=[];break;case"textarea":a=Li(e,a),s=Li(e,s),l=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Ga)}Ui(r,s);var i;r=null;for(m in a)if(!s.hasOwnProperty(m)&&a.hasOwnProperty(m)&&a[m]!=null)if(m==="style"){var o=a[m];for(i in o)o.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(ks.hasOwnProperty(m)?l||(l=[]):(l=l||[]).push(m,null));for(m in s){var c=s[m];if(o=a!=null?a[m]:void 0,s.hasOwnProperty(m)&&c!==o&&(c!=null||o!=null))if(m==="style")if(o){for(i in o)!o.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&o[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(l||(l=[]),l.push(m,r)),r=c;else m==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(l=l||[]).push(m,c)):m==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(m,""+c):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(ks.hasOwnProperty(m)?(c!=null&&m==="onScroll"&&fe("scroll",e),l||o===c||(l=[])):(l=l||[]).push(m,c))}r&&(l=l||[]).push("style",r);var m=l;(t.updateQueue=m)&&(t.flags|=4)}};vp=function(e,t,r,s){r!==s&&(t.flags|=4)};function is(e,t){if(!ve)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Xe(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function tg(e,t,r){var s=t.pendingProps;switch(qo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(t),null;case 1:return dt(t.type)&&Ya(),Xe(t),null;case 3:return s=t.stateNode,zr(),xe(ot),xe(et),id(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(fa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,$t!==null&&(jo($t),$t=null))),ho(e,t),Xe(t),null;case 5:ld(t);var a=Xn(_s.current);if(r=t.type,e!==null&&t.stateNode!=null)yp(e,t,r,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(R(166));return Xe(t),null}if(e=Xn(Wt.current),fa(t)){s=t.stateNode,r=t.type;var l=t.memoizedProps;switch(s[Vt]=t,s[Rs]=l,e=(t.mode&1)!==0,r){case"dialog":fe("cancel",s),fe("close",s);break;case"iframe":case"object":case"embed":fe("load",s);break;case"video":case"audio":for(a=0;a<hs.length;a++)fe(hs[a],s);break;case"source":fe("error",s);break;case"img":case"image":case"link":fe("error",s),fe("load",s);break;case"details":fe("toggle",s);break;case"input":Yd(s,l),fe("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!l.multiple},fe("invalid",s);break;case"textarea":Jd(s,l),fe("invalid",s)}Ui(r,l),a=null;for(var i in l)if(l.hasOwnProperty(i)){var o=l[i];i==="children"?typeof o=="string"?s.textContent!==o&&(l.suppressHydrationWarning!==!0&&ha(s.textContent,o,e),a=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(l.suppressHydrationWarning!==!0&&ha(s.textContent,o,e),a=["children",""+o]):ks.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&fe("scroll",s)}switch(r){case"input":la(s),Kd(s,l,!0);break;case"textarea":la(s),Qd(s);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(s.onclick=Ga)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Yu(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=i.createElement(r,{is:s.is}):(e=i.createElement(r),r==="select"&&(i=e,s.multiple?i.multiple=!0:s.size&&(i.size=s.size))):e=i.createElementNS(e,r),e[Vt]=t,e[Rs]=s,gp(e,t,!1,!1),t.stateNode=e;e:{switch(i=zi(r,s),r){case"dialog":fe("cancel",e),fe("close",e),a=s;break;case"iframe":case"object":case"embed":fe("load",e),a=s;break;case"video":case"audio":for(a=0;a<hs.length;a++)fe(hs[a],e);a=s;break;case"source":fe("error",e),a=s;break;case"img":case"image":case"link":fe("error",e),fe("load",e),a=s;break;case"details":fe("toggle",e),a=s;break;case"input":Yd(e,s),a=Ri(e,s),fe("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=De({},s,{value:void 0}),fe("invalid",e);break;case"textarea":Jd(e,s),a=Li(e,s),fe("invalid",e);break;default:a=s}Ui(r,a),o=a;for(l in o)if(o.hasOwnProperty(l)){var c=o[l];l==="style"?Qu(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Ku(e,c)):l==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Cs(e,c):typeof c=="number"&&Cs(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(ks.hasOwnProperty(l)?c!=null&&l==="onScroll"&&fe("scroll",e):c!=null&&_o(e,l,c,i))}switch(r){case"input":la(e),Kd(e,s,!1);break;case"textarea":la(e),Qd(e);break;case"option":s.value!=null&&e.setAttribute("value",""+$n(s.value));break;case"select":e.multiple=!!s.multiple,l=s.value,l!=null?Er(e,!!s.multiple,l,!1):s.defaultValue!=null&&Er(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Ga)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Xe(t),null;case 6:if(e&&t.stateNode!=null)vp(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(R(166));if(r=Xn(_s.current),Xn(Wt.current),fa(t)){if(s=t.stateNode,r=t.memoizedProps,s[Vt]=t,(l=s.nodeValue!==r)&&(e=ft,e!==null))switch(e.tag){case 3:ha(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ha(s.nodeValue,r,(e.mode&1)!==0)}l&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Vt]=t,t.stateNode=s}return Xe(t),null;case 13:if(xe(Se),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ve&&ht!==null&&t.mode&1&&!(t.flags&128))_m(),Fr(),t.flags|=98560,l=!1;else if(l=fa(t),s!==null&&s.dehydrated!==null){if(e===null){if(!l)throw Error(R(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(R(317));l[Vt]=t}else Fr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Xe(t),l=!1}else $t!==null&&(jo($t),$t=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Se.current&1?Re===0&&(Re=3):vd())),t.updateQueue!==null&&(t.flags|=4),Xe(t),null);case 4:return zr(),ho(e,t),e===null&&Os(t.stateNode.containerInfo),Xe(t),null;case 10:return nd(t.type._context),Xe(t),null;case 17:return dt(t.type)&&Ya(),Xe(t),null;case 19:if(xe(Se),l=t.memoizedState,l===null)return Xe(t),null;if(s=(t.flags&128)!==0,i=l.rendering,i===null)if(s)is(l,!1);else{if(Re!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=el(e),i!==null){for(t.flags|=128,is(l,!1),s=i.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)l=r,e=s,l.flags&=14680066,i=l.alternate,i===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,e=i.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return he(Se,Se.current&1|2),t.child}e=e.sibling}l.tail!==null&&Ie()>Vr&&(t.flags|=128,s=!0,is(l,!1),t.lanes=4194304)}else{if(!s)if(e=el(i),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),is(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!ve)return Xe(t),null}else 2*Ie()-l.renderingStartTime>Vr&&r!==1073741824&&(t.flags|=128,s=!0,is(l,!1),t.lanes=4194304);l.isBackwards?(i.sibling=t.child,t.child=i):(r=l.last,r!==null?r.sibling=i:t.child=i,l.last=i)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Ie(),t.sibling=null,r=Se.current,he(Se,s?r&1|2:r&1),t):(Xe(t),null);case 22:case 23:return yd(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?pt&1073741824&&(Xe(t),t.subtreeFlags&6&&(t.flags|=8192)):Xe(t),null;case 24:return null;case 25:return null}throw Error(R(156,t.tag))}function ng(e,t){switch(qo(t),t.tag){case 1:return dt(t.type)&&Ya(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return zr(),xe(ot),xe(et),id(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ld(t),null;case 13:if(xe(Se),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(R(340));Fr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return xe(Se),null;case 4:return zr(),null;case 10:return nd(t.type._context),null;case 22:case 23:return yd(),null;case 24:return null;default:return null}}var ya=!1,qe=!1,rg=typeof WeakSet=="function"?WeakSet:Set,V=null;function Pr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Pe(e,t,s)}else r.current=null}function fo(e,t,r){try{r()}catch(s){Pe(e,t,s)}}var Fc=!1;function sg(e,t){if(Xi=Va,e=Sm(),Qo(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,l=s.focusNode;s=s.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var i=0,o=-1,c=-1,m=0,d=0,p=e,h=null;t:for(;;){for(var w;p!==r||a!==0&&p.nodeType!==3||(o=i+a),p!==l||s!==0&&p.nodeType!==3||(c=i+s),p.nodeType===3&&(i+=p.nodeValue.length),(w=p.firstChild)!==null;)h=p,p=w;for(;;){if(p===e)break t;if(h===r&&++m===a&&(o=i),h===l&&++d===s&&(c=i),(w=p.nextSibling)!==null)break;p=h,h=p.parentNode}p=w}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(qi={focusedElem:e,selectionRange:r},Va=!1,V=t;V!==null;)if(t=V,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,V=e;else for(;V!==null;){t=V;try{var u=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(u!==null){var b=u.memoizedProps,C=u.memoizedState,x=t.stateNode,y=x.getSnapshotBeforeUpdate(t.elementType===t.type?b:Mt(t.type,b),C);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(S){Pe(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,V=e;break}V=t.return}return u=Fc,Fc=!1,u}function js(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&fo(t,r,l)}a=a.next}while(a!==s)}}function kl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function xo(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function bp(e){var t=e.alternate;t!==null&&(e.alternate=null,bp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Vt],delete t[Rs],delete t[to],delete t[Ux],delete t[zx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Np(e){return e.tag===5||e.tag===3||e.tag===4}function Uc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Np(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function go(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ga));else if(s!==4&&(e=e.child,e!==null))for(go(e,t,r),e=e.sibling;e!==null;)go(e,t,r),e=e.sibling}function yo(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(yo(e,t,r),e=e.sibling;e!==null;)yo(e,t,r),e=e.sibling}var We=null,Rt=!1;function gn(e,t,r){for(r=r.child;r!==null;)jp(e,t,r),r=r.sibling}function jp(e,t,r){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(gl,r)}catch{}switch(r.tag){case 5:qe||Pr(r,t);case 6:var s=We,a=Rt;We=null,gn(e,t,r),We=s,Rt=a,We!==null&&(Rt?(e=We,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):We.removeChild(r.stateNode));break;case 18:We!==null&&(Rt?(e=We,r=r.stateNode,e.nodeType===8?li(e.parentNode,r):e.nodeType===1&&li(e,r),Es(e)):li(We,r.stateNode));break;case 4:s=We,a=Rt,We=r.stateNode.containerInfo,Rt=!0,gn(e,t,r),We=s,Rt=a;break;case 0:case 11:case 14:case 15:if(!qe&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var l=a,i=l.destroy;l=l.tag,i!==void 0&&(l&2||l&4)&&fo(r,t,i),a=a.next}while(a!==s)}gn(e,t,r);break;case 1:if(!qe&&(Pr(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(o){Pe(r,t,o)}gn(e,t,r);break;case 21:gn(e,t,r);break;case 22:r.mode&1?(qe=(s=qe)||r.memoizedState!==null,gn(e,t,r),qe=s):gn(e,t,r);break;default:gn(e,t,r)}}function zc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new rg),t.forEach(function(s){var a=pg.bind(null,e,s);r.has(s)||(r.add(s),s.then(a,a))})}}function Tt(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var l=e,i=t,o=i;e:for(;o!==null;){switch(o.tag){case 5:We=o.stateNode,Rt=!1;break e;case 3:We=o.stateNode.containerInfo,Rt=!0;break e;case 4:We=o.stateNode.containerInfo,Rt=!0;break e}o=o.return}if(We===null)throw Error(R(160));jp(l,i,a),We=null,Rt=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(m){Pe(a,t,m)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)wp(t,e),t=t.sibling}function wp(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Tt(t,e),zt(e),s&4){try{js(3,e,e.return),kl(3,e)}catch(b){Pe(e,e.return,b)}try{js(5,e,e.return)}catch(b){Pe(e,e.return,b)}}break;case 1:Tt(t,e),zt(e),s&512&&r!==null&&Pr(r,r.return);break;case 5:if(Tt(t,e),zt(e),s&512&&r!==null&&Pr(r,r.return),e.flags&32){var a=e.stateNode;try{Cs(a,"")}catch(b){Pe(e,e.return,b)}}if(s&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,i=r!==null?r.memoizedProps:l,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&l.type==="radio"&&l.name!=null&&Wu(a,l),zi(o,i);var m=zi(o,l);for(i=0;i<c.length;i+=2){var d=c[i],p=c[i+1];d==="style"?Qu(a,p):d==="dangerouslySetInnerHTML"?Ku(a,p):d==="children"?Cs(a,p):_o(a,d,p,m)}switch(o){case"input":$i(a,l);break;case"textarea":Gu(a,l);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var w=l.value;w!=null?Er(a,!!l.multiple,w,!1):h!==!!l.multiple&&(l.defaultValue!=null?Er(a,!!l.multiple,l.defaultValue,!0):Er(a,!!l.multiple,l.multiple?[]:"",!1))}a[Rs]=l}catch(b){Pe(e,e.return,b)}}break;case 6:if(Tt(t,e),zt(e),s&4){if(e.stateNode===null)throw Error(R(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(b){Pe(e,e.return,b)}}break;case 3:if(Tt(t,e),zt(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Es(t.containerInfo)}catch(b){Pe(e,e.return,b)}break;case 4:Tt(t,e),zt(e);break;case 13:Tt(t,e),zt(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(xd=Ie())),s&4&&zc(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(qe=(m=qe)||d,Tt(t,e),qe=m):Tt(t,e),zt(e),s&8192){if(m=e.memoizedState!==null,(e.stateNode.isHidden=m)&&!d&&e.mode&1)for(V=e,d=e.child;d!==null;){for(p=V=d;V!==null;){switch(h=V,w=h.child,h.tag){case 0:case 11:case 14:case 15:js(4,h,h.return);break;case 1:Pr(h,h.return);var u=h.stateNode;if(typeof u.componentWillUnmount=="function"){s=h,r=h.return;try{t=s,u.props=t.memoizedProps,u.state=t.memoizedState,u.componentWillUnmount()}catch(b){Pe(s,r,b)}}break;case 5:Pr(h,h.return);break;case 22:if(h.memoizedState!==null){Vc(p);continue}}w!==null?(w.return=h,V=w):Vc(p)}d=d.sibling}e:for(d=null,p=e;;){if(p.tag===5){if(d===null){d=p;try{a=p.stateNode,m?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(o=p.stateNode,c=p.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Ju("display",i))}catch(b){Pe(e,e.return,b)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=m?"":p.memoizedProps}catch(b){Pe(e,e.return,b)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Tt(t,e),zt(e),s&4&&zc(e);break;case 21:break;default:Tt(t,e),zt(e)}}function zt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Np(r)){var s=r;break e}r=r.return}throw Error(R(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(Cs(a,""),s.flags&=-33);var l=Uc(e);yo(e,l,a);break;case 3:case 4:var i=s.stateNode.containerInfo,o=Uc(e);go(e,o,i);break;default:throw Error(R(161))}}catch(c){Pe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ag(e,t,r){V=e,Sp(e)}function Sp(e,t,r){for(var s=(e.mode&1)!==0;V!==null;){var a=V,l=a.child;if(a.tag===22&&s){var i=a.memoizedState!==null||ya;if(!i){var o=a.alternate,c=o!==null&&o.memoizedState!==null||qe;o=ya;var m=qe;if(ya=i,(qe=c)&&!m)for(V=a;V!==null;)i=V,c=i.child,i.tag===22&&i.memoizedState!==null?Hc(a):c!==null?(c.return=i,V=c):Hc(a);for(;l!==null;)V=l,Sp(l),l=l.sibling;V=a,ya=o,qe=m}Bc(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,V=l):Bc(e)}}function Bc(e){for(;V!==null;){var t=V;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:qe||kl(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!qe)if(r===null)s.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Mt(t.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Cc(t,l,s);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Cc(t,i,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var m=t.alternate;if(m!==null){var d=m.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&Es(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}qe||t.flags&512&&xo(t)}catch(h){Pe(t,t.return,h)}}if(t===e){V=null;break}if(r=t.sibling,r!==null){r.return=t.return,V=r;break}V=t.return}}function Vc(e){for(;V!==null;){var t=V;if(t===e){V=null;break}var r=t.sibling;if(r!==null){r.return=t.return,V=r;break}V=t.return}}function Hc(e){for(;V!==null;){var t=V;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{kl(4,t)}catch(c){Pe(t,r,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(c){Pe(t,a,c)}}var l=t.return;try{xo(t)}catch(c){Pe(t,l,c)}break;case 5:var i=t.return;try{xo(t)}catch(c){Pe(t,i,c)}}}catch(c){Pe(t,t.return,c)}if(t===e){V=null;break}var o=t.sibling;if(o!==null){o.return=t.return,V=o;break}V=t.return}}var lg=Math.ceil,rl=dn.ReactCurrentDispatcher,hd=dn.ReactCurrentOwner,wt=dn.ReactCurrentBatchConfig,ie=0,Ue=null,Te=null,Ge=0,pt=0,Ar=Fn(0),Re=0,zs=null,ar=0,Cl=0,fd=0,ws=null,lt=null,xd=0,Vr=1/0,Zt=null,sl=!1,vo=null,Tn=null,va=!1,kn=null,al=0,Ss=0,bo=null,Ma=-1,Ra=0;function rt(){return ie&6?Ie():Ma!==-1?Ma:Ma=Ie()}function On(e){return e.mode&1?ie&2&&Ge!==0?Ge&-Ge:Vx.transition!==null?(Ra===0&&(Ra=om()),Ra):(e=ce,e!==0||(e=window.event,e=e===void 0?16:fm(e.type)),e):1}function Ft(e,t,r,s){if(50<Ss)throw Ss=0,bo=null,Error(R(185));Ks(e,r,s),(!(ie&2)||e!==Ue)&&(e===Ue&&(!(ie&2)&&(Cl|=r),Re===4&&jn(e,Ge)),ct(e,s),r===1&&ie===0&&!(t.mode&1)&&(Vr=Ie()+500,jl&&Un()))}function ct(e,t){var r=e.callbackNode;Vf(e,t);var s=Ba(e,e===Ue?Ge:0);if(s===0)r!==null&&Zd(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&Zd(r),t===1)e.tag===0?Bx(Wc.bind(null,e)):Mm(Wc.bind(null,e)),Lx(function(){!(ie&6)&&Un()}),r=null;else{switch(dm(s)){case 1:r=Bo;break;case 4:r=lm;break;case 16:r=za;break;case 536870912:r=im;break;default:r=za}r=Tp(r,kp.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function kp(e,t){if(Ma=-1,Ra=0,ie&6)throw Error(R(327));var r=e.callbackNode;if(Rr()&&e.callbackNode!==r)return null;var s=Ba(e,e===Ue?Ge:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=ll(e,s);else{t=s;var a=ie;ie|=2;var l=Dp();(Ue!==e||Ge!==t)&&(Zt=null,Vr=Ie()+500,Zn(e,t));do try{dg();break}catch(o){Cp(e,o)}while(!0);td(),rl.current=l,ie=a,Te!==null?t=0:(Ue=null,Ge=0,t=Re)}if(t!==0){if(t===2&&(a=Gi(e),a!==0&&(s=a,t=No(e,a))),t===1)throw r=zs,Zn(e,0),jn(e,s),ct(e,Ie()),r;if(t===6)jn(e,s);else{if(a=e.current.alternate,!(s&30)&&!ig(a)&&(t=ll(e,s),t===2&&(l=Gi(e),l!==0&&(s=l,t=No(e,l))),t===1))throw r=zs,Zn(e,0),jn(e,s),ct(e,Ie()),r;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(R(345));case 2:Kn(e,lt,Zt);break;case 3:if(jn(e,s),(s&130023424)===s&&(t=xd+500-Ie(),10<t)){if(Ba(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){rt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=eo(Kn.bind(null,e,lt,Zt),t);break}Kn(e,lt,Zt);break;case 4:if(jn(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var i=31-Lt(s);l=1<<i,i=t[i],i>a&&(a=i),s&=~l}if(s=a,s=Ie()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*lg(s/1960))-s,10<s){e.timeoutHandle=eo(Kn.bind(null,e,lt,Zt),s);break}Kn(e,lt,Zt);break;case 5:Kn(e,lt,Zt);break;default:throw Error(R(329))}}}return ct(e,Ie()),e.callbackNode===r?kp.bind(null,e):null}function No(e,t){var r=ws;return e.current.memoizedState.isDehydrated&&(Zn(e,t).flags|=256),e=ll(e,t),e!==2&&(t=lt,lt=r,t!==null&&jo(t)),e}function jo(e){lt===null?lt=e:lt.push.apply(lt,e)}function ig(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],l=a.getSnapshot;a=a.value;try{if(!Ut(l(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function jn(e,t){for(t&=~fd,t&=~Cl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Lt(t),s=1<<r;e[r]=-1,t&=~s}}function Wc(e){if(ie&6)throw Error(R(327));Rr();var t=Ba(e,0);if(!(t&1))return ct(e,Ie()),null;var r=ll(e,t);if(e.tag!==0&&r===2){var s=Gi(e);s!==0&&(t=s,r=No(e,s))}if(r===1)throw r=zs,Zn(e,0),jn(e,t),ct(e,Ie()),r;if(r===6)throw Error(R(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Kn(e,lt,Zt),ct(e,Ie()),null}function gd(e,t){var r=ie;ie|=1;try{return e(t)}finally{ie=r,ie===0&&(Vr=Ie()+500,jl&&Un())}}function lr(e){kn!==null&&kn.tag===0&&!(ie&6)&&Rr();var t=ie;ie|=1;var r=wt.transition,s=ce;try{if(wt.transition=null,ce=1,e)return e()}finally{ce=s,wt.transition=r,ie=t,!(ie&6)&&Un()}}function yd(){pt=Ar.current,xe(Ar)}function Zn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,_x(r)),Te!==null)for(r=Te.return;r!==null;){var s=r;switch(qo(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Ya();break;case 3:zr(),xe(ot),xe(et),id();break;case 5:ld(s);break;case 4:zr();break;case 13:xe(Se);break;case 19:xe(Se);break;case 10:nd(s.type._context);break;case 22:case 23:yd()}r=r.return}if(Ue=e,Te=e=Mn(e.current,null),Ge=pt=t,Re=0,zs=null,fd=Cl=ar=0,lt=ws=null,Qn!==null){for(t=0;t<Qn.length;t++)if(r=Qn[t],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,l=r.pending;if(l!==null){var i=l.next;l.next=a,s.next=i}r.pending=s}Qn=null}return e}function Cp(e,t){do{var r=Te;try{if(td(),Ia.current=nl,tl){for(var s=ke.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}tl=!1}if(sr=0,Fe=Me=ke=null,Ns=!1,Ls=0,hd.current=null,r===null||r.return===null){Re=1,zs=t,Te=null;break}e:{var l=e,i=r.return,o=r,c=t;if(t=Ge,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var m=c,d=o,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var w=Tc(i);if(w!==null){w.flags&=-257,Oc(w,i,o,l,t),w.mode&1&&Ic(l,m,t),t=w,c=m;var u=t.updateQueue;if(u===null){var b=new Set;b.add(c),t.updateQueue=b}else u.add(c);break e}else{if(!(t&1)){Ic(l,m,t),vd();break e}c=Error(R(426))}}else if(ve&&o.mode&1){var C=Tc(i);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Oc(C,i,o,l,t),Zo(Br(c,o));break e}}l=c=Br(c,o),Re!==4&&(Re=2),ws===null?ws=[l]:ws.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var x=dp(l,c,t);kc(l,x);break e;case 1:o=c;var y=l.type,v=l.stateNode;if(!(l.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Tn===null||!Tn.has(v)))){l.flags|=65536,t&=-t,l.lanes|=t;var S=cp(l,o,t);kc(l,S);break e}}l=l.return}while(l!==null)}Ap(r)}catch(P){t=P,Te===r&&r!==null&&(Te=r=r.return);continue}break}while(!0)}function Dp(){var e=rl.current;return rl.current=nl,e===null?nl:e}function vd(){(Re===0||Re===3||Re===2)&&(Re=4),Ue===null||!(ar&268435455)&&!(Cl&268435455)||jn(Ue,Ge)}function ll(e,t){var r=ie;ie|=2;var s=Dp();(Ue!==e||Ge!==t)&&(Zt=null,Zn(e,t));do try{og();break}catch(a){Cp(e,a)}while(!0);if(td(),ie=r,rl.current=s,Te!==null)throw Error(R(261));return Ue=null,Ge=0,Re}function og(){for(;Te!==null;)Pp(Te)}function dg(){for(;Te!==null&&!Mf();)Pp(Te)}function Pp(e){var t=Ip(e.alternate,e,pt);e.memoizedProps=e.pendingProps,t===null?Ap(e):Te=t,hd.current=null}function Ap(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=ng(r,t),r!==null){r.flags&=32767,Te=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Re=6,Te=null;return}}else if(r=tg(r,t,pt),r!==null){Te=r;return}if(t=t.sibling,t!==null){Te=t;return}Te=t=e}while(t!==null);Re===0&&(Re=5)}function Kn(e,t,r){var s=ce,a=wt.transition;try{wt.transition=null,ce=1,cg(e,t,r,s)}finally{wt.transition=a,ce=s}return null}function cg(e,t,r,s){do Rr();while(kn!==null);if(ie&6)throw Error(R(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(R(177));e.callbackNode=null,e.callbackPriority=0;var l=r.lanes|r.childLanes;if(Hf(e,l),e===Ue&&(Te=Ue=null,Ge=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||va||(va=!0,Tp(za,function(){return Rr(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=wt.transition,wt.transition=null;var i=ce;ce=1;var o=ie;ie|=4,hd.current=null,sg(e,r),wp(r,e),Ex(qi),Va=!!Xi,qi=Xi=null,e.current=r,ag(r),Rf(),ie=o,ce=i,wt.transition=l}else e.current=r;if(va&&(va=!1,kn=e,al=a),l=e.pendingLanes,l===0&&(Tn=null),Lf(r.stateNode),ct(e,Ie()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(sl)throw sl=!1,e=vo,vo=null,e;return al&1&&e.tag!==0&&Rr(),l=e.pendingLanes,l&1?e===bo?Ss++:(Ss=0,bo=e):Ss=0,Un(),null}function Rr(){if(kn!==null){var e=dm(al),t=wt.transition,r=ce;try{if(wt.transition=null,ce=16>e?16:e,kn===null)var s=!1;else{if(e=kn,kn=null,al=0,ie&6)throw Error(R(331));var a=ie;for(ie|=4,V=e.current;V!==null;){var l=V,i=l.child;if(V.flags&16){var o=l.deletions;if(o!==null){for(var c=0;c<o.length;c++){var m=o[c];for(V=m;V!==null;){var d=V;switch(d.tag){case 0:case 11:case 15:js(8,d,l)}var p=d.child;if(p!==null)p.return=d,V=p;else for(;V!==null;){d=V;var h=d.sibling,w=d.return;if(bp(d),d===m){V=null;break}if(h!==null){h.return=w,V=h;break}V=w}}}var u=l.alternate;if(u!==null){var b=u.child;if(b!==null){u.child=null;do{var C=b.sibling;b.sibling=null,b=C}while(b!==null)}}V=l}}if(l.subtreeFlags&2064&&i!==null)i.return=l,V=i;else e:for(;V!==null;){if(l=V,l.flags&2048)switch(l.tag){case 0:case 11:case 15:js(9,l,l.return)}var x=l.sibling;if(x!==null){x.return=l.return,V=x;break e}V=l.return}}var y=e.current;for(V=y;V!==null;){i=V;var v=i.child;if(i.subtreeFlags&2064&&v!==null)v.return=i,V=v;else e:for(i=y;V!==null;){if(o=V,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:kl(9,o)}}catch(P){Pe(o,o.return,P)}if(o===i){V=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,V=S;break e}V=o.return}}if(ie=a,Un(),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(gl,e)}catch{}s=!0}return s}finally{ce=r,wt.transition=t}}return!1}function Gc(e,t,r){t=Br(r,t),t=dp(e,t,1),e=In(e,t,1),t=rt(),e!==null&&(Ks(e,1,t),ct(e,t))}function Pe(e,t,r){if(e.tag===3)Gc(e,e,r);else for(;t!==null;){if(t.tag===3){Gc(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Tn===null||!Tn.has(s))){e=Br(r,e),e=cp(t,e,1),t=In(t,e,1),e=rt(),t!==null&&(Ks(t,1,e),ct(t,e));break}}t=t.return}}function ug(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=rt(),e.pingedLanes|=e.suspendedLanes&r,Ue===e&&(Ge&r)===r&&(Re===4||Re===3&&(Ge&130023424)===Ge&&500>Ie()-xd?Zn(e,0):fd|=r),ct(e,t)}function Ep(e,t){t===0&&(e.mode&1?(t=da,da<<=1,!(da&130023424)&&(da=4194304)):t=1);var r=rt();e=ln(e,t),e!==null&&(Ks(e,t,r),ct(e,r))}function mg(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Ep(e,r)}function pg(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(R(314))}s!==null&&s.delete(t),Ep(e,r)}var Ip;Ip=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ot.current)it=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return it=!1,eg(e,t,r);it=!!(e.flags&131072)}else it=!1,ve&&t.flags&1048576&&Rm(t,Qa,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Oa(e,t),e=t.pendingProps;var a=Lr(t,et.current);Mr(t,r),a=dd(null,t,s,e,a,r);var l=cd();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,dt(s)?(l=!0,Ka(t)):l=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,sd(t),a.updater=Sl,t.stateNode=a,a._reactInternals=t,io(t,s,e,r),t=uo(null,t,s,!0,l,r)):(t.tag=0,ve&&l&&Xo(t),nt(null,t,a,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Oa(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=fg(s),e=Mt(s,e),a){case 0:t=co(null,t,s,e,r);break e;case 1:t=$c(null,t,s,e,r);break e;case 11:t=Mc(null,t,s,e,r);break e;case 14:t=Rc(null,t,s,Mt(s.type,e),r);break e}throw Error(R(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Mt(s,a),co(e,t,s,a,r);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Mt(s,a),$c(e,t,s,a,r);case 3:e:{if(hp(t),e===null)throw Error(R(387));s=t.pendingProps,l=t.memoizedState,a=l.element,zm(e,t),Za(t,s,null,r);var i=t.memoizedState;if(s=i.element,l.isDehydrated)if(l={element:s,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){a=Br(Error(R(423)),t),t=_c(e,t,s,r,a);break e}else if(s!==a){a=Br(Error(R(424)),t),t=_c(e,t,s,r,a);break e}else for(ht=En(t.stateNode.containerInfo.firstChild),ft=t,ve=!0,$t=null,r=Fm(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Fr(),s===a){t=on(e,t,r);break e}nt(e,t,s,r)}t=t.child}return t;case 5:return Bm(t),e===null&&so(t),s=t.type,a=t.pendingProps,l=e!==null?e.memoizedProps:null,i=a.children,Zi(s,a)?i=null:l!==null&&Zi(s,l)&&(t.flags|=32),pp(e,t),nt(e,t,i,r),t.child;case 6:return e===null&&so(t),null;case 13:return fp(e,t,r);case 4:return ad(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Ur(t,null,s,r):nt(e,t,s,r),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Mt(s,a),Mc(e,t,s,a,r);case 7:return nt(e,t,t.pendingProps,r),t.child;case 8:return nt(e,t,t.pendingProps.children,r),t.child;case 12:return nt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,l=t.memoizedProps,i=a.value,he(Xa,s._currentValue),s._currentValue=i,l!==null)if(Ut(l.value,i)){if(l.children===a.children&&!ot.current){t=on(e,t,r);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var o=l.dependencies;if(o!==null){i=l.child;for(var c=o.firstContext;c!==null;){if(c.context===s){if(l.tag===1){c=rn(-1,r&-r),c.tag=2;var m=l.updateQueue;if(m!==null){m=m.shared;var d=m.pending;d===null?c.next=c:(c.next=d.next,d.next=c),m.pending=c}}l.lanes|=r,c=l.alternate,c!==null&&(c.lanes|=r),ao(l.return,r,t),o.lanes|=r;break}c=c.next}}else if(l.tag===10)i=l.type===t.type?null:l.child;else if(l.tag===18){if(i=l.return,i===null)throw Error(R(341));i.lanes|=r,o=i.alternate,o!==null&&(o.lanes|=r),ao(i,r,t),i=l.sibling}else i=l.child;if(i!==null)i.return=l;else for(i=l;i!==null;){if(i===t){i=null;break}if(l=i.sibling,l!==null){l.return=i.return,i=l;break}i=i.return}l=i}nt(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,Mr(t,r),a=St(a),s=s(a),t.flags|=1,nt(e,t,s,r),t.child;case 14:return s=t.type,a=Mt(s,t.pendingProps),a=Mt(s.type,a),Rc(e,t,s,a,r);case 15:return up(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Mt(s,a),Oa(e,t),t.tag=1,dt(s)?(e=!0,Ka(t)):e=!1,Mr(t,r),op(t,s,a),io(t,s,a,r),uo(null,t,s,!0,e,r);case 19:return xp(e,t,r);case 22:return mp(e,t,r)}throw Error(R(156,t.tag))};function Tp(e,t){return am(e,t)}function hg(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jt(e,t,r,s){return new hg(e,t,r,s)}function bd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function fg(e){if(typeof e=="function")return bd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Fo)return 11;if(e===Uo)return 14}return 2}function Mn(e,t){var r=e.alternate;return r===null?(r=jt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function $a(e,t,r,s,a,l){var i=2;if(s=e,typeof e=="function")bd(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case vr:return er(r.children,a,l,t);case Lo:i=8,a|=8;break;case Ii:return e=jt(12,r,t,a|2),e.elementType=Ii,e.lanes=l,e;case Ti:return e=jt(13,r,t,a),e.elementType=Ti,e.lanes=l,e;case Oi:return e=jt(19,r,t,a),e.elementType=Oi,e.lanes=l,e;case Bu:return Dl(r,a,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Uu:i=10;break e;case zu:i=9;break e;case Fo:i=11;break e;case Uo:i=14;break e;case yn:i=16,s=null;break e}throw Error(R(130,e==null?e:typeof e,""))}return t=jt(i,r,t,a),t.elementType=e,t.type=s,t.lanes=l,t}function er(e,t,r,s){return e=jt(7,e,s,t),e.lanes=r,e}function Dl(e,t,r,s){return e=jt(22,e,s,t),e.elementType=Bu,e.lanes=r,e.stateNode={isHidden:!1},e}function hi(e,t,r){return e=jt(6,e,null,t),e.lanes=r,e}function fi(e,t,r){return t=jt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function xg(e,t,r,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jl(0),this.expirationTimes=Jl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jl(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Nd(e,t,r,s,a,l,i,o,c){return e=new xg(e,t,r,o,c),t===1?(t=1,l===!0&&(t|=8)):t=0,l=jt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},sd(l),e}function gg(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yr,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function Op(e){if(!e)return _n;e=e._reactInternals;e:{if(cr(e)!==e||e.tag!==1)throw Error(R(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(dt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(R(171))}if(e.tag===1){var r=e.type;if(dt(r))return Om(e,r,t)}return t}function Mp(e,t,r,s,a,l,i,o,c){return e=Nd(r,s,!0,e,a,l,i,o,c),e.context=Op(null),r=e.current,s=rt(),a=On(r),l=rn(s,a),l.callback=t??null,In(r,l,a),e.current.lanes=a,Ks(e,a,s),ct(e,s),e}function Pl(e,t,r,s){var a=t.current,l=rt(),i=On(a);return r=Op(r),t.context===null?t.context=r:t.pendingContext=r,t=rn(l,i),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=In(a,t,i),e!==null&&(Ft(e,a,i,l),Ea(e,a,i)),i}function il(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Yc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function jd(e,t){Yc(e,t),(e=e.alternate)&&Yc(e,t)}function yg(){return null}var Rp=typeof reportError=="function"?reportError:function(e){console.error(e)};function wd(e){this._internalRoot=e}Al.prototype.render=wd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(R(409));Pl(e,t,null,null)};Al.prototype.unmount=wd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;lr(function(){Pl(null,e,null,null)}),t[an]=null}};function Al(e){this._internalRoot=e}Al.prototype.unstable_scheduleHydration=function(e){if(e){var t=mm();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Nn.length&&t!==0&&t<Nn[r].priority;r++);Nn.splice(r,0,e),r===0&&hm(e)}};function Sd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function El(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Kc(){}function vg(e,t,r,s,a){if(a){if(typeof s=="function"){var l=s;s=function(){var m=il(i);l.call(m)}}var i=Mp(t,s,e,0,null,!1,!1,"",Kc);return e._reactRootContainer=i,e[an]=i.current,Os(e.nodeType===8?e.parentNode:e),lr(),i}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var o=s;s=function(){var m=il(c);o.call(m)}}var c=Nd(e,0,!1,null,null,!1,!1,"",Kc);return e._reactRootContainer=c,e[an]=c.current,Os(e.nodeType===8?e.parentNode:e),lr(function(){Pl(t,c,r,s)}),c}function Il(e,t,r,s,a){var l=r._reactRootContainer;if(l){var i=l;if(typeof a=="function"){var o=a;a=function(){var c=il(i);o.call(c)}}Pl(t,i,e,a)}else i=vg(r,t,e,a,s);return il(i)}cm=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ps(t.pendingLanes);r!==0&&(Vo(t,r|1),ct(t,Ie()),!(ie&6)&&(Vr=Ie()+500,Un()))}break;case 13:lr(function(){var s=ln(e,1);if(s!==null){var a=rt();Ft(s,e,1,a)}}),jd(e,1)}};Ho=function(e){if(e.tag===13){var t=ln(e,134217728);if(t!==null){var r=rt();Ft(t,e,134217728,r)}jd(e,134217728)}};um=function(e){if(e.tag===13){var t=On(e),r=ln(e,t);if(r!==null){var s=rt();Ft(r,e,t,s)}jd(e,t)}};mm=function(){return ce};pm=function(e,t){var r=ce;try{return ce=e,t()}finally{ce=r}};Vi=function(e,t,r){switch(t){case"input":if($i(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var a=Nl(s);if(!a)throw Error(R(90));Hu(s),$i(s,a)}}}break;case"textarea":Gu(e,r);break;case"select":t=r.value,t!=null&&Er(e,!!r.multiple,t,!1)}};Zu=gd;em=lr;var bg={usingClientEntryPoint:!1,Events:[Qs,wr,Nl,Xu,qu,gd]},os={findFiberByHostInstance:Jn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ng={bundleType:os.bundleType,version:os.version,rendererPackageName:os.rendererPackageName,rendererConfig:os.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:dn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=rm(e),e===null?null:e.stateNode},findFiberByHostInstance:os.findFiberByHostInstance||yg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ba=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ba.isDisabled&&ba.supportsFiber)try{gl=ba.inject(Ng),Ht=ba}catch{}}gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bg;gt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sd(t))throw Error(R(200));return gg(e,t,null,r)};gt.createRoot=function(e,t){if(!Sd(e))throw Error(R(299));var r=!1,s="",a=Rp;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Nd(e,1,!1,null,null,r,!1,s,a),e[an]=t.current,Os(e.nodeType===8?e.parentNode:e),new wd(t)};gt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(R(188)):(e=Object.keys(e).join(","),Error(R(268,e)));return e=rm(t),e=e===null?null:e.stateNode,e};gt.flushSync=function(e){return lr(e)};gt.hydrate=function(e,t,r){if(!El(t))throw Error(R(200));return Il(null,e,t,!0,r)};gt.hydrateRoot=function(e,t,r){if(!Sd(e))throw Error(R(405));var s=r!=null&&r.hydratedSources||null,a=!1,l="",i=Rp;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=Mp(t,null,e,1,r??null,a,!1,l,i),e[an]=t.current,Os(e),s)for(e=0;e<s.length;e++)r=s[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Al(t)};gt.render=function(e,t,r){if(!El(t))throw Error(R(200));return Il(null,e,t,!1,r)};gt.unmountComponentAtNode=function(e){if(!El(e))throw Error(R(40));return e._reactRootContainer?(lr(function(){Il(null,null,e,!1,function(){e._reactRootContainer=null,e[an]=null})}),!0):!1};gt.unstable_batchedUpdates=gd;gt.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!El(r))throw Error(R(200));if(e==null||e._reactInternals===void 0)throw Error(R(38));return Il(e,t,r,!1,s)};gt.version="18.3.1-next-f1338f8080-20240426";function $p(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($p)}catch(e){console.error(e)}}$p(),$u.exports=gt;var jg=$u.exports,Jc=jg;Ai.createRoot=Jc.createRoot,Ai.hydrateRoot=Jc.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bs(){return Bs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Bs.apply(this,arguments)}var Cn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Cn||(Cn={}));const Qc="popstate";function wg(e){e===void 0&&(e={});function t(s,a){let{pathname:l,search:i,hash:o}=s.location;return wo("",{pathname:l,search:i,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){return typeof a=="string"?a:ol(a)}return kg(t,r,null,e)}function Ce(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function kd(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Sg(){return Math.random().toString(36).substr(2,8)}function Xc(e,t){return{usr:e.state,key:e.key,idx:t}}function wo(e,t,r,s){return r===void 0&&(r=null),Bs({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Kr(t):t,{state:r,key:t&&t.key||s||Sg()})}function ol(e){let{pathname:t="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Kr(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function kg(e,t,r,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:l=!1}=s,i=a.history,o=Cn.Pop,c=null,m=d();m==null&&(m=0,i.replaceState(Bs({},i.state,{idx:m}),""));function d(){return(i.state||{idx:null}).idx}function p(){o=Cn.Pop;let C=d(),x=C==null?null:C-m;m=C,c&&c({action:o,location:b.location,delta:x})}function h(C,x){o=Cn.Push;let y=wo(b.location,C,x);m=d()+1;let v=Xc(y,m),S=b.createHref(y);try{i.pushState(v,"",S)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;a.location.assign(S)}l&&c&&c({action:o,location:b.location,delta:1})}function w(C,x){o=Cn.Replace;let y=wo(b.location,C,x);m=d();let v=Xc(y,m),S=b.createHref(y);i.replaceState(v,"",S),l&&c&&c({action:o,location:b.location,delta:0})}function u(C){let x=a.location.origin!=="null"?a.location.origin:a.location.href,y=typeof C=="string"?C:ol(C);return y=y.replace(/ $/,"%20"),Ce(x,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,x)}let b={get action(){return o},get location(){return e(a,i)},listen(C){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Qc,p),c=C,()=>{a.removeEventListener(Qc,p),c=null}},createHref(C){return t(a,C)},createURL:u,encodeLocation(C){let x=u(C);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:w,go(C){return i.go(C)}};return b}var qc;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(qc||(qc={}));function Cg(e,t,r){return r===void 0&&(r="/"),Dg(e,t,r)}function Dg(e,t,r,s){let a=typeof t=="string"?Kr(t):t,l=Hr(a.pathname||"/",r);if(l==null)return null;let i=_p(e);Pg(i);let o=null;for(let c=0;o==null&&c<i.length;++c){let m=Fg(l);o=_g(i[c],m)}return o}function _p(e,t,r,s){t===void 0&&(t=[]),r===void 0&&(r=[]),s===void 0&&(s="");let a=(l,i,o)=>{let c={relativePath:o===void 0?l.path||"":o,caseSensitive:l.caseSensitive===!0,childrenIndex:i,route:l};c.relativePath.startsWith("/")&&(Ce(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let m=Rn([s,c.relativePath]),d=r.concat(c);l.children&&l.children.length>0&&(Ce(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),_p(l.children,t,d,m)),!(l.path==null&&!l.index)&&t.push({path:m,score:Rg(m,l.index),routesMeta:d})};return e.forEach((l,i)=>{var o;if(l.path===""||!((o=l.path)!=null&&o.includes("?")))a(l,i);else for(let c of Lp(l.path))a(l,i,c)}),t}function Lp(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,a=r.endsWith("?"),l=r.replace(/\?$/,"");if(s.length===0)return a?[l,""]:[l];let i=Lp(s.join("/")),o=[];return o.push(...i.map(c=>c===""?l:[l,c].join("/"))),a&&o.push(...i),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function Pg(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:$g(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const Ag=/^:[\w-]+$/,Eg=3,Ig=2,Tg=1,Og=10,Mg=-2,Zc=e=>e==="*";function Rg(e,t){let r=e.split("/"),s=r.length;return r.some(Zc)&&(s+=Mg),t&&(s+=Ig),r.filter(a=>!Zc(a)).reduce((a,l)=>a+(Ag.test(l)?Eg:l===""?Tg:Og),s)}function $g(e,t){return e.length===t.length&&e.slice(0,-1).every((s,a)=>s===t[a])?e[e.length-1]-t[t.length-1]:0}function _g(e,t,r){let{routesMeta:s}=e,a={},l="/",i=[];for(let o=0;o<s.length;++o){let c=s[o],m=o===s.length-1,d=l==="/"?t:t.slice(l.length)||"/",p=So({path:c.relativePath,caseSensitive:c.caseSensitive,end:m},d),h=c.route;if(!p)return null;Object.assign(a,p.params),i.push({params:a,pathname:Rn([l,p.pathname]),pathnameBase:Hg(Rn([l,p.pathnameBase])),route:h}),p.pathnameBase!=="/"&&(l=Rn([l,p.pathnameBase]))}return i}function So(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=Lg(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let l=a[0],i=l.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:s.reduce((m,d,p)=>{let{paramName:h,isOptional:w}=d;if(h==="*"){let b=o[p]||"";i=l.slice(0,l.length-b.length).replace(/(.)\/+$/,"$1")}const u=o[p];return w&&!u?m[h]=void 0:m[h]=(u||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:i,pattern:e}}function Lg(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),kd(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,c)=>(s.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function Fg(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return kd(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Hr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}const Ug=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zg=e=>Ug.test(e);function Bg(e,t){t===void 0&&(t="/");let{pathname:r,search:s="",hash:a=""}=typeof e=="string"?Kr(e):e,l;if(r)if(zg(r))l=r;else{if(r.includes("//")){let i=r;r=r.replace(/\/\/+/g,"/"),kd(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+r))}r.startsWith("/")?l=eu(r.substring(1),"/"):l=eu(r,t)}else l=t;return{pathname:l,search:Wg(s),hash:Gg(a)}}function eu(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function xi(e,t,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Vg(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Cd(e,t){let r=Vg(e);return t?r.map((s,a)=>a===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function Dd(e,t,r,s){s===void 0&&(s=!1);let a;typeof e=="string"?a=Kr(e):(a=Bs({},e),Ce(!a.pathname||!a.pathname.includes("?"),xi("?","pathname","search",a)),Ce(!a.pathname||!a.pathname.includes("#"),xi("#","pathname","hash",a)),Ce(!a.search||!a.search.includes("#"),xi("#","search","hash",a)));let l=e===""||a.pathname==="",i=l?"/":a.pathname,o;if(i==null)o=r;else{let p=t.length-1;if(!s&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),p-=1;a.pathname=h.join("/")}o=p>=0?t[p]:"/"}let c=Bg(a,o),m=i&&i!=="/"&&i.endsWith("/"),d=(l||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(m||d)&&(c.pathname+="/"),c}const Rn=e=>e.join("/").replace(/\/\/+/g,"/"),Hg=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Wg=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Gg=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Yg(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Fp=["post","put","patch","delete"];new Set(Fp);const Kg=["get",...Fp];new Set(Kg);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vs(){return Vs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Vs.apply(this,arguments)}const Tl=g.createContext(null),Up=g.createContext(null),cn=g.createContext(null),Ol=g.createContext(null),Gt=g.createContext({outlet:null,matches:[],isDataRoute:!1}),zp=g.createContext(null);function Jg(e,t){let{relative:r}=t===void 0?{}:t;Jr()||Ce(!1);let{basename:s,navigator:a}=g.useContext(cn),{hash:l,pathname:i,search:o}=Ml(e,{relative:r}),c=i;return s!=="/"&&(c=i==="/"?s:Rn([s,i])),a.createHref({pathname:c,search:o,hash:l})}function Jr(){return g.useContext(Ol)!=null}function zn(){return Jr()||Ce(!1),g.useContext(Ol).location}function Bp(e){g.useContext(cn).static||g.useLayoutEffect(e)}function Ct(){let{isDataRoute:e}=g.useContext(Gt);return e?cy():Qg()}function Qg(){Jr()||Ce(!1);let e=g.useContext(Tl),{basename:t,future:r,navigator:s}=g.useContext(cn),{matches:a}=g.useContext(Gt),{pathname:l}=zn(),i=JSON.stringify(Cd(a,r.v7_relativeSplatPath)),o=g.useRef(!1);return Bp(()=>{o.current=!0}),g.useCallback(function(m,d){if(d===void 0&&(d={}),!o.current)return;if(typeof m=="number"){s.go(m);return}let p=Dd(m,JSON.parse(i),l,d.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:Rn([t,p.pathname])),(d.replace?s.replace:s.push)(p,d.state,d)},[t,s,i,l,e])}const Xg=g.createContext(null);function qg(e){let t=g.useContext(Gt).outlet;return t&&g.createElement(Xg.Provider,{value:e},t)}function Vp(){let{matches:e}=g.useContext(Gt),t=e[e.length-1];return t?t.params:{}}function Ml(e,t){let{relative:r}=t===void 0?{}:t,{future:s}=g.useContext(cn),{matches:a}=g.useContext(Gt),{pathname:l}=zn(),i=JSON.stringify(Cd(a,s.v7_relativeSplatPath));return g.useMemo(()=>Dd(e,JSON.parse(i),l,r==="path"),[e,i,l,r])}function Zg(e,t){return ey(e,t)}function ey(e,t,r,s){Jr()||Ce(!1);let{navigator:a}=g.useContext(cn),{matches:l}=g.useContext(Gt),i=l[l.length-1],o=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let m=zn(),d;if(t){var p;let C=typeof t=="string"?Kr(t):t;c==="/"||(p=C.pathname)!=null&&p.startsWith(c)||Ce(!1),d=C}else d=m;let h=d.pathname||"/",w=h;if(c!=="/"){let C=c.replace(/^\//,"").split("/");w="/"+h.replace(/^\//,"").split("/").slice(C.length).join("/")}let u=Cg(e,{pathname:w}),b=ay(u&&u.map(C=>Object.assign({},C,{params:Object.assign({},o,C.params),pathname:Rn([c,a.encodeLocation?a.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?c:Rn([c,a.encodeLocation?a.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),l,r,s);return t&&b?g.createElement(Ol.Provider,{value:{location:Vs({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Cn.Pop}},b):b}function ty(){let e=dy(),t=Yg(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),r?g.createElement("pre",{style:a},r):null,null)}const ny=g.createElement(ty,null);class ry extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?g.createElement(Gt.Provider,{value:this.props.routeContext},g.createElement(zp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function sy(e){let{routeContext:t,match:r,children:s}=e,a=g.useContext(Tl);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),g.createElement(Gt.Provider,{value:t},s)}function ay(e,t,r,s){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),s===void 0&&(s=null),e==null){var l;if(!r)return null;if(r.errors)e=r.matches;else if((l=s)!=null&&l.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,o=(a=r)==null?void 0:a.errors;if(o!=null){let d=i.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);d>=0||Ce(!1),i=i.slice(0,Math.min(i.length,d+1))}let c=!1,m=-1;if(r&&s&&s.v7_partialHydration)for(let d=0;d<i.length;d++){let p=i[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(m=d),p.route.id){let{loaderData:h,errors:w}=r,u=p.route.loader&&h[p.route.id]===void 0&&(!w||w[p.route.id]===void 0);if(p.route.lazy||u){c=!0,m>=0?i=i.slice(0,m+1):i=[i[0]];break}}}return i.reduceRight((d,p,h)=>{let w,u=!1,b=null,C=null;r&&(w=o&&p.route.id?o[p.route.id]:void 0,b=p.route.errorElement||ny,c&&(m<0&&h===0?(uy("route-fallback"),u=!0,C=null):m===h&&(u=!0,C=p.route.hydrateFallbackElement||null)));let x=t.concat(i.slice(0,h+1)),y=()=>{let v;return w?v=b:u?v=C:p.route.Component?v=g.createElement(p.route.Component,null):p.route.element?v=p.route.element:v=d,g.createElement(sy,{match:p,routeContext:{outlet:d,matches:x,isDataRoute:r!=null},children:v})};return r&&(p.route.ErrorBoundary||p.route.errorElement||h===0)?g.createElement(ry,{location:r.location,revalidation:r.revalidation,component:b,error:w,children:y(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):y()},null)}var Hp=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Hp||{}),Wp=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Wp||{});function ly(e){let t=g.useContext(Tl);return t||Ce(!1),t}function iy(e){let t=g.useContext(Up);return t||Ce(!1),t}function oy(e){let t=g.useContext(Gt);return t||Ce(!1),t}function Gp(e){let t=oy(),r=t.matches[t.matches.length-1];return r.route.id||Ce(!1),r.route.id}function dy(){var e;let t=g.useContext(zp),r=iy(),s=Gp();return t!==void 0?t:(e=r.errors)==null?void 0:e[s]}function cy(){let{router:e}=ly(Hp.UseNavigateStable),t=Gp(Wp.UseNavigateStable),r=g.useRef(!1);return Bp(()=>{r.current=!0}),g.useCallback(function(a,l){l===void 0&&(l={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Vs({fromRouteId:t},l)))},[e,t])}const tu={};function uy(e,t,r){tu[e]||(tu[e]=!0)}function my(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Pd(e){let{to:t,replace:r,state:s,relative:a}=e;Jr()||Ce(!1);let{future:l,static:i}=g.useContext(cn),{matches:o}=g.useContext(Gt),{pathname:c}=zn(),m=Ct(),d=Dd(t,Cd(o,l.v7_relativeSplatPath),c,a==="path"),p=JSON.stringify(d);return g.useEffect(()=>m(JSON.parse(p),{replace:r,state:s,relative:a}),[m,p,a,r,s]),null}function py(e){return qg(e.context)}function we(e){Ce(!1)}function hy(e){let{basename:t="/",children:r=null,location:s,navigationType:a=Cn.Pop,navigator:l,static:i=!1,future:o}=e;Jr()&&Ce(!1);let c=t.replace(/^\/*/,"/"),m=g.useMemo(()=>({basename:c,navigator:l,static:i,future:Vs({v7_relativeSplatPath:!1},o)}),[c,o,l,i]);typeof s=="string"&&(s=Kr(s));let{pathname:d="/",search:p="",hash:h="",state:w=null,key:u="default"}=s,b=g.useMemo(()=>{let C=Hr(d,c);return C==null?null:{location:{pathname:C,search:p,hash:h,state:w,key:u},navigationType:a}},[c,d,p,h,w,u,a]);return b==null?null:g.createElement(cn.Provider,{value:m},g.createElement(Ol.Provider,{children:r,value:b}))}function fy(e){let{children:t,location:r}=e;return Zg(ko(t),r)}new Promise(()=>{});function ko(e,t){t===void 0&&(t=[]);let r=[];return g.Children.forEach(e,(s,a)=>{if(!g.isValidElement(s))return;let l=[...t,a];if(s.type===g.Fragment){r.push.apply(r,ko(s.props.children,l));return}s.type!==we&&Ce(!1),!s.props.index||!s.props.children||Ce(!1);let i={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(i.children=ko(s.props.children,l)),r.push(i)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dl(){return dl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},dl.apply(this,arguments)}function Yp(e,t){if(e==null)return{};var r={},s=Object.keys(e),a,l;for(l=0;l<s.length;l++)a=s[l],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function xy(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function gy(e,t){return e.button===0&&(!t||t==="_self")&&!xy(e)}function Co(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let s=e[r];return t.concat(Array.isArray(s)?s.map(a=>[r,a]):[[r,s]])},[]))}function yy(e,t){let r=Co(e);return t&&t.forEach((s,a)=>{r.has(a)||t.getAll(a).forEach(l=>{r.append(a,l)})}),r}const vy=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],by=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Ny="6";try{window.__reactRouterVersion=Ny}catch{}const jy=g.createContext({isTransitioning:!1}),wy="startTransition",nu=uf[wy];function Sy(e){let{basename:t,children:r,future:s,window:a}=e,l=g.useRef();l.current==null&&(l.current=wg({window:a,v5Compat:!0}));let i=l.current,[o,c]=g.useState({action:i.action,location:i.location}),{v7_startTransition:m}=s||{},d=g.useCallback(p=>{m&&nu?nu(()=>c(p)):c(p)},[c,m]);return g.useLayoutEffect(()=>i.listen(d),[i,d]),g.useEffect(()=>my(s),[s]),g.createElement(hy,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:i,future:s})}const ky=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Cy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,J=g.forwardRef(function(t,r){let{onClick:s,relative:a,reloadDocument:l,replace:i,state:o,target:c,to:m,preventScrollReset:d,viewTransition:p}=t,h=Yp(t,vy),{basename:w}=g.useContext(cn),u,b=!1;if(typeof m=="string"&&Cy.test(m)&&(u=m,ky))try{let v=new URL(window.location.href),S=m.startsWith("//")?new URL(v.protocol+m):new URL(m),P=Hr(S.pathname,w);S.origin===v.origin&&P!=null?m=P+S.search+S.hash:b=!0}catch{}let C=Jg(m,{relative:a}),x=Py(m,{replace:i,state:o,target:c,preventScrollReset:d,relative:a,viewTransition:p});function y(v){s&&s(v),v.defaultPrevented||x(v)}return g.createElement("a",dl({},h,{href:u||C,onClick:b||l?s:y,ref:r,target:c}))}),ru=g.forwardRef(function(t,r){let{"aria-current":s="page",caseSensitive:a=!1,className:l="",end:i=!1,style:o,to:c,viewTransition:m,children:d}=t,p=Yp(t,by),h=Ml(c,{relative:p.relative}),w=zn(),u=g.useContext(Up),{navigator:b,basename:C}=g.useContext(cn),x=u!=null&&Ay(h)&&m===!0,y=b.encodeLocation?b.encodeLocation(h).pathname:h.pathname,v=w.pathname,S=u&&u.navigation&&u.navigation.location?u.navigation.location.pathname:null;a||(v=v.toLowerCase(),S=S?S.toLowerCase():null,y=y.toLowerCase()),S&&C&&(S=Hr(S,C)||S);const P=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let E=v===y||!i&&v.startsWith(y)&&v.charAt(P)==="/",D=S!=null&&(S===y||!i&&S.startsWith(y)&&S.charAt(y.length)==="/"),O={isActive:E,isPending:D,isTransitioning:x},L=E?s:void 0,I;typeof l=="function"?I=l(O):I=[l,E?"active":null,D?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let j=typeof o=="function"?o(O):o;return g.createElement(J,dl({},p,{"aria-current":L,className:I,ref:r,style:j,to:c,viewTransition:m}),typeof d=="function"?d(O):d)});var Do;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Do||(Do={}));var su;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(su||(su={}));function Dy(e){let t=g.useContext(Tl);return t||Ce(!1),t}function Py(e,t){let{target:r,replace:s,state:a,preventScrollReset:l,relative:i,viewTransition:o}=t===void 0?{}:t,c=Ct(),m=zn(),d=Ml(e,{relative:i});return g.useCallback(p=>{if(gy(p,r)){p.preventDefault();let h=s!==void 0?s:ol(m)===ol(d);c(e,{replace:h,state:a,preventScrollReset:l,relative:i,viewTransition:o})}},[m,c,d,s,a,r,e,l,i,o])}function Kp(e){let t=g.useRef(Co(e)),r=g.useRef(!1),s=zn(),a=g.useMemo(()=>yy(s.search,r.current?null:t.current),[s.search]),l=Ct(),i=g.useCallback((o,c)=>{const m=Co(typeof o=="function"?o(a):o);r.current=!0,l("?"+m,c)},[l,a]);return[a,i]}function Ay(e,t){t===void 0&&(t={});let r=g.useContext(jy);r==null&&Ce(!1);let{basename:s}=Dy(Do.useViewTransitionState),a=Ml(e,{relative:t.relative});if(!r.isTransitioning)return!1;let l=Hr(r.currentLocation.pathname,s)||r.currentLocation.pathname,i=Hr(r.nextLocation.pathname,s)||r.nextLocation.pathname;return So(a.pathname,i)!=null||So(a.pathname,l)!=null}const Jp=[{value:"America/New_York",label:"Eastern (New York, Boston, Miami)",abbr:"ET"},{value:"America/Chicago",label:"Central (Chicago, Houston, Dallas)",abbr:"CT"},{value:"America/Denver",label:"Mountain (Denver, Phoenix, Salt Lake City)",abbr:"MT"},{value:"America/Phoenix",label:"Arizona (Phoenix  no daylight saving)",abbr:"MST"},{value:"America/Los_Angeles",label:"Pacific (Los Angeles, Seattle, San Francisco)",abbr:"PT"},{value:"America/Anchorage",label:"Alaska (Anchorage)",abbr:"AKT"},{value:"Pacific/Honolulu",label:"Hawaii (Honolulu)",abbr:"HT"}],Ey="America/New_York",Qp="gumgauge-timezone";function au(){try{const e=localStorage.getItem(Qp);if(e&&Jp.some(t=>t.value===e))return e}catch{}return Ey}function Iy(e){try{localStorage.setItem(Qp,e)}catch{}}const Xp=g.createContext(null);function Ty({children:e}){const[t,r]=g.useState(au);g.useEffect(()=>{r(au())},[]);const s=a=>{Iy(a),r(a)};return n.jsx(Xp.Provider,{value:{timezone:t,setTimezone:s},children:e})}function Qr(){const e=g.useContext(Xp);if(!e)throw new Error("useTimezoneContext must be used within TimezoneProvider");return e}const ir="gumgauge-admin-session",Ze="gumgauge-demo-mode",Oy="gumgauge",My=["I","II","III","IV","V"],Ry=["Sent","Accepted","Completed","Declined"],$y=["Sent","In progress","Received","Delivered"],lu=["X-ray","Panoramic X-ray","Bitewing","Periapical","Radiograph","CBCT (Cone Beam CT)","CT scan","MRI","Ultrasound","Intraoral photo","Extraoral photo","Photograph","GumGauge Scan","Other"],Ad=["Checkup","Cleaning","Emergency","Extraction","Filling","Follow-up","GumGauge Scan","New patient","Root canal","Whitening","Other"],vt=["MB","B","DB","ML","L","DL"];function _a(e){return e<=350?"Healthy":e<=530?"Moderate":"Unhealthy"}function _y(e){const t=Math.max(0,Math.min(1023,e));return Math.round(100-t/1023*100)}const Ly="demo-clinic-001",_t={dentist1:"demo-staff-001",dentist2:"demo-staff-002",hygienist:"demo-staff-003",receptionist:"demo-staff-004",assistant:"demo-staff-005"},le=["demo-patient-001","demo-patient-002","demo-patient-003","demo-patient-004","demo-patient-005","demo-patient-006","demo-patient-007","demo-patient-008"],$r={op1:"demo-op-001",op2:"demo-op-002",op3:"demo-op-003"};function Fy(){const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}function W(e,t){const r=new Date(e+"T12:00:00");return r.setDate(r.getDate()+t),r.toISOString().slice(0,10)}function Uy(){const e=new Date().toISOString();return{id:Ly,name:"Sunset Family Dental",address:"4521 Oak Boulevard, Suite 200",city:"Austin",state:"Texas",zip:"78731",phone:"(512) 555-0142",timezone:"America/Chicago",registeredAt:e,deviceCount:2}}function zy(){return[{id:$r.op1,name:"Op 1",defaultDurationMinutes:45},{id:$r.op2,name:"Op 2",defaultDurationMinutes:45},{id:$r.op3,name:"Op 3",defaultDurationMinutes:60}]}function By(e){if(!e)return 9*60;const[t,r]=e.split(":").map(Number);return(t??0)*60+(r??0)}function iu(e,t,r){const s=By(t),a=new Date(e+"T12:00:00");a.setHours(Math.floor(s/60),s%60,0,0);const l=new Date(a.getTime()+r*60*1e3);return{start:a.toISOString(),end:l.toISOString()}}function ou(e){return e?e.includes("Torres")?_t.dentist2:(e.includes("Chen"),_t.dentist1):_t.dentist1}function du(e){if(e){if(e.includes("1"))return $r.op1;if(e.includes("2"))return $r.op2;if(e.includes("3"))return $r.op3}}function Vy(){const e=new Date().toISOString(),t=qp(),r=[];return t.forEach((s,a)=>{if(s.dateOfAppointment){const l=s.appointmentDurationMinutes??45,{start:i,end:o}=iu(s.dateOfAppointment,s.appointmentTime,l);r.push({id:`demo-apt-${a}-current`,patientId:s.id,providerId:ou(s.appointmentDoctor),operatoryId:du(s.appointmentRoom),start:i,end:o,type:s.appointmentType,typeOther:s.appointmentTypeOther,status:s.appointmentStatus,notes:void 0,createdAt:e,updatedAt:e})}if(s.dateOfNextAppointment){const l=s.nextAppointmentDurationMinutes??30,{start:i,end:o}=iu(s.dateOfNextAppointment,s.nextAppointmentTime,l);r.push({id:`demo-apt-${a}-next`,patientId:s.id,providerId:ou(s.appointmentDoctor),operatoryId:du(s.nextAppointmentRoom),start:i,end:o,type:s.appointmentType,typeOther:s.appointmentTypeOther,notes:void 0,createdAt:e,updatedAt:e})}}),r}function qp(){const e=new Date().toISOString(),t=Fy(),r=W(t,1),s=W(t,7),a=W(t,14),l=W(t,-30),i=W(t,-7);return[{id:le[0],firstName:"Maria",lastName:"Santos",dateOfBirth:"1985-03-12",phone:"(512) 555-0101",email:"maria.santos@email.com",address:"1200 Riverside Dr, Austin, TX 78741",allergies:"Penicillin",medicalConditions:"Hypertension",currentMedications:"Lisinopril 10mg daily",emergencyContactName:"Carlos Santos",emergencyContactPhone:"(512) 555-0102",insuranceProvider:"UnitedHealthcare",insurancePlan:"PPO",insuranceMemberId:"UHC-8821-4492",insuranceGroupNumber:"GP-7722",insuranceDeductibleAnnual:500,insuranceDeductibleRemaining:200,dateOfAppointment:t,dateOfNextAppointment:s,appointmentTime:"09:00",nextAppointmentTime:"10:30",appointmentType:"Cleaning",appointmentDoctor:"Dr. Sarah Chen",chiefComplaint:"Routine 6-month cleaning",treatmentPlan:"Continue 6-month recall. Monitor lower right molar for possible sealant.",lastCleaningDate:l,dentistNotes:"Patient in good oral health. No new caries. Recommended fluoride varnish at next visit.",appointmentDurationMinutes:45,nextAppointmentDurationMinutes:30,appointmentRoom:"Op 1",nextAppointmentRoom:"Op 2",appointmentStatus:"In Chair",recallIntervalMonths:6,currentVisitStartedAt:new Date(Date.now()-15*60*1e3).toISOString(),currentVisitNotes:"Patient checked in. X-rays reviewed. Prophy in progress.",currentVisitUseVoiceNotes:!1,visitHistory:[{startedAt:`${l}T09:00:00`,endedAt:`${l}T09:45:00`,durationMinutes:45,clinicalSummary:"Prophylaxis completed. No issues.",voiceNotesConsent:!1},{startedAt:`${W(l,-180)}T14:00:00`,endedAt:`${W(l,-180)}T14:50:00`,durationMinutes:50,clinicalSummary:"Cleaning and exam. One small filling discussed for future.",voiceNotesConsent:!1}],clinicalNotes:[{id:"cn1",date:l,content:"Prophylaxis (D1110) completed. Bitewings taken. No caries. Patient educated on flossing.",author:"Dr. Sarah Chen",createdAt:`${l}T10:00:00`},{id:"cn2",date:W(l,-180),content:"Routine cleaning. Mild gingivitis in lower anteriorrecommended improved flossing.",author:"Dr. Sarah Chen",createdAt:`${W(l,-180)}T15:00:00`}],balanceDue:0,paymentHistory:[{id:"ph1",date:l,amount:125,note:"Prophylaxis",amountOutOfPocket:25,amountWithInsurance:100}],paymentMethods:[{id:"pm1",type:"Card",lastFour:"4242",cardBrand:"Visa",nameOnCard:"Maria Santos",expiryMonth:12,expiryYear:2027,addedAt:`${l}T08:00:00`}],invoiceLines:[{id:"inv1",appointmentDate:l,procedureCode:"D1110",description:"Prophylaxis - adult",amount:125,amountWithInsurance:100,amountOutOfPocket:25,status:"Paid",addedAt:`${l}T09:00:00`}],prescriptions:[{id:"rx1",date:W(l,-365),medication:"Amoxicillin",strength:"500mg capsule",sig:"Take 1 capsule by mouth three times daily for 7 days",quantity:21,refills:0,prescriberName:"Dr. Sarah Chen",prescriberCredentials:"DDS",signedAt:`${W(l,-365)}T11:00:00`}],treatmentPlans:[{id:"tp1",createdAt:l,phases:[{id:"ph1",name:"Phase 1: Prevention",procedures:[{code:"D1110",description:"Prophylaxis - adult",estimatedFee:125}],notes:"Every 6 months"}],status:"In progress",acceptedAt:l,presentedBy:"Dr. Sarah Chen"}],perioExams:[{id:"pe1",examDate:l,teeth:[{tooth:3,pd:[2,2,2,2,2,2],bleeding:[!1,!1,!1,!1,!1,!1]},{tooth:2,pd:[2,3,2,2,2,2],bleeding:[!1,!0,!1,!1,!1,!1]},{tooth:1,pd:[2,2,2,2,2,2],bleeding:[!1,!1,!1,!1,!1,!1]}],notes:"Overall healthy. Slight bleeding at #2 B."}],gumGaugeExams:[{id:"gg1",scanDate:l,teeth:[{tooth:8,density:280,lightPenetrationPercent:73,healthResult:_a(280)},{tooth:7,density:310,lightPenetrationPercent:70,healthResult:_a(310)},{tooth:6,density:290,lightPenetrationPercent:72,healthResult:_a(290)}],notes:"Baseline GumGauge scan. Results within normal range."}],toothConditions:[{id:"tc1",tooth:3,surface:"O",condition:"Existing Restoration",status:"Completed",completedAt:W(l,-730),note:"Composite",addedAt:`${W(l,-730)}T00:00:00`}],documents:[{id:"doc1",type:"Consent",title:"Treatment consent - prophylaxis",date:l,addedAt:`${l}T08:30:00`},{id:"doc2",type:"Insurance",title:"Insurance card on file",date:l,addedAt:`${l}T08:30:00`}],lastRecallReminderSent:W(t,-150),lastAppointmentReminderSent:W(t,-2),createdAt:`${W(t,-400)}T00:00:00`,updatedAt:e},{id:le[1],firstName:"James",lastName:"Wilson",dateOfBirth:"1972-08-22",phone:"(512) 555-0202",email:"j.wilson@email.com",address:"8900 Research Blvd, Austin, TX 78758",allergies:"No known allergies",medicalConditions:"Diabetes (Type 2)",currentMedications:"Metformin 500mg twice daily",emergencyContactName:"Linda Wilson",emergencyContactPhone:"(512) 555-0203",insuranceProvider:"Humana",insurancePlan:"PPO",insuranceMemberId:"HUM-4412-8891",insuranceGroupNumber:"GRP-1122",insuranceDeductibleAnnual:250,insuranceDeductibleRemaining:100,dateOfAppointment:t,dateOfNextAppointment:a,appointmentTime:"10:15",nextAppointmentTime:"14:00",appointmentType:"Filling",appointmentDoctor:"Dr. Michael Torres",chiefComplaint:"Sensitivity on upper left molar",treatmentPlan:"D2392 resin 2 surfaces tooth #14. Possible crown if decay deeper.",lastCleaningDate:i,dentistNotes:"Moderate caries on #14 MO. Patient prefers composite. Schedule 45 min.",appointmentDurationMinutes:45,nextAppointmentDurationMinutes:60,appointmentRoom:"Op 3",nextAppointmentRoom:"Op 3",appointmentStatus:"Scheduled",recallIntervalMonths:6,visitHistory:[{startedAt:`${i}T10:00:00`,endedAt:`${i}T10:40:00`,durationMinutes:40,clinicalSummary:"Exam and cleaning. Caries noted #14.",voiceNotesConsent:!1}],clinicalNotes:[{id:"cn1",date:i,content:"D0150 comprehensive exam. Caries #14 MO. Treatment plan presented and accepted. D2392 scheduled.",author:"Dr. Michael Torres",createdAt:`${i}T11:00:00`}],balanceDue:85,paymentHistory:[{id:"ph1",date:i,amount:150,note:"Comprehensive exam",amountOutOfPocket:50,amountWithInsurance:100}],paymentMethods:[{id:"pm1",type:"Card",lastFour:"5555",cardBrand:"Mastercard",nameOnCard:"James Wilson",expiryMonth:6,expiryYear:2026,addedAt:`${i}T09:00:00`}],invoiceLines:[{id:"inv1",appointmentDate:i,procedureCode:"D0150",description:"Comprehensive oral evaluation",amount:150,amountWithInsurance:100,amountOutOfPocket:50,status:"Paid",addedAt:`${i}T10:00:00`},{id:"inv2",appointmentDate:t,procedureCode:"D2392",description:"Resin - 2 surfaces, posterior",amount:225,amountWithInsurance:140,amountOutOfPocket:85,status:"Pending",addedAt:e}],prescriptions:[],treatmentPlans:[{id:"tp1",createdAt:i,phases:[{id:"ph1",name:"Phase 1: Restorative",procedures:[{code:"D2392",description:"Resin - 2 surfaces, posterior (#14)",estimatedFee:225}],notes:"MO composite"}],status:"Accepted",acceptedAt:i,presentedBy:"Dr. Michael Torres"}],perioExams:[],gumGaugeExams:[],toothConditions:[{id:"tc1",tooth:14,surface:"MO",condition:"Caries",status:"Planned",note:"D2392 scheduled",addedAt:`${i}T00:00:00`}],documents:[{id:"doc1",type:"Consent",title:"Treatment consent",date:i,addedAt:`${i}T09:30:00`}],lastAppointmentReminderSent:W(t,-1),createdAt:`${W(t,-200)}T00:00:00`,updatedAt:e},{id:le[2],firstName:"Yuki",lastName:"Tanaka",dateOfBirth:"1991-11-05",phone:"(512) 555-0303",email:"yuki.tanaka@email.com",address:"2200 Guadalupe St, Austin, TX 78705",allergies:"Latex",medicalConditions:"None",currentMedications:"None",emergencyContactName:"Ken Tanaka",emergencyContactPhone:"(512) 555-0304",insuranceProvider:"Cigna",insurancePlan:"DPPO",insuranceMemberId:"CIG-2298-7741",insuranceGroupNumber:"DENT-4455",dateOfAppointment:t,dateOfNextAppointment:s,appointmentTime:"14:00",nextAppointmentTime:"09:00",appointmentType:"GumGauge Scan",appointmentDoctor:"Dr. Sarah Chen",chiefComplaint:"Wants to track gum health over time",treatmentPlan:"Baseline GumGauge scan. Follow-up in 6 months.",dentistNotes:"New patient. No latex products. Schedule in non-latex operatory.",appointmentDurationMinutes:30,nextAppointmentDurationMinutes:30,appointmentRoom:"Op 2",nextAppointmentRoom:"Op 2",appointmentStatus:"Checked In",recallIntervalMonths:6,visitHistory:[],clinicalNotes:[],balanceDue:0,paymentHistory:[],paymentMethods:[],invoiceLines:[],prescriptions:[],treatmentPlans:[],perioExams:[],gumGaugeExams:[],toothConditions:[],documents:[],createdAt:`${W(t,-30)}T00:00:00`,updatedAt:e},{id:le[3],firstName:"Robert",lastName:"Johnson",dateOfBirth:"1958-01-30",phone:"(512) 555-0404",email:"r.johnson@email.com",address:"5000 Burnet Rd, Austin, TX 78756",allergies:"Sulfa drugs",medicalConditions:"Hypertension, Blood thinners (anticoagulants)",currentMedications:"Amlodipine 5mg, Warfarin 5mg daily",asaStatus:"III",premedRequired:!0,premedNote:"Medical clearance obtained for anticoagulation; use local hemostasis.",premedLastGivenDate:i,emergencyContactName:"Susan Johnson",emergencyContactPhone:"(512) 555-0405",insuranceProvider:"UnitedHealthcare",insurancePlan:"Medicare",insuranceMemberId:"UHC-MCR-9921",insuranceGroupNumber:"MCR-001",dateOfAppointment:r,dateOfNextAppointment:W(t,21),appointmentTime:"08:30",nextAppointmentTime:"11:00",appointmentType:"Root canal",appointmentDoctor:"Dr. Michael Torres",chiefComplaint:"Severe pain upper right back tooth",treatmentPlan:"D3330 endodontic therapy tooth #3. Crown to follow.",lastCleaningDate:l,dentistNotes:"Medical clearance for anticoagulants obtained. Use local hemostasis. No sulfa abx.",appointmentDurationMinutes:90,nextAppointmentDurationMinutes:60,appointmentRoom:"Op 3",nextAppointmentRoom:"Op 3",appointmentStatus:"Scheduled",recallIntervalMonths:6,visitHistory:[{startedAt:`${i}T15:00:00`,endedAt:`${i}T15:45:00`,durationMinutes:45,clinicalSummary:"Emergency exam. Diagnosis: necrotic pulp #3. RCT recommended.",voiceNotesConsent:!1}],clinicalNotes:[{id:"cn1",date:i,content:"Emergency visit. Pulp test #3 negative. Radiograph shows periapical radiolucency. D3330 and D2740 treatment plan accepted.",author:"Dr. Michael Torres",createdAt:`${i}T16:00:00`}],balanceDue:450,paymentHistory:[{id:"ph1",date:i,amount:150,note:"Emergency exam",amountOutOfPocket:150}],paymentMethods:[{id:"pm1",type:"Card",lastFour:"1234",cardBrand:"Visa",nameOnCard:"Robert Johnson",expiryMonth:3,expiryYear:2028,addedAt:`${i}T14:30:00`}],invoiceLines:[{id:"inv1",appointmentDate:i,procedureCode:"D0150",description:"Comprehensive oral evaluation (emergency)",amount:150,status:"Paid",addedAt:`${i}T15:00:00`},{id:"inv2",appointmentDate:r,procedureCode:"D3330",description:"Endodontic therapy - molar (#3)",amount:1295,amountWithInsurance:845,amountOutOfPocket:450,status:"Pending",addedAt:e}],insuranceClaims:[{id:"cl1",date:r,procedureCodes:["D3330"],description:"Root canal #3",amount:1295,status:"Draft",note:"To send after RCT"}],prescriptions:[{id:"rx1",date:i,medication:"Amoxicillin",strength:"500mg capsule",sig:"Take 1 capsule by mouth three times daily for 7 days (no sulfa)",quantity:21,refills:0,prescriberName:"Dr. Michael Torres",prescriberCredentials:"DDS",signedAt:`${i}T16:30:00`}],treatmentPlans:[{id:"tp1",createdAt:i,phases:[{id:"ph1",name:"Phase 1: Endodontic",procedures:[{code:"D3330",description:"Endodontic therapy - molar (#3)",estimatedFee:1295}]},{id:"ph2",name:"Phase 2: Restorative",procedures:[{code:"D2740",description:"Crown - porcelain/ceramic (#3)",estimatedFee:1295}],notes:"After RCT healing"}],status:"Accepted",acceptedAt:i,presentedBy:"Dr. Michael Torres"}],perioExams:[],gumGaugeExams:[],toothConditions:[{id:"tc1",tooth:3,condition:"Root Canal",status:"Planned",note:"D3330 scheduled",addedAt:`${i}T00:00:00`}],documents:[{id:"doc1",type:"Referral",title:"Medical clearance - anticoagulation",date:i,note:"Cleared for RCT",addedAt:`${i}T14:00:00`}],referrals:[{id:"ref1",referredTo:"Cardiology Associates",reason:"Medical clearance for anticoagulation prior to RCT",date:i,status:"Completed",responseNote:"Cleared for RCT",addedAt:`${i}T14:00:00`}],labCases:[{id:"lab1",labName:"Premier Dental Lab",caseType:"Crown",sentDate:r,expectedDate:W(t,14),status:"Sent",toothOrTeeth:"3",prescriptionNote:"D2740 PFM crown #3 post-RCT",addedAt:e}],lastAppointmentReminderSent:W(t,-1),createdAt:`${W(t,-500)}T00:00:00`,updatedAt:e},{id:le[4],firstName:"Emily",lastName:"Davis",dateOfBirth:"2008-06-14",phone:"(512) 555-0505",email:"emily.davis.parent@email.com",address:"3100 Bee Caves Rd, Austin, TX 78746",allergies:"No known allergies",medicalConditions:"None",currentMedications:"None",emergencyContactName:"David Davis",emergencyContactPhone:"(512) 555-0506",insuranceProvider:"CVS Health (Aetna)",insurancePlan:"DHMO",insuranceMemberId:"AET-5543-2210",insuranceGroupNumber:"CHILD-8899",dateOfAppointment:s,dateOfNextAppointment:W(t,90),appointmentTime:"15:30",nextAppointmentTime:"16:00",appointmentType:"Checkup",appointmentDoctor:"Dr. Sarah Chen",chiefComplaint:"Routine pediatric checkup",treatmentPlan:"D0120 periodic eval, D1120 prophy. Sealants if indicated.",lastCleaningDate:W(t,-180),dentistNotes:"Minor. Parent present for visits. Good hygiene per mom.",appointmentDurationMinutes:30,nextAppointmentDurationMinutes:30,appointmentRoom:"Op 1",nextAppointmentRoom:"Op 1",recallIntervalMonths:6,visitHistory:[{startedAt:`${W(t,-180)}T16:00:00`,endedAt:`${W(t,-180)}T16:35:00`,durationMinutes:35,clinicalSummary:"Child prophy and exam. No caries.",voiceNotesConsent:!1}],clinicalNotes:[{id:"cn1",date:W(t,-180),content:"D1120 prophy, D0120 exam. All clear. Next recall in 6 months.",author:"Dr. Sarah Chen",createdAt:`${W(t,-180)}T17:00:00`}],balanceDue:0,paymentHistory:[{id:"ph1",date:W(t,-180),amount:95,note:"Child prophy",amountWithInsurance:95,amountOutOfPocket:0}],paymentMethods:[],invoiceLines:[{id:"inv1",appointmentDate:W(t,-180),procedureCode:"D1120",description:"Prophylaxis - child",amount:95,amountWithInsurance:95,amountOutOfPocket:0,status:"Paid",addedAt:`${W(t,-180)}T16:00:00`}],prescriptions:[],treatmentPlans:[],perioExams:[],gumGaugeExams:[],toothConditions:[],documents:[],lastRecallReminderSent:W(t,-30),createdAt:`${W(t,-400)}T00:00:00`,updatedAt:e},{id:le[5],firstName:"Patricia",lastName:"Martinez",dateOfBirth:"1965-09-28",phone:"(512) 555-0606",email:"p.martinez@email.com",address:"6500 N Lamar Blvd, Austin, TX 78752",allergies:"Penicillin, Codeine",medicalConditions:"Diabetes, Osteoporosis",currentMedications:"Metformin, Alendronate weekly",emergencyContactName:"Jose Martinez",emergencyContactPhone:"(512) 555-0607",insuranceProvider:"Blue Cross Blue Shield of Michigan",insurancePlan:"PPO",insuranceMemberId:"BCBS-7721-3344",insuranceGroupNumber:"BC-9988",insuranceDeductibleAnnual:500,insuranceDeductibleRemaining:500,dateOfAppointment:a,dateOfNextAppointment:W(t,98),appointmentTime:"11:00",nextAppointmentTime:"10:00",appointmentType:"New patient",appointmentDoctor:"Dr. Michael Torres",chiefComplaint:"First visit to practice, need full exam",treatmentPlan:"D0150 comprehensive exam, full series X-rays. Treatment plan to follow.",dentistNotes:"New patient. Medical hx significantavoid penicillin/codeine. Pre-med not required per AHA.",appointmentDurationMinutes:60,nextAppointmentDurationMinutes:45,appointmentRoom:"Op 2",nextAppointmentRoom:"Op 2",recallIntervalMonths:6,visitHistory:[],clinicalNotes:[],balanceDue:0,paymentHistory:[],paymentMethods:[],invoiceLines:[],prescriptions:[],treatmentPlans:[],perioExams:[],gumGaugeExams:[],toothConditions:[],documents:[],createdAt:`${W(t,-14)}T00:00:00`,updatedAt:e},{id:le[6],firstName:"David",lastName:"Kim",dateOfBirth:"1982-04-17",phone:"(512) 555-0707",email:"david.kim@email.com",address:"9828 Great Hills Trail, Austin, TX 78759",allergies:"No known allergies",medicalConditions:"Anxiety / depression",currentMedications:"Sertraline 50mg daily",emergencyContactName:"Sarah Kim",emergencyContactPhone:"(512) 555-0708",insuranceProvider:"Kaiser Permanente",insurancePlan:"HMO",insuranceMemberId:"KP-2298-8877",insuranceGroupNumber:"HMO-4411",dateOfAppointment:W(t,3),dateOfNextAppointment:W(t,93),appointmentTime:"09:00",nextAppointmentTime:"14:30",appointmentType:"Follow-up",appointmentDoctor:"Dr. Sarah Chen",chiefComplaint:"Follow-up after extraction",treatmentPlan:"Healing check #19. Discuss implant or bridge options.",lastCleaningDate:W(t,-60),dentistNotes:"Extraction #19 completed 2 weeks ago. Patient considering implant. Sedation may be option given anxiety.",appointmentDurationMinutes:30,nextAppointmentDurationMinutes:60,appointmentRoom:"Op 1",nextAppointmentRoom:"Op 3",recallIntervalMonths:6,visitHistory:[{startedAt:`${W(t,-14)}T09:30:00`,endedAt:`${W(t,-14)}T10:15:00`,durationMinutes:45,clinicalSummary:"D7240 extraction #19. Gauze and post-op instructions given.",voiceNotesConsent:!1}],clinicalNotes:[{id:"cn1",date:W(t,-14),content:"Extraction #19. Socket preserved. Rx: ibuprofen, avoid straw. Follow-up in 2 weeks.",author:"Dr. Sarah Chen",createdAt:`${W(t,-14)}T10:30:00`}],balanceDue:0,paymentHistory:[{id:"ph1",date:W(t,-14),amount:195,note:"Extraction",amountOutOfPocket:50,amountWithInsurance:145}],paymentMethods:[{id:"pm1",type:"Card",lastFour:"8765",cardBrand:"Discover",nameOnCard:"David Kim",expiryMonth:9,expiryYear:2027,addedAt:`${W(t,-14)}T09:00:00`}],invoiceLines:[{id:"inv1",appointmentDate:W(t,-14),procedureCode:"D7240",description:"Extraction - erupted tooth (#19)",amount:195,amountWithInsurance:145,amountOutOfPocket:50,status:"Paid",addedAt:`${W(t,-14)}T09:30:00`}],prescriptions:[{id:"rx1",date:W(t,-14),medication:"Ibuprofen",strength:"400mg tablet",sig:"Take 1 tablet by mouth every 6 hours as needed for pain",quantity:20,refills:0,prescriberName:"Dr. Sarah Chen",prescriberCredentials:"DDS",signedAt:`${W(t,-14)}T10:15:00`}],treatmentPlans:[{id:"tp1",createdAt:W(t,-14),phases:[{id:"ph1",name:"Phase 1: Extraction",procedures:[{code:"D7240",description:"Extraction #19",estimatedFee:195}],notes:"Completed"},{id:"ph2",name:"Phase 2: Replacement",procedures:[{code:"Implant",description:"Implant #19",estimatedFee:3500},{code:"D6057",description:"Implant crown",estimatedFee:1295}],notes:"To discuss at follow-up"}],status:"In progress",acceptedAt:W(t,-14),presentedBy:"Dr. Sarah Chen"}],perioExams:[],gumGaugeExams:[],toothConditions:[{id:"tc1",tooth:19,condition:"Extraction",status:"Completed",completedAt:W(t,-14).toString(),note:"Healing",addedAt:`${W(t,-14)}T00:00:00`}],documents:[{id:"doc1",type:"Consent",title:"Extraction consent",date:W(t,-14),addedAt:`${W(t,-14)}T09:00:00`}],lastAppointmentReminderSent:W(t,-2),createdAt:`${W(t,-300)}T00:00:00`,updatedAt:e},{id:le[7],firstName:"Lisa",lastName:"Nguyen",dateOfBirth:"1995-12-03",phone:"(512) 555-0808",email:"lisa.nguyen@email.com",address:"4477 S Lamar Blvd, Austin, TX 78745",allergies:"Latex",medicalConditions:"None",currentMedications:"None",emergencyContactName:"Tom Nguyen",emergencyContactPhone:"(512) 555-0809",insuranceProvider:"UnitedHealthcare",insurancePlan:"PPO",insuranceMemberId:"UHC-3344-5566",insuranceGroupNumber:"GP-2233",dateOfAppointment:W(t,5),dateOfNextAppointment:W(t,185),appointmentTime:"13:00",nextAppointmentTime:"09:00",appointmentType:"Whitening",appointmentDoctor:"Dr. Sarah Chen",chiefComplaint:"In-office whitening",treatmentPlan:"In-office whitening (full arch). Take-home trays for maintenance.",dentistNotes:"No latex. Patient has had cleaning within 6 months. Good candidate for whitening.",appointmentDurationMinutes:90,nextAppointmentDurationMinutes:30,appointmentRoom:"Op 2",nextAppointmentRoom:"Op 2",recallIntervalMonths:6,visitHistory:[],clinicalNotes:[],balanceDue:0,paymentHistory:[],paymentMethods:[],invoiceLines:[],prescriptions:[],treatmentPlans:[{id:"tp1",createdAt:W(t,-7),phases:[{id:"ph1",name:"Whitening",procedures:[{description:"In-office whitening",estimatedFee:450},{description:"Take-home trays",estimatedFee:250}],notes:"Optional take-home"}],status:"Accepted",acceptedAt:W(t,-7),presentedBy:"Dr. Sarah Chen"}],perioExams:[],gumGaugeExams:[],toothConditions:[],documents:[],createdAt:`${W(t,-60)}T00:00:00`,updatedAt:e}]}function Hy(){const e=new Date().toISOString();return[{id:_t.dentist1,firstName:"Sarah",lastName:"Chen",position:"Dentist",email:"sarah.chen@sunsetdental.demo",phone:"(512) 555-0143",loginEmail:"dr.chen@demo",password:"demo",hireDate:"2020-06-01",status:"Active",licenseNumber:"TX-12345",licenseExpiry:"2026-12-31",emergencyContactName:"James Chen",emergencyContactPhone:"(512) 555-0199",notes:"Lead dentist. General and preventive.",assignedPatientIds:[le[0],le[2],le[4],le[6],le[7]],createdAt:e,updatedAt:e},{id:_t.dentist2,firstName:"Michael",lastName:"Torres",position:"Dentist",email:"michael.torres@sunsetdental.demo",phone:"(512) 555-0144",loginEmail:"dr.torres@demo",password:"demo",hireDate:"2021-03-15",status:"Active",licenseNumber:"TX-22345",licenseExpiry:"2027-06-30",emergencyContactName:"Maria Torres",emergencyContactPhone:"(512) 555-0198",notes:"Restorative and endo.",assignedPatientIds:[le[1],le[3],le[5]],createdAt:e,updatedAt:e},{id:_t.hygienist,firstName:"Jennifer",lastName:"Walsh",position:"Dental Hygienist",email:"jennifer.walsh@sunsetdental.demo",phone:"(512) 555-0145",hireDate:"2019-08-01",status:"Active",emergencyContactName:"Tom Walsh",emergencyContactPhone:"(512) 555-0197",notes:"Full-time hygienist.",assignedPatientIds:[],createdAt:e,updatedAt:e},{id:_t.receptionist,firstName:"Amy",lastName:"Rivera",position:"Front Desk / Receptionist",email:"amy.rivera@sunsetdental.demo",phone:"(512) 555-0146",hireDate:"2022-01-10",status:"Active",emergencyContactName:"Carlos Rivera",emergencyContactPhone:"(512) 555-0196",notes:"Scheduling and check-in.",createdAt:e,updatedAt:e},{id:_t.assistant,firstName:"David",lastName:"Park",position:"Dental Assistant",email:"david.park@sunsetdental.demo",phone:"(512) 555-0147",hireDate:"2023-02-20",status:"Active",emergencyContactName:"Grace Park",emergencyContactPhone:"(512) 555-0195",notes:"Chairside assistant.",createdAt:e,updatedAt:e}]}function Wy(){const e=new Date,t=[],r=(s,a,l,i,o,c)=>{const m=new Date(e);m.setDate(m.getDate()-s),t.push({id:`demo-audit-${t.length+1}`,timestamp:m.toISOString(),actor:"Dr. Sarah Chen",action:a,entityType:l,entityId:i,details:o})};return r(0,"chart.view","patient",le[0],"Maria Santos"),r(0,"chart.view","patient",le[1],"James Wilson"),r(1,"patient.update","patient",le[1],"Appointment rescheduled"),r(1,"patient.update","patient",le[3],"Treatment plan accepted"),r(2,"chart.view","patient",le[3],"Robert Johnson"),r(2,"patient.update","patient",le[2],"Yuki Tanaka"),r(3,"patient.create","patient",le[2],"Yuki Tanaka"),r(3,"chart.view","patient",le[6],"David Kim"),r(4,"patient.update","patient",le[6],"Payment recorded"),r(4,"staff.update","staff",_t.dentist1),r(5,"chart.view","patient",le[4],"Emily Davis"),r(5,"patient.update","patient",le[0],"Clinical note added"),r(6,"chart.view","patient",le[7],"Lisa Nguyen"),r(6,"patient.update","patient",le[5],"New patient intake"),r(7,"staff.create","staff",_t.assistant,"David Park"),r(7,"chart.view","patient",le[1],"James Wilson"),r(8,"patient.update","patient",le[3],"Prescription signed"),r(8,"chart.view","patient",le[0],"Maria Santos"),r(9,"patient.update","patient",le[0],"Visit ended"),r(10,"chart.view","patient",le[4],"Emily Davis"),r(10,"patient.update","patient",le[4],"Recall reminder sent"),t}const Gy="gumgauge-audit",cl="gumgauge-demo-audit",Zp=2e3;let eh,th;function nh(){try{return typeof sessionStorage<"u"&&sessionStorage.getItem(Ze)==="1"}catch{return!1}}function Rl(){return nh()?cl:Gy}function Yy(){if(nh())try{if(localStorage.getItem(cl))return;const t=Wy();localStorage.setItem(cl,JSON.stringify(t))}catch{}}function gi(e,t){eh=e,th=t}function rh(){const e=Rl();e===cl&&Yy();try{const t=localStorage.getItem(e);return t?JSON.parse(t):[]}catch{return[]}}function Ky(e,t){const r=e.slice(-Zp);localStorage.setItem(t,JSON.stringify(r))}function un(e){const t=Rl(),r=rh();r.push({...e,id:crypto.randomUUID(),actor:e.actor??eh??"System",actorStaffId:e.actorStaffId??th}),Ky(r,t)}function Ed(e){let t=rh();return e!=null&&e.entityType&&(t=t.filter(r=>r.entityType===e.entityType)),e!=null&&e.entityId&&(t=t.filter(r=>r.entityId===e.entityId)),t=t.reverse(),e!=null&&e.limit&&(t=t.slice(0,e.limit)),t}function Jy(){try{localStorage.setItem(Rl(),JSON.stringify([]))}catch{}}function Qy(e){try{const t=(e??[]).slice(-Zp);localStorage.setItem(Rl(),JSON.stringify(t))}catch{}}const Xy="gumgauge-staff",ul="gumgauge-demo-staff";function sh(){try{return typeof sessionStorage<"u"&&sessionStorage.getItem(Ze)==="1"}catch{return!1}}function ah(){return sh()?ul:Xy}function qy(){if(sh())try{if(localStorage.getItem(ul))return;const t=Hy();localStorage.setItem(ul,JSON.stringify(t))}catch{}}function Bn(){const e=ah();e===ul&&qy();try{const t=localStorage.getItem(e);return t?JSON.parse(t):[]}catch{return[]}}function $l(e){const t=ah();localStorage.setItem(t,JSON.stringify(e))}function qn(e){return Bn().find(t=>t.id===e)}function Zy(e,t){return Bn().find(s=>{var a;return((a=s.loginEmail)==null?void 0:a.trim().toLowerCase())===e.trim().toLowerCase()&&s.password===t})}function ev(e){const t=Bn(),r=new Date().toISOString(),s={...e,id:crypto.randomUUID(),createdAt:r,updatedAt:r};return t.push(s),$l(t),un({timestamp:r,action:"staff.create",entityType:"staff",entityId:s.id,details:`${s.firstName} ${s.lastName}`}),s}function tv(e,t){const r=Bn(),s=r.findIndex(l=>l.id===e);if(s===-1)return null;const a=new Date().toISOString();return r[s]={...r[s],...t,updatedAt:a},$l(r),un({timestamp:a,action:"staff.update",entityType:"staff",entityId:e}),r[s]}function nv(e){const t=Bn(),r=t.find(a=>a.id===e),s=t.filter(a=>a.id!==e);return s.length===t.length?!1:($l(s),un({timestamp:new Date().toISOString(),action:"staff.delete",entityType:"staff",entityId:e,details:r?`${r.firstName} ${r.lastName}`:void 0}),!0)}const ds="gumgauge-signed-in-staff-id",rv=15*60*1e3;function sv(){try{return sessionStorage.getItem(ir)==="1"}catch{return!1}}function av(){try{return typeof sessionStorage<"u"&&sessionStorage.getItem(Ze)==="1"}catch{return!1}}const lh=g.createContext(null);function lv({children:e}){const[t,r]=g.useState(()=>{try{return sessionStorage.getItem(ds)}catch{return null}}),[s,a]=g.useState(null);g.useEffect(()=>{if(!t){a(null);return}const d=qn(t);a(d||null),d||(sessionStorage.removeItem(ds),r(null))},[t]),g.useEffect(()=>{if(!t)return;let d;const p=()=>{clearTimeout(d),d=setTimeout(()=>{r(null),a(null),gi(void 0,void 0);try{sessionStorage.removeItem(ds)}catch{}},rv)};p();const h=["mousedown","keydown","scroll","touchstart"];return h.forEach(w=>window.addEventListener(w,p)),()=>{clearTimeout(d),h.forEach(w=>window.removeEventListener(w,p))}},[t]);const l=(d,p)=>{const h=Zy(d.trim(),p);if(h){r(h.id),gi(`${h.firstName} ${h.lastName}`,h.id);try{sessionStorage.setItem(ds,h.id)}catch{}return!0}return!1},i=()=>{r(null),a(null),gi(void 0,void 0);try{sessionStorage.removeItem(ds)}catch{}},o=sv(),c=av(),m=!!s||o||c;return n.jsx(lh.Provider,{value:{staff:s,isSignedIn:m,isAdmin:o,login:l,logout:i},children:e})}function Xr(){const e=g.useContext(lh);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}const cu={sm:"h-8",md:"h-10",lg:"h-14",xl:"h-32 sm:h-40 md:h-48"},iv={sm:"text-lg",md:"text-xl",lg:"text-2xl",xl:"text-3xl"};function Id({className:e="",showText:t=!1,size:r="md",variant:s="light"}){const[a,l]=tr.useState(!1),i=s==="dark"?"text-white":"text-navy";return n.jsxs("div",{className:`flex items-center gap-2 bg-transparent ${e}`,children:[a?n.jsx("div",{className:`${cu[r]} min-w-[2.5rem] flex items-center justify-center rounded-lg px-2 ${s==="dark"?"bg-white/20":"bg-navy"}`,"aria-hidden":!0,children:n.jsx("span",{className:"text-white font-bold text-sm",children:"GG"})}):n.jsx("img",{src:"/logo.png",alt:"GumGauge",className:`${cu[r]} w-auto object-contain flex-shrink-0 bg-transparent`,onError:()=>l(!0)}),t&&n.jsx("span",{className:`font-semibold ${i} ${iv[r]}`,children:"GumGauge"})]})}const ov=["January","February","March","April","May","June","July","August","September","October","November","December"];function Q(e){if(!e)return"";const t=e.slice(0,10),[r,s,a]=t.split("-").map(Number);return!s||s<1||s>12||!a||a<1||a>31?e:`${ov[s-1]} ${a}, ${r}`}function yi(e){return new Intl.DateTimeFormat("en-CA",{timeZone:e,year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date)}function vi(e){const t=new Date,r=new Intl.DateTimeFormat("en-US",{timeZone:e,month:"long",day:"numeric",year:"numeric"}).format(t),s=new Intl.DateTimeFormat("en-US",{timeZone:e,hour:"numeric",minute:"2-digit",second:"2-digit",hour12:!0}).format(t);return{date:r,time:s,full:`${r}  ${s}`}}function Po(e,t){const r=new Date(e),s=new Intl.DateTimeFormat("en-US",{timeZone:t,month:"long",day:"numeric",year:"numeric"}).format(r),a=new Intl.DateTimeFormat("en-US",{timeZone:t,hour:"numeric",minute:"2-digit",second:"2-digit",hour12:!0}).format(r);return`${s}  ${a}`}function ih(e){const[t,r]=g.useState(()=>vi(e));return g.useEffect(()=>{r(vi(e));const s=setInterval(()=>r(vi(e)),1e3);return()=>clearInterval(s)},[e]),t}function _l(e){const[t,r]=g.useState(()=>yi(e));return g.useEffect(()=>{r(yi(e));const s=setInterval(()=>r(yi(e)),6e4);return()=>clearInterval(s)},[e]),t}const oh="gumgauge-clinic",Hs="gumgauge-demo-clinic";function Td(){try{return typeof sessionStorage<"u"&&sessionStorage.getItem(Ze)==="1"}catch{return!1}}function Od(){return Td()?Hs:oh}function dv(){if(Td())try{if(localStorage.getItem(Hs))return;const t=Uy();localStorage.setItem(Hs,JSON.stringify(t))}catch{}}function dh(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch{return null}}function qr(){const e=Od();return e===Hs&&dv(),dh(e)}function cv(){try{localStorage.removeItem(oh),Td()&&localStorage.removeItem(Hs)}catch{}}function uv(e){const t=Od(),r=dh(t),s=new Date().toISOString(),a={id:(r==null?void 0:r.id)??crypto.randomUUID(),name:e.name,address:e.address??(r==null?void 0:r.address),city:e.city??(r==null?void 0:r.city),state:e.state??(r==null?void 0:r.state),zip:e.zip??(r==null?void 0:r.zip),phone:e.phone??(r==null?void 0:r.phone),timezone:e.timezone??(r==null?void 0:r.timezone),registeredAt:(r==null?void 0:r.registeredAt)??s,deviceCount:e.deviceCount??(r==null?void 0:r.deviceCount)??1};try{localStorage.setItem(t,JSON.stringify(a))}catch{}return a}function mv(e){try{const t=Od();e===null?localStorage.removeItem(t):localStorage.setItem(t,JSON.stringify(e))}catch{}}const Ll=[{label:"Clinical",positions:["Dentist","Pediatric Dentist","Dental Hygienist","Dental Assistant","Certified Dental Assistant (CDA)","Sterilization Technician"]},{label:"Front office",positions:["Front Desk / Receptionist","Patient Coordinator","Billing / Insurance Coordinator","Office Manager","Practice Manager"]},{label:"Specialists",positions:["Orthodontist","Endodontist","Periodontist","Oral Surgeon"]},{label:"Support",positions:["Dental Lab Technician"]}];Ll.flatMap(e=>[...e.positions]);const ch=["Active","On leave","Inactive"],Md=["Dentist","Pediatric Dentist","Orthodontist","Endodontist","Periodontist","Oral Surgeon","Dental Hygienist"],Fl=["Dentist","Pediatric Dentist","Orthodontist","Endodontist","Periodontist","Oral Surgeon"],pv="gumgauge-patients",ml="gumgauge-demo-patients";function uh(){try{return typeof sessionStorage<"u"&&sessionStorage.getItem(Ze)==="1"}catch{return!1}}function mh(){return uh()?ml:pv}function hv(){if(uh())try{if(localStorage.getItem(ml))return;const t=qp();localStorage.setItem(ml,JSON.stringify(t))}catch{}}function Ae(){const e=mh();e===ml&&hv();try{const t=localStorage.getItem(e);return t?JSON.parse(t):[]}catch{return[]}}function qs(e){const t=mh();localStorage.setItem(t,JSON.stringify(e))}function B(e){return Ae().find(t=>t.id===e)}function fv(e){const t=Ae(),r=new Date().toISOString(),s={...e,id:crypto.randomUUID(),createdAt:r,updatedAt:r};return t.push(s),qs(t),un({timestamp:r,action:"patient.create",entityType:"patient",entityId:s.id,details:`${s.firstName} ${s.lastName}`}),s}function te(e,t){const r=Ae(),s=r.findIndex(l=>l.id===e);if(s===-1)return null;const a=new Date().toISOString();return r[s]={...r[s],...t,updatedAt:a},qs(r),un({timestamp:a,action:"patient.update",entityType:"patient",entityId:e}),r[s]}function xv(e){const t=Ae(),r=t.find(a=>a.id===e),s=t.filter(a=>a.id!==e);return s.length===t.length?!1:(qs(s),un({timestamp:new Date().toISOString(),action:"patient.delete",entityType:"patient",entityId:e,details:r?`${r.firstName} ${r.lastName}`:void 0}),!0)}function gv(){const e=Ae(),t=new Date().toISOString(),r=e.map(s=>({...s,visitHistory:[],currentVisitStartedAt:void 0,currentVisitNotes:void 0,currentVisitUseVoiceNotes:void 0,updatedAt:t}));qs(r)}function yv(){const e=Ct(),[t,r]=g.useState(""),[s,a]=g.useState(!1),[l,i]=g.useState([]),o=g.useRef(null),c=g.useRef(null);return g.useEffect(()=>{const m=d=>{var p;(d.ctrlKey||d.metaKey)&&d.key==="k"&&(d.preventDefault(),(p=c.current)==null||p.focus(),a(!0))};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[]),g.useEffect(()=>{if(!t.trim()){i([]);return}const m=t.trim().toLowerCase(),p=Ae().filter(h=>`${h.firstName} ${h.lastName}`.toLowerCase().includes(m)||h.dateOfBirth&&h.dateOfBirth.includes(m)||h.phone&&h.phone.replace(/\D/g,"").includes(m.replace(/\D/g,""))||h.email&&h.email.toLowerCase().includes(m));i(p.slice(0,10))},[t]),g.useEffect(()=>{const m=d=>{o.current&&!o.current.contains(d.target)&&a(!1)};return document.addEventListener("click",m),()=>document.removeEventListener("click",m)},[]),n.jsxs("div",{ref:o,className:"relative px-3 pb-2",children:[n.jsx("label",{className:"sr-only",htmlFor:"global-search",children:"Search patients"}),n.jsx("input",{ref:c,id:"global-search",type:"search",placeholder:"Search patients (Ctrl+K)",value:t,onChange:m=>{r(m.target.value),a(!0)},onFocus:()=>a(!0),onKeyDown:m=>{m.key==="Escape"&&a(!1)},className:"w-full px-3 py-2 text-sm rounded-lg bg-navy-light/50 border border-navy-light text-white placeholder:text-sky-light/70 focus:outline-none focus:ring-1 focus:ring-sky"}),s&&(t.trim()||l.length>0)&&n.jsx("div",{className:"absolute left-3 right-3 top-full mt-1 z-50 bg-white border border-sky/40 rounded-lg shadow-xl max-h-64 overflow-auto",children:l.length===0?n.jsx("p",{className:"p-3 text-sm text-navy/60",children:"No patients match."}):n.jsx("ul",{className:"py-1",children:l.map(m=>n.jsx("li",{children:n.jsxs("button",{type:"button",onClick:()=>{e(`/dashboard/patients/${m.id}`),r(""),a(!1)},className:"w-full text-left px-3 py-2 text-sm text-navy hover:bg-sky/10 flex justify-between gap-2",children:[n.jsxs("span",{className:"font-medium",children:[m.firstName," ",m.lastName]}),n.jsx("span",{className:"text-navy/60 truncate",children:m.dateOfBirth})]})},m.id))})})]})}const bi=[{to:"/dashboard",label:"Dashboard"},{to:"/dashboard/analytics",label:"Analytics"},{to:"/dashboard/patients",label:"Patients"},{to:"/dashboard/billing",label:"Billing"},{to:"/dashboard/staff",label:"Staff"},{to:"/dashboard/appointments",label:"Appointments"},{to:"/dashboard/device-scan",label:"Device Scan"},{to:"/dashboard/recall",label:"Recall"},{to:"/dashboard/audit",label:"Audit log"},{to:"/dashboard/backup",label:"Backup"},{to:"/dashboard/clinic",label:"Clinic"}];function vv(){const e=Ct(),t=qr(),{timezone:r,setTimezone:s}=Qr(),{staff:a,isSignedIn:l,isAdmin:i,logout:o}=Xr(),{full:c}=ih(r);return n.jsxs("div",{className:"flex min-h-screen bg-white",children:[n.jsxs("aside",{className:"w-56 flex-shrink-0 bg-navy flex flex-col",children:[n.jsxs("div",{className:"p-4 border-b border-navy-light bg-transparent",children:[n.jsx(Id,{size:"md"}),(t==null?void 0:t.name)&&n.jsx("p",{className:"text-sky-light text-xs mt-2 truncate",title:t.name,children:t.name})]}),n.jsx(yv,{}),n.jsx("nav",{className:"flex-1 p-3 space-y-1",children:(()=>{const m=typeof sessionStorage<"u"&&sessionStorage.getItem(ir)==="1",d=typeof sessionStorage<"u"&&sessionStorage.getItem(Ze)==="1";let p=a&&Md.includes(a.position)?[...bi,{to:"/dashboard/my-patients",label:"My patients"}]:bi;return d&&(p=bi),m?[...p,{to:"/dashboard/clinic-log",label:"Clinic Log"}]:p})().map(({to:m,label:d})=>n.jsx(ru,{to:m,className:({isActive:p})=>`block px-4 py-3 rounded-lg text-sm font-medium transition-colors ${p?"bg-sky/20 text-white":"text-sky-light hover:bg-navy-light hover:text-white"}`,children:d},m))}),n.jsxs("div",{className:"p-3 border-t border-navy-light space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sky-light/80 text-xs mb-1 px-1",children:"Time zone"}),n.jsx("select",{value:r,onChange:m=>s(m.target.value),className:"w-full px-2 py-1.5 text-xs rounded bg-navy-light/50 text-white border border-navy-light focus:outline-none focus:ring-1 focus:ring-sky",children:Jp.map(m=>n.jsx("option",{value:m.value,children:m.label},m.value))})]}),n.jsx("p",{className:"text-sky-light/90 text-xs px-1 leading-tight",title:c,children:c}),l&&a?n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"text-sky-light text-xs px-1 font-medium",children:["Signed in as ",Fl.includes(a.position)?`Dr. ${a.firstName} ${a.lastName}`:`${a.firstName} ${a.lastName}`]}),n.jsx("button",{type:"button",onClick:()=>{o(),e("/",{replace:!0})},className:"w-full mt-2 px-4 py-2 text-xs font-medium rounded-lg bg-white/10 text-sky-light hover:bg-white/20 transition-colors",children:"Sign out"})]}):typeof sessionStorage<"u"&&sessionStorage.getItem(Ze)==="1"?n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-sky-light text-xs px-1 font-medium",children:"Demo mode"}),n.jsx("button",{type:"button",onClick:()=>{try{sessionStorage.removeItem(Ze)}catch{}e("/",{replace:!0})},className:"w-full mt-2 px-4 py-2 text-xs font-medium rounded-lg bg-white/10 text-sky-light hover:bg-white/20 transition-colors",children:"Exit demo"})]}):i?n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-sky-light text-xs px-1 font-medium",children:"Admin"}),n.jsx("button",{type:"button",onClick:()=>{try{sessionStorage.removeItem(ir)}catch{}e("/",{replace:!0})},className:"w-full mt-2 px-4 py-2 text-xs font-medium rounded-lg bg-white/10 text-sky-light hover:bg-white/20 transition-colors",children:"Log out (Admin)"})]}):n.jsxs(n.Fragment,{children:[n.jsx(ru,{to:"/signin",className:"block w-full mt-2 px-4 py-2 text-xs font-medium rounded-lg bg-white/10 text-sky-light hover:bg-white/20 transition-colors text-center",children:"Sign in"}),n.jsx("button",{type:"button",onClick:()=>e("/",{replace:!0}),className:"w-full mt-2 px-4 py-2 text-xs font-medium rounded-lg bg-white/10 text-sky-light hover:bg-white/20 transition-colors",children:"Log out"})]}),n.jsx("p",{className:"text-sky-light/80 text-xs px-4",children:"GumGauge Dental"})]})]}),n.jsx("main",{className:"flex-1 overflow-auto bg-sky-light/30",children:n.jsx(py,{})})]})}function bv(){const e=Ct(),[t,r]=g.useState(!1),s=()=>{r(!0);try{sessionStorage.removeItem(Ze)}catch{}setTimeout(()=>e("/dashboard",{replace:!0}),400)},a=()=>{try{sessionStorage.setItem(Ze,"1")}catch{}e("/dashboard",{replace:!0})};return n.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-navy relative",children:[n.jsx("div",{className:"absolute top-6 right-6 flex gap-2",children:n.jsx(J,{to:"/admin",className:"px-4 py-2 text-sky-light text-sm font-medium hover:text-white border border-white/30 rounded-lg hover:bg-white/10",children:"Admin"})}),n.jsxs("div",{className:"splash-glimmer-wrapper flex flex-col items-center gap-8",children:[n.jsx("div",{className:"splash-logo-glimmer",children:n.jsx(Id,{size:"xl",variant:"dark"})}),n.jsxs("h1",{className:"splash-tagline-wrapper text-2xl sm:text-3xl md:text-4xl font-semibold text-center tracking-tight",children:[n.jsx("span",{className:"splash-tagline-outline",children:"GumGauge  The Future of Dental Care"}),n.jsx("span",{className:"splash-tagline-fill",children:"GumGauge  The Future of Dental Care"})]})]}),n.jsxs("div",{className:"mt-12 flex flex-col sm:flex-row flex-wrap items-center justify-center gap-4",children:[n.jsx("button",{type:"button",onClick:s,disabled:t,className:"px-10 py-4 bg-white text-navy font-semibold text-lg rounded-xl border-2 border-black shadow-lg shadow-black/20 hover:bg-sky-light hover:shadow-xl hover:shadow-black/25 hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-white/50 focus:ring-offset-2 focus:ring-offset-navy active:scale-[0.98] transition-all duration-200 disabled:opacity-80 disabled:hover:translate-y-0",children:"Start System"}),n.jsx("button",{type:"button",onClick:a,className:"px-10 py-4 bg-amber-400 text-navy font-semibold text-lg rounded-xl border-2 border-amber-500 shadow-lg hover:bg-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-400/50 focus:ring-offset-2 focus:ring-offset-navy active:scale-[0.98] transition-all duration-200",children:"Demo"}),n.jsx(J,{to:"/signin",className:"px-10 py-4 bg-white/10 text-white font-medium text-lg rounded-xl border-2 border-white/40 hover:bg-white/20 focus:outline-none focus:ring-2 focus:ring-white/50 focus:ring-offset-2 focus:ring-offset-navy transition-all inline-block text-center",children:"Log-in"})]})]})}function Nv(){const e=Ct(),[t]=Kp(),r=t.get("returnTo")||"/dashboard",{login:s}=Xr(),[a,l]=g.useState(""),[i,o]=g.useState(""),[c,m]=g.useState(""),d=p=>{if(p.preventDefault(),m(""),!a.trim()||!i){m("Please enter your login email and password.");return}s(a.trim(),i)?e(r.startsWith("/")?r:`/${r}`,{replace:!0}):m("Invalid login email or password. Please try again.")};return n.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-navy p-4",children:n.jsxs("div",{className:"w-full max-w-sm",children:[n.jsx("div",{className:"flex justify-center mb-6",children:n.jsx(Id,{size:"lg",variant:"dark"})}),n.jsx("h1",{className:"text-xl font-semibold text-white text-center mb-2",children:"Sign in"}),n.jsx("p",{className:"text-sky-light/90 text-sm text-center mb-6",children:"Enter your clinic credentials to log in as your profile and treat patients."}),n.jsxs("form",{onSubmit:d,className:"bg-white/10 rounded-xl border border-white/20 p-6 space-y-4",autoComplete:"off",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sky-light/90 text-sm mb-1",children:"Login email or username"}),n.jsx("input",{type:"text",autoComplete:"off",value:a,onChange:p=>l(p.target.value),placeholder:"e.g. jane@practice.com",className:"w-full px-3 py-2 rounded-lg border border-sky/60 bg-white text-navy"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sky-light/90 text-sm mb-1",children:"Password"}),n.jsx("input",{type:"password",autoComplete:"off",value:i,onChange:p=>o(p.target.value),placeholder:"",className:"w-full px-3 py-2 rounded-lg border border-sky/60 bg-white text-navy"})]}),c&&n.jsx("p",{className:"text-amber-200 text-sm bg-amber-900/30 px-3 py-2 rounded-lg",role:"alert",children:c}),n.jsx("button",{type:"submit",className:"w-full px-4 py-2 bg-white text-navy font-medium rounded-lg hover:bg-sky-light border-2 border-black",children:"Sign in"})]}),n.jsx("p",{className:"mt-4 text-center",children:n.jsx(J,{to:"/",className:"text-sky-light hover:text-white text-sm font-medium",children:" Back to Start System"})})]})})}const jv="gumgauge-appointments",pl="gumgauge-demo-appointments";function ph(){try{return typeof sessionStorage<"u"&&sessionStorage.getItem(Ze)==="1"}catch{return!1}}function Ul(){return ph()?pl:jv}function wv(){if(ph())try{if(localStorage.getItem(pl))return;const t=Vy();localStorage.setItem(pl,JSON.stringify(t))}catch{}}function hh(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):[]}catch{return[]}}function or(){const e=Ul();return e===pl&&wv(),hh(e)}function uu(e){return or().filter(t=>t.start.startsWith(e))}function Sv(e,t,r,s,a){return or().filter(i=>{if(i.id===a)return!1;const o=i.start,c=i.end;return e<c&&t>o?!!(r&&i.operatoryId===r||i.providerId===s):!1})}function kv(e){const t=new Date().toISOString(),r={...e,id:crypto.randomUUID(),createdAt:t,updatedAt:t},s=Ul(),a=hh(s);return localStorage.setItem(s,JSON.stringify([...a,r])),un({timestamp:t,action:"appointment.create",entityType:"appointment",entityId:r.id,details:e.patientId}),r}function mu(e,t){const r=or(),s=r.findIndex(i=>i.id===e);if(s===-1)return null;const a=new Date().toISOString(),l=[...r];return l[s]={...l[s],...t,updatedAt:a},localStorage.setItem(Ul(),JSON.stringify(l)),un({timestamp:a,action:"appointment.update",entityType:"appointment",entityId:e}),l[s]}function Cv(e){try{localStorage.setItem(Ul(),JSON.stringify(e??[]))}catch{}}function Dv(){try{return typeof sessionStorage<"u"&&sessionStorage.getItem(Ze)==="1"}catch{return!1}}function Pv(){const e=qr(),{timezone:t}=Qr(),r=_l(t),{full:s}=ih(t),[a,l]=g.useState(()=>Ae());g.useEffect(()=>{l(Ae())},[]);const i=or(),o=i.length>0,c=a.filter(w=>w.currentVisitStartedAt).sort((w,u)=>(u.currentVisitStartedAt??"").localeCompare(w.currentVisitStartedAt??"")),m=g.useMemo(()=>o?uu(r).sort((u,b)=>u.start.localeCompare(b.start)).map(u=>({appointment:u,patient:B(u.patientId)})):a.filter(w=>w.dateOfAppointment===r).sort((w,u)=>(w.appointmentTime||"00:00").localeCompare(u.appointmentTime||"00:00")).map(w=>({patient:w,appointment:null})),[o,r,a]),d=g.useMemo(()=>o?i.filter(u=>u.start.slice(0,10)>=r).sort((u,b)=>u.start.localeCompare(b.start)).slice(0,5).map(u=>({appointment:u,patient:B(u.patientId)})):a.filter(w=>w.dateOfNextAppointment&&w.dateOfNextAppointment>=r).sort((w,u)=>{const b=(w.dateOfNextAppointment??"").localeCompare(u.dateOfNextAppointment??"");return b!==0?b:(w.nextAppointmentTime||"00:00").localeCompare(u.nextAppointmentTime||"00:00")}).slice(0,5).map(w=>({patient:w,appointment:null})),[o,r,i.length,a]),p=o?uu(r).length:a.filter(w=>w.dateOfAppointment===r).length,h=g.useMemo(()=>{const w=[];return a.forEach(u=>{(u.labCases??[]).filter(b=>b.status==="Sent"||b.status==="In progress").forEach(b=>{w.push({patient:u,lab:b})})}),w},[a]);return n.jsxs("div",{className:"p-8",children:[Dv()&&n.jsxs("div",{className:"mb-4 px-4 py-2 bg-amber-50 border border-amber-200 rounded-lg text-amber-900 text-sm",children:[n.jsx("strong",{children:"Demo mode."})," Youre viewing sample data. You can explore patients, charts, appointments, and clinic info. Changes are saved only for this demo session."]}),n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-2",children:[n.jsx("h1",{className:"text-2xl font-semibold text-navy",children:"Dashboard"}),(e==null?void 0:e.name)&&n.jsx("p",{className:"text-navy/70 text-sm font-medium",children:e.name})]}),n.jsx("p",{className:"text-navy/70 mb-1",children:s}),n.jsx("p",{className:"text-navy/50 text-sm mb-4",children:"Live  based on selected time zone"}),n.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[n.jsx(J,{to:"/dashboard/patients/new",className:"px-4 py-2 bg-navy text-white rounded-lg font-medium hover:bg-navy-light inline-block",children:"+ Add patient"}),n.jsx(J,{to:"/dashboard/analytics",className:"px-4 py-2 border border-sky/60 rounded-lg font-medium text-navy hover:bg-sky/10 inline-block",children:"Analytics"}),n.jsxs("span",{className:"text-navy/60 text-sm",children:[c.length," in progress  ",p," today"]})]}),n.jsxs("div",{className:"bg-green-50 rounded-xl shadow-sm border-2 border-green-200 p-6 mb-6",children:[n.jsx("h2",{className:"text-lg font-medium text-green-900 mb-1",children:"Visits in progress"}),n.jsx("p",{className:"text-sm text-green-800/70 mb-4",children:"Patients currently in the office  visible to all dentists and front office staff."}),c.length===0?n.jsx("p",{className:"text-green-800/70",children:"No visits in progress."}):n.jsx("ul",{className:"space-y-2",children:c.map(w=>n.jsxs("li",{className:"flex flex-wrap items-center justify-between gap-x-4 gap-y-1 py-2 border-b border-green-200 last:border-0",children:[n.jsxs("span",{className:"text-green-900 font-medium",children:[w.firstName," ",w.lastName]}),n.jsxs("span",{className:"text-green-800/80 text-sm",children:["Started ",w.currentVisitStartedAt&&Po(w.currentVisitStartedAt,t)]}),n.jsx(J,{to:`/dashboard/patients/${w.id}`,className:"text-green-700 text-sm font-medium hover:underline shrink-0",children:"Open chart"})]},w.id))})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-6 mb-6",children:[n.jsx("h2",{className:"text-lg font-medium text-navy mb-4",children:"Today's appointments"}),m.length===0?n.jsx("p",{className:"text-navy/60",children:"No appointments today."}):n.jsx("ul",{className:"space-y-2",children:m.map((w,u)=>{const b=w.patient,C=w.appointment,x=(b==null?void 0:b.id)??(C==null?void 0:C.patientId),y=C?C.start.slice(11,16):b==null?void 0:b.appointmentTime,v=(C==null?void 0:C.type)??(b==null?void 0:b.appointmentType),S=C!=null&&C.providerId?(()=>{const D=qn(C.providerId);return D?Fl.includes(D.position)?`Dr. ${D.firstName} ${D.lastName}`:`${D.firstName} ${D.lastName}`:""})():b==null?void 0:b.appointmentDoctor,P=b==null?void 0:b.currentVisitStartedAt,E=b?`${b.firstName} ${b.lastName}`:"Unknown";return n.jsxs("li",{className:"flex flex-wrap items-center justify-between gap-x-4 gap-y-1 py-2 border-b border-sky/20 last:border-0",children:[n.jsxs("span",{className:"text-navy",children:[E,y&&n.jsx("span",{className:"text-navy/70 text-sm ml-2",children:y}),P&&n.jsx("span",{className:"ml-2 inline-flex items-center rounded bg-green-100 px-2 py-0.5 text-xs font-medium text-green-800",children:"In progress"})]}),n.jsxs("span",{className:"text-navy/70 text-sm",children:[v&&n.jsx("span",{children:v}),v&&S&&"  ",S&&n.jsxs("span",{children:["with ",S]}),!v&&!S&&""]}),n.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[x&&!P&&n.jsx(J,{to:`/dashboard/patients/${x}?startVisit=1`,className:"px-3 py-1.5 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 inline-block",children:"Start visit"}),x&&n.jsx(J,{to:`/dashboard/patients/${x}`,className:"text-sky-dark text-sm font-medium hover:underline",children:"Chart"})]})]},(C==null?void 0:C.id)??`${x}-${u}`)})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-6",children:[n.jsx("h2",{className:"text-lg font-medium text-navy mb-4",children:"Upcoming next appointments"}),d.length===0?n.jsx("p",{className:"text-navy/60",children:"No upcoming next appointments."}):n.jsx("ul",{className:"space-y-2",children:d.map((w,u)=>{const b=w.patient,C=w.appointment,x=(b==null?void 0:b.id)??(C==null?void 0:C.patientId),y=C?C.start.slice(0,10):b==null?void 0:b.dateOfNextAppointment,v=C?C.start.slice(11,16):b==null?void 0:b.nextAppointmentTime,S=b?`${b.firstName} ${b.lastName}`:"Unknown";return n.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-sky/20 last:border-0",children:[n.jsx("span",{className:"text-navy",children:S}),n.jsxs("span",{className:"text-navy/70 text-sm",children:[y&&Q(y),v?` ${v}`:""]}),x&&n.jsx(J,{to:`/dashboard/patients/${x}`,className:"text-sky-dark text-sm font-medium hover:underline",children:"View chart"})]},(C==null?void 0:C.id)??`${x}-${u}`)})})]}),h.length>0&&n.jsxs("div",{className:"bg-amber-50 rounded-xl shadow-sm border border-amber-200 p-6 mt-6",children:[n.jsx("h2",{className:"text-lg font-medium text-amber-900 mb-1",children:"Pending lab cases"}),n.jsx("p",{className:"text-sm text-amber-800/70 mb-4",children:"Lab work sent or in progress. Update status on the patient chart."}),n.jsx("ul",{className:"space-y-2",children:h.map(({patient:w,lab:u})=>n.jsxs("li",{className:"flex flex-wrap items-center justify-between gap-x-4 gap-y-1 py-2 border-b border-amber-200 last:border-0",children:[n.jsxs("span",{className:"text-amber-900 font-medium",children:[w.firstName," ",w.lastName]}),n.jsxs("span",{className:"text-amber-800/80 text-sm",children:[u.labName,"  ",u.caseType,u.toothOrTeeth?` (${u.toothOrTeeth})`:""]}),n.jsx(J,{to:`/dashboard/patients/${w.id}#lab-cases`,className:"text-amber-700 text-sm font-medium hover:underline shrink-0",children:"Chart"})]},u.id))})]})]})}function fh(e,t,r){const s=m=>{const d=String(m);return d.includes(",")||d.includes('"')||d.includes(`
`)?`"${d.replace(/"/g,'""')}"`:d},a=m=>m.map(s).join(","),l=[a(t),...r.map(a)].join(`\r
`),i=new Blob([l],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(i),c=document.createElement("a");c.href=o,c.download=e,c.click(),URL.revokeObjectURL(o)}const Av=[{value:"name-asc",label:"Name (A  Z)"},{value:"name-desc",label:"Name (Z  A)"},{value:"dob-asc",label:"DOB (oldest first)"},{value:"dob-desc",label:"DOB (newest first)"},{value:"apptDate-asc",label:"Appt date (earliest first)"},{value:"apptDate-desc",label:"Appt date (latest first)"},{value:"apptTime-asc",label:"Appt time (earliest first)"},{value:"apptTime-desc",label:"Appt time (latest first)"},{value:"nextApptDate-asc",label:"Next appt date (earliest first)"},{value:"nextApptDate-desc",label:"Next appt date (latest first)"}];function Ev(e,t,r){const s=r==="asc"?1:-1;return[...e].sort((a,l)=>{let i=0;switch(t){case"name":{const o=`${a.firstName} ${a.lastName}`.toLowerCase(),c=`${l.firstName} ${l.lastName}`.toLowerCase();i=o.localeCompare(c);break}case"dob":i=(a.dateOfBirth||"").localeCompare(l.dateOfBirth||"");break;case"apptDate":i=(a.dateOfAppointment||"").localeCompare(l.dateOfAppointment||"");break;case"apptTime":{const o=a.appointmentTime||"00:00",c=l.appointmentTime||"00:00";i=o.localeCompare(c)||(a.dateOfAppointment||"").localeCompare(l.dateOfAppointment||"");break}case"nextApptDate":i=(a.dateOfNextAppointment||"").localeCompare(l.dateOfNextAppointment||"");break;case"nextApptTime":{const o=a.nextAppointmentTime||"00:00",c=l.nextAppointmentTime||"00:00";i=o.localeCompare(c)||(a.dateOfNextAppointment||"").localeCompare(l.dateOfNextAppointment||"");break}}return i*s})}function Iv(){const[e,t]=g.useState(""),[r,s]=g.useState("name-asc"),a=g.useMemo(()=>Ae(),[]),l=g.useMemo(()=>a.filter(m=>`${m.firstName} ${m.lastName}`.toLowerCase().includes(e.toLowerCase())||m.email&&m.email.toLowerCase().includes(e.toLowerCase())),[a,e]),[i,o]=r.split("-"),c=g.useMemo(()=>Ev(l,i,o),[l,i,o]);return n.jsxs("div",{className:"p-8",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[n.jsx("h1",{className:"text-2xl font-semibold text-navy",children:"Patients"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:()=>{const m=["First name","Last name","DOB","Phone","Email","Appt date","Appt time","Next appt date"],d=c.map(p=>[p.firstName,p.lastName,p.dateOfBirth??"",p.phone??"",p.email??"",p.dateOfAppointment??"",p.appointmentTime??"",p.dateOfNextAppointment??""]);fh(`patients-${new Date().toISOString().slice(0,10)}.csv`,m,d)},className:"inline-flex items-center justify-center px-4 py-2 border border-sky/60 rounded-lg font-medium text-navy hover:bg-sky/10",children:"Export CSV"}),n.jsx(J,{to:"/dashboard/patients/new",className:"inline-flex items-center justify-center px-4 py-2 bg-navy text-white rounded-lg font-medium hover:bg-navy-light transition-colors",children:"+ Add patient"})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:[n.jsx("input",{type:"search",placeholder:"Search by name or email...",value:e,onChange:m=>t(m.target.value),className:"flex-1 max-w-md px-4 py-2 border border-sky/60 rounded-lg bg-white text-navy placeholder-navy/50 focus:outline-none focus:ring-2 focus:ring-sky focus:border-transparent"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-navy/70 whitespace-nowrap",children:"Sort by"}),n.jsx("select",{value:r,onChange:m=>s(m.target.value),className:"px-3 py-2 border border-sky/60 rounded-lg bg-white text-navy min-w-[200px]",children:Av.map(m=>n.jsx("option",{value:m.value,children:m.label},m.value))})]})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 overflow-hidden",children:c.length===0?n.jsx("div",{className:"p-8 text-center text-navy/60",children:a.length===0?"No patients yet. Add your first patient above.":"No patients match your search."}):n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-navy/5 border-b border-sky/40",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-navy",children:"Name"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-navy",children:"DOB"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-navy",children:"Allergies"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-navy",children:"Appointment"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-navy",children:"Next"}),n.jsx("th",{className:"w-24"})]})}),n.jsx("tbody",{children:c.map(m=>n.jsxs("tr",{className:"border-b border-sky/20 hover:bg-sky/10",children:[n.jsxs("td",{className:"py-3 px-4 font-medium text-navy",children:[m.firstName," ",m.lastName]}),n.jsx("td",{className:"py-3 px-4 text-navy/80",children:Q(m.dateOfBirth)}),n.jsx("td",{className:"py-3 px-4",children:m.allergies?n.jsx("span",{className:"text-amber-700 bg-amber-100 text-xs px-2 py-0.5 rounded",title:m.allergies,children:m.allergies.length>20?`${m.allergies.slice(0,20)}`:m.allergies}):n.jsx("span",{className:"text-navy/50",children:""})}),n.jsxs("td",{className:"py-3 px-4 text-navy/80",children:[Q(m.dateOfAppointment),m.appointmentTime?` ${m.appointmentTime}`:""]}),n.jsx("td",{className:"py-3 px-4 text-navy/80",children:m.dateOfNextAppointment?Q(m.dateOfNextAppointment)+(m.nextAppointmentTime?` ${m.nextAppointmentTime}`:""):""}),n.jsx("td",{className:"py-3 px-4",children:n.jsx(J,{to:`/dashboard/patients/${m.id}`,className:"text-sky-dark font-medium text-sm hover:underline",children:"Chart"})})]},m.id))})]})})]})}const Tv="modulepreload",Ov=function(e){return"/"+e},pu={},Mv=function(t,r,s){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=Ov(c),c in pu)return;pu[c]=!0;const m=c.endsWith(".css"),d=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const p=document.createElement("link");if(p.rel=m?"stylesheet":Tv,m||(p.as="script"),p.crossOrigin="",p.href=c,o&&p.setAttribute("nonce",o),document.head.appendChild(p),m)return new Promise((h,w)=>{p.addEventListener("load",h),p.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${c}`)))})}))}function l(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return a.then(i=>{for(const o of i||[])o.status==="rejected"&&l(o.reason);return t().catch(l)})};class xh extends tr.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("3D viewer error:",t,r)}render(){return this.state.hasError?this.props.fallback:this.props.children}}const Rv=g.lazy(()=>Mv(()=>import("./Mouth3DViewer-DcX-MIkJ.js"),[])),$v=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],_v=[17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32];function hu(e){return e==="Healthy"?"#22c55e":e==="Moderate"?"#eab308":e==="Unhealthy"?"#dc2626":"#94a3b8"}function gh({exams:e,selectedExamId:t,onSelectExamId:r,selectedTooth:s,onSelectTooth:a,showDateDropdown:l=!0}){const i=g.useMemo(()=>e.find(m=>m.id===t)??e[e.length-1]??null,[e,t]),o=g.useMemo(()=>i?new Map(i.teeth.map(m=>[m.tooth,m])):new Map,[i]),c=s!=null?o.get(s):null;return e.length===0?n.jsx("div",{className:"rounded-xl border border-sky/40 bg-sky/5 p-4 text-center text-navy/70 text-sm",children:"No GumGauge scans yet. Run a scan and add readings to the chart to see results here."}):n.jsxs("div",{className:"space-y-4",children:[l&&n.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[n.jsx("label",{className:"text-sm font-medium text-navy",children:"Scan date"}),n.jsx("select",{value:t??(i==null?void 0:i.id)??"",onChange:m=>{r(m.target.value||null),a(null)},className:"px-3 py-2 border border-sky/60 rounded-lg bg-white text-sm",children:e.map(m=>n.jsx("option",{value:m.id,children:Q(m.scanDate)},m.id))})]}),n.jsx("p",{className:"text-xs text-navy/60",children:"Click a tooth in either view to select it; the same tooth is highlighted in both. Colors: green = Healthy, amber = Moderate, red = Unhealthy."}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold text-navy mb-2",children:"3D view"}),n.jsx(xh,{fallback:n.jsxs("div",{className:"rounded-xl border border-amber-200 bg-amber-50 p-4 text-amber-800 text-sm",children:[n.jsx("p",{className:"font-medium",children:"3D view couldn't load"}),n.jsx("p",{className:"mt-1",children:"Your browser or device may not support WebGL. Use the 2D map below to select teeth and view results."})]}),children:n.jsx(g.Suspense,{fallback:n.jsx("div",{className:"rounded-xl border border-sky/40 bg-sky/5 p-4 text-center text-navy/60 text-sm",style:{height:320},children:"Loading 3D view"}),children:n.jsx(Rv,{readings:(i==null?void 0:i.teeth)??[],selectedTooth:s,onSelectTooth:a,height:320})})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold text-navy mb-2",children:"2D map"}),n.jsx("div",{className:"flex flex-col items-center rounded-xl border border-sky/40 bg-white/80 p-3",children:n.jsxs("svg",{viewBox:"0 0 320 140",className:"w-full max-w-md h-auto",style:{maxHeight:"220px"},children:[n.jsxs("g",{transform:"translate(10, 10)",children:[n.jsx("text",{x:"0",y:"-2",className:"text-[10px] fill-navy/70",children:"Upper (1-16)"}),$v.map((m,d)=>{const p=o.get(m),h=hu(p==null?void 0:p.healthResult),w=s===m,u=d%8*38+2,b=Math.floor(d/8)*32;return n.jsxs("g",{children:[n.jsx("rect",{x:u,y:b,width:34,height:26,rx:4,fill:h,stroke:w?"#0f172a":"#64748b",strokeWidth:w?2.5:1,opacity:.9,className:"cursor-pointer",onClick:()=>a(s===m?null:m)}),n.jsx("text",{x:u+17,y:b+16,textAnchor:"middle",fontSize:"10",fill:"#fff",fontWeight:"600",children:m})]},m)})]}),n.jsxs("g",{transform:"translate(10, 88)",children:[n.jsx("text",{x:"0",y:"-2",className:"text-[10px] fill-navy/70",children:"Lower (17-32)"}),_v.map((m,d)=>{const p=o.get(m),h=hu(p==null?void 0:p.healthResult),w=s===m,u=d%8*38+2,b=Math.floor(d/8)*32;return n.jsxs("g",{children:[n.jsx("rect",{x:u,y:b,width:34,height:26,rx:4,fill:h,stroke:w?"#0f172a":"#64748b",strokeWidth:w?2.5:1,opacity:.9,className:"cursor-pointer",onClick:()=>a(s===m?null:m)}),n.jsx("text",{x:u+17,y:b+16,textAnchor:"middle",fontSize:"10",fill:"#fff",fontWeight:"600",children:m})]},m)})]})]})})]}),c!=null&&s!=null&&n.jsxs("div",{className:"rounded-lg border-2 border-navy/30 bg-white p-3 text-sm",children:[n.jsxs("p",{className:"font-medium text-navy",children:["Tooth ",s]}),n.jsxs("p",{className:"text-navy/80",children:["Light penetration: ",n.jsx("strong",{children:c.lightPenetrationPercent!=null?`${c.lightPenetrationPercent}%`:""})]}),n.jsxs("p",{className:"text-navy/80",children:["Health: ",n.jsx("strong",{className:c.healthResult==="Unhealthy"?"text-red-600":c.healthResult==="Moderate"?"text-amber-700":"",children:c.healthResult??""})]})]})]})}const fu=[32,31,30,29,28,27,26,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,1,2,3,4,5,6,7,8,9,10];function Lv({exams:e,gumGaugeExams:t=[],onSaveExam:r,onDeleteExam:s,readOnly:a}){const[l,i]=g.useState("numeric"),[o,c]=g.useState([]),[m,d]=g.useState(!1),[p,h]=g.useState(new Date().toISOString().slice(0,10)),[w,u]=g.useState(fu.map(j=>({tooth:j,pd:[...Array(6)],bleeding:Array(6).fill(!1),suppuration:Array(6).fill(!1)}))),[b,C]=g.useState(""),x=(j,A,U)=>{u(q=>q.map(K=>K.tooth===j?{...K,[A]:U}:K))},y=()=>{const j=w.map(A=>{var U,q,K;return{...A,pd:(U=A.pd)==null?void 0:U.map(Z=>Z==null?void 0:Number(Z)),gm:(q=A.gm)==null?void 0:q.map(Z=>Z==null?void 0:Number(Z)),cal:(K=A.cal)==null?void 0:K.map(Z=>Z==null?void 0:Number(Z))}});r({examDate:p,teeth:j,notes:b||void 0}),d(!1),h(new Date().toISOString().slice(0,10)),u(fu.map(A=>({tooth:A,pd:[...Array(6)],bleeding:Array(6).fill(!1),suppuration:Array(6).fill(!1)}))),C("")},v=e.filter(j=>o.includes(j.id)),S=e.length>0?e[e.length-1]:null,[P,E]=g.useState(null),[D,O]=g.useState(null),L=t.length>0?t.find(j=>j.id===P)??t[t.length-1]:null,I=L?new Map(L.teeth.map(j=>[j.tooth,j])):null;return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[n.jsx("span",{className:"text-sm font-medium text-navy",children:"View:"}),n.jsx("button",{type:"button",onClick:()=>i("numeric"),className:`px-3 py-1.5 rounded-lg text-sm font-medium ${l==="numeric"?"bg-navy text-white":"bg-sky/20 text-navy"}`,children:"Numeric"}),n.jsx("button",{type:"button",onClick:()=>i("graphic"),className:`px-3 py-1.5 rounded-lg text-sm font-medium ${l==="graphic"?"bg-navy text-white":"bg-sky/20 text-navy"}`,children:"Graphic"}),e.length>1&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"text-sm text-navy/70",children:"Compare:"}),n.jsx("select",{multiple:!0,value:o,onChange:j=>c(Array.from(j.target.selectedOptions,A=>A.value)),className:"border border-sky/60 rounded-lg px-2 py-1 text-sm max-w-[200px]",children:e.map(j=>n.jsx("option",{value:j.id,children:Q(j.examDate)},j.id))})]}),!a&&n.jsx("button",{type:"button",onClick:()=>d(!0),className:"ml-auto px-3 py-1.5 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700",children:"+ New exam"})]}),m&&n.jsxs("div",{className:"border-2 border-sky/40 rounded-xl p-4 bg-sky/5 space-y-4",children:[n.jsx("h4",{className:"font-medium text-navy",children:"New periodontal exam"}),n.jsxs("div",{className:"flex gap-4 items-center",children:[n.jsx("label",{className:"text-sm text-navy/70",children:"Exam date"}),n.jsx("input",{type:"date",value:p,onChange:j=>h(j.target.value),className:"px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsx("p",{className:"text-xs text-navy/60",children:"PD = Pocket depth (mm), B = Bleeding. Enter values per site (MB, B, DB, ML, L, DL)."}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"overflow-x-auto border border-sky/30 rounded-lg p-2 bg-white",children:[n.jsx("h5",{className:"text-sm font-medium text-navy mb-2",children:"Teeth 116"}),n.jsxs("table",{className:"text-xs border border-sky/40 w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-sky/10",children:[n.jsx("th",{className:"px-2 py-1 border border-sky/30",children:"Tooth"}),vt.map(j=>n.jsxs("th",{className:"px-1 py-1 border border-sky/30",children:["PD ",j]},j)),vt.map(j=>n.jsxs("th",{className:"px-1 py-1 border border-sky/30",children:["B ",j]},`b-${j}`))]})}),n.jsx("tbody",{children:w.filter(j=>j.tooth>=1&&j.tooth<=16).sort((j,A)=>j.tooth-A.tooth).map(j=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-2 py-1 border border-sky/30 font-medium",children:j.tooth}),vt.map((A,U)=>{var q;return n.jsx("td",{className:"px-1 py-0 border border-sky/30",children:n.jsx("input",{type:"number",min:0,max:15,className:"w-10 px-0.5 py-0.5 border rounded",value:((q=j.pd)==null?void 0:q[U])??"",onChange:K=>{const Z=K.target.value===""?void 0:Number(K.target.value),me=[...j.pd??Array(6).fill(void 0)];me[U]=Z,x(j.tooth,"pd",me)}})},A)}),vt.map((A,U)=>{var q;return n.jsx("td",{className:"px-1 py-0 border border-sky/30",children:n.jsx("input",{type:"checkbox",checked:((q=j.bleeding)==null?void 0:q[U])??!1,onChange:K=>{const Z=[...j.bleeding??Array(6).fill(!1)];Z[U]=K.target.checked,x(j.tooth,"bleeding",Z)}})},`b-${A}`)})]},j.tooth))})]})]}),n.jsxs("div",{className:"overflow-x-auto border border-sky/30 rounded-lg p-2 bg-white",children:[n.jsx("h5",{className:"text-sm font-medium text-navy mb-2",children:"Teeth 1732"}),n.jsxs("table",{className:"text-xs border border-sky/40 w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-sky/10",children:[n.jsx("th",{className:"px-2 py-1 border border-sky/30",children:"Tooth"}),vt.map(j=>n.jsxs("th",{className:"px-1 py-1 border border-sky/30",children:["PD ",j]},j)),vt.map(j=>n.jsxs("th",{className:"px-1 py-1 border border-sky/30",children:["B ",j]},`b-${j}`))]})}),n.jsx("tbody",{children:w.filter(j=>j.tooth>=17&&j.tooth<=32).sort((j,A)=>j.tooth-A.tooth).map(j=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-2 py-1 border border-sky/30 font-medium",children:j.tooth}),vt.map((A,U)=>{var q;return n.jsx("td",{className:"px-1 py-0 border border-sky/30",children:n.jsx("input",{type:"number",min:0,max:15,className:"w-10 px-0.5 py-0.5 border rounded",value:((q=j.pd)==null?void 0:q[U])??"",onChange:K=>{const Z=K.target.value===""?void 0:Number(K.target.value),me=[...j.pd??Array(6).fill(void 0)];me[U]=Z,x(j.tooth,"pd",me)}})},A)}),vt.map((A,U)=>{var q;return n.jsx("td",{className:"px-1 py-0 border border-sky/30",children:n.jsx("input",{type:"checkbox",checked:((q=j.bleeding)==null?void 0:q[U])??!1,onChange:K=>{const Z=[...j.bleeding??Array(6).fill(!1)];Z[U]=K.target.checked,x(j.tooth,"bleeding",Z)}})},`b-${A}`)})]},j.tooth))})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Notes"}),n.jsx("textarea",{value:b,onChange:j=>C(j.target.value),rows:2,className:"w-full px-3 py-2 border border-sky/60 rounded-lg text-sm"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:y,className:"px-4 py-2 bg-navy text-white rounded-lg text-sm font-medium",children:"Save exam"}),n.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 border border-navy/30 rounded-lg text-sm",children:"Cancel"})]})]}),l==="numeric"&&(v.length>0||S)&&n.jsx("div",{className:"overflow-x-auto",children:(v.length>0?v:S?[S]:[]).map(j=>n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"font-medium text-navy",children:Q(j.examDate)}),!a&&s&&n.jsx("button",{type:"button",onClick:()=>s(j.id),className:"text-xs text-red-600 hover:underline",children:"Delete"})]}),n.jsxs("table",{className:"text-xs border border-sky/40 w-full",children:[n.jsxs("thead",{children:[n.jsxs("tr",{className:"bg-sky/10",children:[n.jsx("th",{className:"px-2 py-1 border border-sky/30",children:"Tooth"}),vt.map(A=>n.jsx("th",{className:"px-1 py-1 border border-sky/30",colSpan:2,children:A},A))]}),n.jsxs("tr",{className:"bg-sky/5",children:[n.jsx("th",{className:"px-2 py-1 border border-sky/30"}),vt.map(A=>n.jsxs(tr.Fragment,{children:[n.jsx("th",{className:"px-1 py-1 border border-sky/30",children:"PD"}),n.jsx("th",{className:"px-1 py-1 border border-sky/30",children:"B"})]},A))]})]}),n.jsx("tbody",{children:j.teeth.slice(0,32).map(A=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-2 py-1 border border-sky/30 font-medium",children:A.tooth}),vt.map((U,q)=>{var K,Z;return n.jsxs(tr.Fragment,{children:[n.jsx("td",{className:"px-1 py-1 border border-sky/30",children:((K=A.pd)==null?void 0:K[q])??""}),n.jsx("td",{className:"px-1 py-1 border border-sky/30",children:(Z=A.bleeding)!=null&&Z[q]?"":""})]},U)})]},A.tooth))})]}),j.notes&&n.jsx("p",{className:"text-xs text-navy/70 mt-1",children:j.notes})]},j.id))}),l==="graphic"&&S&&n.jsxs("div",{className:"border border-sky/40 rounded-lg p-4 bg-white",children:[n.jsxs("p",{className:"text-sm font-medium text-navy mb-2",children:["Graphic view  ",Q(S.examDate)]}),n.jsx("div",{className:"grid grid-cols-8 gap-1 text-center",children:S.teeth.slice(0,32).map(j=>n.jsxs("div",{className:"border border-sky/30 rounded p-1 bg-sky/5",children:[n.jsx("span",{className:"text-xs font-medium",children:j.tooth}),n.jsx("div",{className:"flex justify-center gap-0.5 mt-0.5",children:(j.pd??[]).slice(0,6).map((A,U)=>n.jsx("span",{className:`text-[10px] w-4 ${A!==void 0&&A>=5?"text-red-600 font-medium":"text-navy/70"}`,title:vt[U],children:A??""},U))}),(j.bleeding??[]).some(Boolean)&&n.jsx("span",{className:"text-red-500 text-[10px]",children:"B"})]},j.tooth))}),n.jsx("p",{className:"text-xs text-navy/60 mt-2",children:"Pocket depths (mm) by site. Red = 5+ mm. B = bleeding."})]}),L&&I&&n.jsxs("div",{className:"border border-green-200 rounded-xl p-4 bg-green-50/80 space-y-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[n.jsx("h4",{className:"text-sm font-semibold text-navy",children:"GumGauge device results (auto-filled from scan)"}),t.length>1&&n.jsxs(n.Fragment,{children:[n.jsx("label",{className:"text-xs text-navy/70",children:"Scan date:"}),n.jsx("select",{value:P??L.id,onChange:j=>E(j.target.value||null),className:"px-2 py-1 border border-sky/60 rounded-lg bg-white text-sm",children:t.map(j=>n.jsx("option",{value:j.id,children:Q(j.scanDate)},j.id))})]})]}),n.jsxs("p",{className:"text-xs text-navy/70",children:[t.length===1&&`Scan date: ${Q(L.scanDate)}  `,"Light penetration % and health evaluation from device. Use with perio chart above."]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"overflow-x-auto border border-sky/30 rounded-lg p-2 bg-white",children:[n.jsx("h5",{className:"text-xs font-medium text-navy mb-2",children:"Teeth 116"}),n.jsxs("table",{className:"text-xs w-full border border-sky/40",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-sky/10",children:[n.jsx("th",{className:"px-2 py-1 border border-sky/30",children:"Tooth"}),n.jsx("th",{className:"px-2 py-1 border border-sky/30",children:"Light %"}),n.jsx("th",{className:"px-2 py-1 border border-sky/30",children:"Health"})]})}),n.jsx("tbody",{children:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16].map(j=>{const A=I.get(j);return n.jsxs("tr",{children:[n.jsx("td",{className:"px-2 py-1 border border-sky/30 font-medium",children:j}),n.jsx("td",{className:"px-2 py-1 border border-sky/30",children:(A==null?void 0:A.lightPenetrationPercent)!=null?`${A.lightPenetrationPercent}%`:""}),n.jsx("td",{className:`px-2 py-1 border border-sky/30 ${(A==null?void 0:A.healthResult)==="Unhealthy"?"text-red-600 font-medium":(A==null?void 0:A.healthResult)==="Moderate"?"text-amber-700":""}`,children:(A==null?void 0:A.healthResult)??""})]},j)})})]})]}),n.jsxs("div",{className:"overflow-x-auto border border-sky/30 rounded-lg p-2 bg-white",children:[n.jsx("h5",{className:"text-xs font-medium text-navy mb-2",children:"Teeth 1732"}),n.jsxs("table",{className:"text-xs w-full border border-sky/40",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-sky/10",children:[n.jsx("th",{className:"px-2 py-1 border border-sky/30",children:"Tooth"}),n.jsx("th",{className:"px-2 py-1 border border-sky/30",children:"Light %"}),n.jsx("th",{className:"px-2 py-1 border border-sky/30",children:"Health"})]})}),n.jsx("tbody",{children:[17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32].map(j=>{const A=I.get(j);return n.jsxs("tr",{children:[n.jsx("td",{className:"px-2 py-1 border border-sky/30 font-medium",children:j}),n.jsx("td",{className:"px-2 py-1 border border-sky/30",children:(A==null?void 0:A.lightPenetrationPercent)!=null?`${A.lightPenetrationPercent}%`:""}),n.jsx("td",{className:`px-2 py-1 border border-sky/30 ${(A==null?void 0:A.healthResult)==="Unhealthy"?"text-red-600 font-medium":(A==null?void 0:A.healthResult)==="Moderate"?"text-amber-700":""}`,children:(A==null?void 0:A.healthResult)??""})]},j)})})]})]})]}),n.jsxs("div",{className:"mt-4 pt-4 border-t border-green-200",children:[n.jsx("p",{className:"text-xs font-medium text-navy mb-2",children:"Interactive view  click a tooth to see details"}),n.jsx(gh,{exams:t,selectedExamId:P??(L==null?void 0:L.id)??null,onSelectExamId:E,selectedTooth:D,onSelectTooth:O,showDateDropdown:!1})]})]}),e.length===0&&!m&&n.jsx("p",{className:"text-navy/60 text-sm",children:"No periodontal exams yet. Add an exam to record pocket depths, bleeding, and compare over time."})]})}const Na=[{id:"new-patient",name:"New patient exam",placeholder:`Chief complaint:
Medical history reviewed:
Clinical findings:
Treatment discussed:
Plan:`},{id:"prophy",name:"Prophylaxis",placeholder:`Prophy completed. Findings:
Patient education:
Next recall:`},{id:"srp",name:"Scaling and root planing",placeholder:`Areas treated:
Anesthesia:
Post-op instructions:
Follow-up:`},{id:"emergency",name:"Emergency visit",placeholder:`Chief complaint:
Clinical findings:
Treatment rendered:
Disposition:`},{id:"restorative",name:"Restorative",placeholder:`Tooth/teeth:
Procedure:
Materials:
Notes:`},{id:"extraction",name:"Extraction",placeholder:`Tooth:
Indication:
Anesthesia:
Technique:
Post-op instructions:`},{id:"custom",name:"Free form",placeholder:"Enter clinical note..."}];function Fv({notes:e,onAdd:t,onDelete:r,readOnly:s}){const[a,l]=g.useState(!1),[i,o]=g.useState(Na[0].id),[c,m]=g.useState(""),[d,p]=g.useState(new Date().toISOString().slice(0,10)),h=Na.find(b=>b.id===i),w=()=>{t({date:d,templateId:i==="custom"?void 0:i,content:c,author:void 0}),l(!1),m(""),p(new Date().toISOString().slice(0,10))},u=()=>{h!=null&&h.placeholder&&m(h.placeholder)};return n.jsxs("div",{className:"space-y-4",children:[!s&&n.jsx("div",{className:"flex flex-wrap items-center gap-2",children:n.jsx("button",{type:"button",onClick:()=>l(!0),className:"px-3 py-1.5 bg-navy text-white rounded-lg text-sm font-medium hover:bg-navy-light",children:"+ Add progress note"})}),a&&n.jsxs("div",{className:"border-2 border-sky/40 rounded-xl p-4 bg-sky/5 space-y-3",children:[n.jsx("h4",{className:"font-medium text-navy",children:"New clinical / progress note"}),n.jsxs("div",{className:"flex flex-wrap gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-navy/70 mb-1",children:"Date"}),n.jsx("input",{type:"date",value:d,onChange:b=>p(b.target.value),className:"px-3 py-2 border border-sky/60 rounded-lg text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-navy/70 mb-1",children:"Template"}),n.jsx("select",{value:i,onChange:b=>{o(b.target.value),m("")},className:"px-3 py-2 border border-sky/60 rounded-lg bg-white text-sm",children:Na.map(b=>n.jsx("option",{value:b.id,children:b.name},b.id))})]}),(h==null?void 0:h.placeholder)&&n.jsx("button",{type:"button",onClick:u,className:"self-end px-3 py-2 border border-sky/60 rounded-lg text-sm",children:"Load template"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-navy/70 mb-1",children:"Content"}),n.jsx("textarea",{value:c,onChange:b=>m(b.target.value),rows:8,placeholder:h==null?void 0:h.placeholder,className:"w-full px-3 py-2 border border-sky/60 rounded-lg text-sm resize-y"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:w,className:"px-4 py-2 bg-navy text-white rounded-lg text-sm font-medium",children:"Save note"}),n.jsx("button",{type:"button",onClick:()=>{l(!1),m("")},className:"px-4 py-2 border border-navy/30 rounded-lg text-sm",children:"Cancel"})]})]}),n.jsx("ul",{className:"space-y-3",children:[...e].reverse().map(b=>{var C;return n.jsxs("li",{className:"border border-sky/30 rounded-lg p-3 bg-white",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[n.jsx("span",{className:"text-sm font-medium text-navy",children:Q(b.date)}),b.templateId&&n.jsx("span",{className:"text-xs text-navy/60",children:((C=Na.find(x=>x.id===b.templateId))==null?void 0:C.name)??b.templateId}),!s&&r&&n.jsx("button",{type:"button",onClick:()=>r(b.id),className:"text-xs text-red-600 hover:underline",children:"Delete"})]}),n.jsx("pre",{className:"text-sm text-navy/90 whitespace-pre-wrap font-sans",children:b.content})]},b.id)})}),e.length===0&&!a&&n.jsx("p",{className:"text-navy/60 text-sm",children:"No clinical notes yet."})]})}const wn=[{code:"D0120",description:"Periodic oral evaluation",defaultFee:75},{code:"D0150",description:"Comprehensive oral evaluation",defaultFee:150},{code:"D0210",description:"Intraoral - complete series of radiographs",defaultFee:185},{code:"D0220",description:"Intraoral - periapical first film",defaultFee:35},{code:"D0274",description:"Bitewing - 4 films",defaultFee:95},{code:"D1110",description:"Prophylaxis - adult",defaultFee:125},{code:"D1120",description:"Prophylaxis - child",defaultFee:95},{code:"D1351",description:"Dental sealant - per tooth",defaultFee:55},{code:"D2140",description:"Amalgam - 1 surface, primary",defaultFee:135},{code:"D2150",description:"Amalgam - 2 surfaces, primary",defaultFee:155},{code:"D2160",description:"Amalgam - 3 surfaces, primary",defaultFee:175},{code:"D2330",description:"Resin - 1 surface, anterior",defaultFee:185},{code:"D2391",description:"Resin - 1 surface, posterior",defaultFee:195},{code:"D2392",description:"Resin - 2 surfaces, posterior",defaultFee:225},{code:"D2393",description:"Resin - 3 surfaces, posterior",defaultFee:265},{code:"D2740",description:"Crown - porcelain/ceramic",defaultFee:1295},{code:"D2750",description:"Crown - porcelain fused to metal",defaultFee:1195},{code:"D2790",description:"Crown - full cast noble metal",defaultFee:1095},{code:"D3110",description:"Pulp cap - direct",defaultFee:95},{code:"D3220",description:"Therapeutic pulpotomy",defaultFee:195},{code:"D3310",description:"Endodontic therapy - anterior",defaultFee:995},{code:"D3320",description:"Endodontic therapy - bicuspid",defaultFee:1095},{code:"D3330",description:"Endodontic therapy - molar",defaultFee:1295},{code:"D4210",description:"Gingivectomy - 4 or more teeth",defaultFee:395},{code:"D4341",description:"Scaling and root planing - per quadrant",defaultFee:285},{code:"D7240",description:"Extraction - erupted tooth",defaultFee:195},{code:"D9230",description:"Analgesia - nitrous oxide",defaultFee:85},{code:"D9248",description:"Non-intravenous conscious sedation",defaultFee:295}];function yh(e){var t;return(t=wn.find(r=>r.code===e))==null?void 0:t.defaultFee}const vh=["Penicillin","Amoxicillin","Latex","Sulfa drugs","Aspirin","Ibuprofen","Codeine","Local anesthetic (e.g. lidocaine)","Nickel","No known allergies"],bh=["Diabetes","Hypertension","Heart disease","Asthma","Blood thinners (anticoagulants)","Osteoporosis","Pregnancy","Cancer / chemotherapy","HIV/AIDS","Hepatitis","Rheumatoid arthritis","Thyroid disorder","Kidney disease","Liver disease","Anxiety / depression","Epilepsy","None"],Nh=["None","Metformin","Lisinopril","Amlodipine","Warfarin","Aspirin","Insulin","Levothyroxine","Omeprazole","Atorvastatin","Metoprolol","Albuterol","Gabapentin","Sertraline","Amitriptyline"],Ao=["PPO","HMO","EPO","DHMO","DPPO","Indemnity","Medicare","Medicaid","Select plan"],jh=["Implant consultation","TMJ follow-up","Crown delivery","Bridge delivery","Denture adjustment","Botox / filler","Sleep apnea appliance","Invisalign check","Bonding","Veneer consultation","Oral surgery consultation","Periodontal surgery","Emergency pain"],wh=["Routine checkup","Cleaning","Tooth pain","Sensitive teeth","Broken tooth","Lost filling","Bleeding gums","Bad breath","Jaw pain","Cosmetic consultation","Denture problem","Impacted tooth","Swelling","Follow-up","Second opinion","Reason for visit"],xu=["Op 1","Op 2","Op 3","Op 4","Op 5","Op 6","Operatory 1","Operatory 2","Room 1","Room 2","Room A","Room B","Suite 1","Suite 2"],Uv=["DDS","DMD","MD","DO","RPh","DDS, MS","DMD, MS","DDS, PhD"],zv=["250mg capsule","500mg capsule","500mg tablet","250mg/5ml suspension","500mg/5ml suspension","0.12% rinse","400mg tablet","5mg tablet","10mg tablet","325mg tablet","0.5mg tablet","1% gel"],Bv=["Phase 1: Emergency","Phase 2: Restorative","Phase 3: Perio","Phase 4: Endo","Phase 5: Crowns / prosthetics","Phase 6: Implants","Phase 7: Ortho","Phase 8: Maintenance","Phase 1: Evaluation","Phase 2: Surgical","Phase 3: Maintenance"],gu=["Panoramic X-ray","Bitewing","Periapical","Full mouth series","CBCT","Intraoral photo","GumGauge Scan","Panoramic X-ray Jan","Bitewing 4-film","Periapical #3","Pre-op","Post-op"],Sh=["Root canal #3","Root canal #14","Root canal #19","Extraction #1","Extraction - erupted tooth","Crown #3","Crown #14","Prophylaxis - adult","Scaling and root planing - per quadrant","Periodic oral evaluation","Comprehensive oral evaluation","Bitewing - 4 films","Intraoral - complete series","Resin - 1 surface, posterior","Resin - 2 surfaces, posterior","Amalgam - 2 surfaces, primary","Crown - porcelain/ceramic","Endodontic therapy - molar","Dental sealant - per tooth","Pulp cap - direct"];function ja(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}function Vv({plans:e,patientName:t,onAddPlan:r,onUpdatePlan:s,onDeletePlan:a,onAssignToBilling:l,readOnly:i}){const[o,c]=g.useState(!1),[m,d]=g.useState([]),[p,h]=g.useState("Draft"),[w,u]=g.useState(""),b=()=>{d(D=>[...D,{id:crypto.randomUUID(),name:"",procedures:[{description:"",estimatedFee:void 0}],notes:""}])},C=(D,O)=>{d(L=>L.map(I=>I.id===D?{...I,...O}:I))},x=(D,O,L)=>{d(I=>I.map(j=>j.id===D?{...j,procedures:j.procedures.map((A,U)=>U===O?{...A,...L}:A)}:j))},y=D=>{d(O=>O.map(L=>L.id===D?{...L,procedures:[...L.procedures,{description:"",estimatedFee:void 0}]}:L))},v=(D,O)=>{d(L=>L.map(I=>I.id===D?{...I,procedures:I.procedures.filter((j,A)=>A!==O)}:I))},S=()=>{m.length!==0&&(r({createdAt:new Date().toISOString(),phases:m,status:p,notes:w||void 0}),c(!1),d([]),h("Draft"),u(""))},P=D=>{const O=D.phases.map(I=>`<div class="phase"><h3>${I.name}</h3><table><thead><tr><th>Code</th><th>Description</th><th>Est. fee</th></tr></thead><tbody>${I.procedures.map(j=>`<tr><td>${j.code??""}</td><td>${j.description}</td><td>${j.estimatedFee!=null?ja(j.estimatedFee):""}</td></tr>`).join("")}</tbody></table>${I.notes?`<p>${I.notes}</p>`:""}</div>`).join(""),L=D.phases.flatMap(I=>I.procedures).reduce((I,j)=>I+(j.estimatedFee??0),0);return`<h2>Treatment Plan  ${t}</h2><p>Created ${Q(D.createdAt)}</p>${O}${D.notes?`<p>${D.notes}</p>`:""}<p><strong>Total estimated: ${ja(L)}</strong></p>`},E=D=>{const O=window.open("","_blank");O&&(O.document.write(`
      <!DOCTYPE html><html><head><title>Treatment Plan - ${t}</title>
      <style>body{font-family:sans-serif;padding:2rem;max-width:800px;margin:0 auto} table{width:100%;border-collapse:collapse} th,td{border:1px solid #ccc;padding:8px;text-align:left} th{background:#f0f0f0} .phase{margin-top:1.5rem} h2{margin-top:0} h3{margin-top:1rem}</style>
      </head><body>${P(D)}</body></html>
    `),O.document.close(),O.print(),O.close())};return n.jsxs("div",{className:"space-y-4",children:[!i&&n.jsx("div",{className:"flex flex-wrap items-center gap-2",children:n.jsx("button",{type:"button",onClick:()=>c(!0),className:"px-3 py-1.5 bg-navy text-white rounded-lg text-sm font-medium hover:bg-navy-light",children:"+ New treatment plan"})}),o&&n.jsxs("div",{className:"border-2 border-sky/40 rounded-xl p-4 bg-sky/5 space-y-4",children:[n.jsx("h4",{className:"font-medium text-navy",children:"New treatment plan"}),m.length===0?n.jsx("button",{type:"button",onClick:b,className:"px-3 py-2 bg-sky/20 text-navy rounded-lg text-sm font-medium",children:"+ Add phase"}):m.map(D=>n.jsxs("div",{className:"border border-sky/30 rounded-lg p-3 bg-white",children:[n.jsx("input",{type:"text",value:D.name,onChange:O=>C(D.id,{name:O.target.value}),placeholder:"Phase name (e.g. Phase 1: Emergency)",list:"treatment-phase-name-list",autoComplete:"off",className:"w-full px-3 py-2 border border-sky/60 rounded-lg text-sm mb-2"}),n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-sky/10",children:[n.jsx("th",{className:"px-2 py-1 text-left",children:"Code"}),n.jsx("th",{className:"px-2 py-1 text-left",children:"Description"}),n.jsx("th",{className:"px-2 py-1 text-right",children:"Est. fee"}),n.jsx("th",{className:"w-8"})]})}),n.jsx("tbody",{children:D.procedures.map((O,L)=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-2 py-1",children:n.jsxs("select",{value:O.code??"",onChange:I=>{const j=I.target.value,A=wn.find(U=>U.code===j);x(D.id,L,{code:j||void 0,description:A?A.description:O.description,estimatedFee:j?yh(j)??O.estimatedFee:O.estimatedFee})},className:"w-28 px-2 py-1 border rounded bg-white text-sm",children:[n.jsx("option",{value:"",children:""}),wn.map(I=>n.jsxs("option",{value:I.code,children:[I.code," ",I.description,I.defaultFee!=null?`  $${I.defaultFee}`:""]},I.code))]})}),n.jsx("td",{className:"px-2 py-1",children:n.jsx("input",{type:"text",value:O.description,onChange:I=>x(D.id,L,{description:I.target.value}),placeholder:"Procedure",list:"treatment-procedure-desc-list",autoComplete:"off",className:"w-full px-2 py-1 border rounded"})}),n.jsx("td",{className:"px-2 py-1 text-right",children:n.jsx("input",{type:"number",min:0,step:.01,value:O.estimatedFee??"",onChange:I=>x(D.id,L,{estimatedFee:I.target.value===""?void 0:Number(I.target.value)}),placeholder:"0",className:"w-24 px-2 py-1 border rounded text-right"})}),n.jsx("td",{children:n.jsx("button",{type:"button",onClick:()=>v(D.id,L),className:"text-red-600 text-xs",children:""})})]},L))})]}),n.jsx("button",{type:"button",onClick:()=>y(D.id),className:"mt-1 text-sm text-sky-dark font-medium",children:"+ Add procedure"})]},D.id)),n.jsx("datalist",{id:"treatment-phase-name-list",children:Bv.map(D=>n.jsx("option",{value:D},D))}),n.jsx("datalist",{id:"treatment-procedure-desc-list",children:Sh.map(D=>n.jsx("option",{value:D},D))}),m.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",onClick:b,className:"px-3 py-2 border border-sky/60 rounded-lg text-sm",children:"+ Add another phase"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-navy/70 mb-1",children:"Status"}),n.jsxs("select",{value:p,onChange:D=>h(D.target.value),className:"px-3 py-2 border border-sky/60 rounded-lg text-sm",children:[n.jsx("option",{value:"Draft",children:"Draft"}),n.jsx("option",{value:"Accepted",children:"Accepted"}),n.jsx("option",{value:"In progress",children:"In progress"}),n.jsx("option",{value:"Completed",children:"Completed"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-navy/70 mb-1",children:"Notes"}),n.jsx("textarea",{value:w,onChange:D=>u(D.target.value),rows:2,className:"w-full px-3 py-2 border border-sky/60 rounded-lg text-sm"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:S,className:"px-4 py-2 bg-navy text-white rounded-lg text-sm font-medium",children:"Save plan"}),n.jsx("button",{type:"button",onClick:()=>{c(!1),d([])},className:"px-4 py-2 border border-navy/30 rounded-lg text-sm",children:"Cancel"})]})]})]}),e.map(D=>n.jsxs("div",{className:"border border-sky/40 rounded-xl p-4 bg-white",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-3",children:[n.jsxs("span",{className:"text-sm font-medium text-navy",children:[Q(D.createdAt),"  ",D.status??"Draft"]}),n.jsxs("div",{className:"flex gap-2",children:[!i&&n.jsxs("select",{value:D.status??"Draft",onChange:O=>{const L=O.target.value,I=new Date().toISOString();L==="Accepted"?s(D.id,{status:"Accepted",acceptedAt:I}):L==="Declined"?s(D.id,{status:"Declined",declinedAt:I}):s(D.id,{status:L})},className:"px-2 py-1 border border-sky/60 rounded text-sm",children:[n.jsx("option",{value:"Draft",children:"Draft"}),n.jsx("option",{value:"Accepted",children:"Accepted"}),n.jsx("option",{value:"Declined",children:"Declined"}),n.jsx("option",{value:"In progress",children:"In progress"}),n.jsx("option",{value:"Completed",children:"Completed"})]}),n.jsx("button",{type:"button",onClick:()=>E(D),className:"px-3 py-1.5 border border-sky/60 rounded-lg text-sm font-medium",children:"Print / Email"}),!i&&l&&n.jsx("button",{type:"button",onClick:()=>l(D),className:"px-3 py-1.5 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700",children:"Assign to Billing"}),!i&&a&&n.jsx("button",{type:"button",onClick:()=>a(D.id),className:"text-xs text-red-600 hover:underline",children:"Delete"})]})]}),n.jsxs("div",{className:"treatment-plan-print",children:[n.jsxs("h2",{className:"text-lg font-semibold text-navy mb-1",children:["Treatment Plan  ",t]}),n.jsxs("p",{className:"text-sm text-navy/70 mb-4",children:["Created ",Q(D.createdAt)]}),D.phases.map(O=>n.jsxs("div",{className:"phase",children:[n.jsx("h3",{className:"font-medium text-navy mt-4 mb-2",children:O.name}),n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-sky/10",children:[n.jsx("th",{className:"px-2 py-1 text-left border border-sky/30",children:"Code"}),n.jsx("th",{className:"px-2 py-1 text-left border border-sky/30",children:"Description"}),n.jsx("th",{className:"px-2 py-1 text-right border border-sky/30",children:"Est. fee"})]})}),n.jsx("tbody",{children:O.procedures.map((L,I)=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-2 py-1 border border-sky/30",children:L.code??""}),n.jsx("td",{className:"px-2 py-1 border border-sky/30",children:L.description}),n.jsx("td",{className:"px-2 py-1 text-right border border-sky/30",children:L.estimatedFee!=null?ja(L.estimatedFee):""})]},I))})]}),O.notes&&n.jsx("p",{className:"text-xs text-navy/70 mt-1",children:O.notes})]},O.id)),D.notes&&n.jsx("p",{className:"text-sm text-navy/80 mt-4",children:D.notes}),n.jsxs("p",{className:"text-xs text-navy/60 mt-4",children:["Total estimated: ",ja(D.phases.flatMap(O=>O.procedures).reduce((O,L)=>O+(L.estimatedFee??0),0))]})]})]},D.id)),e.length===0&&!o&&n.jsx("p",{className:"text-navy/60 text-sm",children:"No formal treatment plans yet."})]})}function Le({id:e,title:t,subtitle:r,children:s,defaultOpen:a=!0,badge:l}){const[i,o]=g.useState(()=>{try{const m=`gumgauge-chart-section-${e}`,d=localStorage.getItem(m);return d!==null?d==="1":a}catch{return a}}),c=()=>{const m=!i;o(m);try{localStorage.setItem(`gumgauge-chart-section-${e}`,m?"1":"0")}catch{}};return n.jsxs("section",{className:"border-b border-sky/20 last:border-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full flex items-center justify-between gap-2 py-3 text-left focus:outline-none focus:ring-2 focus:ring-sky/50 focus:ring-inset rounded-lg","aria-expanded":i,"aria-controls":`section-${e}`,id:`section-toggle-${e}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`inline-block transition-transform ${i?"rotate-90":""}`,"aria-hidden":!0,children:""}),n.jsx("h2",{className:"text-sm font-semibold text-navy uppercase tracking-wide",children:t}),l!=null&&n.jsx("span",{className:"text-xs text-navy/60 font-normal normal-case",children:l})]})}),r&&i&&n.jsx("p",{className:"text-xs text-navy/60 mb-2 pl-6 -mt-1",children:r}),n.jsx("div",{id:`section-${e}`,role:"region","aria-labelledby":`section-toggle-${e}`,className:i?"pb-4":"hidden",children:s})]})}const bn=["UnitedHealthcare","Anthem (Elevance Health)","Kaiser Permanente","Centene Corporation","Humana","CVS Health (Aetna)","Cigna","Health Care Service Corporation (HCSC)","Molina Healthcare","Independence Health Group","Blue Cross Blue Shield of Michigan","Highmark","Blue Shield of California","Florida Blue","Capital Health Plan","UPMC Health Plan","CareFirst BlueCross BlueShield","EmblemHealth","Health Net","Oscar Health"],mt="Other",Ni=typeof window<"u"&&(window.SpeechRecognition||window.webkitSpeechRecognition);function Hv(e){const[t,r]=g.useState(!1),[s,a]=g.useState(""),[l,i]=g.useState(null),o=g.useRef(null),c=g.useRef(e==null?void 0:e.onFinalTranscript);c.current=e==null?void 0:e.onFinalTranscript;const m=!!Ni,d=g.useCallback(()=>{const h=o.current;if(h){try{h.stop()}catch{}o.current=null}r(!1),a("")},[]),p=g.useCallback(()=>{if(!Ni){i("Speech recognition is not supported in this browser. Try Chrome or Edge.");return}i(null);const h=new Ni;h.continuous=!0,h.interimResults=!0,h.lang=e==null?void 0:e.lang,h.maxAlternatives=1,h.onresult=w=>{var C;let u="",b="";for(let x=w.resultIndex;x<w.results.length;x++){const y=w.results[x],v=((C=y[0])==null?void 0:C.transcript)??"";y.isFinal?b+=v:u+=v}u&&a(u),b&&c.current&&c.current(b)},h.onend=()=>{r(!1),a(""),o.current=null},h.onerror=w=>{w.error==="not-allowed"?i("Microphone access was denied."):w.error==="no-speech"?i(null):i(w.message||"Speech recognition error."),r(!1),a(""),o.current=null};try{h.start(),o.current=h,r(!0)}catch(w){i(w instanceof Error?w.message:"Could not start recognition.")}},[e==null?void 0:e.lang]);return g.useEffect(()=>()=>{const h=o.current;if(h){try{h.abort()}catch{}o.current=null}},[]),{isSupported:m,isListening:t,interimTranscript:s,error:l,start:p,stop:d}}function Wv(e){if(!e.trim())return"";const r=e.trim().split(/\n|[.!?]+/).map(l=>l.trim()).filter(l=>l.length>8),s=new Set,a=[];for(const l of r){const i=l.slice(0,50).toLowerCase();s.has(i)||(s.add(i),a.push(" "+l.replace(/^[\s\-]+/,"")))}return a.join(`
`)}const Gv=["Amoxicillin","Amoxicillin-Clavulanate","Azithromycin","Clindamycin","Ibuprofen","Acetaminophen","Naproxen","Hydrocodone-Acetaminophen","Tramadol","Penicillin VK","Metronidazole","Chlorhexidine gluconate","Fluoride toothpaste","Other"];function Yv({prescriptions:e,patientName:t,patientDob:r,defaultPrescriberName:s="",defaultPrescriberCredentials:a="DDS",defaultDeaNumber:l="",signedInStaffId:i,onAdd:o,onDelete:c,readOnly:m=!1}){const[d,p]=g.useState(!1),[h,w]=g.useState("Other"),[u,b]=g.useState(""),[C,x]=g.useState(""),[y,v]=g.useState(""),[S,P]=g.useState(""),[E,D]=g.useState("0"),[O,L]=g.useState(s),[I,j]=g.useState(a),[A,U]=g.useState(l),[q,K]=g.useState(""),Z=h==="Other"?u:h,me=()=>{const T=parseInt(S,10),X=parseInt(E,10);!Z.trim()||!y.trim()||Number.isNaN(T)||T<1||(o({date:new Date().toISOString().slice(0,10),medication:Z.trim(),strength:C.trim()||void 0,sig:y.trim(),quantity:T,refills:Number.isNaN(X)||X<0?0:X,prescriberName:O.trim()||"Prescriber",prescriberCredentials:I.trim()||void 0,deaNumber:A.trim()||void 0,prescribedByStaffId:i,note:q.trim()||void 0}),p(!1),w("Other"),b(""),x(""),v(""),P(""),D("0"),L(s),j(a),U(l),K(""))},z=T=>{const X=T.strength?`${T.medication} ${T.strength}`:T.medication;return`
      <div class="rx-block" style="margin-top:1.5rem; padding:1rem; border:1px solid #333;">
        <p style="margin:0 0 0.5rem 0;"><strong>Patient:</strong> ${t} &nbsp; <strong>DOB:</strong> ${Q(r)}</p>
        <p style="margin:0 0 0.5rem 0;"><strong>Date:</strong> ${Q(T.date)}</p>
        <p style="margin:0 0 0.5rem 0; font-size:1.1em;"><strong>${X}</strong></p>
        <p style="margin:0 0 0.5rem 0;"><strong>Sig:</strong> ${T.sig}</p>
        <p style="margin:0 0 0.5rem 0;"><strong>Quantity:</strong> ${T.quantity} &nbsp; <strong>Refills:</strong> ${T.refills}</p>
        <p style="margin:0.5rem 0 0 0;">_________________________</p>
        <p style="margin:0; font-size:0.95em;">${T.prescriberName}${T.prescriberCredentials?`, ${T.prescriberCredentials}`:""}</p>
        ${T.deaNumber?`<p style="margin:0; font-size:0.85em;">DEA: ${T.deaNumber}</p>`:""}
      </div>`},Y=T=>{const X=window.open("","_blank");X&&(X.document.write(`
      <!DOCTYPE html><html><head><title>Prescription - ${t}</title>
      <style>
        body { font-family: Georgia, serif; padding: 2rem; max-width: 600px; margin: 0 auto; }
        .rx-block { font-size: 14px; }
      </style></head><body>
      <h2 style="margin-top:0;">Prescription</h2>
      ${z(T)}
      </body></html>
    `),X.document.close(),X.print(),X.close())};return n.jsxs("div",{className:"space-y-4",children:[!m&&n.jsx("div",{className:"flex flex-wrap items-center gap-2",children:n.jsx("button",{type:"button",onClick:()=>p(!0),className:"px-3 py-1.5 bg-navy text-white rounded-lg text-sm font-medium hover:bg-navy-light",children:"+ New prescription"})}),d&&n.jsxs("div",{className:"border-2 border-sky/40 rounded-xl p-4 bg-sky/5 space-y-4",children:[n.jsx("h4",{className:"font-medium text-navy",children:"New prescription"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Medication *"}),n.jsx("select",{value:h,onChange:T=>w(T.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white",children:Gv.map(T=>n.jsx("option",{value:T,children:T},T))}),h==="Other"&&n.jsx("input",{type:"text",value:u,onChange:T=>b(T.target.value),placeholder:"Type medication name",className:"w-full mt-1 px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Strength / form"}),n.jsx("input",{type:"text",value:C,onChange:T=>x(T.target.value),placeholder:"e.g. 500mg capsule",list:"rx-strength-list",autoComplete:"off",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"}),n.jsx("datalist",{id:"rx-strength-list",children:zv.map(T=>n.jsx("option",{value:T},T))})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Sig (directions for use) *"}),n.jsx("input",{type:"text",value:y,onChange:T=>v(T.target.value),placeholder:"e.g. Take 1 tablet by mouth twice daily for 7 days",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Quantity *"}),n.jsx("input",{type:"number",min:1,value:S,onChange:T=>P(T.target.value),placeholder:"e.g. 30",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Refills"}),n.jsx("input",{type:"number",min:0,value:E,onChange:T=>D(T.target.value),placeholder:"0",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Prescriber name *"}),n.jsx("input",{type:"text",value:O,onChange:T=>L(T.target.value),placeholder:"e.g. Dr. Smith",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Credentials"}),n.jsx("input",{type:"text",value:I,onChange:T=>j(T.target.value),placeholder:"e.g. DDS",list:"rx-credentials-list",autoComplete:"off",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"}),n.jsx("datalist",{id:"rx-credentials-list",children:Uv.map(T=>n.jsx("option",{value:T},T))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"DEA number (if controlled)"}),n.jsx("input",{type:"text",value:A,onChange:T=>U(T.target.value),placeholder:"Optional",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Note (optional)"}),n.jsx("input",{type:"text",value:q,onChange:T=>K(T.target.value),placeholder:"e.g. Take with food",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:me,className:"px-4 py-2 bg-navy text-white rounded-lg text-sm font-medium",children:"Sign & save prescription"}),n.jsx("button",{type:"button",onClick:()=>p(!1),className:"px-4 py-2 border border-navy/30 rounded-lg text-sm",children:"Cancel"})]})]}),e.length===0&&!d&&n.jsx("p",{className:"text-navy/60 text-sm",children:"No prescriptions on file."}),e.map(T=>n.jsxs("div",{className:"border border-sky/40 rounded-xl p-4 bg-white",children:[n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 mb-2",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"font-medium text-navy",children:[T.medication,T.strength?` ${T.strength}`:""]}),n.jsxs("p",{className:"text-sm text-navy/70",children:[Q(T.date),"  ",T.prescriberName,T.prescriberCredentials?`, ${T.prescriberCredentials}`:""]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:()=>Y(T),className:"px-3 py-1.5 border border-sky/60 rounded-lg text-sm font-medium hover:bg-sky/10",children:"Print"}),!m&&c&&n.jsx("button",{type:"button",onClick:()=>c(T.id),className:"text-xs text-red-600 hover:underline",children:"Delete"})]})]}),n.jsxs("p",{className:"text-sm text-navy/80",children:[n.jsx("strong",{children:"Sig:"})," ",T.sig]}),n.jsxs("p",{className:"text-sm text-navy/70",children:["Quantity: ",T.quantity,"  Refills: ",T.refills]}),T.note&&n.jsx("p",{className:"text-xs text-navy/60 mt-1",children:T.note})]},T.id))]})}function Kv({allergies:e,medicalConditions:t,currentMedications:r}){const s=e==null?void 0:e.trim(),a=t==null?void 0:t.trim(),l=r==null?void 0:r.trim();return!s&&!a&&!l?null:n.jsxs("div",{className:"mb-6 rounded-xl border-2 border-amber-400 bg-amber-50 p-4 shadow-sm",children:[n.jsxs("h3",{className:"text-sm font-semibold uppercase tracking-wide text-amber-900 mb-2 flex items-center gap-2",children:[n.jsx("span",{className:"inline-block h-2 w-2 rounded-full bg-amber-500","aria-hidden":!0}),"Medical alerts"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-sm",children:[s&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-amber-900",children:"Allergies:"}),n.jsx("span",{className:"ml-1 text-amber-800",children:e})]}),a&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-amber-900",children:"Conditions:"}),n.jsx("span",{className:"ml-1 text-amber-800",children:t})]}),l&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-amber-900",children:"Current medications:"}),n.jsx("span",{className:"ml-1 text-amber-800",children:r})]})]})]})}const cs={Sound:"bg-sky/30 border-sky/50",Caries:"bg-red-400 border-red-600","Existing Restoration":"bg-blue-200 border-blue-500",Missing:"bg-navy/30 border-navy/50",Planned:"bg-amber-300 border-amber-500",Implant:"bg-purple-200 border-purple-500",Crown:"bg-blue-100 border-blue-400","Root Canal":"bg-green-200 border-green-500",Extraction:"bg-navy/20 border-navy/40",Other:"bg-sky/20 border-sky/40"},ji=["Sound","Caries","Existing Restoration","Missing","Planned","Crown","Root Canal","Implant","Extraction","Other"];function yu(e,t){return e.find(r=>r.tooth===t&&!r.surface)}function Jv({conditions:e,onChange:t,readOnly:r}){const[s,a]=g.useState(null),[l,i]=g.useState(!1),o=(p,h,w="Planned")=>{const u=e.find(x=>x.tooth===p&&!x.surface),b=e.filter(x=>x.tooth!==p||x.surface),C=new Date().toISOString();t(u?[...b,{...u,condition:h,status:w,completedAt:w==="Completed"?C:void 0}]:[...b,{id:crypto.randomUUID(),tooth:p,condition:h,status:w,addedAt:C,completedAt:w==="Completed"?C:void 0}]),a(null)},c=p=>{t(e.filter(h=>h.tooth!==p)),a(null)},m=Array.from({length:16},(p,h)=>1+h),d=Array.from({length:16},(p,h)=>17+h);return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[n.jsx("span",{className:"text-xs font-medium text-navy/70",children:"Upper (116)"}),n.jsx("div",{className:"flex gap-1 flex-wrap",children:m.map(p=>{const h=yu(e,p),w=s===p;return n.jsxs("div",{className:"relative",children:[n.jsx("button",{type:"button",onClick:()=>r?null:a(w?null:p),className:`w-8 h-8 rounded border-2 text-xs font-medium flex items-center justify-center transition-colors ${h?cs[h.condition]:"bg-white border-sky/40 text-navy/60"} ${w?"ring-2 ring-navy ring-offset-1":""}`,title:h?`${p}: ${h.condition} (${h.status})`:`Tooth ${p}`,children:p}),w&&!r&&n.jsxs("div",{className:"absolute left-0 top-full mt-1 z-10 bg-white border border-sky/40 rounded-lg shadow-lg p-2 min-w-[180px]",children:[n.jsxs("p",{className:"text-xs text-navy/70 mb-1",children:["Tooth ",p]}),n.jsx("div",{className:"flex flex-wrap gap-1",children:ji.map(u=>n.jsx("button",{type:"button",onClick:()=>o(p,u),className:`px-2 py-1 text-xs rounded border ${cs[u]}`,children:u},u))}),n.jsxs("div",{className:"flex gap-1 mt-2",children:[n.jsx("button",{type:"button",onClick:()=>o(p,(h==null?void 0:h.condition)??"Sound","Completed"),className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded",children:"Mark completed"}),h&&n.jsx("button",{type:"button",onClick:()=>c(p),className:"px-2 py-1 text-xs text-red-600 hover:bg-red-50 rounded",children:"Clear"})]})]})]},p)})})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx("span",{className:"text-xs font-medium text-navy/70",children:"Lower (1732)"}),n.jsx("div",{className:"flex gap-1 flex-wrap",children:d.map(p=>{const h=yu(e,p),w=s===p;return n.jsxs("div",{className:"relative",children:[n.jsx("button",{type:"button",onClick:()=>r?null:a(w?null:p),className:`w-8 h-8 rounded border-2 text-xs font-medium flex items-center justify-center transition-colors ${h?cs[h.condition]:"bg-white border-sky/40 text-navy/60"} ${w?"ring-2 ring-navy ring-offset-1":""}`,title:h?`${p}: ${h.condition} (${h.status})`:`Tooth ${p}`,children:p}),w&&!r&&n.jsxs("div",{className:"absolute left-0 top-full mt-1 z-10 bg-white border border-sky/40 rounded-lg shadow-lg p-2 min-w-[180px]",children:[n.jsxs("p",{className:"text-xs text-navy/70 mb-1",children:["Tooth ",p]}),n.jsx("div",{className:"flex flex-wrap gap-1",children:ji.map(u=>n.jsx("button",{type:"button",onClick:()=>o(p,u),className:`px-2 py-1 text-xs rounded border ${cs[u]}`,children:u},u))}),n.jsxs("div",{className:"flex gap-1 mt-2",children:[n.jsx("button",{type:"button",onClick:()=>o(p,(h==null?void 0:h.condition)??"Sound","Completed"),className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded",children:"Mark completed"}),h&&n.jsx("button",{type:"button",onClick:()=>c(p),className:"px-2 py-1 text-xs text-red-600 hover:bg-red-50 rounded",children:"Clear"})]})]})]},p)})})]}),n.jsx("div",{className:"flex flex-wrap gap-2 pt-2 border-t border-sky/20",children:ji.map(p=>n.jsxs("span",{className:`inline-flex items-center gap-1 text-xs ${cs[p]} px-2 py-0.5 rounded`,children:[n.jsx("span",{className:"w-2 h-2 rounded-full bg-current opacity-70"}),p]},p))})]})}const xr=10,gr=3;function re({label:e,value:t,editing:r,formValue:s,onChange:a,type:l="text",placeholder:i,rows:o,preWrap:c,required:m,listId:d,options:p}){return n.jsxs("div",{className:o?"md:col-span-2":"",children:[e?n.jsxs("label",{className:"block text-sm text-navy/70 mb-1",children:[e,m&&n.jsx("span",{className:"text-red-500 ml-0.5","aria-label":"required",children:"*"})]}):null,r?l==="textarea"?n.jsx("textarea",{value:s,onChange:h=>a(h.target.value),rows:o??3,placeholder:i,className:"w-full px-3 py-2 border border-sky/60 rounded-lg resize-y"}):n.jsxs(n.Fragment,{children:[n.jsx("input",{type:l,value:s,onChange:h=>a(h.target.value),placeholder:i,className:"w-full px-3 py-2 border border-sky/60 rounded-lg",list:d,autoComplete:d?"off":void 0}),d&&p&&p.length>0&&n.jsx("datalist",{id:d,children:p.map(h=>n.jsx("option",{value:h},h))})]}):n.jsx("p",{className:`text-navy ${c?"whitespace-pre-wrap":""}`,children:t||""})]})}function Qv(){var oe,ye,_e,Et,Hn,It,Wn,pr,Zr;const{id:e}=Vp(),[t,r]=Kp(),s=Ct(),{timezone:a}=Qr(),{staff:l,isSignedIn:i}=Xr(),o=i&&l&&Fl.includes(l.position),m=`/dashboard/patients/${e}`+(t.toString()?`?${t.toString()}`:""),[d,p]=g.useState(B(e||"")),[h,w]=g.useState(!1),[u,b]=g.useState(d||null),[C,x]=g.useState(!1),[y,v]=g.useState(null),S=g.useRef(null),[P,E]=g.useState(""),[D,O]=g.useState(!1),[L,I]=g.useState(!1),[j,A]=g.useState(!1),[U,q]=g.useState(!1),[K,Z]=g.useState(""),[me,z]=g.useState("X-ray"),Y=g.useRef(null);if(g.useEffect(()=>{const f=B(e||"");p(f),b(f||null),f!=null&&f.insuranceProvider&&f.insuranceProvider!==mt&&!bn.includes(f.insuranceProvider)?E(f.insuranceProvider):E("")},[e]),g.useEffect(()=>{if(!h||!u)return;u.insuranceProvider&&!bn.includes(u.insuranceProvider)&&E(u.insuranceProvider||"")},[h,u==null?void 0:u.insuranceProvider]),g.useEffect(()=>{t.get("startVisit")==="1"&&d&&!d.currentVisitStartedAt&&(O(!0),r(f=>{const M=new URLSearchParams(f);return M.delete("startVisit"),M},{replace:!0}))},[d==null?void 0:d.id,d==null?void 0:d.currentVisitStartedAt,t,r]),g.useEffect(()=>{d!=null&&d.id&&un({timestamp:new Date().toISOString(),action:"chart.view",entityType:"patient",entityId:d.id,details:`${d.firstName} ${d.lastName}`})},[d==null?void 0:d.id]),!d)return n.jsxs("div",{className:"p-8",children:[n.jsx("p",{className:"text-navy/70",children:"Patient not found."}),n.jsx(J,{to:"/dashboard/patients",className:"text-sky-dark font-medium mt-2 inline-block hover:underline",children:"Back to patients"})]});const T=()=>{if(!u)return;const f={...u};f.insuranceProvider===mt&&(f.insuranceProvider=P.trim()||void 0);const M=G=>G===""||G===void 0?void 0:Number(G);f.appointmentDurationMinutes=M(f.appointmentDurationMinutes),f.nextAppointmentDurationMinutes=M(f.nextAppointmentDurationMinutes),f.recallIntervalMonths=M(f.recallIntervalMonths),f.balanceDue=M(f.balanceDue),f.insuranceDeductibleAnnual2=M(f.insuranceDeductibleAnnual2),f.insuranceDeductibleRemaining2=M(f.insuranceDeductibleRemaining2),te(d.id,f),p(B(d.id)),b(B(d.id)),w(!1)},X=()=>{xv(d.id),s("/dashboard/patients",{replace:!0})},_=(f,M)=>{u&&b({...u,[f]:M})},ue=(u==null?void 0:u.patientImages)??d.patientImages??[],ge=f=>{u&&b({...u,patientImages:f})},[Oe,$e]=g.useState(""),[tt,Vn]=g.useState("X-ray"),Dt=f=>{var ne;const M=(ne=f.target.files)==null?void 0:ne[0];if(f.target.value="",!M||!u)return;if(ue.length>=xr){alert(`Maximum ${xr} images per patient. Remove one to add another.`);return}if(M.size>gr*1024*1024){alert(`File is too large. Please use an image under ${gr} MB.`);return}const G=new FileReader;G.onload=()=>{const de=G.result,Be=Oe.trim()||M.name.replace(/\.[^.]+$/,"")||"Image",$={id:crypto.randomUUID(),label:Be,type:tt,dataUrl:de,dateAdded:new Date().toISOString()};ge([...ue,$]),$e("")},G.readAsDataURL(M)},mn=f=>{ge(ue.filter(M=>M.id!==f))},pn=f=>{var de;const M=(de=f.target.files)==null?void 0:de[0];if(f.target.value="",!M||!d)return;const G=d.patientImages??[];if(G.length>=xr){alert(`Maximum ${xr} images per patient. Remove one to add another.`);return}if(M.size>gr*1024*1024){alert(`File is too large. Please use an image under ${gr} MB.`);return}const ne=new FileReader;ne.onload=()=>{const Be=ne.result,$=K.trim()||M.name.replace(/\.[^.]+$/,"")||"Image",Ee={id:crypto.randomUUID(),label:$,type:me,dataUrl:Be,dateAdded:new Date().toISOString()};te(d.id,{patientImages:[...G,Ee]}),p(B(d.id)),b(B(d.id)),q(!1),Z("")},ne.readAsDataURL(M)},Ke=()=>O(!0),Yt=()=>{if(!d)return;const f=L&&j;te(d.id,{currentVisitStartedAt:new Date().toISOString(),currentVisitUseVoiceNotes:f||void 0,currentVisitNotes:f?"":void 0}),p(B(d.id)),b(B(d.id)),O(!1),I(!1),A(!1)},[hn,Pt]=g.useState(!1),[fn,ut]=g.useState([]),Kt=f=>{if(!d||!d.currentVisitStartedAt)return;const M=new Date().toISOString(),G=Math.round((new Date(M).getTime()-new Date(d.currentVisitStartedAt).getTime())/6e4),ne={startedAt:d.currentVisitStartedAt,endedAt:M,durationMinutes:G,clinicalSummary:d.currentVisitNotes||void 0,voiceNotesConsent:d.currentVisitUseVoiceNotes||void 0,procedures:f&&f.length>0?f:void 0},de=[...d.visitHistory||[],ne];te(d.id,{currentVisitStartedAt:void 0,currentVisitUseVoiceNotes:void 0,currentVisitNotes:void 0,visitHistory:de}),p(B(d.id)),b(B(d.id)),Pt(!1),ut([])},Jt=()=>{ut(f=>[...f,{}])},At=(f,M,G)=>{ut(ne=>{const de=[...ne];return de[f]={...de[f],[M]:G===""?void 0:G},de})},Qt=f=>{ut(M=>M.filter((G,ne)=>ne!==f))},Xt=f=>{d!=null&&d.id&&(te(d.id,{currentVisitNotes:f}),p(B(d.id)),b(B(d.id)))},xn=f=>{if(!(d!=null&&d.id)||!f.trim())return;const M=B(d.id);if(!M)return;const G=M.currentVisitNotes??"",ne=G?`${G} ${f.trim()}`:f.trim();te(d.id,{currentVisitNotes:ne}),p(B(d.id)),b(B(d.id))},{isSupported:ur,isListening:ze,interimTranscript:mr,error:k,start:H,stop:ae}=Hv({onFinalTranscript:xn,lang:"en-US"}),pe=()=>{const f=(d==null?void 0:d.currentVisitNotes)??"";if(!f.trim())return;const M=Wv(f);if(!M)return;const G=`

--- Clinical summary ---
`,ne=f.includes("--- Clinical summary ---")?f.replace(/\n\n--- Clinical summary ---[\s\S]*$/,"").trim():f;Xt(ne+G+M)};return n.jsxs("div",{className:"p-8",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[n.jsxs("div",{children:[n.jsx(J,{to:"/dashboard/patients",className:"text-sky-dark text-sm font-medium hover:underline mb-2 inline-block",children:" Patients"}),n.jsxs("h1",{className:"text-2xl font-semibold text-navy",children:["Patient chart: ",d.firstName," ",d.lastName]})]}),n.jsx("div",{className:"flex gap-2",children:h?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:T,className:"px-4 py-2 bg-navy text-white rounded-lg font-medium hover:bg-navy-light",children:"Save"}),n.jsx("button",{onClick:()=>{b(d),w(!1),x(!1)},className:"px-4 py-2 border border-navy/30 rounded-lg",children:"Cancel"})]}):n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>w(!0),className:"px-4 py-2 bg-navy text-white rounded-lg font-medium hover:bg-navy-light",children:"Edit"}),o?C?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:X,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-medium",children:"Confirm delete"}),n.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 border border-navy/30 rounded-lg",children:"Cancel"})]}):n.jsx("button",{onClick:()=>x(!0),className:"px-4 py-2 border border-red-300 text-red-600 rounded-lg font-medium hover:bg-red-50",children:"Delete"}):n.jsx("span",{className:"px-4 py-2 text-navy/50 text-sm",title:"Only a dentist from the clinic can delete a patient chart. Sign in as a dentist.",children:"Delete (dentist only)"})]})})]}),n.jsx(Kv,{allergies:d.allergies,medicalConditions:d.medicalConditions,currentMedications:d.currentMedications}),n.jsxs("div",{className:"mb-6 flex flex-wrap items-center gap-2",children:[n.jsx(J,{to:`/dashboard/billing?patient=${d.id}`,className:"px-3 py-1.5 border border-sky/60 rounded-lg text-sm font-medium text-navy hover:bg-sky/10",children:"Send statement"}),n.jsx(J,{to:`/dashboard/appointments?patient=${d.id}`,className:"px-3 py-1.5 border border-sky/60 rounded-lg text-sm font-medium text-navy hover:bg-sky/10",children:"Schedule next"}),n.jsx(J,{to:"/dashboard/recall",className:"px-3 py-1.5 border border-sky/60 rounded-lg text-sm font-medium text-navy hover:bg-sky/10",children:"Recall list"}),i&&n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",onClick:()=>{const f=new Date().toISOString().slice(0,10);te(d.id,{lastRecallReminderSent:f}),p(B(d.id)),b(B(d.id))},className:"px-3 py-1.5 border border-sky/60 rounded-lg text-sm font-medium text-navy hover:bg-sky/10",children:"Send recall reminder"}),n.jsx("button",{type:"button",onClick:()=>{const f=new Date().toISOString().slice(0,10);te(d.id,{lastAppointmentReminderSent:f}),p(B(d.id)),b(B(d.id))},className:"px-3 py-1.5 border border-sky/60 rounded-lg text-sm font-medium text-navy hover:bg-sky/10",children:"Send appointment reminder"})]})]}),d.currentVisitStartedAt&&n.jsxs("div",{className:"mb-6 flex flex-wrap items-center justify-between gap-3 rounded-xl border-2 border-green-500 bg-green-50 px-4 py-3",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold text-green-800",children:"Visit in progress"}),n.jsxs("span",{className:"ml-2 text-green-700 text-sm",children:[" started at ",Po(d.currentVisitStartedAt,a)]})]}),i?n.jsx("button",{type:"button",onClick:()=>{Pt(!0),ut([])},className:"px-4 py-2 bg-green-700 text-white rounded-lg font-medium hover:bg-green-800",children:"End visit"}):n.jsx(J,{to:`/signin?returnTo=${encodeURIComponent(m)}`,className:"px-4 py-2 bg-green-700 text-white rounded-lg font-medium hover:bg-green-800 inline-block",children:"Sign in to end visit"})]}),!d.currentVisitStartedAt&&n.jsx("div",{className:"mb-6",children:i?n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",onClick:Ke,className:"px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700",children:"Start visit"}),n.jsx("p",{className:"mt-1 text-sm text-navy/60",children:"Mark that this patient is in the office for their appointment."})]}):n.jsxs("p",{className:"text-navy/80",children:[n.jsx(J,{to:`/signin?returnTo=${encodeURIComponent(m)}`,className:"text-sky-dark font-medium hover:underline",children:"Sign in"})," ","to start a patient visit or record treatment."]})}),d.currentVisitStartedAt&&d.currentVisitUseVoiceNotes&&n.jsxs("div",{className:"mb-6 rounded-xl border-2 border-sky/40 bg-sky/5 p-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-navy uppercase tracking-wide mb-1",children:"Visit session  AI voice notes"}),n.jsx("p",{className:"text-xs text-navy/60 mb-3",children:"Patient identity is not stored with recordings. Notes are linked only to this visit for clinical use."}),ur?n.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[ze?n.jsxs("button",{type:"button",onClick:ae,className:"px-4 py-2 bg-navy text-white rounded-lg text-sm font-medium hover:bg-navy-light flex items-center gap-2",children:[n.jsx("span",{className:"inline-flex h-2 w-2 rounded-full bg-red-400 animate-pulse","aria-hidden":!0}),"Stop recording"]}):n.jsxs("button",{type:"button",onClick:H,className:"px-4 py-2 bg-red-600 text-white rounded-lg text-sm font-medium hover:bg-red-700 flex items-center gap-2",children:[n.jsx("span",{className:"inline-flex h-2 w-2 rounded-full bg-white","aria-hidden":!0}),"Start recording"]}),n.jsx("button",{type:"button",onClick:pe,disabled:!(d.currentVisitNotes??"").trim(),className:"px-4 py-2 bg-sky-dark text-white rounded-lg text-sm font-medium hover:bg-navy disabled:opacity-50 disabled:cursor-not-allowed",children:"Generate bullet points"}),ze&&n.jsx("span",{className:"text-sm text-navy/70",children:"Listening (speak into your microphone)"})]}):n.jsx("p",{className:"text-amber-700 text-sm mb-2",children:"Microphone speech recognition is not supported in this browser. Use Chrome or Edge, or type notes below."}),k&&n.jsx("p",{className:"text-red-600 text-sm mb-2",role:"alert",children:k}),mr&&n.jsx("p",{className:"text-sm text-navy/60 italic mb-2",children:mr}),n.jsx("textarea",{value:d.currentVisitNotes??"",onChange:f=>Xt(f.target.value),onBlur:f=>Xt(f.target.value),rows:8,placeholder:"Transcript will appear here as you speak, or type notes manually. Click Generate bullet points for a concise clinical summary.",className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white resize-y text-sm"})]}),D&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"start-visit-title",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl border border-sky/40 p-6 max-w-md w-full",children:[n.jsx("h2",{id:"start-visit-title",className:"text-lg font-semibold text-navy mb-4",children:"Start visit"}),n.jsx("p",{className:"text-sm text-navy/70 mb-4",children:"Choose options before starting the visit."}),n.jsxs("label",{className:"flex items-start gap-2 mb-3 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:L,onChange:f=>I(f.target.checked),className:"mt-1 rounded border-sky/60"}),n.jsx("span",{className:"text-sm text-navy",children:"Use AI voice notes with patient consent (records conversation for clinical notes)"})]}),L&&n.jsxs("label",{className:"flex items-start gap-2 mb-4 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:j,onChange:f=>A(f.target.checked),className:"mt-1 rounded border-sky/60"}),n.jsx("span",{className:"text-sm text-navy",children:"Patient has given consent to record this conversation. Anonymity is maintained for the recording."})]}),n.jsxs("div",{className:"flex gap-3 justify-end mt-6",children:[n.jsx("button",{type:"button",onClick:()=>{O(!1),I(!1),A(!1)},className:"px-4 py-2 border border-navy/30 rounded-lg font-medium",children:"Cancel"}),n.jsx("button",{type:"button",onClick:Yt,className:"px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700",children:"Start visit"})]})]})}),hn&&(d==null?void 0:d.currentVisitStartedAt)&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"end-visit-title",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto",children:[n.jsx("h2",{id:"end-visit-title",className:"text-lg font-semibold text-navy mb-2",children:"End visit"}),n.jsx("p",{className:"text-sm text-navy/70 mb-4",children:"Optionally record procedures completed during this visit (CDT code, tooth, description). Leave empty to end without procedures."}),n.jsx("div",{className:"space-y-2 mb-4",children:fn.map((f,M)=>n.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center border border-sky/30 rounded-lg p-2",children:[n.jsx("input",{type:"text",placeholder:"Code (e.g. D2392)",value:f.procedureCode??"",onChange:G=>At(M,"procedureCode",G.target.value),className:"col-span-3 px-2 py-1.5 border border-sky/60 rounded text-sm"}),n.jsx("input",{type:"number",min:1,max:32,placeholder:"Tooth",value:f.tooth??"",onChange:G=>At(M,"tooth",G.target.value?parseInt(G.target.value,10):void 0),className:"col-span-2 px-2 py-1.5 border border-sky/60 rounded text-sm"}),n.jsx("input",{type:"text",placeholder:"Description",value:f.description??"",onChange:G=>At(M,"description",G.target.value),className:"col-span-5 px-2 py-1.5 border border-sky/60 rounded text-sm"}),n.jsx("button",{type:"button",onClick:()=>Qt(M),className:"col-span-2 text-xs text-red-600 hover:underline",children:"Remove"})]},M))}),n.jsx("button",{type:"button",onClick:Jt,className:"mb-4 px-3 py-1.5 border border-sky/60 rounded-lg text-sm font-medium text-navy hover:bg-sky/10",children:"+ Add procedure"}),n.jsxs("div",{className:"flex gap-3 justify-end",children:[n.jsx("button",{type:"button",onClick:()=>{Pt(!1),ut([])},className:"px-4 py-2 border border-navy/30 rounded-lg font-medium",children:"Cancel"}),n.jsx("button",{type:"button",onClick:()=>Kt(fn.length>0?fn:void 0),className:"px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700",children:"Confirm end visit"})]})]})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-6 space-y-1",children:[n.jsx(Le,{id:"demographics",title:"Demographics",defaultOpen:!0,children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(re,{label:"First name",value:d.firstName,editing:!!h&&!!u,formValue:(u==null?void 0:u.firstName)??"",onChange:f=>_("firstName",f),required:!0}),n.jsx(re,{label:"Last name",value:d.lastName,editing:!!h&&!!u,formValue:(u==null?void 0:u.lastName)??"",onChange:f=>_("lastName",f),required:!0}),n.jsx(re,{label:"Date of birth",value:Q(d.dateOfBirth),editing:!!h&&!!u,formValue:(u==null?void 0:u.dateOfBirth)??"",type:"date",onChange:f=>_("dateOfBirth",f),required:!0}),n.jsx(re,{label:"Phone",value:d.phone??"",editing:!!h&&!!u,formValue:(u==null?void 0:u.phone)??"",onChange:f=>_("phone",f)}),n.jsx(re,{label:"Email",value:d.email??"",editing:!!h&&!!u,formValue:(u==null?void 0:u.email)??"",type:"email",onChange:f=>_("email",f)}),n.jsx(re,{label:"Address",value:d.address??"",editing:!!h&&!!u,formValue:(u==null?void 0:u.address)??"",onChange:f=>_("address",f)}),n.jsxs("div",{className:"md:col-span-2 border-t border-sky/20 pt-4 mt-2",children:[n.jsx("p",{className:"text-sm font-medium text-navy/80 mb-2",children:"Preferred contact (recall / reminders)"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Method"}),h&&u?n.jsxs("select",{value:u.preferredContactMethod??"",onChange:f=>_("preferredContactMethod",f.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white text-navy",children:[n.jsx("option",{value:"",children:""}),n.jsx("option",{value:"Phone",children:"Phone"}),n.jsx("option",{value:"Email",children:"Email"}),n.jsx("option",{value:"SMS",children:"SMS"}),n.jsx("option",{value:"Any",children:"Any"})]}):n.jsx("p",{className:"text-navy",children:d.preferredContactMethod??""})]}),n.jsx(re,{label:"Preferred time",value:d.preferredContactTime??"",editing:!!h&&!!u,formValue:(u==null?void 0:u.preferredContactTime)??"",placeholder:"e.g. Morning, Afternoon",onChange:f=>_("preferredContactTime",f)})]})]})]})}),n.jsx(Le,{id:"medical",title:"Medical history",subtitle:"Relevant for treatment safety (e.g. drug allergies, conditions affecting care)",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(re,{label:"Allergies",value:d.allergies??"",editing:!!h&&!!u,formValue:(u==null?void 0:u.allergies)??"",placeholder:"e.g. Penicillin, latex",listId:"patient-allergies-list",options:vh,onChange:f=>_("allergies",f)}),n.jsx(re,{label:"Medical conditions",value:d.medicalConditions??"",editing:!!h&&!!u,formValue:(u==null?void 0:u.medicalConditions)??"",placeholder:"e.g. Diabetes, hypertension",listId:"patient-medical-conditions-list",options:bh,onChange:f=>_("medicalConditions",f)}),n.jsx(re,{label:"Current medications",value:d.currentMedications??"",editing:!!h&&!!u,formValue:(u==null?void 0:u.currentMedications)??"",placeholder:"List current medications",listId:"patient-current-medications-list",options:Nh,onChange:f=>_("currentMedications",f)}),n.jsx(re,{label:"Emergency contact name",value:d.emergencyContactName??"",editing:!!h&&!!u,formValue:(u==null?void 0:u.emergencyContactName)??"",onChange:f=>_("emergencyContactName",f)}),n.jsx(re,{label:"Emergency contact phone",value:d.emergencyContactPhone??"",editing:!!h&&!!u,formValue:(u==null?void 0:u.emergencyContactPhone)??"",onChange:f=>_("emergencyContactPhone",f)}),n.jsxs("div",{className:"md:col-span-2 border-t border-sky/30 pt-4 mt-2",children:[n.jsx("p",{className:"text-sm font-medium text-navy/80 mb-2",children:"ASA & Pre-med"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"ASA physical status"}),h&&u?n.jsxs("select",{value:u.asaStatus??"",onChange:f=>_("asaStatus",f.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white text-navy",children:[n.jsx("option",{value:"",children:""}),My.map(f=>n.jsxs("option",{value:f,children:["ASA ",f]},f))]}):n.jsx("p",{className:"text-navy",children:d.asaStatus?`ASA ${d.asaStatus}`:""})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Pre-med required"}),h&&u?n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:!!u.premedRequired,onChange:f=>b(u?{...u,premedRequired:f.target.checked}:null),className:"rounded border-sky/60"}),n.jsx("span",{className:"text-navy text-sm",children:"Yes"})]}):n.jsx("p",{className:"text-navy",children:d.premedRequired?"Yes":"No"})]}),n.jsx("div",{className:"md:col-span-2",children:n.jsx(re,{label:"Pre-med note",value:d.premedNote??"",editing:!!h&&!!u,formValue:(u==null?void 0:u.premedNote)??"",placeholder:"e.g. 2g Amoxicillin 1hr prior",onChange:f=>_("premedNote",f)})}),n.jsx("div",{children:n.jsx(re,{label:"Pre-med last given / cleared",value:d.premedLastGivenDate?Q(d.premedLastGivenDate):"",editing:!!h&&!!u,formValue:(u==null?void 0:u.premedLastGivenDate)??"",type:"date",onChange:f=>_("premedLastGivenDate",f)})})]})]})]})}),n.jsx(Le,{id:"insurance",title:"Insurance",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:u?"md:col-span-2":"",children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Insurance provider"}),h&&u?n.jsxs(n.Fragment,{children:[n.jsxs("select",{value:bn.includes(u.insuranceProvider)?u.insuranceProvider:mt,onChange:f=>{const M=f.target.value;_("insuranceProvider",M),M!==mt&&E("")},className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white",children:[n.jsx("option",{value:"",children:"Select provider"}),bn.map(f=>n.jsx("option",{value:f,children:f},f)),n.jsx("option",{value:mt,children:mt})]}),(u.insuranceProvider===mt||u.insuranceProvider&&!bn.includes(u.insuranceProvider))&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Custom provider name (free response)"}),n.jsx("input",{type:"text",autoComplete:"off",list:"patient-insurance-custom-list",value:u.insuranceProvider===mt?P:u.insuranceProvider||"",onChange:f=>{const M=f.target.value;u.insuranceProvider===mt?E(M):_("insuranceProvider",M)},placeholder:"Type your insurance provider name here",className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white text-navy"}),n.jsx("datalist",{id:"patient-insurance-custom-list",children:bn.map(f=>n.jsx("option",{value:f},f))})]})]}):n.jsx("p",{className:"text-navy",children:d.insuranceProvider||""})]}),n.jsx(re,{label:"Plan name",value:d.insurancePlan??"",editing:!!h&&!!u,formValue:(u==null?void 0:u.insurancePlan)??"",listId:"patient-insurance-plan-list",options:Ao,onChange:f=>_("insurancePlan",f)}),n.jsx(re,{label:"Member ID",value:d.insuranceMemberId??"",editing:!!h&&!!u,formValue:(u==null?void 0:u.insuranceMemberId)??"",onChange:f=>_("insuranceMemberId",f)}),n.jsx(re,{label:"Group number",value:d.insuranceGroupNumber??"",editing:!!h&&!!u,formValue:(u==null?void 0:u.insuranceGroupNumber)??"",onChange:f=>_("insuranceGroupNumber",f)}),n.jsxs("div",{className:"md:col-span-2 border-t border-sky/20 pt-4 mt-2",children:[n.jsx("p",{className:"text-sm font-medium text-navy/80 mb-2",children:"Secondary insurance"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(re,{label:"Provider",value:d.insuranceProvider2??"",editing:!!h&&!!u,formValue:(u==null?void 0:u.insuranceProvider2)??"",onChange:f=>_("insuranceProvider2",f)}),n.jsx(re,{label:"Plan name",value:d.insurancePlan2??"",editing:!!h&&!!u,formValue:(u==null?void 0:u.insurancePlan2)??"",listId:"patient-insurance-plan2-list",options:Ao,onChange:f=>_("insurancePlan2",f)}),n.jsx(re,{label:"Member ID",value:d.insuranceMemberId2??"",editing:!!h&&!!u,formValue:(u==null?void 0:u.insuranceMemberId2)??"",onChange:f=>_("insuranceMemberId2",f)}),n.jsx(re,{label:"Group number",value:d.insuranceGroupNumber2??"",editing:!!h&&!!u,formValue:(u==null?void 0:u.insuranceGroupNumber2)??"",onChange:f=>_("insuranceGroupNumber2",f)}),n.jsx(re,{label:"Deductible (annual $)",value:d.insuranceDeductibleAnnual2!=null?String(d.insuranceDeductibleAnnual2):"",editing:!!h&&!!u,formValue:(u==null?void 0:u.insuranceDeductibleAnnual2)!=null?String(u.insuranceDeductibleAnnual2):"",type:"number",onChange:f=>_("insuranceDeductibleAnnual2",f)}),n.jsx(re,{label:"Deductible remaining ($)",value:d.insuranceDeductibleRemaining2!=null?String(d.insuranceDeductibleRemaining2):"",editing:!!h&&!!u,formValue:(u==null?void 0:u.insuranceDeductibleRemaining2)!=null?String(u.insuranceDeductibleRemaining2):"",type:"number",onChange:f=>_("insuranceDeductibleRemaining2",f)})]})]})]})}),n.jsx(Le,{id:"appointments",title:"Appointments",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(re,{label:"Date of appointment",value:Q(d.dateOfAppointment)+(d.appointmentTime?` ${d.appointmentTime}`:""),editing:!!h&&!!u,formValue:(u==null?void 0:u.dateOfAppointment)??"",type:"date",onChange:f=>_("dateOfAppointment",f)}),n.jsx(re,{label:"Appointment time",value:d.appointmentTime??"",editing:!!h&&!!u,formValue:(u==null?void 0:u.appointmentTime)??"",type:"time",onChange:f=>_("appointmentTime",f)}),n.jsx(re,{label:"Date of next appointment",value:d.dateOfNextAppointment?Q(d.dateOfNextAppointment):"",editing:!!h&&!!u,formValue:(u==null?void 0:u.dateOfNextAppointment)??"",type:"date",onChange:f=>_("dateOfNextAppointment",f)}),n.jsx(re,{label:"Next appointment time",value:d.nextAppointmentTime??"",editing:!!h&&!!u,formValue:(u==null?void 0:u.nextAppointmentTime)??"",type:"time",onChange:f=>_("nextAppointmentTime",f)}),n.jsxs("div",{className:(u==null?void 0:u.appointmentType)==="Other"?"md:col-span-2":"",children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Appointment type"}),h&&u?n.jsxs(n.Fragment,{children:[n.jsxs("select",{value:u.appointmentType??"",onChange:f=>_("appointmentType",f.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white",children:[n.jsx("option",{value:"",children:""}),Ad.map(f=>n.jsx("option",{value:f,children:f},f))]}),u.appointmentType==="Other"&&n.jsxs("div",{className:"mt-2",children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Describe appointment type (free response)"}),n.jsx("input",{type:"text",list:"patient-appointment-type-other-list",autoComplete:"off",value:u.appointmentTypeOther??"",onChange:f=>_("appointmentTypeOther",f.target.value),placeholder:"e.g. Implant consultation, TMJ follow-up",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"}),n.jsx("datalist",{id:"patient-appointment-type-other-list",children:jh.map(f=>n.jsx("option",{value:f},f))})]})]}):n.jsx("p",{className:"text-navy",children:d.appointmentType==="Other"&&d.appointmentTypeOther?`Other (${d.appointmentTypeOther})`:d.appointmentType||""})]}),n.jsx(re,{label:"Doctor (performing appointment)",value:d.appointmentDoctor??"",editing:!!h&&!!u,formValue:(u==null?void 0:u.appointmentDoctor)??"",placeholder:"e.g. Dr. Smith",onChange:f=>_("appointmentDoctor",f)}),n.jsx(re,{label:"Duration (minutes)",value:d.appointmentDurationMinutes!=null?String(d.appointmentDurationMinutes):"",editing:!!h&&!!u,formValue:(u==null?void 0:u.appointmentDurationMinutes)!=null?String(u.appointmentDurationMinutes):"",placeholder:"e.g. 60",onChange:f=>_("appointmentDurationMinutes",f===""?"":f)}),n.jsx(re,{label:"Room / operatory",value:d.appointmentRoom??"",editing:!!h&&!!u,formValue:(u==null?void 0:u.appointmentRoom)??"",placeholder:"e.g. Op 1",listId:"patient-room-list",options:xu,onChange:f=>_("appointmentRoom",f)}),n.jsx(re,{label:"Next appointment duration (min)",value:d.nextAppointmentDurationMinutes!=null?String(d.nextAppointmentDurationMinutes):"",editing:!!h&&!!u,formValue:(u==null?void 0:u.nextAppointmentDurationMinutes)!=null?String(u.nextAppointmentDurationMinutes):"",placeholder:"e.g. 30",onChange:f=>_("nextAppointmentDurationMinutes",f===""?"":f)}),n.jsx(re,{label:"Next appointment room",value:d.nextAppointmentRoom??"",editing:!!h&&!!u,formValue:(u==null?void 0:u.nextAppointmentRoom)??"",placeholder:"e.g. Op 2",listId:"patient-next-room-list",options:xu,onChange:f=>_("nextAppointmentRoom",f)}),n.jsx(re,{label:"Recall / recurring (months)",value:d.recallIntervalMonths!=null?String(d.recallIntervalMonths):"",editing:!!h&&!!u,formValue:(u==null?void 0:u.recallIntervalMonths)!=null?String(u.recallIntervalMonths):"",placeholder:"e.g. 6 for 6-month prophy",onChange:f=>_("recallIntervalMonths",f===""?"":f)})]})}),n.jsxs(Le,{id:"images",title:"Images & imaging",badge:ue.length>0?`${ue.length} file${ue.length!==1?"s":""}`:void 0,subtitle:"X-rays, radiographs, CT, MRI, photos. Upload from your device (stored with this chart).",children:[h&&u&&n.jsxs("div",{className:"mb-4 p-4 bg-sky/10 rounded-lg border border-sky/30",children:[n.jsx("p",{className:"text-sm font-medium text-navy mb-2",children:"Add image"}),n.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[n.jsxs("div",{className:"min-w-[160px]",children:[n.jsx("label",{className:"block text-xs text-navy/70 mb-1",children:"Label"}),n.jsx("input",{type:"text",value:Oe,onChange:f=>$e(f.target.value),placeholder:"e.g. Panoramic X-ray Jan 2026",list:"patient-image-label-list",autoComplete:"off",className:"w-full px-3 py-2 border border-sky/60 rounded-lg text-sm"}),n.jsx("datalist",{id:"patient-image-label-list",children:gu.map(f=>n.jsx("option",{value:f},f))})]}),n.jsxs("div",{className:"min-w-[120px]",children:[n.jsx("label",{className:"block text-xs text-navy/70 mb-1",children:"Type"}),n.jsx("select",{value:tt,onChange:f=>Vn(f.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white text-sm",children:lu.map(f=>n.jsx("option",{value:f,children:f},f))})]}),n.jsxs("div",{children:[n.jsx("input",{ref:S,type:"file",accept:"image/*",onChange:Dt,className:"hidden"}),n.jsx("button",{type:"button",onClick:()=>{var f;return(f=S.current)==null?void 0:f.click()},className:"px-4 py-2 bg-navy text-white rounded-lg text-sm font-medium hover:bg-navy-light",children:"Choose file"})]})]}),n.jsxs("p",{className:"text-xs text-navy/50 mt-2",children:["Max ",xr," images, under ",gr," MB each."]})]}),!h&&ue.length<xr&&n.jsx("button",{type:"button",onClick:()=>q(!0),className:"mb-3 px-4 py-2 bg-sky/20 text-navy rounded-lg text-sm font-medium hover:bg-sky/30 border border-sky/40",children:"+ Add image"}),ue.length===0?n.jsxs("p",{className:"text-navy/60",children:["No images attached. ",h&&u?"Use the form above to upload.":"Click Add image above to upload without editing the whole chart."]}):n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:ue.map(f=>n.jsxs("div",{className:"border border-sky/40 rounded-lg overflow-hidden bg-navy/5",children:[n.jsx("button",{type:"button",onClick:()=>v(f),className:"block w-full aspect-square p-1 focus:outline-none focus:ring-2 focus:ring-sky",children:n.jsx("img",{src:f.dataUrl,alt:f.label,className:"w-full h-full object-contain"})}),n.jsxs("div",{className:"p-2",children:[n.jsx("p",{className:"text-sm font-medium text-navy truncate",title:f.label,children:f.label}),n.jsx("span",{className:"text-xs text-navy/60 capitalize",children:f.type}),n.jsxs("div",{className:"flex gap-1 mt-1",children:[n.jsx("button",{type:"button",onClick:()=>v(f),className:"text-xs text-sky-dark font-medium hover:underline",children:"View"}),h&&u&&n.jsx("button",{type:"button",onClick:()=>mn(f.id),className:"text-xs text-red-600 font-medium hover:underline",children:"Remove"})]})]})]},f.id))})]}),n.jsx(Le,{id:"clinical",title:"Clinical",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(re,{label:"Chief complaint",value:d.chiefComplaint??"",editing:!!h&&!!u,formValue:(u==null?void 0:u.chiefComplaint)??"",placeholder:"Reason for visit",listId:"patient-chief-complaint-list",options:wh,onChange:f=>_("chiefComplaint",f)}),n.jsx(re,{label:"Last cleaning date",value:d.lastCleaningDate?Q(d.lastCleaningDate):"",editing:!!h&&!!u,formValue:(u==null?void 0:u.lastCleaningDate)??"",type:"date",onChange:f=>_("lastCleaningDate",f)}),n.jsx(re,{label:"Treatment plan",value:d.treatmentPlan??"",editing:!!h&&!!u,formValue:(u==null?void 0:u.treatmentPlan)??"",type:"textarea",rows:3,preWrap:!0,placeholder:"Planned treatment",onChange:f=>_("treatmentPlan",f)})]})}),n.jsx(Le,{id:"dentist-notes",title:"Dentist's notes",children:n.jsx(re,{label:"",value:d.dentistNotes??"",editing:!!h&&!!u,formValue:(u==null?void 0:u.dentistNotes)??"",type:"textarea",rows:6,preWrap:!0,placeholder:"Clinical notes, procedures performed, charting notes, etc.",onChange:f=>_("dentistNotes",f)})}),n.jsx(Le,{id:"perio",title:"Perio charting",subtitle:"Pocket depths (PD), bleeding; numeric and graphic views. GumGauge device results (light %, health) auto-fill from Device Scan and show below.",children:n.jsx(Lv,{exams:d.perioExams??[],gumGaugeExams:d.gumGaugeExams??[],onSaveExam:f=>{const M={...f,id:crypto.randomUUID()};te(d.id,{perioExams:[...d.perioExams??[],M]}),p(B(d.id)),b(B(d.id))},onDeleteExam:f=>{te(d.id,{perioExams:(d.perioExams??[]).filter(M=>M.id!==f)}),p(B(d.id)),b(B(d.id))},readOnly:!i})}),n.jsx(Le,{id:"restorative",title:"Restorative chart",subtitle:"Tooth-by-tooth conditions: caries, existing restorations, missing, planned. Click a tooth to set or change.",children:n.jsx(Jv,{conditions:d.toothConditions??[],onChange:f=>{te(d.id,{toothConditions:f}),p(B(d.id)),b(B(d.id))},readOnly:!i})}),n.jsx(Le,{id:"clinical-notes",title:"Clinical notes / progress notes",subtitle:"Structured clinical notes with optional templates.",children:n.jsx(Fv,{notes:d.clinicalNotes??[],onAdd:f=>{const M={...f,id:crypto.randomUUID(),createdAt:new Date().toISOString()};te(d.id,{clinicalNotes:[...d.clinicalNotes??[],M]}),p(B(d.id)),b(B(d.id))},onDelete:f=>{te(d.id,{clinicalNotes:(d.clinicalNotes??[]).filter(M=>M.id!==f)}),p(B(d.id)),b(B(d.id))},readOnly:!i})}),n.jsx(Le,{id:"prescriptions",title:"Prescriptions",badge:(oe=d.prescriptions)!=null&&oe.length?`${d.prescriptions.length} Rx`:void 0,subtitle:"Write prescriptions with sig, quantity, refills. Printable like a real Rx.",children:n.jsx(Yv,{prescriptions:d.prescriptions??[],patientName:`${d.firstName} ${d.lastName}`,patientDob:d.dateOfBirth,defaultPrescriberName:l?`Dr. ${l.firstName} ${l.lastName}`:void 0,defaultPrescriberCredentials:"DDS",signedInStaffId:l==null?void 0:l.id,onAdd:f=>{const M={...f,id:crypto.randomUUID(),signedAt:new Date().toISOString()};te(d.id,{prescriptions:[...d.prescriptions??[],M]}),p(B(d.id)),b(B(d.id))},onDelete:f=>{te(d.id,{prescriptions:(d.prescriptions??[]).filter(M=>M.id!==f)}),p(B(d.id)),b(B(d.id))},readOnly:!i})}),n.jsxs(Le,{id:"billing",title:"Billing",subtitle:"Balance and payment history. For full billing (payment methods, send to insurance) use the Billing tab.",children:[n.jsx("div",{className:"mb-3",children:n.jsx(J,{to:"/dashboard/billing",className:"text-sky-dark font-medium text-sm hover:underline",children:"Open Billing tab "})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Balance due"}),h&&u?n.jsx("input",{type:"number",min:0,step:.01,value:u.balanceDue??"",onChange:f=>_("balanceDue",f.target.value===""?"":f.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"}):n.jsx("p",{className:"text-navy",children:d.balanceDue!=null?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(d.balanceDue):""})]})}),(((ye=d.paymentHistory)==null?void 0:ye.length)??0)>0&&n.jsxs("div",{className:"mt-3",children:[n.jsx("p",{className:"text-xs font-medium text-navy/80 mb-1",children:"Payment history"}),n.jsx("ul",{className:"space-y-1 text-sm",children:(d.paymentHistory??[]).map(f=>n.jsxs("li",{className:"flex justify-between text-navy/80",children:[n.jsxs("span",{children:[Q(f.date),f.note?`  ${f.note}`:""]}),n.jsx("span",{className:"font-medium",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(f.amount)})]},f.id))})]}),h&&u&&n.jsx("button",{type:"button",onClick:()=>{const f=prompt("Payment amount (e.g. 150)");if(f===null||f==="")return;const M=Number(f);if(Number.isNaN(M)||M<=0)return;const G=prompt("Note (optional)"),ne={id:crypto.randomUUID(),date:new Date().toISOString().slice(0,10),amount:M,note:G??void 0},de=[...u.paymentHistory??[],ne],Be=u.balanceDue??0;te(d.id,{paymentHistory:de,balanceDue:Math.max(0,Be-M)}),p(B(d.id)),b(B(d.id))},className:"mt-2 px-3 py-2 border border-green-600 text-green-700 rounded-lg text-sm font-medium hover:bg-green-50",children:"+ Record payment"})]}),n.jsxs(Le,{id:"consents",title:"Consents",badge:(_e=d.consents)!=null&&_e.length?`${d.consents.length}`:void 0,subtitle:"Structured consent records (procedure/treatment, date, witness).",children:[n.jsx("ul",{className:"space-y-2 mb-3",children:(d.consents??[]).map(f=>n.jsxs("li",{className:"py-2 border-b border-sky/20 last:border-0 text-sm",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[n.jsx("span",{className:"font-medium text-navy",children:f.procedureOrTreatment}),n.jsx("span",{className:"text-navy/70",children:Q(f.date)})]}),f.signedBy&&n.jsxs("p",{className:"text-navy/60 text-xs mt-0.5",children:["Signed by: ",f.signedBy]}),i&&n.jsx("button",{type:"button",onClick:()=>{te(d.id,{consents:(d.consents??[]).filter(M=>M.id!==f.id)}),p(B(d.id)),b(B(d.id))},className:"text-xs text-red-600 hover:underline mt-1",children:"Remove"})]},f.id))}),i&&n.jsx("button",{type:"button",onClick:()=>{const f=prompt("Procedure or treatment consented to",""),M=prompt("Date (YYYY-MM-DD)",new Date().toISOString().slice(0,10)),G=prompt("Signed by (patient/guardian)","");if(!f||!M)return;const ne={id:crypto.randomUUID(),procedureOrTreatment:f,date:M,signedBy:G||void 0,addedAt:new Date().toISOString()};te(d.id,{consents:[...d.consents??[],ne]}),p(B(d.id)),b(B(d.id))},className:"px-3 py-2 border border-sky/60 rounded-lg text-sm font-medium text-navy hover:bg-sky/10",children:"+ Add consent"})]}),n.jsxs(Le,{id:"documents",title:"Documents",badge:(Et=d.documents)!=null&&Et.length?`${d.documents.length}`:void 0,subtitle:"Consent forms, referrals, lab slips, insurance documents.",children:[n.jsx("ul",{className:"space-y-2 mb-3",children:(d.documents??[]).map(f=>n.jsxs("li",{className:"flex flex-wrap items-center justify-between gap-2 py-2 border-b border-sky/20 last:border-0",children:[n.jsxs("span",{className:"text-navy font-medium",children:[f.type,": ",f.title]}),n.jsx("span",{className:"text-sm text-navy/70",children:Q(f.date)}),i&&n.jsx("button",{type:"button",onClick:()=>{te(d.id,{documents:(d.documents??[]).filter(M=>M.id!==f.id)}),p(B(d.id)),b(B(d.id))},className:"text-xs text-red-600 hover:underline",children:"Remove"})]},f.id))}),i&&n.jsx("button",{type:"button",onClick:()=>{const f=prompt("Type (Consent, Referral, Lab, Insurance, Other)","Consent"),M=prompt("Title",""),G=prompt("Date (YYYY-MM-DD)",new Date().toISOString().slice(0,10));if(!M||!G)return;const de=f&&["Consent","Referral","Lab","Insurance","Other"].includes(f)?f:"Other",Be={id:crypto.randomUUID(),type:de,title:M,date:G,addedAt:new Date().toISOString()};te(d.id,{documents:[...d.documents??[],Be]}),p(B(d.id)),b(B(d.id))},className:"px-3 py-2 border border-sky/60 rounded-lg text-sm font-medium text-navy hover:bg-sky/10",children:"+ Add document"})]}),n.jsxs(Le,{id:"referrals",title:"Referrals",badge:(Hn=d.referrals)!=null&&Hn.length?`${d.referrals.length}`:void 0,subtitle:"Outbound referrals to specialists. Track status and response.",children:[n.jsx("ul",{className:"space-y-2 mb-3",children:(d.referrals??[]).map(f=>n.jsxs("li",{className:"py-2 border-b border-sky/20 last:border-0 text-sm",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[n.jsx("span",{className:"font-medium text-navy",children:f.referredTo}),n.jsx("span",{className:"text-navy/70",children:Q(f.date)})]}),n.jsx("p",{className:"text-navy/80 mt-0.5",children:f.reason}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1",children:[i?n.jsx("select",{value:f.status,onChange:M=>{const G=M.target.value,ne=(d.referrals??[]).map(de=>de.id===f.id?{...de,status:G}:de);te(d.id,{referrals:ne}),p(B(d.id)),b(B(d.id))},className:"text-xs px-2 py-1 border border-sky/60 rounded bg-white text-navy",children:Ry.map(M=>n.jsx("option",{value:M,children:M},M))}):n.jsx("span",{className:`inline-flex items-center rounded px-2 py-0.5 text-xs font-medium ${f.status==="Completed"?"bg-green-100 text-green-800":f.status==="Declined"?"bg-red-100 text-red-800":"bg-sky/20 text-navy"}`,children:f.status}),f.responseNote&&n.jsx("span",{className:"text-navy/70 text-xs",children:f.responseNote})]}),i&&n.jsx("button",{type:"button",onClick:()=>{te(d.id,{referrals:(d.referrals??[]).filter(M=>M.id!==f.id)}),p(B(d.id)),b(B(d.id))},className:"text-xs text-red-600 hover:underline mt-1",children:"Remove"})]},f.id))}),i&&n.jsx("button",{type:"button",onClick:()=>{const f=prompt("Referred to (name or practice)",""),M=prompt("Reason / specialty",""),G=prompt("Date (YYYY-MM-DD)",new Date().toISOString().slice(0,10));if(!f||!G)return;const ne={id:crypto.randomUUID(),referredTo:f,reason:M??"",date:G,status:"Sent",addedAt:new Date().toISOString()};te(d.id,{referrals:[...d.referrals??[],ne]}),p(B(d.id)),b(B(d.id))},className:"px-3 py-2 border border-sky/60 rounded-lg text-sm font-medium text-navy hover:bg-sky/10",children:"+ Add referral"})]}),n.jsxs(Le,{id:"lab-cases",title:"Lab cases",badge:(It=d.labCases)!=null&&It.length?`${d.labCases.length}`:void 0,subtitle:"Crowns, bridges, dentures. Track sent, expected, and received.",children:[n.jsx("ul",{className:"space-y-2 mb-3",children:(d.labCases??[]).map(f=>n.jsxs("li",{className:"py-2 border-b border-sky/20 last:border-0 text-sm",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[n.jsxs("span",{className:"font-medium text-navy",children:[f.labName,"  ",f.caseType]}),i?n.jsx("select",{value:f.status,onChange:M=>{const G=M.target.value,ne=(d.labCases??[]).map(de=>de.id===f.id?{...de,status:G}:de);if(G==="Received"||G==="Delivered"){const de=ne.map(Be=>Be.id===f.id?{...Be,status:G,receivedDate:Be.receivedDate??new Date().toISOString().slice(0,10)}:Be);te(d.id,{labCases:de})}else te(d.id,{labCases:ne});p(B(d.id)),b(B(d.id))},className:"text-xs px-2 py-1 border border-sky/60 rounded bg-white text-navy",children:$y.map(M=>n.jsx("option",{value:M,children:M},M))}):n.jsx("span",{className:`inline-flex items-center rounded px-2 py-0.5 text-xs font-medium ${f.status==="Received"||f.status==="Delivered"?"bg-green-100 text-green-800":"bg-sky/20 text-navy"}`,children:f.status})]}),n.jsxs("p",{className:"text-navy/70 mt-0.5",children:["Sent ",Q(f.sentDate),f.expectedDate&&`  Expected ${Q(f.expectedDate)}`,f.receivedDate&&`  Received ${Q(f.receivedDate)}`,f.toothOrTeeth&&`  Tooth/teeth: ${f.toothOrTeeth}`]}),f.prescriptionNote&&n.jsx("p",{className:"text-navy/60 text-xs mt-0.5",children:f.prescriptionNote}),i&&n.jsx("button",{type:"button",onClick:()=>{te(d.id,{labCases:(d.labCases??[]).filter(M=>M.id!==f.id)}),p(B(d.id)),b(B(d.id))},className:"text-xs text-red-600 hover:underline mt-1",children:"Remove"})]},f.id))}),i&&n.jsx("button",{type:"button",onClick:()=>{const f=prompt("Lab name",""),M=prompt("Case type (e.g. Crown, Bridge, Denture)","Crown"),G=prompt("Sent date (YYYY-MM-DD)",new Date().toISOString().slice(0,10));if(!f||!G)return;const ne={id:crypto.randomUUID(),labName:f,caseType:M??"Crown",sentDate:G,status:"Sent",addedAt:new Date().toISOString()};te(d.id,{labCases:[...d.labCases??[],ne]}),p(B(d.id)),b(B(d.id))},className:"px-3 py-2 border border-sky/60 rounded-lg text-sm font-medium text-navy hover:bg-sky/10",children:"+ Add lab case"})]}),n.jsx(Le,{id:"treatment-plans",title:"Treatment plans",subtitle:"Formal plans with phases, procedures, and estimated costs (prices auto-fill from procedure codes). Printable.",children:n.jsx(Vv,{plans:d.treatmentPlans??[],patientName:`${d.firstName} ${d.lastName}`,onAddPlan:f=>{const M={...f,id:crypto.randomUUID()};te(d.id,{treatmentPlans:[...d.treatmentPlans??[],M]}),p(B(d.id)),b(B(d.id))},onUpdatePlan:(f,M)=>{const G=(d.treatmentPlans??[]).map(ne=>ne.id===f?{...ne,...M}:ne);te(d.id,{treatmentPlans:G}),p(B(d.id)),b(B(d.id))},onDeletePlan:f=>{te(d.id,{treatmentPlans:(d.treatmentPlans??[]).filter(M=>M.id!==f)}),p(B(d.id)),b(B(d.id))},onAssignToBilling:f=>{const M=d.dateOfAppointment||new Date().toISOString().slice(0,10),G=new Date().toISOString(),ne=f.phases.flatMap($=>$.procedures.filter(Ee=>Ee.description.trim()||Ee.estimatedFee!=null&&Ee.estimatedFee>0).map(Ee=>({id:crypto.randomUUID(),appointmentDate:M,procedureCode:Ee.code,description:Ee.description||"Procedure",amount:Ee.estimatedFee??0,status:"Pending",addedAt:G})));if(ne.length===0)return;const de=d.invoiceLines??[],Be=ne.reduce(($,Ee)=>$+Ee.amount,0);te(d.id,{invoiceLines:[...de,...ne],balanceDue:(d.balanceDue??0)+Be}),p(B(d.id)),b(B(d.id))},readOnly:!i})}),(((Wn=d.visitHistory)==null?void 0:Wn.length)??0)>0&&n.jsx(Le,{id:"visit-history",title:"Visit history",badge:`${((pr=d.visitHistory)==null?void 0:pr.length)??0} visit${(((Zr=d.visitHistory)==null?void 0:Zr.length)??0)!==1?"s":""}`,subtitle:"Time in office for past visits (catalogued when you end a visit).",children:n.jsx("ul",{className:"space-y-2",children:[...d.visitHistory??[]].reverse().map((f,M)=>n.jsxs("li",{className:"py-2 border-b border-sky/20 last:border-0 text-sm",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1",children:[n.jsx("span",{className:"text-navy/80",children:Po(f.startedAt,a)}),n.jsx("span",{className:"text-navy font-medium",children:f.durationMinutes>=60?`${Math.floor(f.durationMinutes/60)} hr ${f.durationMinutes%60} min`:`${f.durationMinutes} min`}),f.voiceNotesConsent&&n.jsx("span",{className:"text-xs text-sky-dark bg-sky/20 px-1.5 py-0.5 rounded",children:"Voice notes"})]}),f.clinicalSummary&&n.jsx("p",{className:"mt-1 text-navy/70 whitespace-pre-wrap text-xs",children:f.clinicalSummary}),f.procedures&&f.procedures.length>0&&n.jsxs("p",{className:"mt-1 text-navy/60 text-xs",children:["Procedures: ",f.procedures.map(G=>[G.procedureCode,G.tooth?`#${G.tooth}`:null,G.description].filter(Boolean).join("  ")).join("; ")]})]},M))})})]}),U&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"add-image-title",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl border border-sky/40 p-6 max-w-md w-full",children:[n.jsx("h2",{id:"add-image-title",className:"text-lg font-semibold text-navy mb-4",children:"Add image"}),n.jsx("p",{className:"text-sm text-navy/70 mb-4",children:"Add an image without editing the whole chart."}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Label"}),n.jsx("input",{type:"text",value:K,onChange:f=>Z(f.target.value),placeholder:"e.g. Panoramic X-ray Jan 2026",list:"patient-quick-add-label-list",autoComplete:"off",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"}),n.jsx("datalist",{id:"patient-quick-add-label-list",children:gu.map(f=>n.jsx("option",{value:f},f))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Type"}),n.jsx("select",{value:me,onChange:f=>z(f.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white",children:lu.map(f=>n.jsx("option",{value:f,children:f},f))})]}),n.jsxs("div",{children:[n.jsx("input",{ref:Y,type:"file",accept:"image/*",onChange:pn,className:"hidden"}),n.jsx("button",{type:"button",onClick:()=>{var f;return(f=Y.current)==null?void 0:f.click()},className:"px-4 py-2 bg-navy text-white rounded-lg text-sm font-medium hover:bg-navy-light",children:"Choose file"}),n.jsxs("span",{className:"ml-2 text-xs text-navy/60",children:["Max ",gr," MB"]})]})]}),n.jsx("div",{className:"flex gap-3 justify-end mt-6",children:n.jsx("button",{type:"button",onClick:()=>{q(!1),Z("")},className:"px-4 py-2 border border-navy/30 rounded-lg font-medium",children:"Cancel"})})]})}),y&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-4",onClick:()=>v(null),role:"dialog","aria-modal":"true","aria-label":"View image",children:n.jsxs("div",{className:"relative max-w-full max-h-full",onClick:f=>f.stopPropagation(),children:[n.jsx("img",{src:y.dataUrl,alt:y.label,className:"max-w-full max-h-[90vh] object-contain rounded shadow-lg"}),n.jsx("p",{className:"text-white text-center mt-2 text-sm",children:y.label}),n.jsx("button",{type:"button",onClick:()=>v(null),className:"absolute -top-10 right-0 px-3 py-1 bg-white text-navy rounded font-medium hover:bg-gray-100",children:"Close"})]})})]})}const Xv={firstName:"",lastName:"",dateOfBirth:"",phone:"",email:"",address:"",allergies:"",medicalConditions:"",currentMedications:"",emergencyContactName:"",emergencyContactPhone:"",insuranceProvider:"",insuranceOther:"",insurancePlan:"",appointmentTypeOther:"",insuranceMemberId:"",insuranceGroupNumber:"",dateOfAppointment:new Date().toISOString().slice(0,10),appointmentTime:"",dateOfNextAppointment:"",nextAppointmentTime:"",appointmentType:"",appointmentDoctor:"",chiefComplaint:"",treatmentPlan:"",lastCleaningDate:"",dentistNotes:""};function qv(){const e=Ct(),[t,r]=g.useState(Xv),s=(o,c)=>{r(m=>({...m,[o]:c}))},a=o=>o.trim()?o.trim():void 0,l=o=>{o.preventDefault();const c=fv({firstName:t.firstName,lastName:t.lastName,dateOfBirth:t.dateOfBirth,phone:a(t.phone),email:a(t.email),address:a(t.address),allergies:a(t.allergies),medicalConditions:a(t.medicalConditions),currentMedications:a(t.currentMedications),emergencyContactName:a(t.emergencyContactName),emergencyContactPhone:a(t.emergencyContactPhone),insuranceProvider:a(t.insuranceProvider===mt?t.insuranceOther:t.insuranceProvider),insurancePlan:a(t.insurancePlan),insuranceMemberId:a(t.insuranceMemberId),insuranceGroupNumber:a(t.insuranceGroupNumber),dateOfAppointment:t.dateOfAppointment,dateOfNextAppointment:t.dateOfNextAppointment||"",appointmentTime:a(t.appointmentTime),nextAppointmentTime:a(t.nextAppointmentTime),appointmentType:a(t.appointmentType),appointmentTypeOther:t.appointmentType==="Other"?a(t.appointmentTypeOther):void 0,appointmentDoctor:a(t.appointmentDoctor),chiefComplaint:a(t.chiefComplaint),treatmentPlan:a(t.treatmentPlan),lastCleaningDate:a(t.lastCleaningDate),dentistNotes:t.dentistNotes});e(`/dashboard/patients/${c.id}`,{replace:!0})},i=(o,c)=>n.jsxs("section",{children:[n.jsx("h2",{className:"text-sm font-semibold text-navy uppercase tracking-wide mb-3",children:o}),c]});return n.jsxs("div",{className:"p-8",children:[n.jsx(J,{to:"/dashboard/patients",className:"text-sky-dark text-sm font-medium hover:underline mb-4 inline-block",children:" Patients"}),n.jsx("h1",{className:"text-2xl font-semibold text-navy mb-6",children:"New patient"}),n.jsxs("form",{onSubmit:l,className:"bg-white rounded-xl shadow-sm border border-sky/40 p-6 space-y-6 max-w-2xl",children:[i("Demographics",n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"First name *"}),n.jsx("input",{required:!0,value:t.firstName,onChange:o=>s("firstName",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Last name *"}),n.jsx("input",{required:!0,value:t.lastName,onChange:o=>s("lastName",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Date of birth *"}),n.jsx("input",{required:!0,type:"date",value:t.dateOfBirth,onChange:o=>s("dateOfBirth",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Phone"}),n.jsx("input",{value:t.phone,onChange:o=>s("phone",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Email"}),n.jsx("input",{type:"email",value:t.email,onChange:o=>s("email",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Address"}),n.jsx("input",{value:t.address,onChange:o=>s("address",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]})]})),i("Medical history",n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-xs text-navy/60 mb-2",children:"Allergies, conditions, and medications relevant to dental treatment"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Allergies"}),n.jsx("input",{value:t.allergies,onChange:o=>s("allergies",o.target.value),placeholder:"e.g. Penicillin, latex",list:"new-patient-allergies-list",autoComplete:"off",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"}),n.jsx("datalist",{id:"new-patient-allergies-list",children:vh.map(o=>n.jsx("option",{value:o},o))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Medical conditions"}),n.jsx("input",{value:t.medicalConditions,onChange:o=>s("medicalConditions",o.target.value),placeholder:"e.g. Diabetes, hypertension",list:"new-patient-medical-list",autoComplete:"off",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"}),n.jsx("datalist",{id:"new-patient-medical-list",children:bh.map(o=>n.jsx("option",{value:o},o))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Current medications"}),n.jsx("input",{value:t.currentMedications,onChange:o=>s("currentMedications",o.target.value),list:"new-patient-medications-list",autoComplete:"off",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"}),n.jsx("datalist",{id:"new-patient-medications-list",children:Nh.map(o=>n.jsx("option",{value:o},o))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Emergency contact name"}),n.jsx("input",{value:t.emergencyContactName,onChange:o=>s("emergencyContactName",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Emergency contact phone"}),n.jsx("input",{value:t.emergencyContactPhone,onChange:o=>s("emergencyContactPhone",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]})]})]})),i("Insurance",n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Insurance provider"}),n.jsxs("select",{value:t.insuranceProvider,onChange:o=>s("insuranceProvider",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white",children:[n.jsx("option",{value:"",children:"Select provider"}),bn.map(o=>n.jsx("option",{value:o,children:o},o)),n.jsx("option",{value:mt,children:mt})]}),t.insuranceProvider===mt&&n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Custom provider name"}),n.jsx("input",{type:"text",autoComplete:"off",list:"new-patient-insurance-custom-list",value:t.insuranceOther,onChange:o=>s("insuranceOther",o.target.value),placeholder:"Type insurance provider name",className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white text-navy"}),n.jsx("datalist",{id:"new-patient-insurance-custom-list",children:bn.map(o=>n.jsx("option",{value:o},o))})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Plan name"}),n.jsx("input",{value:t.insurancePlan,onChange:o=>s("insurancePlan",o.target.value),placeholder:"Select plan",list:"new-patient-plan-list",autoComplete:"off",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"}),n.jsx("datalist",{id:"new-patient-plan-list",children:Ao.map(o=>n.jsx("option",{value:o},o))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Member ID"}),n.jsx("input",{value:t.insuranceMemberId,onChange:o=>s("insuranceMemberId",o.target.value),placeholder:"Member ID",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Group number"}),n.jsx("input",{value:t.insuranceGroupNumber,onChange:o=>s("insuranceGroupNumber",o.target.value),placeholder:"Group number",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]})]})),i("Appointments",n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Date of appointment *"}),n.jsx("input",{required:!0,type:"date",value:t.dateOfAppointment,onChange:o=>s("dateOfAppointment",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Appointment time"}),n.jsx("input",{type:"time",value:t.appointmentTime,onChange:o=>s("appointmentTime",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Date of next appointment"}),n.jsx("input",{type:"date",value:t.dateOfNextAppointment,onChange:o=>s("dateOfNextAppointment",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Next appointment time"}),n.jsx("input",{type:"time",value:t.nextAppointmentTime,onChange:o=>s("nextAppointmentTime",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Appointment type"}),n.jsxs("select",{value:t.appointmentType,onChange:o=>s("appointmentType",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white",children:[n.jsx("option",{value:"",children:""}),Ad.map(o=>n.jsx("option",{value:o,children:o},o))]}),t.appointmentType==="Other"&&n.jsxs("div",{className:"mt-2",children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Describe appointment type (free response)"}),n.jsx("input",{type:"text",value:t.appointmentTypeOther,onChange:o=>s("appointmentTypeOther",o.target.value),placeholder:"e.g. Implant consultation, TMJ follow-up",list:"new-patient-appointment-type-other-list",autoComplete:"off",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"}),n.jsx("datalist",{id:"new-patient-appointment-type-other-list",children:jh.map(o=>n.jsx("option",{value:o},o))})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Doctor (performing appointment)"}),n.jsx("input",{value:t.appointmentDoctor,onChange:o=>s("appointmentDoctor",o.target.value),placeholder:"e.g. Dr. Smith",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]})]})),i("Clinical",n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Chief complaint"}),n.jsx("input",{value:t.chiefComplaint,onChange:o=>s("chiefComplaint",o.target.value),placeholder:"Reason for visit",list:"new-patient-chief-complaint-list",autoComplete:"off",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"}),n.jsx("datalist",{id:"new-patient-chief-complaint-list",children:wh.map(o=>n.jsx("option",{value:o},o))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Last cleaning date"}),n.jsx("input",{type:"date",value:t.lastCleaningDate,onChange:o=>s("lastCleaningDate",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Treatment plan"}),n.jsx("textarea",{value:t.treatmentPlan,onChange:o=>s("treatmentPlan",o.target.value),rows:3,placeholder:"Planned treatment",className:"w-full px-3 py-2 border border-sky/60 rounded-lg resize-y"})]})]})),i("Dentist's notes",n.jsx("textarea",{value:t.dentistNotes,onChange:o=>s("dentistNotes",o.target.value),rows:4,placeholder:"Clinical notes, procedures performed, charting notes, etc.",className:"w-full px-3 py-2 border border-sky/60 rounded-lg resize-y"})),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{type:"submit",className:"px-4 py-2 bg-navy text-white rounded-lg font-medium hover:bg-navy-light",children:"Save patient"}),n.jsx(J,{to:"/dashboard/patients",className:"px-4 py-2 border border-navy/30 rounded-lg font-medium inline-block",children:"Cancel"})]})]})]})}const Zv="gumgauge-operatories",Ws="gumgauge-demo-operatories";function kh(){try{return typeof sessionStorage<"u"&&sessionStorage.getItem(Ze)==="1"}catch{return!1}}function Rd(){return kh()?Ws:Zv}function e0(){if(kh())try{if(localStorage.getItem(Ws))return;const t=zy();localStorage.setItem(Ws,JSON.stringify(t))}catch{}}function Ch(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):[]}catch{return[]}}function t0(){const e=Rd();if(e===Ws||Ch(e).length>0)return;const r=[{id:crypto.randomUUID(),name:"Op 1",defaultDurationMinutes:45},{id:crypto.randomUUID(),name:"Op 2",defaultDurationMinutes:45},{id:crypto.randomUUID(),name:"Op 3",defaultDurationMinutes:60}];try{localStorage.setItem(e,JSON.stringify(r))}catch{}}function $d(){const e=Rd();return e===Ws?e0():t0(),Ch(e)}function wi(e){return $d().find(t=>t.id===e)}function n0(e){try{localStorage.setItem(Rd(),JSON.stringify(e??[]))}catch{}}const vu="09:00",bu=60;function r0(e,t){const r=new Date().toISOString().slice(0,10);return e.map(s=>{const a=s.start.slice(0,10),l=s.start.slice(11,16),i=new Date(s.end).getHours()*60+new Date(s.end).getMinutes(),o=new Date(s.start).getHours()*60+new Date(s.start).getMinutes(),c=i-o;return{id:s.id,appointmentId:s.id,patientId:s.patientId,date:a,time:l,durationMinutes:c>0?c:void 0,type:a>=r?a===r?"appointment":"next":"appointment",appointmentType:s.type,providerId:s.providerId,operatoryId:s.operatoryId,patientName:t(s.patientId),status:s.status,checkedInAt:s.checkedInAt}})}function s0(e){const t=[];return e.forEach(r=>{const s=`${r.firstName} ${r.lastName}`;r.dateOfAppointment&&t.push({id:`apt-${r.id}-${r.dateOfAppointment}`,patientId:r.id,date:r.dateOfAppointment,time:r.appointmentTime??vu,durationMinutes:r.appointmentDurationMinutes??bu,type:"appointment",appointmentType:r.appointmentType,provider:r.appointmentDoctor,room:r.appointmentRoom,patientName:s,status:r.appointmentStatus}),r.dateOfNextAppointment&&t.push({id:`next-${r.id}-${r.dateOfNextAppointment}`,patientId:r.id,date:r.dateOfNextAppointment,time:r.nextAppointmentTime??vu,durationMinutes:r.nextAppointmentDurationMinutes??bu,type:"next",appointmentType:r.appointmentType,provider:r.appointmentDoctor,room:r.nextAppointmentRoom,patientName:s})}),t}function a0(e,t,r){if(e.length>0){const s=new Map(t.map(i=>[i.id,`${i.firstName} ${i.lastName}`])),l=r0(e,i=>s.get(i)??"Unknown");return r?l.map(i=>({...i,provider:i.providerId?r(i.providerId):i.provider})):l}return s0(t)}function fs(e){const[t,r]=e.split(":").map(Number);return(t??0)*60+(r??0)}function Eo(e){const t=Math.floor(e/60),r=e%60;return`${String(t).padStart(2,"0")}:${String(r).padStart(2,"0")}`}const Nu=Array.from({length:10},(e,t)=>t+8),ju=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function Si(e){const t=new Date(e+"T12:00:00"),r=t.getDay(),s=new Date(t);return s.setDate(t.getDate()-r),Array.from({length:7},(a,l)=>{const i=new Date(s);return i.setDate(s.getDate()+l),i.toISOString().slice(0,10)})}function l0(e){const[t,r]=e.split("-").map(Number),s=new Date(t,r-1,1),a=new Date(t,r,0),l=s.getDay(),i=a.getDate(),o=[],c=new Date(s);c.setDate(1-l);for(let p=0;p<l;p++){const h=new Date(c);h.setDate(c.getDate()+p),o.push({date:h.toISOString().slice(0,10),isCurrentMonth:!1})}for(let p=1;p<=i;p++)o.push({date:`${t}-${String(r).padStart(2,"0")}-${String(p).padStart(2,"0")}`,isCurrentMonth:!0});const m=42-o.length,d=new Date(t,r,1);for(let p=0;p<m;p++){const h=new Date(d);h.setDate(d.getDate()+p),o.push({date:h.toISOString().slice(0,10),isCurrentMonth:!1})}return o}function i0({events:e,currentDate:t,viewMode:r,onDateChange:s,onReschedule:a}){const[l,i]=g.useState(null),[o,c]=g.useState(null),m=(x,y)=>{i(y),x.dataTransfer.setData("text/plain",y.id),x.dataTransfer.effectAllowed="move"},d=()=>{i(null),c(null)},p=(x,y,v)=>{x.preventDefault(),x.dataTransfer.dropEffect="move",c({date:y,time:v})},h=(x,y,v)=>{x.preventDefault();const S=x.dataTransfer.getData("text/plain");S&&a(S,y,v),i(null),c(null)},w=x=>e.filter(y=>y.date===x).sort((y,v)=>fs(y.time)-fs(v.time)),u=()=>{const x=new Date(t+"T12:00:00");r==="day"?x.setDate(x.getDate()-1):r==="week"?x.setDate(x.getDate()-7):x.setMonth(x.getMonth()-1),s(x.toISOString().slice(0,10))},b=()=>{const x=new Date(t+"T12:00:00");r==="day"?x.setDate(x.getDate()+1):r==="week"?x.setDate(x.getDate()+7):x.setMonth(x.getMonth()+1),s(x.toISOString().slice(0,10))},C=r==="day"?Q(t):r==="week"?(()=>{const x=Si(t);return`${Q(x[0])}  ${Q(x[6])}`})():(()=>{const[x,y]=t.split("-").map(Number);return`${["January","February","March","April","May","June","July","August","September","October","November","December"][y-1]} ${x}`})();return n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:u,className:"px-3 py-1.5 border border-sky/60 rounded-lg text-sm font-medium",children:""}),n.jsx("span",{className:"font-medium text-navy min-w-[200px]",children:C}),n.jsx("button",{type:"button",onClick:b,className:"px-3 py-1.5 border border-sky/60 rounded-lg text-sm font-medium",children:""})]})}),r==="day"&&n.jsx("div",{className:"border border-sky/40 rounded-lg overflow-hidden bg-white",children:n.jsxs("div",{className:"grid grid-cols-[60px_1fr]",children:[n.jsx("div",{className:"bg-sky/5 border-b border-sky/30 p-1 text-xs text-navy/70 font-medium"}),n.jsx("div",{className:"border-b border-sky/30 p-1 text-sm font-medium text-navy",children:Q(t)}),Nu.map(x=>{const y=Eo(x*60),v=w(t).filter(P=>{const E=fs(P.time),D=E+(P.durationMinutes??60);return E<(x+1)*60&&D>x*60}),S=(o==null?void 0:o.date)===t&&(o==null?void 0:o.time)===y;return n.jsxs(tr.Fragment,{children:[n.jsx("div",{className:"bg-sky/5 border-b border-sky/20 p-1 text-xs text-navy/70",children:x===0?"12 AM":x<12?`${x} AM`:x===12?"12 PM":`${x-12} PM`}),n.jsx("div",{className:`min-h-[48px] border-b border-sky/20 p-1 ${S?"bg-green-100":""}`,onDragOver:P=>p(P,t,y),onDrop:P=>h(P,t,y),children:v.map(P=>n.jsxs("div",{draggable:!0,onDragStart:E=>m(E,P),onDragEnd:d,className:`mb-1 rounded px-2 py-1 text-xs border border-sky/40 bg-white cursor-grab active:cursor-grabbing ${(l==null?void 0:l.id)===P.id?"opacity-50":""}`,children:[n.jsx(J,{to:`/dashboard/patients/${P.patientId}`,className:"font-medium text-sky-dark hover:underline",onClick:E=>E.stopPropagation(),children:P.patientName}),n.jsx("span",{className:"text-navy/70 ml-1",children:P.time}),P.durationMinutes&&n.jsxs("span",{className:"text-navy/50 ml-1",children:[P.durationMinutes," min"]}),P.room&&n.jsxs("span",{className:"ml-1 text-navy/50",children:[" ",P.room]})]},P.id))})]},x)})]})}),r==="week"&&n.jsx("div",{className:"border border-sky/40 rounded-lg overflow-hidden bg-white overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[800px]",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-sky/5",children:[n.jsx("th",{className:"w-14 p-1 text-xs text-navy/70 font-medium border-r border-sky/30",children:"Time"}),Si(t).map(x=>n.jsxs("th",{className:"p-1 text-xs font-medium text-navy border-r border-sky/30 last:border-r-0",children:[ju[new Date(x+"T12:00:00").getDay()]," ",x.slice(8)]},x))]})}),n.jsx("tbody",{children:Nu.map(x=>{const y=Eo(x*60);return n.jsxs("tr",{className:"border-t border-sky/20",children:[n.jsx("td",{className:"p-1 text-xs text-navy/70 border-r border-sky/30",children:x===0?"12 AM":x<12?`${x} AM`:x===12?"12 PM":`${x-12} PM`}),Si(t).map(v=>{const S=w(v).filter(E=>{const D=fs(E.time),O=D+(E.durationMinutes??60);return D<(x+1)*60&&O>x*60}),P=(o==null?void 0:o.date)===v&&(o==null?void 0:o.time)===y;return n.jsx("td",{className:`min-w-[100px] min-h-[40px] p-1 align-top border-r border-sky/20 last:border-r-0 ${P?"bg-green-100":""}`,onDragOver:E=>p(E,v,y),onDrop:E=>h(E,v,y),children:S.map(E=>n.jsxs("div",{draggable:!0,onDragStart:D=>m(D,E),onDragEnd:d,className:`rounded px-1 py-0.5 text-xs border border-sky/40 bg-white cursor-grab ${(l==null?void 0:l.id)===E.id?"opacity-50":""}`,children:[n.jsx(J,{to:`/dashboard/patients/${E.patientId}`,className:"text-sky-dark hover:underline",onClick:D=>D.stopPropagation(),children:E.patientName}),E.room&&n.jsxs("span",{className:"text-navy/50",children:[" ",E.room]})]},E.id))},v)})]},x)})})]})}),r==="month"&&n.jsx("div",{className:"border border-sky/40 rounded-lg overflow-hidden bg-white",children:n.jsxs("div",{className:"grid grid-cols-7",children:[ju.map(x=>n.jsx("div",{className:"p-1 text-center text-xs font-medium text-navy bg-sky/5 border-b border-r border-sky/30 last:border-r-0",children:x},x)),l0(t.slice(0,7)).map(({date:x,isCurrentMonth:y})=>{const v=w(x),S=(o==null?void 0:o.date)===x;return n.jsxs("div",{className:`min-h-[80px] p-1 border-b border-r border-sky/20 last:border-r-0 ${y?"":"bg-sky/5"} ${S?"bg-green-100":""}`,onDragOver:P=>{P.preventDefault(),c({date:x,time:"09:00"})},onDrop:P=>{P.preventDefault();const E=P.dataTransfer.getData("text/plain");E&&a(E,x,"09:00"),c(null)},children:[n.jsx("span",{className:`text-sm ${y?"text-navy":"text-navy/50"}`,children:x.slice(8)}),n.jsxs("div",{className:"mt-0.5 space-y-0.5",children:[v.slice(0,3).map(P=>n.jsx("div",{draggable:!0,onDragStart:E=>m(E,P),onDragEnd:d,className:`rounded px-1 py-0.5 text-xs border border-sky/40 bg-white cursor-grab truncate ${(l==null?void 0:l.id)===P.id?"opacity-50":""}`,title:`${P.patientName} ${P.time}`,children:n.jsxs(J,{to:`/dashboard/patients/${P.patientId}`,className:"text-sky-dark hover:underline",onClick:E=>E.stopPropagation(),children:[P.time," ",P.patientName]})},P.id)),v.length>3&&n.jsxs("span",{className:"text-xs text-navy/60",children:["+",v.length-3," more"]})]})]},x)})]})}),n.jsx("p",{className:"text-xs text-navy/60",children:"Drag an appointment to reschedule. Drop on a day/time to update."})]})}function wa(e){return e.slice(0,4)}function ki(e){return e.slice(0,7)}function Ci(e){const t=new Date(e+"T12:00:00"),r=new Date(t);return r.setDate(t.getDate()-t.getDay()),r.toISOString().slice(0,10)}function Sa(e){const t=qn(e);return t?Fl.includes(t.position)?`Dr. ${t.firstName} ${t.lastName}`:`${t.firstName} ${t.lastName}`:e}function o0(){const{timezone:e}=Qr(),t=_l(e),[r,s]=g.useState("upcoming"),[a,l]=g.useState("month"),[i,o]=g.useState(""),[c,m]=g.useState(""),[d,p]=g.useState(""),[h,w]=g.useState(""),[u,b]=g.useState("list"),[C,x]=g.useState("week"),[y,v]=g.useState(()=>t),[S,P]=g.useState(()=>Ae()),[E,D]=g.useState(()=>or()),O=()=>P(Ae()),L=()=>D(or()),I=g.useMemo(()=>a0(E,S,Sa),[E,S]),j=g.useMemo(()=>I.filter(k=>k.date===t).sort((k,H)=>k.time.localeCompare(H.time)),[I,t]),A=g.useMemo(()=>[...new Set(I.filter(k=>k.date>=t).map(k=>k.date))].sort().slice(0,14),[I,t]),U=g.useMemo(()=>A.flatMap(k=>I.filter(H=>H.date===k)).sort((k,H)=>`${k.date} ${k.time}`.localeCompare(`${H.date} ${H.time}`)),[I,A]);g.useMemo(()=>[...new Set(I.map(k=>k.date))].sort(),[I]);const q=g.useMemo(()=>[...I].sort((k,H)=>`${k.date} ${k.time}`.localeCompare(`${H.date} ${H.time}`)),[I]);let K=r==="today"?j.map(k=>({date:k.date,type:k.type,event:k,patient:B(k.patientId)})):r==="upcoming"?U.map(k=>({date:k.date,type:k.type,event:k,patient:B(k.patientId)})):q.map(k=>({date:k.date,type:k.type,event:k,patient:B(k.patientId)}));h&&(K=K.filter(k=>k.event.patientId===h));const Z=parseInt(t.slice(0,4),10),me=g.useMemo(()=>{const k=K.map(ye=>ye.date),H=Array.from(new Set(k)),ae=Array.from(new Set(H.map(wa))).sort(),pe=Array.from(new Set(H.map(Ci))).sort(),oe={};return H.forEach(ye=>{const _e=wa(ye),Et=ki(ye);oe[_e]||(oe[_e]=[]),oe[_e].includes(Et)||oe[_e].push(Et)}),Object.keys(oe).forEach(ye=>oe[ye].sort()),{years:ae,weeks:pe,monthsByYear:oe}},[K]),z=g.useMemo(()=>["January","February","March","April","May","June","July","August","September","October","November","December"].map((H,ae)=>({value:String(ae+1).padStart(2,"0"),label:H})),[]),Y=c&&d?`${c}-${d}`:"",T=me.monthsByYear[c??""]??[],X=g.useMemo(()=>a==="month"?Y?K.filter(k=>ki(k.date)===Y):K:a==="year"?i?K.filter(k=>wa(k.date)===i):K:a==="week"&&i?K.filter(k=>Ci(k.date)===i):K,[K,a,i,Y]),_=g.useMemo(()=>[...S].sort((k,H)=>`${k.firstName} ${k.lastName}`.localeCompare(`${H.firstName} ${H.lastName}`)),[S]),ue=(k,H,ae)=>{const pe=I.find(It=>It.id===k);if(!pe)return;const oe=pe.durationMinutes??60,_e=fs(ae)+oe,Et=`${H}T${ae}:00`,Hn=`${H}T${Eo(_e)}:00`;if(pe.appointmentId){const It=E.find(Wn=>Wn.id===pe.appointmentId);It&&(mu(It.id,{start:Et,end:Hn}),L())}else pe.type==="next"?te(pe.patientId,{dateOfNextAppointment:H,nextAppointmentTime:ae}):te(pe.patientId,{dateOfAppointment:H,appointmentTime:ae}),O()},ge=g.useMemo(()=>{let k=h?I.filter(H=>H.patientId===h):I;return r==="today"?k=k.filter(H=>H.date===t):r==="upcoming"&&(k=k.filter(H=>H.date>=t&&A.includes(H.date))),a==="month"&&Y?k=k.filter(H=>ki(H.date)===Y):a==="year"&&i?k=k.filter(H=>wa(H.date)===i):a==="week"&&i&&(k=k.filter(H=>Ci(H.date)===i)),k},[I,h,r,t,A,a,i,Y]),Oe=g.useMemo(()=>$d(),[]),$e=g.useMemo(()=>Bn(),[]),tt=g.useMemo(()=>$e.filter(k=>["Dentist","Pediatric Dentist","Dental Hygienist","Orthodontist","Endodontist","Periodontist","Oral Surgeon"].includes(k.position)),[$e]),[Vn,Dt]=g.useState(!1),[mn,pn]=g.useState(""),[Ke,Yt]=g.useState(""),[hn,Pt]=g.useState(""),[fn,ut]=g.useState(()=>t),[Kt,Jt]=g.useState("09:00"),[At,Qt]=g.useState("45"),[Xt,xn]=g.useState(""),[ur,ze]=g.useState(null),mr=()=>{if(!mn||!Ke)return;const k=parseInt(At,10)||45,H=new Date(`${fn}T${Kt}:00`),ae=H.toISOString(),pe=new Date(H.getTime()+k*60*1e3).toISOString(),oe=Sv(ae,pe,hn||void 0,Ke);if(oe.length>0){ze(oe.map(ye=>{var _e;return{operatory:ye.operatoryId?((_e=wi(ye.operatoryId))==null?void 0:_e.name)??ye.operatoryId:"",provider:Sa(ye.providerId)}}));return}ze(null),kv({patientId:mn,providerId:Ke,operatoryId:hn||void 0,start:ae,end:pe,type:Xt||void 0,status:"Scheduled"}),Dt(!1),pn(""),Yt(""),Pt(""),ut(t),Jt("09:00"),Qt("45"),xn(""),L()};return n.jsxs("div",{className:"p-8",children:[n.jsx("h1",{className:"text-2xl font-semibold text-navy mb-6",children:"Appointments"}),n.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-4",children:[n.jsx("button",{type:"button",onClick:()=>{Dt(!0),ze(null)},className:"px-4 py-2 bg-navy text-white rounded-lg font-medium hover:bg-navy-light",children:"+ New appointment"}),n.jsx("span",{className:"text-sm text-navy/70",children:"View:"}),["list","calendar"].map(k=>n.jsx("button",{onClick:()=>b(k),className:`px-4 py-2 rounded-lg font-medium capitalize ${u===k?"bg-navy text-white":"bg-white border border-sky/60 text-navy hover:bg-sky/10"}`,children:k},k)),u==="calendar"&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"text-sm text-navy/70 ml-2",children:"Calendar:"}),["day","week","month"].map(k=>n.jsx("button",{onClick:()=>x(k),className:`px-3 py-1.5 rounded-lg text-sm font-medium capitalize ${C===k?"bg-sky-dark text-white":"bg-sky/20 text-navy"}`,children:k},k))]})]}),u==="list"&&X.length>0&&n.jsx("div",{className:"mb-4 flex flex-wrap items-center gap-2",children:n.jsx("button",{type:"button",onClick:()=>{const k=["Date","Time","Type","Patient","Duration","Room","Provider"],H=X.map(({date:ae,type:pe,event:oe,patient:ye})=>{var _e;return[Q(ae),oe.time,pe==="appointment"?"Appointment":"Next appointment",oe.patientName,oe.durationMinutes??"",oe.room??(oe.operatoryId?(_e=wi(oe.operatoryId))==null?void 0:_e.name:"")??"",oe.provider??(oe.providerId?Sa(oe.providerId):"")??""]});fh(`appointments-${new Date().toISOString().slice(0,10)}.csv`,k,H)},className:"px-3 py-2 border border-sky/60 rounded-lg text-sm font-medium text-navy hover:bg-sky/10",children:"Export CSV"})}),n.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:["today","upcoming","all"].map(k=>n.jsx("button",{onClick:()=>{s(k),o("")},className:`px-4 py-2 rounded-lg font-medium capitalize ${r===k?"bg-navy text-white":"bg-white border border-sky/60 text-navy hover:bg-sky/10"}`,children:k},k))}),n.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-navy/70 whitespace-nowrap",children:"Group by"}),n.jsxs("select",{value:a,onChange:k=>{const H=k.target.value;l(H),o(""),m(""),p("")},className:"px-3 py-2 border border-sky/60 rounded-lg bg-white text-navy",children:[n.jsx("option",{value:"year",children:"Year"}),n.jsx("option",{value:"month",children:"Month"}),n.jsx("option",{value:"week",children:"Week"})]})]}),a==="month"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-navy/70 whitespace-nowrap",children:"Year"}),n.jsxs("select",{value:c,onChange:k=>{m(k.target.value),p("")},className:"px-3 py-2 border border-sky/60 rounded-lg bg-white text-navy min-w-[100px]",children:[n.jsx("option",{value:"",children:"Select year"}),(me.years.length>0?me.years:Array.from({length:11},(k,H)=>String(Z-5+H))).map(k=>n.jsx("option",{value:k,children:k},k))]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-navy/70 whitespace-nowrap",children:"Month"}),n.jsxs("select",{value:d,onChange:k=>p(k.target.value),className:"px-3 py-2 border border-sky/60 rounded-lg bg-white text-navy min-w-[140px]",children:[n.jsx("option",{value:"",children:"Select month"}),(c?T:[]).length>0?T.map(k=>{const H=z.find(ae=>ae.value===k);return n.jsx("option",{value:k,children:(H==null?void 0:H.label)??k},k)}):z.map(k=>n.jsx("option",{value:k.value,children:k.label},k.value))]})]})]}):n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-navy/70 whitespace-nowrap",children:"Show"}),n.jsxs("select",{value:i,onChange:k=>o(k.target.value),className:"px-3 py-2 border border-sky/60 rounded-lg bg-white text-navy min-w-[180px]",children:[n.jsx("option",{value:"",children:a==="year"?"All years":"All weeks"}),a==="year"&&(me.years.length>0?me.years:Array.from({length:11},(k,H)=>String(Z-5+H))).map(k=>n.jsx("option",{value:k,children:k},k)),a==="week"&&me.weeks.map(k=>n.jsxs("option",{value:k,children:[Q(k)," (week)"]},k))]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-navy/70 whitespace-nowrap",children:"Patient"}),n.jsxs("select",{value:h,onChange:k=>w(k.target.value),className:"px-3 py-2 border border-sky/60 rounded-lg bg-white text-navy min-w-[180px]",children:[n.jsx("option",{value:"",children:"All patients"}),_.map(k=>n.jsxs("option",{value:k.id,children:[k.firstName," ",k.lastName]},k.id))]})]})]}),u==="calendar"&&n.jsx("div",{className:"mb-6",children:n.jsx(i0,{events:ge,currentDate:y,viewMode:C,onDateChange:v,onReschedule:ue})}),u==="list"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 overflow-hidden",children:X.length===0?n.jsx("div",{className:"p-8 text-center text-navy/60",children:i||Y||h?"No appointments match the selected filters.":r==="today"?"No appointments today.":r==="upcoming"?"No upcoming next appointments.":"No appointments on file."}):n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-navy/5 border-b border-sky/40",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-navy",children:"Date"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-navy",children:"Type"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-navy",children:"Patient"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-navy",children:"Status"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-navy",children:"Duration"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-navy",children:"Room"}),n.jsx("th",{className:"w-24"})]})}),n.jsx("tbody",{children:X.map(({date:k,type:H,event:ae,patient:pe})=>{var oe;return n.jsxs("tr",{className:"border-b border-sky/20 hover:bg-sky/10",children:[n.jsxs("td",{className:"py-3 px-4 text-navy",children:[Q(k),ae.time?` ${ae.time}`:""]}),n.jsx("td",{className:"py-3 px-4 text-navy/80",children:ae.appointmentType??(H==="appointment"?"Appointment":"Next appointment")}),n.jsx("td",{className:"py-3 px-4 font-medium text-navy",children:ae.patientName}),n.jsx("td",{className:"py-3 px-4",children:k===t?ae.appointmentId?n.jsxs("select",{value:ae.status??"Scheduled",onChange:ye=>{mu(ae.appointmentId,{status:ye.target.value}),L()},className:"text-sm px-2 py-1 border border-sky/60 rounded bg-white text-navy",children:[n.jsx("option",{value:"Scheduled",children:"Scheduled"}),n.jsx("option",{value:"Checked In",children:"Checked In"}),n.jsx("option",{value:"In Chair",children:"In Chair"}),n.jsx("option",{value:"With Doctor",children:"With Doctor"}),n.jsx("option",{value:"Checkout",children:"Checkout"}),n.jsx("option",{value:"No-Show",children:"No-Show"}),n.jsx("option",{value:"Broken",children:"Broken"})]}):n.jsxs("select",{value:(pe==null?void 0:pe.appointmentStatus)??"Scheduled",onChange:ye=>{pe&&(te(pe.id,{appointmentStatus:ye.target.value}),O())},className:"text-sm px-2 py-1 border border-sky/60 rounded bg-white text-navy",children:[n.jsx("option",{value:"Scheduled",children:"Scheduled"}),n.jsx("option",{value:"Checked In",children:"Checked In"}),n.jsx("option",{value:"In Chair",children:"In Chair"}),n.jsx("option",{value:"With Doctor",children:"With Doctor"}),n.jsx("option",{value:"Checkout",children:"Checkout"}),n.jsx("option",{value:"No-Show",children:"No-Show"}),n.jsx("option",{value:"Broken",children:"Broken"})]}):n.jsx("span",{className:"text-navy/60",children:""})}),n.jsx("td",{className:"py-3 px-4 text-navy/80",children:ae.durationMinutes?`${ae.durationMinutes} min`:""}),n.jsx("td",{className:"py-3 px-4 text-navy/80",children:ae.room??(ae.operatoryId?(oe=wi(ae.operatoryId))==null?void 0:oe.name:"")??""}),n.jsx("td",{className:"py-3 px-4",children:n.jsx(J,{to:`/dashboard/patients/${ae.patientId}`,className:"text-sky-dark font-medium text-sm hover:underline",children:"Chart"})})]},`${ae.id}-${k}-${H}`)})})]})}),Vn&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"new-appt-title",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg max-w-md w-full p-6 max-h-[90vh] overflow-y-auto",children:[n.jsx("h2",{id:"new-appt-title",className:"text-lg font-semibold text-navy mb-4",children:"New appointment"}),ur&&ur.length>0&&n.jsxs("div",{className:"mb-4 p-3 rounded-lg bg-amber-50 border border-amber-200 text-amber-900 text-sm",children:[n.jsx("p",{className:"font-medium",children:"Conflict: this time overlaps with another appointment (same room or provider)."}),n.jsx("p",{className:"mt-1",children:"Change time, room, or provider, or confirm to save anyway."})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Patient *"}),n.jsxs("select",{required:!0,value:mn,onChange:k=>pn(k.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white text-navy",children:[n.jsx("option",{value:"",children:"Select patient"}),_.map(k=>n.jsxs("option",{value:k.id,children:[k.firstName," ",k.lastName]},k.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Provider *"}),n.jsxs("select",{required:!0,value:Ke,onChange:k=>Yt(k.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white text-navy",children:[n.jsx("option",{value:"",children:"Select provider"}),tt.map(k=>n.jsx("option",{value:k.id,children:Sa(k.id)},k.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Room (operatory)"}),n.jsxs("select",{value:hn,onChange:k=>Pt(k.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white text-navy",children:[n.jsx("option",{value:"",children:""}),Oe.map(k=>n.jsx("option",{value:k.id,children:k.name},k.id))]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Date *"}),n.jsx("input",{type:"date",value:fn,onChange:k=>ut(k.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Time *"}),n.jsx("input",{type:"time",value:Kt,onChange:k=>Jt(k.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Duration (min)"}),n.jsx("input",{type:"number",min:5,step:5,value:At,onChange:k=>Qt(k.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Type"}),n.jsxs("select",{value:Xt,onChange:k=>xn(k.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white text-navy",children:[n.jsx("option",{value:"",children:""}),Ad.map(k=>n.jsx("option",{value:k,children:k},k))]})]})]})]}),n.jsxs("div",{className:"flex gap-2 mt-6",children:[n.jsx("button",{type:"button",onClick:mr,className:"px-4 py-2 bg-navy text-white rounded-lg font-medium hover:bg-navy-light",children:"Save"}),n.jsx("button",{type:"button",onClick:()=>{Dt(!1),ze(null)},className:"px-4 py-2 border border-sky/60 rounded-lg font-medium text-navy hover:bg-sky/10",children:"Cancel"})]})]})})]})}function d0(){const[e,t]=g.useState(""),[r,s]=g.useState(""),a=g.useMemo(()=>Bn(),[]),l=g.useMemo(()=>{let i=a;if(e.trim()){const o=e.toLowerCase();i=i.filter(c=>`${c.firstName} ${c.lastName}`.toLowerCase().includes(o)||c.email&&c.email.toLowerCase().includes(o)||c.position.toLowerCase().includes(o))}return r&&(i=i.filter(o=>o.position===r)),i.sort((o,c)=>`${o.lastName} ${o.firstName}`.localeCompare(`${c.lastName} ${c.firstName}`))},[a,e,r]);return n.jsxs("div",{className:"p-8",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[n.jsx("h1",{className:"text-2xl font-semibold text-navy",children:"Staff"}),n.jsx(J,{to:"/dashboard/staff/new",className:"inline-flex items-center justify-center px-4 py-2 bg-navy text-white rounded-lg font-medium hover:bg-navy-light transition-colors",children:"+ Add staff member"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:[n.jsx("input",{type:"search",placeholder:"Search by name, email, or position...",value:e,onChange:i=>t(i.target.value),className:"flex-1 max-w-md px-4 py-2 border border-sky/60 rounded-lg bg-white text-navy placeholder-navy/50 focus:outline-none focus:ring-2 focus:ring-sky focus:border-transparent"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-navy/70 whitespace-nowrap",children:"Position"}),n.jsxs("select",{value:r,onChange:i=>s(i.target.value),className:"px-3 py-2 border border-sky/60 rounded-lg bg-white text-navy min-w-[200px]",children:[n.jsx("option",{value:"",children:"All positions"}),Ll.map(i=>n.jsx("optgroup",{label:i.label,children:i.positions.map(o=>n.jsx("option",{value:o,children:o},o))},i.label))]})]})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 overflow-hidden",children:l.length===0?n.jsx("div",{className:"p-8 text-center text-navy/60",children:a.length===0?"No staff yet. Add your first staff member above.":"No staff match your search or filter."}):n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-navy/5 border-b border-sky/40",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-navy",children:"Name"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-navy",children:"Position"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-navy",children:"Status"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-navy",children:"Hire date"}),n.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-navy",children:"Contact"}),n.jsx("th",{className:"w-24"})]})}),n.jsx("tbody",{children:l.map(i=>n.jsxs("tr",{className:"border-b border-sky/20 hover:bg-sky/10",children:[n.jsxs("td",{className:"py-3 px-4 font-medium text-navy",children:[i.firstName," ",i.lastName]}),n.jsx("td",{className:"py-3 px-4 text-navy/80",children:i.position}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${i.status==="Active"?"bg-green-100 text-green-800":i.status==="On leave"?"bg-amber-100 text-amber-800":"bg-navy/10 text-navy/70"}`,children:i.status})}),n.jsx("td",{className:"py-3 px-4 text-navy/80",children:Q(i.hireDate)}),n.jsx("td",{className:"py-3 px-4 text-navy/80 text-sm",children:i.email||i.phone||""}),n.jsx("td",{className:"py-3 px-4",children:n.jsx(J,{to:`/dashboard/staff/${i.id}`,className:"text-sky-dark font-medium text-sm hover:underline",children:"View"})})]},i.id))})]})})]})}const c0={firstName:"",lastName:"",position:"",email:"",phone:"",loginEmail:"",password:"",hireDate:new Date().toISOString().slice(0,10),status:"Active",licenseNumber:"",licenseExpiry:"",emergencyContactName:"",emergencyContactPhone:"",notes:""};function u0(){const e=Ct(),[t,r]=g.useState(c0),s=(o,c)=>{r(m=>({...m,[o]:c}))},a=o=>o.trim()?o.trim():void 0,l=o=>{o.preventDefault();const c=ev({firstName:t.firstName,lastName:t.lastName,position:t.position,email:a(t.email),phone:a(t.phone),loginEmail:a(t.loginEmail)??"",password:t.password,hireDate:t.hireDate,status:t.status,licenseNumber:a(t.licenseNumber),licenseExpiry:a(t.licenseExpiry),emergencyContactName:a(t.emergencyContactName),emergencyContactPhone:a(t.emergencyContactPhone),notes:a(t.notes)});e(`/dashboard/staff/${c.id}`,{replace:!0})},i=(o,c)=>n.jsxs("section",{children:[n.jsx("h2",{className:"text-sm font-semibold text-navy uppercase tracking-wide mb-3",children:o}),c]});return n.jsxs("div",{className:"p-8",children:[n.jsx(J,{to:"/dashboard/staff",className:"text-sky-dark text-sm font-medium hover:underline mb-4 inline-block",children:" Staff"}),n.jsx("h1",{className:"text-2xl font-semibold text-navy mb-6",children:"Add staff member"}),n.jsxs("form",{onSubmit:l,className:"bg-white rounded-xl shadow-sm border border-sky/40 p-6 space-y-6 max-w-2xl",children:[i("Basic information",n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"First name *"}),n.jsx("input",{required:!0,value:t.firstName,onChange:o=>s("firstName",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Last name *"}),n.jsx("input",{required:!0,value:t.lastName,onChange:o=>s("lastName",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Position *"}),n.jsxs("select",{required:!0,value:t.position,onChange:o=>s("position",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white",children:[n.jsx("option",{value:"",children:"Select position"}),Ll.map(o=>n.jsx("optgroup",{label:o.label,children:o.positions.map(c=>n.jsx("option",{value:c,children:c},c))},o.label))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Status"}),n.jsx("select",{value:t.status,onChange:o=>s("status",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white",children:ch.map(o=>n.jsx("option",{value:o,children:o},o))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Hire date *"}),n.jsx("input",{required:!0,type:"date",value:t.hireDate,onChange:o=>s("hireDate",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]})]})),i("Contact",n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Email"}),n.jsx("input",{type:"email",value:t.email,onChange:o=>s("email",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Phone"}),n.jsx("input",{value:t.phone,onChange:o=>s("phone",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]})]})),i("Login credentials",n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-xs text-navy/60 mb-2",children:"Assigned credentials for this employee to sign in to GumGauge. Leave blank if they will not use sign-in."}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Login email or username"}),n.jsx("input",{type:"text",autoComplete:"off",value:t.loginEmail,onChange:o=>s("loginEmail",o.target.value),placeholder:"e.g. jane@practice.com",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Password"}),n.jsx("input",{type:"password",autoComplete:"new-password",value:t.password,onChange:o=>s("password",o.target.value),placeholder:"Set password for sign-in",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]})]})]})),i("License / certification",n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-xs text-navy/60 mb-2",children:"For roles that require a license (e.g. Dentist, Hygienist, CDA)"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"License number"}),n.jsx("input",{value:t.licenseNumber,onChange:o=>s("licenseNumber",o.target.value),placeholder:"e.g. state license #",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"License expiry"}),n.jsx("input",{type:"date",value:t.licenseExpiry,onChange:o=>s("licenseExpiry",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]})]})]})),i("Emergency contact",n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Name"}),n.jsx("input",{value:t.emergencyContactName,onChange:o=>s("emergencyContactName",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Phone"}),n.jsx("input",{value:t.emergencyContactPhone,onChange:o=>s("emergencyContactPhone",o.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]})]})),i("Notes",n.jsx("textarea",{value:t.notes,onChange:o=>s("notes",o.target.value),rows:3,placeholder:"Internal notes about this staff member",className:"w-full px-3 py-2 border border-sky/60 rounded-lg resize-y"})),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{type:"submit",className:"px-4 py-2 bg-navy text-white rounded-lg font-medium hover:bg-navy-light",children:"Save staff member"}),n.jsx(J,{to:"/dashboard/staff",className:"px-4 py-2 border border-navy/30 rounded-lg font-medium inline-block",children:"Cancel"})]})]})]})}const m0="gumgauge-staff-availability",p0="gumgauge-demo-staff-availability";function h0(){try{return typeof sessionStorage<"u"&&sessionStorage.getItem(Ze)==="1"}catch{return!1}}function Zs(){return h0()?p0:m0}function Gs(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):[]}catch{return[]}}function f0(e){return Gs(Zs()).filter(t=>t.staffId===e)}function x0(){return Gs(Zs())}function g0(e){const t=Zs(),r=new Date().toISOString(),s={...e,id:crypto.randomUUID(),addedAt:r},a=Gs(t);return localStorage.setItem(t,JSON.stringify([...a,s])),s}function y0(e){const t=Zs(),r=Gs(t).filter(s=>s.id!==e);return r.length===Gs(t).length?!1:(localStorage.setItem(t,JSON.stringify(r)),!0)}function v0(e){try{localStorage.setItem(Zs(),JSON.stringify(e??[]))}catch{}}function Ot({label:e,value:t,editing:r,formValue:s,onChange:a,type:l="text",placeholder:i,rows:o}){return n.jsxs("div",{className:o?"md:col-span-2":"",children:[e?n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:e}):null,r?l==="textarea"?n.jsx("textarea",{value:s,onChange:c=>a(c.target.value),rows:o??3,placeholder:i,className:"w-full px-3 py-2 border border-sky/60 rounded-lg resize-y"}):n.jsx("input",{type:l,value:s,onChange:c=>a(c.target.value),placeholder:i,className:"w-full px-3 py-2 border border-sky/60 rounded-lg"}):n.jsx("p",{className:"text-navy",children:t||""})]})}function b0(){const{id:e}=Vp(),t=Ct(),[r,s]=g.useState(qn(e||"")),[a,l]=g.useState(!1),[i,o]=g.useState(r||null),[c,m]=g.useState(!1),[d,p]=g.useState(""),[h,w]=g.useState(1),[u,b]=g.useState("09:00"),[C,x]=g.useState("17:00"),[y,v]=g.useState(0);if(g.useEffect(()=>{const j=qn(e||"");s(j),o(j||null)},[e]),!r)return n.jsxs("div",{className:"p-8",children:[n.jsx("p",{className:"text-navy/70",children:"Staff member not found."}),n.jsx(J,{to:"/dashboard/staff",className:"text-sky-dark font-medium mt-2 inline-block hover:underline",children:"Back to staff"})]});const S=()=>{if(!i)return;const j={...i};d.trim()!==""&&(j.password=d,p("")),tv(r.id,j),s(qn(r.id)),o(qn(r.id)),l(!1)},P=()=>{nv(r.id),t("/dashboard/staff",{replace:!0})},E=(j,A)=>{i&&o({...i,[j]:A})},D=f0(r.id),O=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],L=()=>{g0({staffId:r.id,dayOfWeek:h,startTime:u,endTime:C}),w(1),b("09:00"),x("17:00"),v(j=>j+1)},I=(j,A)=>n.jsxs("section",{children:[n.jsx("h2",{className:"text-sm font-semibold text-navy uppercase tracking-wide mb-3",children:j}),A]});return n.jsxs("div",{className:"p-8",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[n.jsxs("div",{children:[n.jsx(J,{to:"/dashboard/staff",className:"text-sky-dark text-sm font-medium hover:underline mb-2 inline-block",children:" Staff"}),n.jsxs("h1",{className:"text-2xl font-semibold text-navy",children:[r.firstName," ",r.lastName]}),n.jsx("p",{className:"text-navy/70 mt-1",children:r.position})]}),n.jsx("div",{className:"flex gap-2",children:a?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:S,className:"px-4 py-2 bg-navy text-white rounded-lg font-medium hover:bg-navy-light",children:"Save"}),n.jsx("button",{onClick:()=>{o(r),l(!1),m(!1),p("")},className:"px-4 py-2 border border-navy/30 rounded-lg",children:"Cancel"})]}):n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-navy text-white rounded-lg font-medium hover:bg-navy-light",children:"Edit"}),c?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:P,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-medium",children:"Confirm delete"}),n.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 border border-navy/30 rounded-lg",children:"Cancel"})]}):n.jsx("button",{onClick:()=>m(!0),className:"px-4 py-2 border border-red-300 text-red-600 rounded-lg font-medium hover:bg-red-50",children:"Delete"})]})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-6 space-y-6",children:[I("Basic information",n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ot,{label:"First name",value:r.firstName,editing:!!a&&!!i,formValue:(i==null?void 0:i.firstName)??"",onChange:j=>E("firstName",j)}),n.jsx(Ot,{label:"Last name",value:r.lastName,editing:!!a&&!!i,formValue:(i==null?void 0:i.lastName)??"",onChange:j=>E("lastName",j)}),n.jsxs("div",{className:i?"":"md:col-span-2",children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Position"}),a&&i?n.jsx("select",{value:i.position,onChange:j=>E("position",j.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white",children:Ll.map(j=>n.jsx("optgroup",{label:j.label,children:j.positions.map(A=>n.jsx("option",{value:A,children:A},A))},j.label))}):n.jsx("p",{className:"text-navy",children:r.position})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Status"}),a&&i?n.jsx("select",{value:i.status,onChange:j=>E("status",j.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white",children:ch.map(j=>n.jsx("option",{value:j,children:j},j))}):n.jsx("p",{className:"text-navy",children:r.status})]}),n.jsx(Ot,{label:"Hire date",value:r.hireDate?Q(r.hireDate):"",editing:!!a&&!!i,formValue:(i==null?void 0:i.hireDate)??"",type:"date",onChange:j=>E("hireDate",j)})]})),I("Contact",n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ot,{label:"Email",value:r.email??"",editing:!!a&&!!i,formValue:(i==null?void 0:i.email)??"",type:"email",onChange:j=>E("email",j)}),n.jsx(Ot,{label:"Phone",value:r.phone??"",editing:!!a&&!!i,formValue:(i==null?void 0:i.phone)??"",onChange:j=>E("phone",j)})]})),I("Login credentials",n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-xs text-navy/60 mb-2",children:"Used by this employee to sign in. Do not display or share passwords."}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a&&i?n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Login email or username"}),n.jsx("input",{type:"text",autoComplete:"off",value:i.loginEmail??"",onChange:j=>E("loginEmail",j.target.value),placeholder:"e.g. jane@practice.com",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"New password (leave blank to keep current)"}),n.jsx("input",{type:"password",autoComplete:"new-password",value:d,onChange:j=>p(j.target.value),placeholder:"",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]})]}):n.jsxs(n.Fragment,{children:[n.jsx(Ot,{label:"Login email or username",value:r.loginEmail??"",editing:!1,formValue:"",onChange:()=>{}}),n.jsx("p",{className:"text-navy/60 text-sm",children:"Password is not displayed."})]})})]})),I("License / certification",n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ot,{label:"License number",value:r.licenseNumber??"",editing:!!a&&!!i,formValue:(i==null?void 0:i.licenseNumber)??"",placeholder:"e.g. state license #",onChange:j=>E("licenseNumber",j)}),n.jsx(Ot,{label:"License expiry",value:r.licenseExpiry??"",editing:!!a&&!!i,formValue:(i==null?void 0:i.licenseExpiry)??"",type:"date",onChange:j=>E("licenseExpiry",j)})]})),I("Emergency contact",n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ot,{label:"Name",value:r.emergencyContactName??"",editing:!!a&&!!i,formValue:(i==null?void 0:i.emergencyContactName)??"",onChange:j=>E("emergencyContactName",j)}),n.jsx(Ot,{label:"Phone",value:r.emergencyContactPhone??"",editing:!!a&&!!i,formValue:(i==null?void 0:i.emergencyContactPhone)??"",onChange:j=>E("emergencyContactPhone",j)})]})),I("Notes",n.jsx(Ot,{label:"",value:r.notes??"",editing:!!a&&!!i,formValue:(i==null?void 0:i.notes)??"",type:"textarea",rows:4,placeholder:"Internal notes",onChange:j=>E("notes",j)})),I("Availability",n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-xs text-navy/60 mb-2",children:"When this provider is available for appointments. Used to prevent booking when out."}),n.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[n.jsx("select",{value:h,onChange:j=>w(Number(j.target.value)),className:"px-2 py-1.5 border border-sky/60 rounded-lg text-sm bg-white",children:O.map((j,A)=>n.jsx("option",{value:A,children:j},j))}),n.jsx("input",{type:"time",value:u,onChange:j=>b(j.target.value),className:"px-2 py-1.5 border border-sky/60 rounded-lg text-sm"}),n.jsx("span",{className:"text-navy/70 self-center",children:"to"}),n.jsx("input",{type:"time",value:C,onChange:j=>x(j.target.value),className:"px-2 py-1.5 border border-sky/60 rounded-lg text-sm"}),n.jsx("button",{type:"button",onClick:L,className:"px-3 py-1.5 bg-navy text-white rounded-lg text-sm font-medium hover:bg-navy-light",children:"Add"})]}),D.length===0?n.jsx("p",{className:"text-sm text-navy/50",children:"No availability set. Add days and times above."}):n.jsx("ul",{className:"space-y-1 text-sm",children:D.map(j=>n.jsxs("li",{className:"flex items-center justify-between py-1.5 px-2 rounded bg-sky/5 border border-sky/20",children:[n.jsxs("span",{className:"text-navy",children:[O[j.dayOfWeek]," ",j.startTime,"  ",j.endTime]}),n.jsx("button",{type:"button",onClick:()=>{y0(j.id),v(A=>A+1)},className:"text-red-600 hover:underline text-xs",children:"Remove"})]},j.id))})]})),Md.includes(r.position)&&I("Assigned patients",n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-xs text-navy/60 mb-2",children:'Patients assigned to this provider. They will see these in "My patients".'}),a&&i?n.jsxs("div",{className:"max-h-48 overflow-y-auto border border-sky/40 rounded-lg p-2 space-y-1",children:[Ae().map(j=>{const A=(i.assignedPatientIds??[]).includes(j.id);return n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-sky/10 px-2 py-1 rounded",children:[n.jsx("input",{type:"checkbox",checked:A,onChange:U=>{if(!i)return;const q=i.assignedPatientIds??[],K=U.target.checked?[...q,j.id]:q.filter(Z=>Z!==j.id);o({...i,assignedPatientIds:K})},className:"rounded border-sky/60"}),n.jsxs("span",{className:"text-sm text-navy",children:[j.firstName," ",j.lastName]}),n.jsx("span",{className:"text-xs text-navy/60",children:Q(j.dateOfAppointment)})]},j.id)}),Ae().length===0&&n.jsx("p",{className:"text-navy/60 text-sm",children:"No patients in the system yet."})]}):n.jsx("ul",{className:"space-y-1",children:(r.assignedPatientIds??[]).length===0?n.jsx("li",{className:"text-navy/60 text-sm",children:"No patients assigned."}):Ae().filter(j=>(r.assignedPatientIds??[]).includes(j.id)).map(j=>n.jsxs("li",{className:"flex items-center gap-2",children:[n.jsxs(J,{to:`/dashboard/patients/${j.id}`,className:"text-sky-dark font-medium hover:underline text-sm",children:[j.firstName," ",j.lastName]}),n.jsx("span",{className:"text-xs text-navy/60",children:Q(j.dateOfAppointment)})]},j.id))})]}))]})]})}function N0(){const{staff:e,isSignedIn:t,isAdmin:r}=Xr(),s=Ae(),a=e&&Md.includes(e.position),l=(e==null?void 0:e.assignedPatientIds)??[],i=g.useMemo(()=>s.filter(o=>l.includes(o.id)),[s,l]);return t?r&&!e?n.jsxs("div",{className:"p-8",children:[n.jsx("h1",{className:"text-2xl font-semibold text-navy mb-2",children:"My patients"}),n.jsx("p",{className:"text-navy/70",children:"Demo mode. Use the Patients tab to view and manage patients."}),n.jsx(J,{to:"/dashboard/patients",className:"text-sky-dark font-medium mt-2 inline-block hover:underline",children:"Go to Patients"})]}):a?n.jsxs("div",{className:"p-8",children:[n.jsx("h1",{className:"text-2xl font-semibold text-navy mb-2",children:"My patients"}),n.jsxs("p",{className:"text-navy/70 mb-6",children:["Patients assigned to you (",e.firstName," ",e.lastName,"). Edit your staff profile to change assignments."]}),i.length===0?n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-6",children:[n.jsx("p",{className:"text-navy/60",children:"No patients assigned yet. Assign patients in your staff profile (Staff  your name  Edit  Assigned patients)."}),n.jsx(J,{to:"/dashboard/staff",className:"text-sky-dark font-medium mt-2 inline-block hover:underline",children:"Go to Staff"})]}):n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 overflow-hidden",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-sky/40 bg-sky/5",children:[n.jsx("th",{className:"text-left px-4 py-3 font-semibold text-navy",children:"Patient"}),n.jsx("th",{className:"text-left px-4 py-3 font-semibold text-navy",children:"Appointment"}),n.jsx("th",{className:"text-left px-4 py-3 font-semibold text-navy",children:"Next appointment"}),n.jsx("th",{className:"text-left px-4 py-3 font-semibold text-navy"})]})}),n.jsx("tbody",{children:i.map(o=>n.jsxs("tr",{className:"border-b border-sky/20 hover:bg-sky/5",children:[n.jsxs("td",{className:"px-4 py-3",children:[o.firstName," ",o.lastName]}),n.jsxs("td",{className:"px-4 py-3 text-navy/80",children:[Q(o.dateOfAppointment),o.appointmentTime?` ${o.appointmentTime}`:""]}),n.jsx("td",{className:"px-4 py-3 text-navy/80",children:o.dateOfNextAppointment?Q(o.dateOfNextAppointment):""}),n.jsx("td",{className:"px-4 py-3",children:n.jsx(J,{to:`/dashboard/patients/${o.id}`,className:"text-sky-dark font-medium hover:underline",children:"Chart"})})]},o.id))})]})})]}):n.jsxs("div",{className:"p-8",children:[n.jsx("h1",{className:"text-2xl font-semibold text-navy mb-2",children:"My patients"}),n.jsxs("p",{className:"text-navy/70",children:["Your role (",e.position,") does not have an assigned patient list. Dentists, hygienists, and certain specialists can assign patients and view them here."]})]}):n.jsxs("div",{className:"p-8",children:[n.jsx("p",{className:"text-navy/70",children:"Sign in to see your assigned patients."}),n.jsx(J,{to:"/signin",className:"text-sky-dark font-medium mt-2 inline-block hover:underline",children:"Sign in"})]})}const wu=3,j0=1e3,Gn=8;function w0(){const e=[];for(let t=1;t<=32;t++){const r=Math.floor(200+Math.random()*400);e.push({tooth:t,density:r,lightPenetrationPercent:_y(r),healthResult:_a(r)})}return e}function S0(){var X;const e=zn(),t=e.pathname+e.search,{isSignedIn:r}=Xr(),s=Ae(),[a,l]=g.useState(""),[i,o]=g.useState(!1),[c,m]=g.useState(!1),[d,p]=g.useState(!1),[h,w]=g.useState(0),[u,b]=g.useState(50),[C,x]=g.useState(""),[y,v]=g.useState(""),[S,P]=g.useState(0),[E,D]=g.useState(null),[O,L]=g.useState(null),I=g.useRef(null),j=g.useRef(null),A=a?B(a):null,U=(A==null?void 0:A.gumGaugeExams)??[],q=(A==null?void 0:A.patientImages)??[],K=q.length<10,Z=()=>{o(!0),x("")},me=()=>{if(!r){x("Sign in to run a scan.");return}if(!a){x("Select a patient first.");return}if(!i){x("Connect the GumGauge device first.");return}x(""),m(!0),p(!1),w(0),j.current&&clearInterval(j.current),j.current=setInterval(()=>{w(_=>_>=Gn-1?(j.current&&clearInterval(j.current),j.current=null,m(!1),p(!0),Gn):_+1)},j0)},z=()=>{if(!r){x("Sign in to add readings to the chart.");return}if(!A)return;const _=w0(),ue={id:crypto.randomUUID(),scanDate:new Date().toISOString().slice(0,10),teeth:_},ge=A.gumGaugeExams??[];te(A.id,{gumGaugeExams:[...ge,ue]}),x(""),P(Oe=>Oe+1),D(ue.id)},Y=()=>{j.current&&(clearInterval(j.current),j.current=null),m(!1),p(!1),w(0),x("")};g.useEffect(()=>()=>{j.current&&clearInterval(j.current)},[]),g.useEffect(()=>{D(null),L(null)},[a]);const T=_=>{var Oe;const ue=(Oe=_.target.files)==null?void 0:Oe[0];if(_.target.value="",x(""),v(""),!ue)return;if(!A){x("Select a patient first, then upload the scan file.");return}if(q.length>=10){x("This patient already has the maximum of 10 images. Remove one from their chart first.");return}if(ue.size>wu*1024*1024){x(`File must be under ${wu} MB.`);return}const ge=new FileReader;ge.onload=()=>{const $e=ge.result,tt={id:crypto.randomUUID(),label:`GumGauge Scan ${new Date().toISOString().slice(0,10)}`,type:"GumGauge Scan",dataUrl:$e,dateAdded:new Date().toISOString()},Vn=[...A.patientImages??[],tt];te(A.id,{patientImages:Vn}),p(!1),v(`Scan file added to ${A.firstName} ${A.lastName}'s chart. It will appear in their Images section.`),P(Dt=>Dt+1),setTimeout(()=>v(""),5e3)},ge.onerror=()=>x("Could not read the file."),ge.readAsDataURL(ue)};return n.jsxs("div",{className:"p-8",children:[n.jsx("h1",{className:"text-2xl font-semibold text-navy mb-2",children:"Device Scan"}),n.jsx("p",{className:"text-navy/70 mb-6",children:"Connect the GumGauge scanning device, select a patient, run the scan, and upload results to the patient's scan files."}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-6 space-y-6 max-w-2xl",children:[n.jsxs("section",{children:[n.jsx("h2",{className:"text-sm font-semibold text-navy uppercase tracking-wide mb-3",children:"1. Connect device"}),i?n.jsxs("p",{className:"text-green-700 font-medium flex items-center gap-2",children:[n.jsx("span",{className:"inline-block h-2 w-2 rounded-full bg-green-600"}),"Device connected (simulated)"]}):n.jsx("button",{type:"button",onClick:Z,className:"px-4 py-2 bg-navy text-white rounded-lg font-medium hover:bg-navy-light",children:"Connect GumGauge device"}),i&&n.jsxs("div",{className:"mt-3 p-3 bg-sky/10 rounded-lg border border-sky/30",children:[n.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"Light / brightness (%)"}),n.jsx("p",{className:"text-xs text-navy/60 mb-1",children:"Adjusts device LED intensity. When connected via serial, this value is sent to the hardware."}),n.jsx("input",{type:"range",min:0,max:100,value:u,onChange:_=>b(Number(_.target.value)),className:"w-full h-2 rounded-lg appearance-none bg-sky/30 accent-navy"}),n.jsxs("span",{className:"text-sm font-medium text-navy",children:[u,"%"]})]}),n.jsx("p",{className:"text-xs text-navy/60 mt-1",children:"In production, this would link to the hardware via USB/Bluetooth."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-sm font-semibold text-navy uppercase tracking-wide mb-3",children:"2. Select patient"}),n.jsxs("select",{value:a,onChange:_=>{l(_.target.value),p(!1)},className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white",children:[n.jsx("option",{value:"",children:" Select patient for this scan "}),s.map(_=>n.jsxs("option",{value:_.id,children:[_.firstName," ",_.lastName]},_.id))]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-sm font-semibold text-navy uppercase tracking-wide mb-3",children:"3. Run scan"}),!r&&n.jsxs("p",{className:"text-amber-700 text-sm mb-2",children:[n.jsx(J,{to:`/signin?returnTo=${encodeURIComponent(t)}`,className:"font-medium hover:underline",children:"Sign in"})," to run a scan or add readings to the chart."]}),n.jsx("div",{className:"flex flex-wrap items-center gap-2",children:n.jsx("button",{type:"button",onClick:me,disabled:!r||!a||!i||c,className:"px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Scanning":"Start procedure"})}),c&&n.jsxs("div",{className:"mt-4 p-4 bg-sky/10 rounded-xl border border-sky/40",children:[n.jsxs("p",{className:"text-sm font-medium text-navy mb-2",children:[h<4?"Preparing":h<7?"Scanning":"Complete",h<Gn&&` (step ${h+1}/${Gn})`]}),n.jsx("div",{className:`h-3 w-full rounded overflow-hidden transition-all duration-500 ${h>=6?"bg-green-600 opacity-90":h>=3?"bg-amber-500 opacity-60":"bg-amber-400 opacity-40"} ${h<Gn?"animate-pulse":""}`,role:"progressbar","aria-valuenow":h+1,"aria-valuemin":0,"aria-valuemax":Gn,"aria-label":"Scan progress"}),n.jsx("p",{className:"text-xs text-navy/60 mt-1",children:h>=Gn-1?"Scan complete. Add readings to chart below.":"Device light flashing (scan in progress, ~8 sec total)."})]}),n.jsx("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:(c||d)&&n.jsx("button",{type:"button",onClick:Y,className:"px-4 py-2 border border-sky/60 text-navy rounded-lg font-medium hover:bg-sky/10",children:"End scan"})}),d&&n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"text-green-700 font-medium mt-2 flex items-center gap-2",children:[n.jsx("span",{className:"inline-block h-2 w-2 rounded-full bg-green-600"}),"Scan complete."]}),n.jsx("p",{className:"text-xs text-navy/70 mt-1 mb-2",children:"Add device readings (light penetration %, health per tooth) to the patient chart. They will appear in the Perio charting section."}),n.jsx("button",{type:"button",onClick:z,disabled:!r,className:"px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add GumGauge readings to chart"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-sm font-semibold text-navy uppercase tracking-wide mb-3",children:"4. Upload result to patient"}),n.jsx("p",{className:"text-xs text-navy/60 mb-2",children:`Save the scan result directly to the patient's images. It will appear as "GumGauge Scan" in their chart.`}),n.jsx("input",{ref:I,type:"file",accept:"image/*,.pdf",onChange:T,className:"hidden"}),n.jsx("button",{type:"button",onClick:()=>{var _;return(_=I.current)==null?void 0:_.click()},disabled:!a||!K,className:"px-4 py-2 bg-sky-dark text-white rounded-lg font-medium hover:bg-navy disabled:opacity-50 disabled:cursor-not-allowed",children:"Upload scan file"}),!K&&a&&n.jsx("p",{className:"text-amber-700 text-sm mt-1",children:"This patient has reached the maximum of 10 images. Remove one from their chart first."}),y&&n.jsx("p",{className:"text-green-700 text-sm mt-2 font-medium",role:"status",children:y}),C&&n.jsx("p",{className:"text-red-600 text-sm mt-2",role:"alert",children:C})]}),A&&U.length>0&&n.jsxs("section",{className:"rounded-xl border border-sky/40 bg-green-50/50 p-4",children:[n.jsx("h2",{className:"text-sm font-semibold text-navy uppercase tracking-wide mb-3",children:"View scan results"}),n.jsx("p",{className:"text-xs text-navy/60 mb-3",children:"Select a scan date and click a tooth to see light penetration % and health. Compare past scans with the dropdown."}),n.jsx(xh,{fallback:n.jsxs("div",{className:"rounded-xl border border-amber-200 bg-amber-50 p-4 text-amber-800 text-sm",children:[n.jsx("p",{className:"font-medium",children:"Scan results view couldn't load"}),n.jsx("p",{className:"mt-1",children:"Try refreshing the page. If it keeps happening, use the patient chart to view scan data."}),n.jsx(J,{to:`/dashboard/patients/${A.id}`,className:"mt-2 inline-block text-sky-dark font-medium hover:underline",children:"Open patient chart "})]}),children:n.jsx(gh,{exams:U,selectedExamId:E??((X=U[U.length-1])==null?void 0:X.id)??null,onSelectExamId:D,selectedTooth:O,onSelectTooth:L})})]}),A&&n.jsxs("section",{children:[n.jsx("h2",{className:"text-sm font-semibold text-navy uppercase tracking-wide mb-2",children:"Patient chart"}),n.jsxs(J,{to:`/dashboard/patients/${A.id}`,className:"text-sky-dark font-medium hover:underline",children:["Open ",A.firstName," ",A.lastName,"'s chart "]})]})]})]})}function k0(e,t){if(!e||!t||t<1)return null;const r=new Date(e+"T12:00:00");return r.setMonth(r.getMonth()+t),r.toISOString().slice(0,10)}function C0(){const{timezone:e}=Qr(),t=_l(e),r=g.useMemo(()=>Ae(),[]),s=g.useMemo(()=>r.filter(i=>i.recallIntervalMonths!=null&&i.recallIntervalMonths>=1&&i.lastCleaningDate).map(i=>{const o=k0(i.lastCleaningDate,i.recallIntervalMonths);return{patient:i,dueDate:o,overdue:o?o<t:!1}}).sort((i,o)=>i.overdue===o.overdue?i.dueDate.localeCompare(o.dueDate):i.overdue?-1:1),[r,t]),a=s.filter(i=>i.overdue),l=s.filter(i=>!i.overdue);return n.jsxs("div",{className:"p-8",children:[n.jsx("h1",{className:"text-2xl font-semibold text-navy mb-2",children:"Recall / recare"}),n.jsx("p",{className:"text-navy/70 mb-6",children:"Patients due for recall based on last cleaning date and recall interval. Set recall interval on the patient chart."}),s.length===0?n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-6",children:n.jsx("p",{className:"text-navy/60",children:'No patients with recall interval set. Edit a patient and set "Recall / recurring (months)" and "Last cleaning date" to see them here.'})}):n.jsxs(n.Fragment,{children:[a.length>0&&n.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-6 mb-6",children:[n.jsxs("h2",{className:"text-lg font-medium text-amber-900 mb-2",children:["Overdue recall (",a.length,")"]}),n.jsx("ul",{className:"space-y-2",children:a.map(({patient:i,dueDate:o})=>n.jsxs("li",{className:"flex flex-wrap items-center gap-x-4 gap-y-1",children:[n.jsxs(J,{to:`/dashboard/patients/${i.id}`,className:"font-medium text-amber-900 hover:underline",children:[i.firstName," ",i.lastName]}),n.jsxs("span",{className:"text-amber-800 text-sm",children:["Due ",Q(o)," (overdue)"]}),n.jsxs("span",{className:"text-amber-700 text-xs",children:["Last cleaning: ",i.lastCleaningDate?Q(i.lastCleaningDate):"","  Every ",i.recallIntervalMonths," mo"]})]},i.id))})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-6",children:[n.jsx("h2",{className:"text-lg font-medium text-navy mb-4",children:"Upcoming recall"}),n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-sky/40",children:[n.jsx("th",{className:"text-left py-2 font-medium text-navy",children:"Patient"}),n.jsx("th",{className:"text-left py-2 font-medium text-navy",children:"Due date"}),n.jsx("th",{className:"text-left py-2 font-medium text-navy",children:"Last cleaning"}),n.jsx("th",{className:"text-left py-2 font-medium text-navy",children:"Interval"}),n.jsx("th",{className:"w-20"})]})}),n.jsx("tbody",{children:l.map(({patient:i,dueDate:o})=>n.jsxs("tr",{className:"border-b border-sky/20",children:[n.jsx("td",{className:"py-2",children:n.jsxs(J,{to:`/dashboard/patients/${i.id}`,className:"font-medium text-navy hover:underline",children:[i.firstName," ",i.lastName]})}),n.jsx("td",{className:"py-2 text-navy/80",children:Q(o)}),n.jsx("td",{className:"py-2 text-navy/80",children:i.lastCleaningDate?Q(i.lastCleaningDate):""}),n.jsxs("td",{className:"py-2 text-navy/80",children:["Every ",i.recallIntervalMonths," mo"]}),n.jsx("td",{className:"py-2",children:n.jsx(J,{to:`/dashboard/patients/${i.id}`,className:"text-sky-dark text-sm font-medium hover:underline",children:"Chart"})})]},i.id))})]})]})]}),n.jsx("p",{className:"mt-4 text-xs text-navy/60",children:"Appointment reminders (email/SMS) would require a backend integration."})]})}function D0(){const[e,t]=g.useState(""),r=Ed({limit:200}),s=e?r.filter(a=>a.entityType===e):r;return n.jsxs("div",{className:"p-8",children:[n.jsx("h1",{className:"text-2xl font-semibold text-navy mb-2",children:"Audit trail"}),n.jsx("p",{className:"text-navy/70 mb-4",children:"Who changed what and when. Last 200 entries."}),n.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-4",children:[n.jsx("label",{className:"text-sm text-navy/70",children:"Filter by type"}),n.jsxs("select",{value:e,onChange:a=>t(a.target.value),className:"px-3 py-2 border border-sky/60 rounded-lg bg-white text-navy",children:[n.jsx("option",{value:"",children:"All"}),n.jsx("option",{value:"patient",children:"Patient"}),n.jsx("option",{value:"staff",children:"Staff"})]})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 overflow-hidden",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-navy/5 border-b border-sky/40",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left py-3 px-4 font-medium text-navy",children:"Time"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-navy",children:"Actor"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-navy",children:"Staff ID"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-navy",children:"Action"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-navy",children:"Entity"}),n.jsx("th",{className:"text-left py-3 px-4 font-medium text-navy",children:"Details"})]})}),n.jsx("tbody",{children:s.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"py-8 text-center text-navy/60",children:"No audit entries."})}):s.map(a=>n.jsxs("tr",{className:"border-b border-sky/20 hover:bg-sky/5",children:[n.jsx("td",{className:"py-2 px-4 text-navy/80",children:new Date(a.timestamp).toLocaleString()}),n.jsx("td",{className:"py-2 px-4",children:a.actor??""}),n.jsx("td",{className:"py-2 px-4 text-navy/70 font-mono text-xs",children:a.actorStaffId??""}),n.jsx("td",{className:"py-2 px-4",children:a.action}),n.jsxs("td",{className:"py-2 px-4",children:[a.entityType==="patient"&&n.jsx(J,{to:`/dashboard/patients/${a.entityId}`,className:"text-sky-dark hover:underline",children:"Chart"}),a.entityType==="staff"&&n.jsx(J,{to:`/dashboard/staff/${a.entityId}`,className:"text-sky-dark hover:underline",children:"View"}),a.entityType!=="patient"&&a.entityType!=="staff"&&a.entityId]}),n.jsx("td",{className:"py-2 px-4 text-navy/70",children:a.details??""})]},a.id))})]})})]})}const P0="gumgauge-fee-schedule",A0="gumgauge-demo-fee-schedule";function E0(){try{return typeof sessionStorage<"u"&&sessionStorage.getItem(Ze)==="1"}catch{return!1}}function zl(){return E0()?A0:P0}function hl(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):[]}catch{return[]}}function _d(){return hl(zl())}function I0(e,t){const s=_d().find(a=>a.planIdentifier===e&&a.procedureCode===t);return s==null?void 0:s.fee}function T0(e){const t=zl(),r=new Date().toISOString(),s={...e,id:crypto.randomUUID(),addedAt:r},a=hl(t);return localStorage.setItem(t,JSON.stringify([...a,s])),s}function O0(e){const t=zl(),r=hl(t).filter(s=>s.id!==e);return r.length===hl(t).length?!1:(localStorage.setItem(t,JSON.stringify(r)),!0)}function M0(e){try{localStorage.setItem(zl(),JSON.stringify(e??[]))}catch{}}function Di(e){const t=e.replace(/\D/g,"");if(t.length<4)return;const r=t.slice(0,2),s=t.slice(0,3),a=t.slice(0,4),l=t.length>=6?t.slice(0,6):"";if(t.startsWith("4"))return"Visa";if(t.startsWith("34")||t.startsWith("37"))return"American Express";if(r>="51"&&r<="55"||l>="222100"&&l<="272099")return"Mastercard";if(a==="6011"||s>="644"&&s<="649"||l>="622126"&&l<="622925"||l>="624000"&&l<="626999"||l>="628200"&&l<="628899"||r==="65")return"Discover"}function R0(e){return e.replace(/\D/g,"").slice(-4)}function je(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}function $0(){var Ud;const{isAdmin:e}=Xr(),t=Ae(),[r,s]=g.useState(""),[a,l]=g.useState(!1),[i,o]=g.useState(""),[c,m]=g.useState(""),[d,p]=g.useState(!1),[h,w]=g.useState("Card"),[u,b]=g.useState(""),[C,x]=g.useState(""),[y,v]=g.useState(""),[S,P]=g.useState(!1),[E,D]=g.useState(""),[O,L]=g.useState(""),[I,j]=g.useState([]),[A,U]=g.useState(""),[q,K]=g.useState(!1),[Z,me]=g.useState(!1),[z,Y]=g.useState(!1),[T,X]=g.useState("outOfPocket"),[_,ue]=g.useState(""),[ge,Oe]=g.useState(""),[$e,tt]=g.useState(""),[Vn,Dt]=g.useState(!1),[mn,pn]=g.useState(()=>new Date().toISOString().slice(0,10)),[Ke,Yt]=g.useState(new Set),[hn,Pt]=g.useState({}),[fn,ut]=g.useState(!1),[Kt,Jt]=g.useState(""),[At,Qt]=g.useState(""),[Xt,xn]=g.useState("Write-off"),[ur,ze]=g.useState(0),[mr,k]=g.useState(!1),[H,ae]=g.useState(null),[pe,oe]=g.useState(""),[ye,_e]=g.useState(""),[Et,Hn]=g.useState(""),[It,Wn]=g.useState(""),[pr,Zr]=g.useState(()=>new Date().toISOString().slice(0,10)),[f,M]=g.useState(""),[G,ne]=g.useState(""),[de,Be]=g.useState(""),$=r?B(r):null,Ee=($==null?void 0:$.balanceDue)??0,es=($==null?void 0:$.paymentMethods)??[],ea=($==null?void 0:$.paymentHistory)??[],hr=($==null?void 0:$.insuranceClaims)??[],Ah=($==null?void 0:$.invoiceLines)??[],Bl=($==null?void 0:$.adjustments)??[],Eh=()=>{if(!$)return;let N,F,ee;if(T==="split"){const He=Number(_),Je=Number(ge);if(Number.isNaN(He)||Number.isNaN(Je)||He<0||Je<0||He===0&&Je===0)return;N=He+Je,F=He,ee=Je}else if(T==="withInsurance"){if(N=Number(ge),Number.isNaN(N)||N<0)return;ee=N}else{if(N=Number(i),Number.isNaN(N)||N<=0)return;F=N}const be={id:crypto.randomUUID(),date:new Date().toISOString().slice(0,10),amount:N,note:c.trim()||void 0,paymentMethodId:$e||void 0,amountOutOfPocket:F,amountWithInsurance:ee},Ne=[...ea,be],Ve=Math.max(0,Ee-N);te($.id,{paymentHistory:Ne,balanceDue:Ve}),ze(He=>He+1),l(!1),o(""),m(""),ue(""),Oe(""),tt(""),X("outOfPocket")},Ih=()=>{if(!$)return;const N=C.trim()?parseInt(C,10):void 0,F=y.trim()?parseInt(y,10):void 0,ee=`${$.firstName} ${$.lastName}`.trim();let be,Ne;h==="Card"&&u.replace(/\D/g,"").length>=4&&(be=R0(u),Ne=Di(u)??void 0);const Ve={id:crypto.randomUUID(),type:h,lastFour:be,cardBrand:Ne,nameOnCard:ee||void 0,expiryMonth:N!=null&&N>=1&&N<=12?N:void 0,expiryYear:F!=null&&F>=2020&&F<=2050?F:void 0,addedAt:new Date().toISOString()},He=[...es,Ve];te($.id,{paymentMethods:He}),ze(Je=>Je+1),p(!1),w("Card"),b(""),x(""),v("")},Th=N=>{$&&(te($.id,{paymentMethods:es.filter(F=>F.id!==N)}),ze(F=>F+1))},Oh=()=>{if(!$)return;const N=Number(O);if(Number.isNaN(N)||N<0)return;const F={id:crypto.randomUUID(),date:new Date().toISOString().slice(0,10),procedureCodes:I.length?I:[""],description:E.trim()||"Insurance claim",amount:N,status:"Sent"},ee=[...hr,F];te($.id,{insuranceClaims:ee}),ze(be=>be+1),P(!1),D(""),L(""),j([]),U("")},Mh=()=>{A.trim()&&(j(N=>[...N,A.trim()]),U(""))},Rh=N=>{Yt(F=>{const ee=new Set(F);return ee.has(N)?ee.delete(N):ee.add(N),ee})},$h=(N,F)=>{Pt(ee=>({...ee,[N]:F}))},ta=N=>{const F=hn[N];if(F!==void 0&&F!==""){const Ne=Number(F);if(!Number.isNaN(Ne)&&Ne>=0)return Ne}const ee=($==null?void 0:$.insurancePlan)??"Default",be=I0(ee,N);return be??yh(N)??0},_h=()=>{if(!$)return;const N=Number(Kt);if(Number.isNaN(N)||N<=0||!At.trim())return;const F=new Date().toISOString(),ee={id:crypto.randomUUID(),date:F.slice(0,10),amount:N,reason:At.trim(),type:Xt,addedAt:F},be=[...Bl,ee],Ne=Math.max(0,($.balanceDue??0)-N);te($.id,{adjustments:be,balanceDue:Ne}),ut(!1),Jt(""),Qt(""),xn("Write-off"),ze(Ve=>Ve+1)},Lh=N=>{ae(N),oe(""),_e(""),Hn(""),Wn(""),Zr(new Date().toISOString().slice(0,10)),k(!0)},Ld=_d(),Fh=()=>{const N=f.trim(),F=G.trim(),ee=Number(de);!N||!F||Number.isNaN(ee)||ee<0||(T0({planIdentifier:N,procedureCode:F,fee:ee}),M(""),ne(""),Be(""),ze(be=>be+1))},Uh=()=>{if(!$||!H)return;const N=Number(pe);if(Number.isNaN(N)||N<0)return;const F=hr.find(qt=>qt.id===H);if(!F)return;const ee=new Date().toISOString(),be={id:crypto.randomUUID(),claimId:H,paidAmount:N,allowedAmount:ye.trim()?Number(ye):void 0,adjustmentAmount:Et.trim()?Number(Et):void 0,patientResponsibility:It.trim()?Number(It):void 0,paymentDate:pr,addedAt:ee},Ne=F.claimPayments??[],Ve=Ne.reduce((qt,Gh)=>qt+Gh.paidAmount,0)+N,He=Ve>=F.amount?"Paid":Ve>0?"Partially paid":F.status,Je=hr.map(qt=>qt.id===H?{...qt,claimPayments:[...Ne,be],status:He}:qt),Hh=Math.max(0,($.balanceDue??0)-N),Wh={id:crypto.randomUUID(),date:pr,amount:N,note:`Insurance EOB: ${F.description}`,amountWithInsurance:N};te($.id,{insuranceClaims:Je,paymentHistory:[...ea,Wh],balanceDue:Hh}),ze(qt=>qt+1),k(!1),ae(null)},zh=()=>{if(!$||Ke.size===0)return;const N=new Date().toISOString(),F=Array.from(Ke).map(Ne=>{const Ve=wn.find(Je=>Je.code===Ne),He=ta(Ne);return{id:crypto.randomUUID(),appointmentDate:mn,procedureCode:Ne,description:(Ve==null?void 0:Ve.description)??Ne,amount:He,status:"Pending",addedAt:N}}),ee=F.reduce((Ne,Ve)=>Ne+Ve.amount,0),be=$.invoiceLines??[];te($.id,{invoiceLines:[...be,...F],balanceDue:($.balanceDue??0)+ee}),Dt(!1),Yt(new Set),Pt({}),pn(new Date().toISOString().slice(0,10)),ze(Ne=>Ne+1)},Vl=Ah.reduce((N,F)=>{const ee=F.appointmentDate;return N[ee]||(N[ee]=[]),N[ee].push(F),N},{}),Fd=Object.keys(Vl).sort(),na=Ae(),Bh=na.reduce((N,F)=>N+(F.paymentHistory??[]).filter(ee=>ee.date.startsWith(new Date().toISOString().slice(0,7))).reduce((ee,be)=>ee+be.amount,0),0),Vh=na.reduce((N,F)=>N+(F.balanceDue??0),0),ra=g.useMemo(()=>{const N=new Date;N.setHours(0,0,0,0);const F={"0-30":0,"31-60":0,"61-90":0,"90+":0};return na.forEach(ee=>{(ee.invoiceLines??[]).forEach(be=>{if((be.status??"Pending")==="Paid")return;const Ve=new Date(be.appointmentDate);Ve.setHours(0,0,0,0);const He=Math.floor((N.getTime()-Ve.getTime())/(24*60*60*1e3)),Je=be.amount??0;He<=30?F["0-30"]+=Je:He<=60?F["31-60"]+=Je:He<=90?F["61-90"]+=Je:F["90+"]+=Je})}),F},[na,ur]);return n.jsxs("div",{className:"p-8",children:[n.jsx("h1",{className:"text-2xl font-semibold text-navy mb-2",children:"Billing"}),n.jsx("p",{className:"text-navy/70 mb-6",children:"View balance, payment methods, and send claims to insurance. Procedure prices are based on standard fees (e.g. Cleaning $125)."}),e&&n.jsxs("div",{className:"space-y-4 mb-6",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[n.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"Production (this month)"}),n.jsx("p",{className:"text-xl font-semibold text-navy",children:je(Bh)})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[n.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"Total outstanding"}),n.jsx("p",{className:"text-xl font-semibold text-navy",children:je(Vh)})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-navy mb-3",children:"Aging report (outstanding by service date)"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-sky/10 rounded-lg p-3 border border-sky/30",children:[n.jsx("p",{className:"text-xs text-navy/70",children:"030 days"}),n.jsx("p",{className:"text-lg font-semibold text-navy",children:je(ra["0-30"])})]}),n.jsxs("div",{className:"bg-sky/10 rounded-lg p-3 border border-sky/30",children:[n.jsx("p",{className:"text-xs text-navy/70",children:"3160 days"}),n.jsx("p",{className:"text-lg font-semibold text-navy",children:je(ra["31-60"])})]}),n.jsxs("div",{className:"bg-sky/10 rounded-lg p-3 border border-sky/30",children:[n.jsx("p",{className:"text-xs text-navy/70",children:"6190 days"}),n.jsx("p",{className:"text-lg font-semibold text-navy",children:je(ra["61-90"])})]}),n.jsxs("div",{className:"bg-amber-50 rounded-lg p-3 border border-amber-200",children:[n.jsx("p",{className:"text-xs text-navy/70",children:"90+ days"}),n.jsx("p",{className:"text-lg font-semibold text-navy",children:je(ra["90+"])})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-1 bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[n.jsx("h2",{className:"text-sm font-semibold text-navy uppercase tracking-wide mb-3",children:"Select patient"}),n.jsxs("select",{value:r,onChange:N=>s(N.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white",children:[n.jsx("option",{value:"",children:" Select patient "}),t.map(N=>n.jsxs("option",{value:N.id,children:[N.firstName," ",N.lastName,(N.balanceDue??0)>0?`  ${je(N.balanceDue)} due`:""]},N.id))]}),n.jsx("p",{className:"text-xs text-navy/60 mt-2",children:"Or pick from patients with a balance below."}),(()=>{const N=t.filter(F=>(F.balanceDue??0)>0).sort((F,ee)=>(ee.balanceDue??0)-(F.balanceDue??0));return N.length===0?n.jsx("p",{className:"text-xs text-navy/50 mt-2",children:"No patients with an unpaid balance."}):n.jsx("ul",{className:"mt-3 border border-sky/30 rounded-lg divide-y divide-sky/20 max-h-48 overflow-y-auto",children:N.map(F=>n.jsx("li",{children:n.jsxs("button",{type:"button",onClick:()=>s(F.id),className:`w-full text-left px-3 py-2 text-sm hover:bg-sky/10 transition-colors ${r===F.id?"bg-sky/20 font-medium text-navy":"text-navy/90"}`,children:[n.jsxs("span",{className:"font-medium",children:[F.firstName," ",F.lastName]}),n.jsxs("span",{className:"ml-2 text-navy/70",children:[je(F.balanceDue??0)," due"]})]})},F.id))})})()]}),$&&n.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[n.jsxs("h2",{className:"text-lg font-semibold text-navy",children:[$.firstName," ",$.lastName]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>Y(!0),className:"px-3 py-1.5 border border-sky/60 text-navy rounded-lg text-sm font-medium hover:bg-sky/10",children:"Check eligibility"}),$.email&&n.jsx("button",{type:"button",onClick:()=>{me(!1),K(!0)},className:"px-3 py-1.5 border border-sky/60 text-navy rounded-lg text-sm font-medium hover:bg-sky/10",children:"Email receipt / invoice"}),n.jsx(J,{to:`/dashboard/patients/${$.id}`,className:"text-sky-dark font-medium text-sm hover:underline",children:"Open chart "})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-navy mb-3",children:"Account summary"}),n.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-3",children:[n.jsxs("div",{className:"bg-sky/10 rounded-lg p-3 border border-sky/30",children:[n.jsx("p",{className:"text-xs text-navy/70 uppercase tracking-wide",children:"Balance due"}),n.jsx("p",{className:"text-xl font-semibold text-navy mt-0.5",children:je(Ee)})]}),Ee>0&&n.jsx("button",{type:"button",onClick:()=>{ut(!0),Jt(""),Qt(""),xn("Write-off")},className:"px-3 py-1.5 border border-amber-500 text-amber-700 rounded-lg text-sm font-medium hover:bg-amber-50",children:"Write-off / adjustment"})]}),Bl.length>0&&n.jsxs("div",{className:"mt-2 pt-2 border-t border-sky/20",children:[n.jsx("p",{className:"text-xs font-medium text-navy/80 mb-1",children:"Adjustments"}),n.jsx("ul",{className:"text-sm space-y-1 text-navy/80",children:Bl.map(N=>n.jsxs("li",{children:[Q(N.date),"  ",N.type,": ",je(N.amount),"  ",N.reason]},N.id))})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-navy mb-3",children:"Insurance"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-navy/70 uppercase mb-1",children:"Primary"}),n.jsxs("p",{className:"text-sm text-navy",children:[$.insuranceProvider||""," ",$.insurancePlan?`(${$.insurancePlan})`:""]}),$.insuranceMemberId&&n.jsxs("p",{className:"text-xs text-navy/70",children:["ID: ",$.insuranceMemberId]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-navy/70 uppercase mb-1",children:"Secondary"}),n.jsxs("p",{className:"text-sm text-navy",children:[$.insuranceProvider2||""," ",$.insurancePlan2?`(${$.insurancePlan2})`:""]}),$.insuranceMemberId2&&n.jsxs("p",{className:"text-xs text-navy/70",children:["ID: ",$.insuranceMemberId2]}),($.insuranceDeductibleAnnual2!=null||$.insuranceDeductibleRemaining2!=null)&&n.jsxs("p",{className:"text-xs text-navy/70",children:["Deductible: ",$.insuranceDeductibleRemaining2??""," / ",$.insuranceDeductibleAnnual2??""," remaining"]}),n.jsx(J,{to:`/dashboard/patients/${$.id}`,className:"text-xs text-sky-dark font-medium hover:underline mt-1 inline-block",children:"Edit on chart"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"text-sm font-semibold text-navy",children:"Charges by appointment date"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>{Dt(!0),pn(new Date().toISOString().slice(0,10)),Yt(new Set),Pt({})},className:"px-3 py-1.5 bg-navy text-white rounded-lg text-sm font-medium hover:bg-navy-light",children:"+ Add charges"}),n.jsx(J,{to:`/dashboard/patients/${$.id}`,className:"text-xs text-sky-dark font-medium hover:underline",children:"From chart"})]})]}),n.jsx("p",{className:"text-xs text-navy/60 mb-2",children:"What the patient is being charged, grouped by appointment date. Add procedures below or from the patient chart (Assign to Billing)."}),Fd.length===0?n.jsx("p",{className:"text-navy/60 text-sm",children:"No charges yet. Click Add charges to add procedures to this patients tab, or assign from Treatment plans on the chart."}):n.jsx("div",{className:"space-y-3",children:Fd.map(N=>n.jsxs("div",{className:"border border-sky/20 rounded-lg p-3",children:[n.jsx("p",{className:"text-xs font-medium text-navy/80 mb-2",children:Q(N)}),n.jsxs("ul",{className:"space-y-1 text-sm",children:[Vl[N].map(F=>n.jsxs("li",{className:"flex justify-between text-navy/90",children:[n.jsxs("span",{children:[F.description,F.procedureCode?` (${F.procedureCode})`:""]}),n.jsx("span",{className:"font-medium",children:je(F.amount)})]},F.id)),n.jsxs("li",{className:"flex justify-between text-navy/70 pt-1 border-t border-sky/20",children:[n.jsx("span",{children:"Subtotal"}),n.jsx("span",{className:"font-medium",children:je(Vl[N].reduce((F,ee)=>F+ee.amount,0))})]})]})]},N))})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-navy mb-3",children:"Payments"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-xs font-medium text-navy/80 uppercase tracking-wide",children:"Payment methods on file"}),n.jsx("button",{type:"button",onClick:()=>p(!0),className:"px-2.5 py-1.5 bg-navy text-white rounded-lg text-xs font-medium hover:bg-navy-light",children:"+ Add"})]}),es.length===0?n.jsx("p",{className:"text-sm text-navy/60",children:"No payment methods stored. Add a card or method to apply payments."}):n.jsx("ul",{className:"space-y-1.5",children:es.map(N=>n.jsxs("li",{className:"flex items-center justify-between py-2 px-3 rounded-lg bg-sky/5 border border-sky/20 text-sm",children:[n.jsxs("span",{className:"text-navy",children:[N.cardBrand||N.type,N.lastFour?`  ${N.lastFour}`:"",N.nameOnCard?`  ${N.nameOnCard}`:"",N.expiryMonth!=null&&N.expiryYear!=null?` Exp ${String(N.expiryMonth).padStart(2,"0")}/${N.expiryYear}`:""]}),n.jsx("button",{type:"button",onClick:()=>Th(N.id),className:"text-xs text-red-600 hover:underline ml-2",children:"Remove"})]},N.id))})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-xs font-medium text-navy/80 uppercase tracking-wide",children:"Record payment"}),n.jsx("button",{type:"button",onClick:()=>l(!0),className:"px-2.5 py-1.5 bg-green-600 text-white rounded-lg text-xs font-medium hover:bg-green-700",children:"+ Record payment"})]}),n.jsx("p",{className:"text-xs text-navy/60 mb-2",children:"Apply payment to this patient's balance. You can select their posted balance in the modal."}),ea.length===0?n.jsx("p",{className:"text-sm text-navy/60",children:"No payments recorded yet."}):n.jsx("ul",{className:"space-y-1 text-sm border border-sky/20 rounded-lg divide-y divide-sky/20 max-h-40 overflow-y-auto",children:[...ea].reverse().slice(0,10).map(N=>n.jsxs("li",{className:"flex justify-between px-3 py-2 text-navy/90",children:[n.jsxs("span",{children:[Q(N.date),N.note?`  ${N.note}`:""]}),n.jsx("span",{className:"font-medium",children:je(N.amount)})]},N.id))})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"text-sm font-semibold text-navy",children:"Send to insurance"}),n.jsx("button",{type:"button",onClick:()=>P(!0),className:"px-3 py-1.5 bg-sky-dark text-white rounded-lg text-sm font-medium hover:bg-navy",children:"+ Send claim"})]}),n.jsx("p",{className:"text-xs text-navy/60 mb-2",children:"For larger amounts (surgery, root canal, etc.)."}),hr.length===0?n.jsx("p",{className:"text-navy/60 text-sm",children:"No claims yet."}):n.jsx("ul",{className:"space-y-2 text-sm",children:hr.map(N=>{var F;return n.jsxs("li",{className:"py-2 border-b border-sky/20 last:border-0",children:[n.jsxs("div",{className:"flex justify-between items-center gap-2 flex-wrap",children:[n.jsxs("span",{className:"text-navy/80",children:[Q(N.date),"  ",N.description,"  ",je(N.amount)]}),n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`text-xs font-medium px-1.5 py-0.5 rounded ${N.status==="Paid"?"bg-green-100 text-green-800":N.status==="Partially paid"?"bg-amber-100 text-amber-800":N.status==="Sent"?"bg-sky/20 text-navy":N.status==="Denied"?"bg-red-100 text-red-800":"bg-navy/10 text-navy"}`,children:N.status}),(N.status==="Sent"||N.status==="Partially paid")&&n.jsx("button",{type:"button",onClick:()=>Lh(N.id),className:"text-xs text-sky-dark font-medium hover:underline",children:"Record EOB"})]})]}),(((F=N.claimPayments)==null?void 0:F.length)??0)>0&&n.jsx("ul",{className:"mt-1 ml-2 text-xs text-navy/70 space-y-0.5",children:N.claimPayments.map(ee=>n.jsxs("li",{children:[Q(ee.paymentDate),"  ",je(ee.paidAmount)," paid",ee.patientResponsibility!=null?`; patient resp. ${je(ee.patientResponsibility)}`:""]},ee.id))})]},N.id)})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-navy mb-2",children:"Procedure prices (reference)"}),n.jsx("p",{className:"text-xs text-navy/60 mb-2",children:"Standard fees used for estimates and claims."}),n.jsx("div",{className:"overflow-x-auto max-h-48 overflow-y-auto",children:n.jsxs("table",{className:"text-xs w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-sky/10",children:[n.jsx("th",{className:"px-2 py-1 text-left",children:"Code"}),n.jsx("th",{className:"px-2 py-1 text-left",children:"Description"}),n.jsx("th",{className:"px-2 py-1 text-right",children:"Fee"})]})}),n.jsx("tbody",{children:wn.filter(N=>N.defaultFee!=null).map(N=>n.jsxs("tr",{className:"border-t border-sky/20",children:[n.jsx("td",{className:"px-2 py-1",children:N.code}),n.jsx("td",{className:"px-2 py-1",children:N.description}),n.jsx("td",{className:"px-2 py-1 text-right font-medium",children:je(N.defaultFee)})]},N.code))})]})})]}),e&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-navy mb-2",children:"Fee schedule overrides"}),n.jsx("p",{className:"text-xs text-navy/60 mb-2",children:"Override default fee by plan (e.g. insurance plan name). Used when adding charges."}),n.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[n.jsx("input",{type:"text",value:f,onChange:N=>M(N.target.value),placeholder:"Plan (e.g. PPO-A)",className:"px-2 py-1.5 border border-sky/60 rounded-lg text-sm w-28"}),n.jsxs("select",{value:G,onChange:N=>ne(N.target.value),className:"px-2 py-1.5 border border-sky/60 rounded-lg text-sm bg-white w-32",children:[n.jsx("option",{value:"",children:" Code "}),wn.map(N=>n.jsx("option",{value:N.code,children:N.code},N.code))]}),n.jsx("input",{type:"number",min:0,step:.01,value:de,onChange:N=>Be(N.target.value),placeholder:"Fee $",className:"px-2 py-1.5 border border-sky/60 rounded-lg text-sm w-20"}),n.jsx("button",{type:"button",onClick:Fh,disabled:!f.trim()||!G||Number(de)<0,className:"px-3 py-1.5 bg-navy text-white rounded-lg text-sm font-medium hover:bg-navy-light disabled:opacity-50",children:"Add"})]}),Ld.length===0?n.jsx("p",{className:"text-xs text-navy/50",children:"No overrides. Add plan + code + fee above."}):n.jsx("ul",{className:"text-xs space-y-1 max-h-32 overflow-y-auto",children:Ld.map(N=>n.jsxs("li",{className:"flex justify-between items-center py-1 border-b border-sky/20",children:[n.jsxs("span",{className:"text-navy/90",children:[N.planIdentifier,"  ",N.procedureCode,": ",je(N.fee)]}),n.jsx("button",{type:"button",onClick:()=>{O0(N.id),ze(F=>F+1)},className:"text-red-600 hover:underline",children:"Remove"})]},N.id))})]})]})]}),a&&$&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"record-payment-title",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl border border-sky/40 p-6 max-w-md w-full",children:[n.jsx("h2",{id:"record-payment-title",className:"text-lg font-semibold text-navy mb-2",children:"Record payment"}),n.jsxs("p",{className:"text-sm text-navy/70 mb-4",children:["Apply a payment to ",$.firstName," ",$.lastName,"'s account."]}),n.jsxs("div",{className:"mb-4 p-3 bg-sky/10 rounded-lg border border-sky/30",children:[n.jsxs("div",{className:"flex items-center justify-between gap-4",children:[n.jsx("span",{className:"text-sm font-medium text-navy",children:"Posted balance due"}),n.jsx("span",{className:"text-lg font-semibold text-navy",children:je(Ee)})]}),Ee>0&&n.jsxs("button",{type:"button",onClick:()=>{const N=Ee.toFixed(2);o(N),Oe(T==="split"?"0":N),ue(T==="split"?N:"0")},className:"mt-2 w-full py-2 px-3 bg-navy text-white rounded-lg text-sm font-medium hover:bg-navy-light",children:["Use full balance (",je(Ee),")"]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-navy mb-2",children:"Payment type"}),n.jsxs("div",{className:"flex flex-wrap gap-4",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"payType",checked:T==="outOfPocket",onChange:()=>X("outOfPocket"),className:"text-navy"}),n.jsx("span",{className:"text-sm text-navy",children:"Out of pocket"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"payType",checked:T==="withInsurance",onChange:()=>X("withInsurance"),className:"text-navy"}),n.jsx("span",{className:"text-sm text-navy",children:"Insurance"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"payType",checked:T==="split",onChange:()=>X("split"),className:"text-navy"}),n.jsx("span",{className:"text-sm text-navy",children:"Split (both)"})]})]})]}),T==="outOfPocket"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"Amount ($)"}),n.jsx("input",{type:"number",min:0,step:.01,value:i,onChange:N=>o(N.target.value),placeholder:"0.00",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),T==="withInsurance"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"Amount from insurance ($)"}),n.jsx("input",{type:"number",min:0,step:.01,value:ge,onChange:N=>Oe(N.target.value),placeholder:"0.00",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),T==="split"&&n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"Out of pocket ($)"}),n.jsx("input",{type:"number",min:0,step:.01,value:_,onChange:N=>ue(N.target.value),placeholder:"0.00",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"From insurance ($)"}),n.jsx("input",{type:"number",min:0,step:.01,value:ge,onChange:N=>Oe(N.target.value),placeholder:"0.00",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"Payment method (optional)"}),n.jsxs("select",{value:$e,onChange:N=>tt(N.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white text-navy",children:[n.jsx("option",{value:"",children:" None "}),es.map(N=>n.jsxs("option",{value:N.id,children:[N.cardBrand||N.type,N.lastFour?`  ${N.lastFour}`:"","  ",N.nameOnCard||"Card"]},N.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"Note (optional)"}),n.jsx("input",{type:"text",value:c,onChange:N=>m(N.target.value),placeholder:"e.g. Check #1234",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]})]}),n.jsxs("div",{className:"flex gap-3 justify-end mt-6 pt-4 border-t border-sky/30",children:[n.jsx("button",{type:"button",onClick:()=>{l(!1),o(""),m(""),ue(""),Oe(""),tt(""),X("outOfPocket")},className:"px-4 py-2 border border-navy/30 rounded-lg font-medium text-navy hover:bg-sky/10",children:"Cancel"}),n.jsx("button",{type:"button",onClick:Eh,className:"px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700",children:"Record payment"})]})]})}),d&&$&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"add-method-title",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl border border-sky/40 p-6 max-w-md w-full",children:[n.jsx("h2",{id:"add-method-title",className:"text-lg font-semibold text-navy mb-1",children:"Add payment method"}),n.jsxs("p",{className:"text-sm text-navy/70 mb-4",children:["Card will be saved for ",$.firstName," ",$.lastName,". Card type is detected from the number."]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"Payment type"}),n.jsxs("select",{value:h,onChange:N=>w(N.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white text-navy",children:[n.jsx("option",{value:"Card",children:"Card"}),n.jsx("option",{value:"Check",children:"Check"}),n.jsx("option",{value:"Cash",children:"Cash"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),h==="Card"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"Card number"}),n.jsx("input",{type:"text",inputMode:"numeric",autoComplete:"cc-number",value:u,onChange:N=>b(N.target.value.replace(/\D/g,"").slice(0,19)),placeholder:"Enter full card number",className:"w-full px-3 py-2 border border-sky/60 rounded-lg font-mono"}),u.replace(/\D/g,"").length>=4&&Di(u)&&n.jsxs("p",{className:"text-xs text-navy/60 mt-1",children:["Detected: ",Di(u)]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"Expiration month"}),n.jsxs("select",{value:C,onChange:N=>x(N.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white text-navy",children:[n.jsx("option",{value:"",children:"Select month"}),Array.from({length:12},(N,F)=>String(F+1).padStart(2,"0")).map(N=>n.jsx("option",{value:N,children:N},N))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"Expiration year"}),n.jsxs("select",{value:y,onChange:N=>v(N.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white text-navy",children:[n.jsx("option",{value:"",children:"Select year"}),Array.from({length:21},(N,F)=>new Date().getFullYear()+F).map(N=>n.jsx("option",{value:String(N),children:N},N))]})]})]})]})]}),n.jsxs("div",{className:"flex gap-3 justify-end mt-6 pt-4 border-t border-sky/30",children:[n.jsx("button",{type:"button",onClick:()=>{p(!1),b(""),x(""),v("")},className:"px-4 py-2 border border-navy/30 rounded-lg font-medium text-navy hover:bg-sky/10",children:"Cancel"}),n.jsx("button",{type:"button",onClick:Ih,className:"px-4 py-2 bg-navy text-white rounded-lg font-medium hover:bg-navy-light",children:"Save payment method"})]})]})}),q&&$&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"email-receipt-title",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl border border-sky/40 p-6 max-w-sm w-full",children:[n.jsx("h2",{id:"email-receipt-title",className:"text-lg font-semibold text-navy mb-4",children:"Email receipt / invoice"}),Z?n.jsxs("p",{className:"text-green-700 font-medium",children:["Receipt sent to ",$.email]}):n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"text-sm text-navy/70 mb-4",children:["Send a receipt or invoice to the patient at ",n.jsx("strong",{children:$.email}),". In production this would send an email; for demo you can open your mail client."]}),n.jsx("a",{href:`mailto:${$.email}?subject=Receipt - ${$.firstName} ${$.lastName}&body=Thank you for your payment. Balance due: ${je(Ee)}.`,target:"_blank",rel:"noopener noreferrer",onClick:()=>me(!0),className:"inline-block px-4 py-2 bg-navy text-white rounded-lg font-medium hover:bg-navy-light",children:"Open email to patient"})]}),n.jsx("div",{className:"mt-4",children:n.jsx("button",{type:"button",onClick:()=>{K(!1),me(!1)},className:"px-4 py-2 border border-navy/30 rounded-lg font-medium",children:"Close"})})]})}),S&&$&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"send-claim-title",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl border border-sky/40 p-6 max-w-md w-full",children:[n.jsx("h2",{id:"send-claim-title",className:"text-lg font-semibold text-navy mb-4",children:"Send claim to insurance"}),n.jsx("p",{className:"text-sm text-navy/70 mb-4",children:"For surgery, root canal, or other larger procedures."}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Description"}),n.jsx("input",{type:"text",value:E,onChange:N=>D(N.target.value),placeholder:"e.g. Root canal #3",list:"billing-claim-description-list",autoComplete:"off",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"}),n.jsx("datalist",{id:"billing-claim-description-list",children:Sh.map(N=>n.jsx("option",{value:N},N))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Procedure codes (CDT)"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{value:A,onChange:N=>U(N.target.value),className:"flex-1 px-3 py-2 border border-sky/60 rounded-lg bg-white text-sm",children:[n.jsx("option",{value:"",children:" Add code "}),wn.map(N=>n.jsxs("option",{value:N.code,children:[N.code," ",N.description," ",N.defaultFee!=null?`$${N.defaultFee}`:""]},N.code))]}),n.jsx("button",{type:"button",onClick:Mh,className:"px-3 py-2 bg-sky/20 text-navy rounded-lg text-sm font-medium",children:"Add"})]}),I.length>0&&n.jsxs("p",{className:"text-xs text-navy/70 mt-1",children:["Codes: ",I.join(", ")]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Amount ($)"}),n.jsx("input",{type:"number",min:0,step:.01,value:O,onChange:N=>L(N.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]})]}),n.jsxs("div",{className:"flex gap-3 justify-end mt-6",children:[n.jsx("button",{type:"button",onClick:()=>{P(!1),D(""),L(""),j([])},className:"px-4 py-2 border border-navy/30 rounded-lg font-medium",children:"Cancel"}),n.jsx("button",{type:"button",onClick:Oh,className:"px-4 py-2 bg-sky-dark text-white rounded-lg font-medium",children:"Send claim"})]})]})}),z&&$&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"eligibility-title",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl border border-sky/40 p-6 max-w-md w-full",children:[n.jsx("h2",{id:"eligibility-title",className:"text-lg font-semibold text-navy mb-4",children:"Insurance eligibility (simulated)"}),n.jsxs("p",{className:"text-sm text-navy/70 mb-4",children:["For ",$.firstName," ",$.lastName,". In production this would query the payer."]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-navy/70",children:"Preventive coverage"}),n.jsx("span",{className:"font-medium",children:"100%"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-navy/70",children:"Basic coverage"}),n.jsx("span",{className:"font-medium",children:"80%"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-navy/70",children:"Major coverage"}),n.jsx("span",{className:"font-medium",children:"50%"})]})]}),n.jsx("button",{type:"button",onClick:()=>Y(!1),className:"mt-6 px-4 py-2 border border-navy/30 rounded-lg font-medium",children:"Close"})]})}),Vn&&$&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"add-charges-title",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl border border-sky/40 p-6 max-w-2xl w-full max-h-[90vh] flex flex-col",children:[n.jsx("h2",{id:"add-charges-title",className:"text-lg font-semibold text-navy mb-2",children:"Add charges to tab"}),n.jsxs("p",{className:"text-sm text-navy/70 mb-3",children:["Multi-select procedures to add to ",$.firstName," ",$.lastName,"'s invoice. Amounts use default fees; you can override per line."]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Appointment date for these charges"}),n.jsx("input",{type:"date",value:mn,onChange:N=>pn(N.target.value),className:"w-full max-w-[180px] px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{className:"border border-sky/30 rounded-lg overflow-hidden flex-1 min-h-0 flex flex-col",children:[n.jsxs("div",{className:"bg-sky/10 px-3 py-2 flex justify-between text-xs font-medium text-navy/80 border-b border-sky/30",children:[n.jsx("span",{children:"Procedure"}),n.jsx("span",{className:"w-24 text-right",children:"Amount ($)"})]}),n.jsx("ul",{className:"overflow-y-auto flex-1 divide-y divide-sky/20 max-h-[280px]",children:wn.map(N=>n.jsxs("li",{className:"flex items-center justify-between gap-3 px-3 py-2 hover:bg-sky/5",children:[n.jsxs("label",{className:"flex items-center gap-2 flex-1 min-w-0 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:Ke.has(N.code),onChange:()=>Rh(N.code),className:"rounded border-sky/60"}),n.jsxs("span",{className:"text-sm text-navy truncate",title:`${N.code} ${N.description}`,children:[N.code,"  ",N.description]})]}),n.jsx("input",{type:"number",min:0,step:.01,value:Ke.has(N.code)?hn[N.code]??String(ta(N.code)):"",onChange:F=>$h(N.code,F.target.value),onClick:F=>F.stopPropagation(),disabled:!Ke.has(N.code),className:"w-24 px-2 py-1.5 border border-sky/60 rounded text-sm text-right disabled:bg-sky/10 disabled:text-navy/60",placeholder:String(ta(N.code))})]},N.code))})]}),n.jsxs("div",{className:"mt-3 flex items-center justify-between gap-4 border-t border-sky/30 pt-3",children:[n.jsx("p",{className:"text-sm text-navy/70",children:Ke.size===0?"Select one or more procedures":`Selected: ${Ke.size}  Total: ${je(Array.from(Ke).reduce((N,F)=>N+ta(F),0))}`}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:()=>{Dt(!1),Yt(new Set),Pt({})},className:"px-4 py-2 border border-navy/30 rounded-lg font-medium",children:"Cancel"}),n.jsx("button",{type:"button",onClick:zh,disabled:Ke.size===0,className:"px-4 py-2 bg-navy text-white rounded-lg font-medium hover:bg-navy-light disabled:opacity-50 disabled:cursor-not-allowed",children:"Add to tab"})]})]})]})}),fn&&$&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"writeoff-title",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl border border-sky/40 p-6 max-w-md w-full",children:[n.jsx("h2",{id:"writeoff-title",className:"text-lg font-semibold text-navy mb-2",children:"Write-off / adjustment"}),n.jsxs("p",{className:"text-sm text-navy/70 mb-4",children:["Reduce balance by this amount. Balance due: ",je(Ee),"."]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"Type"}),n.jsxs("select",{value:Xt,onChange:N=>xn(N.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg bg-white text-navy",children:[n.jsx("option",{value:"Write-off",children:"Write-off"}),n.jsx("option",{value:"Adjustment",children:"Adjustment"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"Amount ($)"}),n.jsx("input",{type:"number",min:0,step:.01,value:Kt,onChange:N=>Jt(N.target.value),placeholder:"0.00",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"Reason (required)"}),n.jsx("input",{type:"text",value:At,onChange:N=>Qt(N.target.value),placeholder:"e.g. Courtesy discount",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]})]}),n.jsxs("div",{className:"flex gap-3 justify-end mt-6 pt-4 border-t border-sky/30",children:[n.jsx("button",{type:"button",onClick:()=>{ut(!1),Jt(""),Qt("")},className:"px-4 py-2 border border-navy/30 rounded-lg font-medium text-navy hover:bg-sky/10",children:"Cancel"}),n.jsx("button",{type:"button",onClick:_h,disabled:!Kt.trim()||!At.trim()||Number(Kt)<=0,className:"px-4 py-2 bg-amber-600 text-white rounded-lg font-medium hover:bg-amber-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Apply"})]})]})}),mr&&$&&H&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"eob-title",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl border border-sky/40 p-6 max-w-md w-full",children:[n.jsx("h2",{id:"eob-title",className:"text-lg font-semibold text-navy mb-2",children:"Record EOB / claim payment"}),n.jsxs("p",{className:"text-sm text-navy/70 mb-4",children:[((Ud=hr.find(N=>N.id===H))==null?void 0:Ud.description)??"Claim","  enter payment from insurance."]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"Payment date"}),n.jsx("input",{type:"date",value:pr,onChange:N=>Zr(N.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"Paid amount ($)  applied to balance"}),n.jsx("input",{type:"number",min:0,step:.01,value:pe,onChange:N=>oe(N.target.value),placeholder:"0.00",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Allowed amount ($, optional)"}),n.jsx("input",{type:"number",min:0,step:.01,value:ye,onChange:N=>_e(N.target.value),placeholder:"",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Adjustment ($, optional)"}),n.jsx("input",{type:"number",step:.01,value:Et,onChange:N=>Hn(N.target.value),placeholder:"",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-navy/70 mb-1",children:"Patient responsibility ($, optional)"}),n.jsx("input",{type:"number",min:0,step:.01,value:It,onChange:N=>Wn(N.target.value),placeholder:"",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]})]}),n.jsxs("div",{className:"flex gap-3 justify-end mt-6 pt-4 border-t border-sky/30",children:[n.jsx("button",{type:"button",onClick:()=>{k(!1),ae(null)},className:"px-4 py-2 border border-navy/30 rounded-lg font-medium text-navy hover:bg-sky/10",children:"Cancel"}),n.jsx("button",{type:"button",onClick:Uh,disabled:pe.trim()===""||Number(pe)<0,className:"px-4 py-2 bg-sky-dark text-white rounded-lg font-medium hover:bg-navy disabled:opacity-50 disabled:cursor-not-allowed",children:"Record EOB"})]})]})})]})}function Pi(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}function _0(){const e=qr(),{timezone:t}=Qr(),r=_l(t),s=r.slice(0,7),a=g.useMemo(()=>Ae(),[]),l=g.useMemo(()=>a.reduce((u,b)=>u+(b.paymentHistory??[]).filter(C=>C.date===r).reduce((C,x)=>C+x.amount,0),0),[a,r]),i=g.useMemo(()=>a.reduce((u,b)=>u+(b.paymentHistory??[]).filter(C=>C.date.startsWith(s)).reduce((C,x)=>C+x.amount,0),0),[a,s]),o=g.useMemo(()=>a.reduce((u,b)=>u+(b.balanceDue??0),0),[a]),c=g.useMemo(()=>{const u=new Date;return a.filter(b=>{const C=b.recallIntervalMonths??6,x=b.lastCleaningDate;if(!x)return!1;const y=new Date(x+"T12:00:00");return y.setMonth(y.getMonth()+C),y<=u}).length},[a]),m=a.filter(u=>(u.recallIntervalMonths??0)>0||(u.lastCleaningDate??"").length>0).length,d=m>0?Math.round(c/m*100):0,p=g.useMemo(()=>a.filter(u=>u.createdAt.startsWith(s)).length,[a,s]),h=g.useMemo(()=>{const u=a.flatMap(y=>(y.treatmentPlans??[]).map(v=>({...v,patientId:y.id}))),b=u.filter(y=>y.status==="Accepted").length,C=u.filter(y=>y.status==="Declined").length,x=b+C;return{total:u.length,accepted:b,declined:C,presented:x,acceptancePct:x>0?Math.round(b/x*100):0}},[a]),w=g.useMemo(()=>a.reduce((u,b)=>{var C;return u+(((C=b.gumGaugeExams)==null?void 0:C.length)??0)},0),[a]);return e?n.jsxs("div",{className:"p-8",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-2",children:[n.jsx("h1",{className:"text-2xl font-semibold text-navy",children:"Analytics"}),n.jsx("p",{className:"text-navy/70 text-sm font-medium",children:e.name})]}),n.jsx("p",{className:"text-navy/60 text-sm mb-6",children:"Stats for this clinic (assigned to this device)."}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-8",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[n.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"Total patients"}),n.jsx("p",{className:"text-2xl font-semibold text-navy mt-1",children:a.length})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[n.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"Production (today)"}),n.jsx("p",{className:"text-xl font-semibold text-navy mt-1",children:Pi(l)})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[n.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"Production (this month)"}),n.jsx("p",{className:"text-xl font-semibold text-navy mt-1",children:Pi(i)})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[n.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"Total outstanding"}),n.jsx("p",{className:"text-xl font-semibold text-navy mt-1",children:Pi(o)})]})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[n.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"Recall due"}),n.jsx("p",{className:"text-2xl font-semibold text-navy mt-1",children:c}),n.jsx("p",{className:"text-xs text-navy/60 mt-0.5",children:"patients past due"}),n.jsx(J,{to:"/dashboard/recall",className:"text-xs text-sky-dark mt-1 inline-block hover:underline",children:"View recall"})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[n.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"Recall due %"}),n.jsxs("p",{className:"text-2xl font-semibold text-navy mt-1",children:[d,"%"]}),n.jsx("p",{className:"text-xs text-navy/60 mt-0.5",children:"of those with recall interval"})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[n.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"New patients (this month)"}),n.jsx("p",{className:"text-2xl font-semibold text-navy mt-1",children:p})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[n.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"Case acceptance"}),n.jsxs("p",{className:"text-2xl font-semibold text-navy mt-1",children:[h.acceptancePct,"%"]}),n.jsxs("p",{className:"text-xs text-navy/60 mt-0.5",children:[h.accepted," accepted / ",h.presented," presented"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[n.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"GumGauge scans (total)"}),n.jsx("p",{className:"text-2xl font-semibold text-navy mt-1",children:w})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[n.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"Treatment plans"}),n.jsx("p",{className:"text-2xl font-semibold text-navy mt-1",children:h.total}),n.jsx("p",{className:"text-xs text-navy/60 mt-0.5",children:"total plans on file"})]})]})]}):n.jsxs("div",{className:"p-8",children:[n.jsx("h1",{className:"text-2xl font-semibold text-navy mb-2",children:"Analytics"}),n.jsx("p",{className:"text-navy/70 mb-6",children:"Analytics are shown for the clinic assigned to this device."}),n.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-6 max-w-lg",children:[n.jsx("p",{className:"text-amber-900 font-medium",children:"No clinic assigned"}),n.jsx("p",{className:"text-amber-800/90 text-sm mt-1",children:"Register your clinic or ask your admin to assign this device to a clinic. Then you can view analytics here."}),n.jsx(J,{to:"/dashboard/clinic",className:"inline-block mt-4 px-4 py-2 bg-navy text-white rounded-lg font-medium hover:bg-navy-light",children:"Go to Clinic"})]})]})}const Dh="gumgauge-pending-clinics";function fl(){try{const e=localStorage.getItem(Dh);return e?JSON.parse(e):[]}catch{return[]}}function Ph(e){try{localStorage.setItem(Dh,JSON.stringify(e))}catch{}}function L0(){return fl()}function F0(e){const t=new Date().toISOString(),r={...e,id:crypto.randomUUID(),submittedAt:t},s=fl();return s.push(r),Ph(s),r}function U0(e){const t=fl().filter(r=>r.id!==e);return t.length===fl().length?!1:(Ph(t),!0)}const z0=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],B0=["Austin","Houston","Dallas","San Antonio","Fort Worth","El Paso","Arlington","New York","Los Angeles","Chicago","Phoenix","Philadelphia","San Diego","San Jose","Jacksonville","Columbus","Charlotte","Indianapolis","Seattle","Denver","Boston","Nashville","Detroit","Portland","Las Vegas","Memphis","Louisville","Baltimore","Milwaukee","Albuquerque","Tucson","Fresno","Sacramento","Kansas City","Mesa","Atlanta","Omaha","Miami","Oakland","Minneapolis","Cleveland","Wichita","Arlington","Tampa","Honolulu","Aurora","Anaheim","Santa Ana","St. Louis","Riverside","Corpus Christi","Pittsburgh","Lexington","Anchorage","Stockton","Cincinnati","St. Paul","Toledo","Newark","Plano","Henderson","Lincoln","Buffalo","Fort Wayne","Jersey City","St. Petersburg","Chula Vista","Orlando","Laredo","Chandler","Madison","Lubbock","Scottsdale","Reno","Durham","Winston-Salem","Gilbert","Glendale","North Las Vegas","Irving","Fremont","Boise","Richmond","San Bernardino","Birmingham","Spokane","Rochester","Des Moines","Modesto","Fayetteville","Tacoma","Oxnard","Fontana","Columbus","Montgomery","Moreno Valley","Salt Lake City","Little Rock","Augusta","Grand Rapids","Tallahassee","Huntsville","Grand Prairie","Knoxville","Worcester","Newport News","Brownsville","Santa Clarita","Overland Park","Providence","Garden Grove","Santa Rosa","Chattanooga","Oceanside","Fort Lauderdale","Rancho Cucamonga","Santa Clara","Port St. Lucie","Vancouver","Tempe","Springfield","Cape Coral","Pembroke Pines","Sioux Falls","Peoria","Lancaster","Elk Grove","Palmdale","Salinas","Springfield","Pomona","Pasadena","Joliet","Paterson","Kansas City","Torrance","Syracuse","Bridgeport","Hayward","Fort Collins","Corona","Rockford","Savannah","Mesquite","Sunnyvale","Pasadena","Orange","Naples","Aurora","Dayton","Hampton","Hollywood","Killeen","McKinney","Lakewood"];function V0(){const[e,t]=g.useState(""),[r,s]=g.useState(""),[a,l]=g.useState(""),[i,o]=g.useState(""),[c,m]=g.useState(""),[d,p]=g.useState(""),[h,w]=g.useState("1"),[u,b]=g.useState(!1),C=qr(),x=()=>{t(""),s(""),l(""),o(""),m(""),p(""),w("1")},y=v=>{v.preventDefault();const S=parseInt(h,10);F0({name:e.trim(),address:r.trim()||void 0,city:a.trim()||void 0,state:i.trim()||void 0,zip:c.trim()||void 0,phone:d.trim()||void 0,deviceCount:Number.isNaN(S)||S<1?1:S}),b(!0),x()};return n.jsxs("div",{className:"p-8",children:[n.jsx("h1",{className:"text-2xl font-semibold text-navy mb-2",children:"Clinic / Office Registration"}),n.jsx("p",{className:"text-navy/70 mb-6",children:"Submit your office info to GumGauge. Company admin will review and assign your clinic; once approved, your clinic name will appear on the dashboard."}),C&&n.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-xl",children:[n.jsxs("p",{className:"text-sm font-medium text-green-800",children:["This device is assigned to: ",n.jsx("strong",{children:C.name})]}),n.jsx("p",{className:"text-xs text-green-700 mt-1",children:"To change details, submit the form below; admin can reassign."})]}),n.jsxs("form",{onSubmit:y,className:"bg-white rounded-xl shadow-sm border border-sky/40 p-6 max-w-xl space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"Clinic name *"}),n.jsx("input",{type:"text",value:e,onChange:v=>t(v.target.value),placeholder:"e.g. Smile Dental Care",className:"w-full px-3 py-2 border border-sky/60 rounded-lg",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"Address"}),n.jsx("input",{type:"text",value:r,onChange:v=>s(v.target.value),placeholder:"Street address",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"City"}),n.jsx("input",{type:"text",value:a,onChange:v=>l(v.target.value),placeholder:"City",className:"w-full px-3 py-2 border border-sky/60 rounded-lg",list:"city-list",autoComplete:"off"}),n.jsx("datalist",{id:"city-list",children:B0.map(v=>n.jsx("option",{value:v},v))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"State"}),n.jsx("input",{type:"text",value:i,onChange:v=>o(v.target.value),placeholder:"State",className:"w-full px-3 py-2 border border-sky/60 rounded-lg",list:"state-list",autoComplete:"off"}),n.jsx("datalist",{id:"state-list",children:z0.map(v=>n.jsx("option",{value:v},v))})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"ZIP"}),n.jsx("input",{type:"text",value:c,onChange:v=>m(v.target.value),placeholder:"ZIP code",className:"w-full px-3 py-2 border border-sky/60 rounded-lg max-w-[120px]"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"Phone"}),n.jsx("input",{type:"tel",value:d,onChange:v=>p(v.target.value),placeholder:"(555) 123-4567",className:"w-full px-3 py-2 border border-sky/60 rounded-lg"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-navy mb-1",children:"Number of GumGauge devices"}),n.jsx("input",{type:"number",min:1,value:h,onChange:v=>w(v.target.value),className:"w-full px-3 py-2 border border-sky/60 rounded-lg max-w-[100px]"})]}),n.jsxs("div",{className:"flex gap-3 pt-2",children:[n.jsx("button",{type:"submit",className:"px-4 py-2 bg-navy text-white rounded-lg font-medium hover:bg-navy-light",children:"Submit for approval"}),n.jsx(J,{to:"/dashboard",className:"px-4 py-2 border border-navy/30 rounded-lg font-medium inline-block",children:"Back to dashboard"})]}),u&&n.jsx("p",{className:"text-green-700 text-sm mt-2",children:"Submitted. GumGauge admin will review and assign your clinic."})]})]})}function Su(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}function H0(){const e=Ct(),[t,r]=g.useState(null),[s,a]=g.useState([]),[l,i]=g.useState(null),[o,c]=g.useState(!1),[m,d]=g.useState(!1),p=()=>{r(qr()),a(L0())};if(g.useEffect(()=>{try{i(sessionStorage.getItem(ir)==="1")}catch{i(!1)}p()},[]),l===!1)return n.jsx(Pd,{to:"/dashboard",replace:!0});if(l===null)return null;const h=()=>{try{sessionStorage.removeItem(ir)}catch{}e("/",{replace:!0})},w=U=>{uv({name:U.name,address:U.address,city:U.city,state:U.state,zip:U.zip,phone:U.phone,deviceCount:U.deviceCount??1}),U0(U.id),p()},u=()=>{Jy(),c(!1),p()},b=()=>{gv(),d(!1),p()},C=Ed().length,x=Ae(),y=x.length,v=x.reduce((U,q)=>{var K;return U+(((K=q.gumGaugeExams)==null?void 0:K.length)??0)},0),S=x.flatMap(U=>(U.gumGaugeExams??[]).map(q=>q.scanDate)),P=new Set(S).size,E=P>0?(v/P).toFixed(1):"0",D=(t==null?void 0:t.deviceCount)??0,O=x.reduce((U,q)=>U+(q.paymentHistory??[]).reduce((K,Z)=>K+Z.amount,0),0),L={};x.forEach(U=>{(U.paymentHistory??[]).forEach(q=>{const K=q.date.slice(0,7);L[K]=(L[K]??0)+q.amount})});const I=Object.keys(L).length,j=I>0?O/I:0,A=[t==null?void 0:t.city,t==null?void 0:t.state,t==null?void 0:t.zip].filter(Boolean).join(", ");return n.jsx("div",{className:"p-6 md:p-8",children:n.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[n.jsx("h1",{className:"text-2xl font-semibold text-navy",children:"GumGauge Admin  Clinic Log"}),n.jsxs("div",{className:"flex items-center gap-2",children:[t&&n.jsxs(J,{to:"/dashboard",className:"px-4 py-2 bg-navy text-white rounded-lg font-medium hover:bg-navy-light",children:["View as ",t.name," "]}),n.jsx("button",{type:"button",onClick:h,className:"px-4 py-2 border border-navy/30 rounded-lg font-medium hover:bg-navy/5",children:"Log out (Admin)"})]})]}),n.jsx("p",{className:"text-navy/70",children:"GumGauge company overview. View clinical stats and log in as a clinic to access their dashboard."}),n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[n.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"Patients"}),n.jsx("p",{className:"text-2xl font-semibold text-navy",children:y})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[n.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"Total scans"}),n.jsx("p",{className:"text-2xl font-semibold text-navy",children:v})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[n.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"Avg scans/day"}),n.jsx("p",{className:"text-2xl font-semibold text-navy",children:E})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[n.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"Devices"}),n.jsx("p",{className:"text-2xl font-semibold text-navy",children:D})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[n.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"Revenue (total)"}),n.jsx("p",{className:"text-xl font-semibold text-navy",children:Su(O)})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-4",children:[n.jsx("p",{className:"text-xs text-navy/60 uppercase",children:"Revenue per month (average)"}),n.jsx("p",{className:"text-xl font-semibold text-navy",children:Su(j)})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-navy mb-2",children:"Admin actions"}),n.jsx("p",{className:"text-sm text-navy/60 mb-4",children:"Clear audit log or all patient visit history. These actions cannot be undone."}),n.jsxs("div",{className:"flex flex-wrap gap-3",children:[n.jsx("div",{className:"flex items-center gap-2",children:o?n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",onClick:u,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-medium",children:"Confirm clear"}),n.jsx("button",{type:"button",onClick:()=>c(!1),className:"px-4 py-2 border border-navy/30 rounded-lg",children:"Cancel"})]}):n.jsxs("button",{type:"button",onClick:()=>c(!0),className:"px-4 py-2 border border-red-300 text-red-600 rounded-lg font-medium hover:bg-red-50",children:["Clear audit log (",C," entries)"]})}),n.jsx("div",{className:"flex items-center gap-2",children:m?n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",onClick:b,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-medium",children:"Confirm clear"}),n.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 border border-navy/30 rounded-lg",children:"Cancel"})]}):n.jsx("button",{type:"button",onClick:()=>d(!0),className:"px-4 py-2 border border-red-300 text-red-600 rounded-lg font-medium hover:bg-red-50",children:"Clear all patient visit history"})})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-navy mb-2",children:"Pending registrations"}),n.jsx("p",{className:"text-sm text-navy/60 mb-4",children:"Clinics that submitted for approval. Approve to assign them to this device."}),s.length===0?n.jsx("p",{className:"text-navy/60",children:"No pending registrations."}):n.jsx("ul",{className:"space-y-3",children:s.map(U=>n.jsxs("li",{className:"flex flex-wrap items-center justify-between gap-4 py-3 border-b border-sky/20 last:border-0",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-navy",children:U.name}),n.jsxs("p",{className:"text-sm text-navy/70",children:[[U.city,U.state,U.zip].filter(Boolean).join(", "),U.deviceCount!=null&&`  ${U.deviceCount} device(s)`]}),n.jsxs("p",{className:"text-xs text-navy/60",children:["Submitted ",Q(U.submittedAt)]})]}),n.jsx("button",{type:"button",onClick:()=>w(U),className:"px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700",children:"Approve & assign"})]},U.id))})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-navy mb-2",children:"Assigned clinic (this device)"}),n.jsx("p",{className:"text-sm text-navy/60 mb-4",children:"In production, admin would see all clinics across all installations."}),t?n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4 py-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-navy",children:t.name}),A&&n.jsx("p",{className:"text-sm text-navy/70",children:A}),t.address&&n.jsx("p",{className:"text-sm text-navy/70",children:t.address})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-navy/70",children:"Devices"}),n.jsx("p",{className:"text-xl font-semibold text-navy",children:t.deviceCount??1})]}),n.jsx("button",{type:"button",onClick:()=>{window.confirm("Unassign this clinic from this device? The clinic can be reassigned later from pending registrations.")&&(cv(),p())},className:"px-4 py-2 border border-red-300 text-red-600 rounded-lg font-medium hover:bg-red-50",children:"Unassign clinic"})]})]}):n.jsx("p",{className:"text-navy/60",children:"No clinic assigned yet. Approve a pending registration above."})]})]})})}const W0=1;function G0(){try{return typeof sessionStorage<"u"&&sessionStorage.getItem(Ze)==="1"}catch{return!1}}function Y0(e=!0){return{version:W0,exportedAt:new Date().toISOString(),demoMode:G0(),patients:Ae(),staff:Bn(),clinic:qr(),appointments:or(),operatories:$d(),feeSchedule:_d(),audit:e?Ed({limit:5e3}):[],staffAvailability:x0()}}function K0(e=!0){const t=Y0(e);return new Blob([JSON.stringify(t,null,2)],{type:"application/json"})}function J0(e=!0,t){const r=K0(e),s=`gumgauge-backup-${new Date().toISOString().slice(0,10)}.json`,a=URL.createObjectURL(r);try{const l=document.createElement("a");l.href=a,l.download=s,l.click()}finally{URL.revokeObjectURL(a)}}function Q0(e){if(!e||typeof e!="object")return!1;const t=e;return typeof t.version=="number"&&t.version>=1&&Array.isArray(t.patients)&&Array.isArray(t.staff)&&Array.isArray(t.appointments)&&Array.isArray(t.operatories)&&Array.isArray(t.feeSchedule)&&Array.isArray(t.audit)&&Array.isArray(t.staffAvailability)}function X0(e){if(!Q0(e))return"Invalid backup file: missing or invalid version or data.";try{return qs(e.patients),$l(e.staff),mv(e.clinic??null),Cv(e.appointments),n0(e.operatories),M0(e.feeSchedule),Qy(e.audit),v0(e.staffAvailability),null}catch(t){return t instanceof Error?t.message:"Import failed."}}function q0(){const[e,t]=g.useState(!0),[r,s]=g.useState(null),[a,l]=g.useState(null),[i,o]=g.useState(!1),[c,m]=g.useState(!1),d=g.useRef(null),p=()=>{J0(e)},h=u=>{var C;const b=(C=u.target.files)==null?void 0:C[0];u.target.value="",s(b??null),l(null),o(!1),m(!1)},w=()=>{if(!r||!c)return;l(null),o(!1);const u=new FileReader;u.onload=()=>{try{const b=u.result,C=JSON.parse(b),x=X0(C);x?l(x):(o(!0),s(null),m(!1),window.location.reload())}catch(b){l(b instanceof Error?b.message:"Invalid JSON file.")}},u.readAsText(r)};return n.jsxs("div",{className:"p-8",children:[n.jsx("h1",{className:"text-2xl font-semibold text-navy mb-2",children:"Data backup"}),n.jsx("p",{className:"text-navy/70 mb-6",children:"Export all clinic data as a JSON file for backup, or restore from a previous export. Restore overwrites current data."}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-navy mb-3",children:"Export"}),n.jsx("p",{className:"text-sm text-navy/70 mb-4",children:"Download a JSON file containing patients, staff, clinic, appointments, operatories, fee schedule, staff availability, and optionally the audit log."}),n.jsxs("label",{className:"flex items-center gap-2 mb-4 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:e,onChange:u=>t(u.target.checked),className:"rounded border-sky/60"}),n.jsx("span",{className:"text-sm text-navy",children:"Include audit log"})]}),n.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 bg-navy text-white rounded-lg font-medium hover:bg-navy-light",children:"Download backup file"})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-sky/40 p-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-navy mb-3",children:"Import / restore"}),n.jsx("p",{className:"text-sm text-navy/70 mb-4",children:"Restore from a previously exported JSON file. This will overwrite all current patients, staff, appointments, and other data for this mode (demo or live)."}),n.jsx("input",{ref:d,type:"file",accept:".json,application/json",onChange:h,className:"hidden"}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("button",{type:"button",onClick:()=>{var u;return(u=d.current)==null?void 0:u.click()},className:"px-4 py-2 border border-sky/60 text-navy rounded-lg font-medium hover:bg-sky/10",children:"Choose file"}),r&&n.jsxs("div",{className:"text-sm text-navy/80",children:["Selected: ",r.name," (",(r.size/1024).toFixed(1)," KB)"]}),r&&!c&&n.jsx("div",{className:"pt-2",children:n.jsx("button",{type:"button",onClick:()=>m(!0),className:"px-4 py-2 bg-amber-600 text-white rounded-lg font-medium hover:bg-amber-700",children:"Confirm overwrite and restore"})}),r&&c&&n.jsxs("div",{className:"pt-2 space-y-2",children:[n.jsx("p",{className:"text-sm text-amber-800 font-medium",children:"Overwrite all current data and restore from this file?"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:w,className:"px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700",children:"Yes, restore"}),n.jsx("button",{type:"button",onClick:()=>{m(!1),s(null)},className:"px-4 py-2 border border-navy/30 rounded-lg font-medium",children:"Cancel"})]})]}),a&&n.jsx("p",{className:"text-sm text-red-600",children:a}),i&&n.jsx("p",{className:"text-sm text-green-700 font-medium",children:"Restore complete. Reloading"})]})]})]})]})}function Z0(){const[e,t]=g.useState(!1),[r,s]=g.useState(""),[a,l]=g.useState("");g.useEffect(()=>{try{sessionStorage.getItem(ir)==="1"&&t(!0)}catch{}},[]);const i=o=>{if(o.preventDefault(),l(""),r===Oy){try{sessionStorage.setItem(ir,"1")}catch{}t(!0)}else l("Invalid password.")};return e?n.jsx(Pd,{to:"/dashboard/clinic-log",replace:!0}):n.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-navy p-4",children:n.jsxs("div",{className:"w-full max-w-sm",children:[n.jsx("h1",{className:"text-xl font-semibold text-white text-center mb-2",children:"GumGauge Admin"}),n.jsx("p",{className:"text-sky-light/90 text-sm text-center mb-6",children:"Company login. View clinical stats and switch into clinic views."}),n.jsxs("form",{onSubmit:i,className:"bg-white/10 rounded-xl border border-white/20 p-6 space-y-4",autoComplete:"off",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sky-light/90 text-sm mb-1",children:"Password"}),n.jsx("input",{type:"password",autoComplete:"off",value:r,onChange:o=>s(o.target.value),placeholder:"",className:"w-full px-3 py-2 rounded-lg border border-sky/60 bg-white text-navy"})]}),a&&n.jsx("p",{className:"text-amber-200 text-sm bg-amber-900/30 px-3 py-2 rounded-lg",role:"alert",children:a}),n.jsx("button",{type:"submit",className:"w-full px-4 py-2 bg-white text-navy font-medium rounded-lg hover:bg-sky-light",children:"Log in"})]}),n.jsx("p",{className:"mt-4 text-center",children:n.jsx(J,{to:"/",className:"text-sky-light hover:text-white text-sm font-medium",children:" Back"})})]})})}function eb(){return n.jsx(Ty,{children:n.jsx(lv,{children:n.jsxs(fy,{children:[n.jsx(we,{path:"/",element:n.jsx(bv,{})}),n.jsx(we,{path:"/signin",element:n.jsx(Nv,{})}),n.jsx(we,{path:"/admin",element:n.jsx(Z0,{})}),n.jsxs(we,{path:"/dashboard",element:n.jsx(vv,{}),children:[n.jsx(we,{index:!0,element:n.jsx(Pv,{})}),n.jsx(we,{path:"patients",element:n.jsx(Iv,{})}),n.jsx(we,{path:"patients/new",element:n.jsx(qv,{})}),n.jsx(we,{path:"patients/:id",element:n.jsx(Qv,{})}),n.jsx(we,{path:"staff",element:n.jsx(d0,{})}),n.jsx(we,{path:"staff/new",element:n.jsx(u0,{})}),n.jsx(we,{path:"staff/:id",element:n.jsx(b0,{})}),n.jsx(we,{path:"appointments",element:n.jsx(o0,{})}),n.jsx(we,{path:"billing",element:n.jsx($0,{})}),n.jsx(we,{path:"analytics",element:n.jsx(_0,{})}),n.jsx(we,{path:"my-patients",element:n.jsx(N0,{})}),n.jsx(we,{path:"device-scan",element:n.jsx(S0,{})}),n.jsx(we,{path:"recall",element:n.jsx(C0,{})}),n.jsx(we,{path:"audit",element:n.jsx(D0,{})}),n.jsx(we,{path:"backup",element:n.jsx(q0,{})}),n.jsx(we,{path:"clinic",element:n.jsx(V0,{})}),n.jsx(we,{path:"clinic-log",element:n.jsx(H0,{})})]}),n.jsx(we,{path:"*",element:n.jsx(Pd,{to:"/",replace:!0})})]})})})}Ai.createRoot(document.getElementById("root")).render(n.jsx(tr.StrictMode,{children:n.jsx(Sy,{children:n.jsx(eb,{})})}));export{Kh as g,n as j,g as r};
